{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::ScreenedUrlsController #index returns JSON","app":"Discourse","feature":"Admin::ScreenedUrlsController #index","feature_group":"Admin screened urls","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"ScreenedUrl","type":"class","children":[{"name":"normalize","type":"function","location":"app/models/screened_url.rb:19","static":false}]},{"name":"ScreenedUrl(id: integer, url: string, domain: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","type":"class","children":[{"name":"normalize_url","type":"function","location":"app/models/screened_url.rb:32","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_visit_record!","type":"function","location":"app/models/user.rb:680","static":false},{"name":"visit_record_for","type":"function","location":"app/models/user.rb:676","static":false},{"name":"create_visit_record!","type":"function","location":"app/models/user.rb:671","static":false},{"name":"seen_before?","type":"function","location":"app/models/user.rb:667","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_serialized","type":"function","location":"app/controllers/application_controller.rb:446","static":false},{"name":"serialize_data","type":"function","location":"app/controllers/application_controller.rb:431","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"ScreenedUrlsController","type":"class","children":[{"name":"index","type":"function","location":"app/controllers/admin/screened_urls_controller.rb:5","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"app/serializers","type":"package","children":[{"name":"GroupedScreenedUrlSerializer","type":"class","children":[{"name":"action","type":"function","location":"app/serializers/grouped_screened_url_serializer.rb:10","static":false}]}]}],"events":[{"id":725439,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":725440,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725439,"elapsed":0.000931},{"id":725441,"event":"call","defined_class":"ScreenedUrl","method_id":"normalize","path":"app/models/screened_url.rb","lineno":19,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedUrl","object_id":70097814347520,"value":"#<ScreenedUrl:0x00007f81d6a5be00>"}},{"id":725442,"event":"call","defined_class":"ScreenedUrl(id: integer, url: string, domain: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"normalize_url","path":"app/models/screened_url.rb","lineno":32,"static":true,"thread_id":70097708498960,"parameters":[{"name":"url","class":"String","object_id":70097816788340,"value":"spammers0.org/buy/stuff","kind":"req"}],"receiver":{"class":"Class","object_id":70097826073640,"value":"ScreenedUrl"}},{"id":725443,"event":"return","defined_class":"ScreenedUrl(id: integer, url: string, domain: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"normalize_url","path":"app/models/screened_url.rb","lineno":32,"static":true,"thread_id":70097708498960,"parent_id":725442,"elapsed":1.7e-05,"return_value":{"class":"String","value":"spammers0.org/buy/stuff","object_id":70097816782100}},{"id":725444,"event":"return","defined_class":"ScreenedUrl","method_id":"normalize","path":"app/models/screened_url.rb","lineno":19,"static":false,"thread_id":70097708498960,"parent_id":725441,"elapsed":0.000176,"return_value":{"class":"String","value":"spammers0.org","object_id":70097816801420}},{"id":725445,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"screened_urls\" WHERE \"screened_urls\".\"url\" = 'spammers0.org/buy/stuff' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":725446,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725445,"elapsed":0.001324},{"id":725447,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_urls\" (\"url\", \"domain\", \"action_type\", \"created_at\", \"updated_at\") VALUES ('spammers0.org/buy/stuff', 'spammers0.org', 2, '2020-05-28 18:57:44.821351', '2020-05-28 18:57:44.821351') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":725448,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725447,"elapsed":0.00109},{"id":725449,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":725450,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725449,"elapsed":0.000916},{"id":725451,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097593916420,"value":"#<TestCurrentUserProvider:0x00007f81bc5eb808>"}},{"id":725452,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097593912160,"value":"e9191c24fcbae73762a13f05748af452","kind":"req"},{"name":"opts","class":"Hash","object_id":70097593911060,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":725453,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097593912160,"value":"e9191c24fcbae73762a13f05748af452","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":725454,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":725455,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":725454,"elapsed":8.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":725456,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":725453,"elapsed":0.000131,"return_value":{"class":"String","value":"x4iiJEVC7nzZhIsF4/DrsiQ3y44=","object_id":70097593944840}},{"id":725457,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'x4iiJEVC7nzZhIsF4/DrsiQ3y44=' OR\n                          prev_auth_token = 'x4iiJEVC7nzZhIsF4/DrsiQ3y44=') AND rotated_at > '2020-03-29 18:57:44.830324') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":725458,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725457,"elapsed":0.001103},{"id":725459,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 18:57:44.834714' WHERE \"user_auth_tokens\".\"id\" = 868 AND \"user_auth_tokens\".\"auth_token\" = 'x4iiJEVC7nzZhIsF4/DrsiQ3y44='","database_type":"postgres","server_version":110006}},{"id":725460,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725459,"elapsed":0.001034},{"id":725461,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097566652900,"value":"{:action=>\"seen token\", :user_auth_token_id=>868, :user_id=>938, :auth_token=>\"x4iiJEVC7nzZhIsF4/Drs","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":725462,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":725463,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725462,"elapsed":0.000761},{"id":725464,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 868, 938, '127.0.0.1/32', 'x4iiJEVC7nzZhIsF4/DrsiQ3y44=', '2020-05-28 18:57:44.842040') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":725465,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725464,"elapsed":0.000969},{"id":725466,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":725467,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725466,"elapsed":0.000836},{"id":725468,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":725461,"elapsed":0.011413,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81b91e8f88>","object_id":70097566648260}},{"id":725469,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":725452,"elapsed":0.019828,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81bb9b8978>","object_id":70097587520700}},{"id":725470,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 938 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":725471,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725470,"elapsed":0.0011},{"id":725472,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>"}},{"id":725473,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":725472,"elapsed":1.5e-05},{"id":725474,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097593916420,"value":"#<TestCurrentUserProvider:0x00007f81bc5eb808>"}},{"id":725475,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":725474,"elapsed":0.000925,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":725476,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>"}},{"id":725477,"event":"call","defined_class":"User","method_id":"update_visit_record!","path":"app/models/user.rb","lineno":680,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097612247060,"value":"2020-05-28","kind":"req"}],"receiver":{"class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>"}},{"id":725478,"event":"call","defined_class":"User","method_id":"visit_record_for","path":"app/models/user.rb","lineno":676,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097612247060,"value":"2020-05-28","kind":"req"}],"receiver":{"class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>"}},{"id":725479,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_visits\".* FROM \"user_visits\" WHERE \"user_visits\".\"user_id\" = 938 AND \"user_visits\".\"visited_at\" = '2020-05-28' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":725480,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725479,"elapsed":0.000922},{"id":725481,"event":"return","defined_class":"User","method_id":"visit_record_for","path":"app/models/user.rb","lineno":676,"static":false,"thread_id":70097708498960,"parent_id":725478,"elapsed":0.004003},{"id":725482,"event":"call","defined_class":"User","method_id":"create_visit_record!","path":"app/models/user.rb","lineno":671,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097612247060,"value":"2020-05-28","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>"}},{"id":725483,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_stats\".\"user_id\", \"user_stats\".\"topics_entered\", \"user_stats\".\"time_read\", \"user_stats\".\"days_visited\", \"user_stats\".\"posts_read_count\", \"user_stats\".\"likes_given\", \"user_stats\".\"likes_received\", \"user_stats\".\"new_since\", \"user_stats\".\"read_faq\", \"user_stats\".\"first_post_created_at\", \"user_stats\".\"post_count\", \"user_stats\".\"topic_count\", \"user_stats\".\"bounce_score\", \"user_stats\".\"reset_bounce_score_after\", \"user_stats\".\"flags_agreed\", \"user_stats\".\"flags_disagreed\", \"user_stats\".\"flags_ignored\", \"user_stats\".\"first_unread_at\", \"user_stats\".\"distinct_badge_count\" FROM \"user_stats\" WHERE \"user_stats\".\"user_id\" = 938 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":725484,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725483,"elapsed":0.000893},{"id":725485,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_stats\" SET \"days_visited\" = 1 WHERE \"user_stats\".\"user_id\" = 938","database_type":"postgres","server_version":110006}},{"id":725486,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725485,"elapsed":0.000979},{"id":725487,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":725488,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725487,"elapsed":0.000704},{"id":725489,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_visits\" (\"user_id\", \"visited_at\") VALUES (938, '2020-05-28') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":725490,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725489,"elapsed":0.000887},{"id":725491,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":725492,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725491,"elapsed":0.00073},{"id":725493,"event":"return","defined_class":"User","method_id":"create_visit_record!","path":"app/models/user.rb","lineno":671,"static":false,"thread_id":70097708498960,"parent_id":725482,"elapsed":0.018851,"return_value":{"class":"UserVisit","value":"#<UserVisit:0x00007f81d84312a8>","object_id":70097827891540}},{"id":725494,"event":"return","defined_class":"User","method_id":"update_visit_record!","path":"app/models/user.rb","lineno":680,"static":false,"thread_id":70097708498960,"parent_id":725477,"elapsed":0.023157,"return_value":{"class":"UserVisit","value":"#<UserVisit:0x00007f81d84312a8>","object_id":70097827891540}},{"id":725495,"event":"call","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>"}},{"id":725496,"event":"return","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parent_id":725495,"elapsed":2.2e-05},{"id":725497,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"last_seen_at\" = '2020-05-28 18:57:44.855486' WHERE \"users\".\"id\" = 938","database_type":"postgres","server_version":110006}},{"id":725498,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725497,"elapsed":0.001143},{"id":725499,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"first_seen_at\" = '2020-05-28 18:57:44.855486' WHERE \"users\".\"id\" = 938","database_type":"postgres","server_version":110006}},{"id":725500,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725499,"elapsed":0.001263},{"id":725501,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":725476,"elapsed":0.032518},{"id":725502,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097612251060,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>"}},{"id":725503,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 938","database_type":"postgres","server_version":110006}},{"id":725504,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725503,"elapsed":0.001092},{"id":725505,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":725502,"elapsed":0.003767,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":725506,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725451,"elapsed":0.062089,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725507,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097593916420,"value":"#<TestCurrentUserProvider:0x00007f81bc5eb808>"}},{"id":725508,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725507,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725509,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>"}},{"id":725510,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":725509,"elapsed":1.7e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":725511,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":725512,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":725511,"elapsed":5.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":725513,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":725514,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":725513,"elapsed":1.1e-05},{"id":725515,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/logs/screened_urls.json"},"message":[{"name":"controller","class":"String","value":"admin/screened_urls","object_id":70097794725180},{"name":"action","class":"String","value":"index","object_id":70097708669400},{"name":"format","class":"String","value":"json","object_id":70097593893860}]},{"id":725516,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725517,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725518,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725519,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725520,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725519,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725521,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":725518,"elapsed":0.000122,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bebdbbf8>","object_id":70097613807100}},{"id":725522,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097613807100,"value":"#<Guardian:0x00007f81bebdbbf8>"}},{"id":725523,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":725522,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":725524,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":725517,"elapsed":0.000352},{"id":725525,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725526,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725525,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725527,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 938 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":725528,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725527,"elapsed":0.001022},{"id":725529,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725530,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":725529,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bebdbbf8>","object_id":70097613807100}},{"id":725531,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097588551080,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097613807100,"value":"#<Guardian:0x00007f81bebdbbf8>"}},{"id":725532,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":725531,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":725533,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":725516,"elapsed":0.005217,"return_value":{"class":"Array","value":"[2]","object_id":70097588551080}},{"id":725534,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725535,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725536,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725535,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725537,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725538,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725537,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725539,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725540,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725539,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725541,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":725534,"elapsed":0.000385,"return_value":{"class":"String","value":"screened_urls/index","object_id":70097588577940}},{"id":725542,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725543,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725544,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725543,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725545,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":725542,"elapsed":0.000109},{"id":725546,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725547,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725548,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725547,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725549,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725550,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725549,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725551,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>"}},{"id":725552,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":725551,"elapsed":1.1e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":725553,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":725554,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":725553,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":725555,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":725556,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":725555,"elapsed":9.0e-06},{"id":725557,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":725558,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":725557,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":725559,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":725560,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":725559,"elapsed":6.0e-06},{"id":725561,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":725546,"elapsed":0.000697,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097608538160}},{"id":725562,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725563,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":725562,"elapsed":8.0e-06},{"id":725564,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725565,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725566,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725565,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725567,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":725564,"elapsed":9.9e-05},{"id":725568,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725569,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725568,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725570,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725571,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725570,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725572,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725573,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725572,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725574,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097801796640,"value":"Admin::ScreenedUrlsController"}},{"id":725575,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":725574,"elapsed":3.0e-06},{"id":725576,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725577,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":725576,"elapsed":8.0e-06},{"id":725578,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725579,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725578,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725580,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725581,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725580,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725582,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>"}},{"id":725583,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":725582,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":725584,"event":"call","defined_class":"Admin::ScreenedUrlsController","method_id":"index","path":"app/controllers/admin/screened_urls_controller.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725585,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT domain, sum(match_count) as match_count, max(last_match_at) as last_match_at, min(created_at) as created_at FROM \"screened_urls\" GROUP BY \"screened_urls\".\"domain\" ORDER BY last_match_at DESC","database_type":"postgres","server_version":110006}},{"id":725586,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":725585,"elapsed":0.00143},{"id":725587,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097800128880,"value":"[#<ScreenedUrl id: nil, domain: \"spammers0.org\", match_count: 0, last_match_at: nil, created_at: \"20","kind":"req"},{"name":"serializer","class":"Class","object_id":70097800149120,"value":"GroupedScreenedUrlSerializer","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725588,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097800128880,"value":"[#<ScreenedUrl id: nil, domain: \"spammers0.org\", match_count: 0, last_match_at: nil, created_at: \"20","kind":"req"},{"name":"serializer","class":"Class","object_id":70097800149120,"value":"GroupedScreenedUrlSerializer","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725589,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725590,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":725589,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bebdbbf8>","object_id":70097613807100}},{"id":725591,"event":"call","defined_class":"GroupedScreenedUrlSerializer","method_id":"action","path":"app/serializers/grouped_screened_url_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"GroupedScreenedUrlSerializer","object_id":70097800193360,"value":"#<GroupedScreenedUrlSerializer:0x00007f81d4f5caa0>"}},{"id":725592,"event":"return","defined_class":"GroupedScreenedUrlSerializer","method_id":"action","path":"app/serializers/grouped_screened_url_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":725591,"elapsed":4.0e-06,"return_value":{"class":"String","value":"do_nothing","object_id":70097800150420}},{"id":725593,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":725588,"elapsed":0.000389,"return_value":{"class":"Array","value":"[{:domain=>\"spammers0.org\", :action=>\"do_nothing\", :match_count=>0, :last_match_at=>nil, :created_at","object_id":70097800193380}},{"id":725594,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097800193380,"value":"[{:domain=>\"spammers0.org\", :action=>\"do_nothing\", :match_count=>0, :last_match_at=>nil, :created_at","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725595,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":725594,"elapsed":0.000178,"return_value":{"class":"String","value":"[{\"domain\":\"spammers0.org\",\"action\":\"do_nothing\",\"match_count\":0,\"last_match_at\":null,\"created_at\":\"","object_id":70097800230400}},{"id":725596,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":725587,"elapsed":0.000898,"return_value":{"class":"String","value":"[{\"domain\":\"spammers0.org\",\"action\":\"do_nothing\",\"match_count\":0,\"last_match_at\":null,\"created_at\":\"","object_id":70097800230400}},{"id":725597,"event":"return","defined_class":"Admin::ScreenedUrlsController","method_id":"index","path":"app/controllers/admin/screened_urls_controller.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":725584,"elapsed":0.00832,"return_value":{"class":"String","value":"[{\"domain\":\"spammers0.org\",\"action\":\"do_nothing\",\"match_count\":0,\"last_match_at\":null,\"created_at\":\"","object_id":70097800230400}},{"id":725598,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725599,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":725598,"elapsed":1.0e-05},{"id":725600,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725601,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":725600,"elapsed":6.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097800243680}},{"id":725602,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedUrlsController","object_id":70097613654540,"value":"#<Admin::ScreenedUrlsController:0x00007f81beb91418>"}},{"id":725603,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725604,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725603,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725605,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097612232500,"value":"#<User:0x00007f81be8dae68>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097593748000,"value":"#<ActionDispatch::Request::Session:0x00007f81bc599440>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097588551340,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81bbbafd58>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725606,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725607,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725608,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725607,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725609,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":725606,"elapsed":0.000103},{"id":725610,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725611,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613784420,"value":"#<TestCurrentUserProvider:0x00007f81bebd0ac8>"}},{"id":725612,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":725611,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be8dae68>","object_id":70097612232500}},{"id":725613,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":725610,"elapsed":0.0001},{"id":725614,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":725605,"elapsed":0.000385},{"id":725615,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":725602,"elapsed":0.000607},{"id":725616,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":725515,"elapsed":0.018312,"http_server_response":{"status":200}},{"id":725617,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800294820,"value":"#<TestCurrentUserProvider:0x00007f81d4f8e348>"}},{"id":725618,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":725617,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":725619,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":725620,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":725619,"elapsed":5.0e-06},{"id":725621,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":725622,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":725621,"elapsed":3.0e-06}]}