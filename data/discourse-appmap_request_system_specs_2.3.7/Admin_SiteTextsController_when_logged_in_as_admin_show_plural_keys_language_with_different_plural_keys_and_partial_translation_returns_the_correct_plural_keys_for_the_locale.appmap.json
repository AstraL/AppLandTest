{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::SiteTextsController when logged in as admin #show plural keys language with different plural keys and partial translation returns the correct plural keys for the locale","app":"Discourse","feature":"Admin::SiteTextsController when logged in as admin","feature_group":"Admin site texts","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"LocaleSiteSetting","type":"class","children":[{"name":"valid_value?","type":"function","location":"app/models/locale_site_setting.rb:5","static":true},{"name":"supported_locales","type":"function","location":"app/models/locale_site_setting.rb:39","static":true},{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"Site","type":"class","children":[{"name":"clear_anon_cache!","type":"function","location":"app/models/site.rb:129","static":true}]},{"name":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","type":"class","children":[{"name":"reset_cached_settings!","type":"function","location":"app/models/site_setting.rb:109","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true},{"name":"skip_db?","type":"function","location":"app/models/global_setting.rb:84","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_serialized","type":"function","location":"app/controllers/application_controller.rb:446","static":false},{"name":"serialize_data","type":"function","location":"app/controllers/application_controller.rb:431","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"SiteTextsController","type":"class","children":[{"name":"show","type":"function","location":"app/controllers/admin/site_texts_controller.rb:59","static":false},{"name":"restricted_keys","type":"function","location":"app/controllers/admin/site_texts_controller.rb:12","static":true}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"app/serializers","type":"package","children":[{"name":"SiteTextSerializer","type":"class","children":[{"name":"id","type":"function","location":"app/serializers/site_text_serializer.rb:6","static":false},{"name":"value","type":"function","location":"app/serializers/site_text_serializer.rb:10","static":false},{"name":"overridden?","type":"function","location":"app/serializers/site_text_serializer.rb:14","static":false}]}]}],"events":[{"id":1000541,"event":"call","defined_class":"LocaleSiteSetting","method_id":"valid_value?","path":"app/models/locale_site_setting.rb","lineno":5,"static":true,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097720257900,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000542,"event":"call","defined_class":"LocaleSiteSetting","method_id":"supported_locales","path":"app/models/locale_site_setting.rb","lineno":39,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000543,"event":"return","defined_class":"LocaleSiteSetting","method_id":"supported_locales","path":"app/models/locale_site_setting.rb","lineno":39,"static":true,"thread_id":70097708498960,"parent_id":1000542,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[\"ar\", \"be\", \"bg\", \"bs_BA\", \"ca\", \"cs\", \"da\", \"de\", \"el\", \"en\", \"en_US\", \"es\", \"et\", \"fa_IR\", \"fi\", ","object_id":70097795581420}},{"id":1000544,"event":"return","defined_class":"LocaleSiteSetting","method_id":"valid_value?","path":"app/models/locale_site_setting.rb","lineno":5,"static":true,"thread_id":70097708498960,"parent_id":1000541,"elapsed":0.000146,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000545,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":1000546,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":1000545,"elapsed":6.8e-05,"return_value":{"class":"Integer","value":"13297","object_id":26595}},{"id":1000547,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"reset_cached_settings!","path":"app/models/site_setting.rb","lineno":109,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1000548,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"reset_cached_settings!","path":"app/models/site_setting.rb","lineno":109,"static":true,"thread_id":70097708498960,"parent_id":1000547,"elapsed":4.0e-06},{"id":1000549,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":1000550,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":1000549,"elapsed":6.3e-05,"return_value":{"class":"Integer","value":"13298","object_id":26597}},{"id":1000551,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097796808000,"value":"#<TestCurrentUserProvider:0x00007f81d48e7a80>"}},{"id":1000552,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097796839720,"value":"b991961539f8b9b7eb31e31f24748f3c","kind":"req"},{"name":"opts","class":"Hash","object_id":70097796835960,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1000553,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097796839720,"value":"b991961539f8b9b7eb31e31f24748f3c","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1000554,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1000555,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1000554,"elapsed":7.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1000556,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1000553,"elapsed":0.000122,"return_value":{"class":"String","value":"kJl0EFKTD9JM2p2w2ZlBGzS8Ink=","object_id":70097796920520}},{"id":1000557,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'kJl0EFKTD9JM2p2w2ZlBGzS8Ink=' OR\n                          prev_auth_token = 'kJl0EFKTD9JM2p2w2ZlBGzS8Ink=') AND rotated_at > '2020-03-29 19:01:31.390960') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000558,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000557,"elapsed":0.00107},{"id":1000559,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 19:01:31.396013' WHERE \"user_auth_tokens\".\"id\" = 1135 AND \"user_auth_tokens\".\"auth_token\" = 'kJl0EFKTD9JM2p2w2ZlBGzS8Ink='","database_type":"postgres","server_version":110006}},{"id":1000560,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000559,"elapsed":0.001303},{"id":1000561,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097730820160,"value":"{:action=>\"seen token\", :user_auth_token_id=>1135, :user_id=>1330, :auth_token=>\"kJl0EFKTD9JM2p2w2Zl","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1000562,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1000563,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000562,"elapsed":0.001005},{"id":1000564,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 1135, 1330, '127.0.0.1/32', 'kJl0EFKTD9JM2p2w2ZlBGzS8Ink=', '2020-05-28 19:01:31.400759') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1000565,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000564,"elapsed":0.001036},{"id":1000566,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1000567,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000566,"elapsed":0.001056},{"id":1000568,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1000561,"elapsed":0.013396,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81ccb11c50>","object_id":70097730833960}},{"id":1000569,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1000552,"elapsed":0.023323,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81d509bab0>","object_id":70097800846680}},{"id":1000570,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000571,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000570,"elapsed":0.001075},{"id":1000572,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097814390780,"value":"#<User:0x00007f81d6a70ff8>"}},{"id":1000573,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1000572,"elapsed":1.7e-05},{"id":1000574,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097796808000,"value":"#<TestCurrentUserProvider:0x00007f81d48e7a80>"}},{"id":1000575,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1000574,"elapsed":0.000992,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000576,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097814390780,"value":"#<User:0x00007f81d6a70ff8>"}},{"id":1000577,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1000576,"elapsed":0.000786},{"id":1000578,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097814409620,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097814390780,"value":"#<User:0x00007f81d6a70ff8>"}},{"id":1000579,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 1330","database_type":"postgres","server_version":110006}},{"id":1000580,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000579,"elapsed":0.001037},{"id":1000581,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1000578,"elapsed":0.00373,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000582,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000551,"elapsed":0.033943,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000583,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097796808000,"value":"#<TestCurrentUserProvider:0x00007f81d48e7a80>"}},{"id":1000584,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000583,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000585,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097814390780,"value":"#<User:0x00007f81d6a70ff8>"}},{"id":1000586,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1000585,"elapsed":1.5e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000587,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815817940,"value":"#<TestCurrentUserProvider:0x00007f81d6d29da8>"}},{"id":1000588,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000587,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000589,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815817940,"value":"#<TestCurrentUserProvider:0x00007f81d6d29da8>"}},{"id":1000590,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000589,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000591,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097814390780,"value":"#<User:0x00007f81d6a70ff8>"}},{"id":1000592,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1000591,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000593,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000594,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000593,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1000595,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000596,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000595,"elapsed":1.0e-05},{"id":1000597,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/customize/site_texts/colour.one.json"},"message":[{"name":"controller","class":"String","value":"admin/site_texts","object_id":70097755323000},{"name":"action","class":"String","value":"show","object_id":70097755323060},{"name":"id","class":"String","value":"colour.one","object_id":70097796785780}]},{"id":1000598,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000599,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000600,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000601,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000602,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000601,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000603,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1000600,"elapsed":0.000129,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d6d51790>","object_id":70097815899080}},{"id":1000604,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097815899080,"value":"#<Guardian:0x00007f81d6d51790>"}},{"id":1000605,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1000604,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000606,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1000599,"elapsed":0.000347},{"id":1000607,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000608,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000607,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000609,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000610,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000609,"elapsed":0.001126},{"id":1000611,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000612,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1000611,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d6d51790>","object_id":70097815899080}},{"id":1000613,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097591029400,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097815899080,"value":"#<Guardian:0x00007f81d6d51790>"}},{"id":1000614,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1000613,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000615,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1000598,"elapsed":0.005592,"return_value":{"class":"Array","value":"[2]","object_id":70097591029400}},{"id":1000616,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000617,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000618,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000617,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000619,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000620,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000619,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000621,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000622,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000621,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000623,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1000616,"elapsed":0.000356,"return_value":{"class":"String","value":"site_texts/show","object_id":70097591077880}},{"id":1000624,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000625,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000626,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000625,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000627,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1000624,"elapsed":0.000112},{"id":1000628,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000629,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000630,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000629,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000631,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000632,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000631,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000633,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097814390780,"value":"#<User:0x00007f81d6a70ff8>"}},{"id":1000634,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1000633,"elapsed":1.2e-05,"return_value":{"class":"String","value":"ru","object_id":70097720257900}},{"id":1000635,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000636,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000635,"elapsed":9.0e-06},{"id":1000637,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000638,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000637,"elapsed":6.0e-06},{"id":1000639,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1000628,"elapsed":0.060579,"return_value":{"class":"Array","value":"[:ru, :en]","object_id":70097591146900}},{"id":1000640,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000641,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1000640,"elapsed":9.0e-06},{"id":1000642,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000643,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000644,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000643,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000645,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1000642,"elapsed":0.000108},{"id":1000646,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000647,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000646,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000648,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000649,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000648,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000650,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000651,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000650,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000652,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1000653,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1000652,"elapsed":3.0e-06},{"id":1000654,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000655,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1000654,"elapsed":8.0e-06},{"id":1000656,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000657,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000656,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000658,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000659,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000658,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000660,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097814390780,"value":"#<User:0x00007f81d6a70ff8>"}},{"id":1000661,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1000660,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000662,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000663,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1000664,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parent_id":1000663,"elapsed":2.0e-06,"return_value":{"class":"Array","value":"[\"user_notifications.confirm_old_email.title\", \"user_notifications.confirm_old_email.subject_templat","object_id":70097607675660}},{"id":1000665,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000666,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000665,"elapsed":9.0e-06},{"id":1000667,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000668,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000667,"elapsed":9.0e-06},{"id":1000669,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1000670,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1000669,"elapsed":3.0e-06},{"id":1000671,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"translation_overrides\".\"translation_key\", \"translation_overrides\".\"value\", \"translation_overrides\".\"compiled_js\" FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru'","database_type":"postgres","server_version":110006}},{"id":1000672,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000671,"elapsed":0.001217},{"id":1000673,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1000674,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1000673,"elapsed":4.0e-06},{"id":1000675,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000676,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000675,"elapsed":8.0e-06},{"id":1000677,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097799013940,"value":"{:id=>\"colour.one\", :value=>\"%{count} colour\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097799013860,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000678,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097799013940,"value":"{:id=>\"colour.one\", :value=>\"%{count} colour\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097799013860,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000679,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000680,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1000679,"elapsed":3.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d6d51790>","object_id":70097815899080}},{"id":1000681,"event":"call","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097799031360,"value":"#<SiteTextSerializer:0x00007f81d4d25480>"}},{"id":1000682,"event":"return","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parent_id":1000681,"elapsed":4.0e-06,"return_value":{"class":"String","value":"colour.one","object_id":70097796785780}},{"id":1000683,"event":"call","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097799031360,"value":"#<SiteTextSerializer:0x00007f81d4d25480>"}},{"id":1000684,"event":"return","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":1000683,"elapsed":3.0e-06,"return_value":{"class":"String","value":"%{count} colour","object_id":70097799014140}},{"id":1000685,"event":"call","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097799031360,"value":"#<SiteTextSerializer:0x00007f81d4d25480>"}},{"id":1000686,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.one' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000687,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000686,"elapsed":0.000881},{"id":1000688,"event":"return","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1000685,"elapsed":0.003978},{"id":1000689,"event":"call","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097799031360,"value":"#<SiteTextSerializer:0x00007f81d4d25480>"}},{"id":1000690,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.one' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000691,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000690,"elapsed":2.2e-05},{"id":1000692,"event":"return","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1000689,"elapsed":0.003059},{"id":1000693,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":1000678,"elapsed":0.007598,"return_value":{"class":"Hash","value":"{\"site_text\"=>{:id=>\"colour.one\", :value=>\"%{count} colour\", :overridden=>false, :can_revert=>false}","object_id":70097799031080}},{"id":1000694,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097799031080,"value":"{\"site_text\"=>{:id=>\"colour.one\", :value=>\"%{count} colour\", :overridden=>false, :can_revert=>false}","kind":"req"},{"name":"opts","class":"Hash","object_id":70097799013860,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000695,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1000694,"elapsed":0.000137,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.one\",\"value\":\"%{count} colour\",\"overridden\":false,\"can_revert\":false},\"__","object_id":70097827780600}},{"id":1000696,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":1000677,"elapsed":0.007991,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.one\",\"value\":\"%{count} colour\",\"overridden\":false,\"can_revert\":false},\"__","object_id":70097827780600}},{"id":1000697,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parent_id":1000662,"elapsed":0.012823,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.one\",\"value\":\"%{count} colour\",\"overridden\":false,\"can_revert\":false},\"__","object_id":70097827780600}},{"id":1000698,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000699,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1000698,"elapsed":7.0e-06},{"id":1000700,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000701,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1000700,"elapsed":6.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097827798780}},{"id":1000702,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097815854520,"value":"#<Admin::SiteTextsController:0x00007f81d6d3bb70>"}},{"id":1000703,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000704,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000703,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000705,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097814390780,"value":"#<User:0x00007f81d6a70ff8>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097783711920,"value":"#<ActionDispatch::Request::Session:0x00007f81d2fed160>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097591029700,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81bc069f88>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000706,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000707,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000708,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000707,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000709,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1000706,"elapsed":9.1e-05},{"id":1000710,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000711,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097815902840,"value":"#<TestCurrentUserProvider:0x00007f81d6d534f0>"}},{"id":1000712,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000711,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6a70ff8>","object_id":70097814390780}},{"id":1000713,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1000710,"elapsed":8.9e-05},{"id":1000714,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1000705,"elapsed":0.000344},{"id":1000715,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1000702,"elapsed":0.000555},{"id":1000716,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1000597,"elapsed":0.083055,"http_server_response":{"status":200}},{"id":1000717,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827829060,"value":"#<TestCurrentUserProvider:0x00007f81d8412a88>"}},{"id":1000718,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1000717,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000719,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1000720,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1000719,"elapsed":5.0e-06},{"id":1000721,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1000722,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1000721,"elapsed":3.0e-06},{"id":1000723,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827959740,"value":"#<TestCurrentUserProvider:0x00007f81d8452778>"}},{"id":1000724,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097827957080,"value":"b991961539f8b9b7eb31e31f24748f3c","kind":"req"},{"name":"opts","class":"Hash","object_id":70097827956360,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1000725,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097827957080,"value":"b991961539f8b9b7eb31e31f24748f3c","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1000726,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1000727,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1000726,"elapsed":7.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1000728,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1000725,"elapsed":0.000122,"return_value":{"class":"String","value":"kJl0EFKTD9JM2p2w2ZlBGzS8Ink=","object_id":70097827972720}},{"id":1000729,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'kJl0EFKTD9JM2p2w2ZlBGzS8Ink=' OR\n                          prev_auth_token = 'kJl0EFKTD9JM2p2w2ZlBGzS8Ink=') AND rotated_at > '2020-03-29 19:01:31.512561') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000730,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000729,"elapsed":0.001028},{"id":1000731,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1000724,"elapsed":0.004295,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81bb8cc410>","object_id":70097587036680}},{"id":1000732,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000733,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000732,"elapsed":0.001064},{"id":1000734,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097828354280,"value":"#<User:0x00007f81d85131d0>"}},{"id":1000735,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1000734,"elapsed":1.7e-05},{"id":1000736,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827959740,"value":"#<TestCurrentUserProvider:0x00007f81d8452778>"}},{"id":1000737,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1000736,"elapsed":0.000891,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000738,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097828354280,"value":"#<User:0x00007f81d85131d0>"}},{"id":1000739,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1000738,"elapsed":0.000915},{"id":1000740,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097828349940,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097828354280,"value":"#<User:0x00007f81d85131d0>"}},{"id":1000741,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1000740,"elapsed":3.4e-05},{"id":1000742,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000723,"elapsed":0.011006,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000743,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827959740,"value":"#<TestCurrentUserProvider:0x00007f81d8452778>"}},{"id":1000744,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000743,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000745,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097828354280,"value":"#<User:0x00007f81d85131d0>"}},{"id":1000746,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1000745,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000747,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828381160,"value":"#<TestCurrentUserProvider:0x00007f81d85203d0>"}},{"id":1000748,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000747,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000749,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828381160,"value":"#<TestCurrentUserProvider:0x00007f81d85203d0>"}},{"id":1000750,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000749,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000751,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097828354280,"value":"#<User:0x00007f81d85131d0>"}},{"id":1000752,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1000751,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000753,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000754,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000753,"elapsed":1.1e-05},{"id":1000755,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/customize/site_texts/colour.few.json"},"message":[{"name":"controller","class":"String","value":"admin/site_texts","object_id":70097755323000},{"name":"action","class":"String","value":"show","object_id":70097755323060},{"name":"id","class":"String","value":"colour.few","object_id":70097827960080}]},{"id":1000756,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000757,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000758,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000759,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000760,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000759,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000761,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1000758,"elapsed":0.000116,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4dfca70>","object_id":70097799472440}},{"id":1000762,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097799472440,"value":"#<Guardian:0x00007f81d4dfca70>"}},{"id":1000763,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1000762,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000764,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1000757,"elapsed":0.000322},{"id":1000765,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000766,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000765,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000767,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000768,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000767,"elapsed":0.000948},{"id":1000769,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000770,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1000769,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4dfca70>","object_id":70097799472440}},{"id":1000771,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097828530800,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097799472440,"value":"#<Guardian:0x00007f81d4dfca70>"}},{"id":1000772,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1000771,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000773,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1000756,"elapsed":0.005114,"return_value":{"class":"Array","value":"[2]","object_id":70097828530800}},{"id":1000774,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000775,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000776,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000775,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000777,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000778,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000777,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000779,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000780,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000779,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000781,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1000774,"elapsed":0.000325,"return_value":{"class":"String","value":"site_texts/show","object_id":70097828545700}},{"id":1000782,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000783,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000784,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000783,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000785,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1000782,"elapsed":0.000108},{"id":1000786,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000787,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000788,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000787,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000789,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000790,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000789,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000791,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097828354280,"value":"#<User:0x00007f81d85131d0>"}},{"id":1000792,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1000791,"elapsed":6.0e-06,"return_value":{"class":"String","value":"ru","object_id":70097720257900}},{"id":1000793,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000794,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000793,"elapsed":9.0e-06},{"id":1000795,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000796,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000795,"elapsed":7.0e-06},{"id":1000797,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1000786,"elapsed":0.000499,"return_value":{"class":"Array","value":"[:ru, :en]","object_id":70097828581800}},{"id":1000798,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000799,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1000798,"elapsed":7.0e-06},{"id":1000800,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000801,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000802,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000801,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000803,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1000800,"elapsed":9.8e-05},{"id":1000804,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000805,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000804,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000806,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000807,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000806,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000808,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000809,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000808,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000810,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1000811,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1000810,"elapsed":3.0e-06},{"id":1000812,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000813,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1000812,"elapsed":7.0e-06},{"id":1000814,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000815,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000814,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000816,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000817,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000816,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000818,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097828354280,"value":"#<User:0x00007f81d85131d0>"}},{"id":1000819,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1000818,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000820,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000821,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1000822,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parent_id":1000821,"elapsed":3.0e-06,"return_value":{"class":"Array","value":"[\"user_notifications.confirm_old_email.title\", \"user_notifications.confirm_old_email.subject_templat","object_id":70097828633660}},{"id":1000823,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000824,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000823,"elapsed":7.0e-06},{"id":1000825,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000826,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000825,"elapsed":7.0e-06},{"id":1000827,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1000828,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1000827,"elapsed":3.0e-06},{"id":1000829,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1000830,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1000829,"elapsed":3.0e-06},{"id":1000831,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000832,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000831,"elapsed":6.0e-06},{"id":1000833,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097828649360,"value":"{:id=>\"colour.few\", :value=>\"%{count} цвета\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097828649340,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000834,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097828649360,"value":"{:id=>\"colour.few\", :value=>\"%{count} цвета\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097828649340,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000835,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000836,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1000835,"elapsed":3.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4dfca70>","object_id":70097799472440}},{"id":1000837,"event":"call","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097828643680,"value":"#<SiteTextSerializer:0x00007f81d85a06c0>"}},{"id":1000838,"event":"return","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parent_id":1000837,"elapsed":4.0e-06,"return_value":{"class":"String","value":"colour.few","object_id":70097827960080}},{"id":1000839,"event":"call","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097828643680,"value":"#<SiteTextSerializer:0x00007f81d85a06c0>"}},{"id":1000840,"event":"return","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":1000839,"elapsed":3.0e-06,"return_value":{"class":"String","value":"%{count} цвета","object_id":70097828649480}},{"id":1000841,"event":"call","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097828643680,"value":"#<SiteTextSerializer:0x00007f81d85a06c0>"}},{"id":1000842,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.few' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000843,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000842,"elapsed":0.000994},{"id":1000844,"event":"return","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1000841,"elapsed":0.004017},{"id":1000845,"event":"call","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097828643680,"value":"#<SiteTextSerializer:0x00007f81d85a06c0>"}},{"id":1000846,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.few' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000847,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000846,"elapsed":1.9e-05},{"id":1000848,"event":"return","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1000845,"elapsed":0.002829},{"id":1000849,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":1000834,"elapsed":0.007396,"return_value":{"class":"Hash","value":"{\"site_text\"=>{:id=>\"colour.few\", :value=>\"%{count} цвета\", :overridden=>false, :can_revert=>false}}","object_id":70097828643380}},{"id":1000850,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097828643380,"value":"{\"site_text\"=>{:id=>\"colour.few\", :value=>\"%{count} цвета\", :overridden=>false, :can_revert=>false}}","kind":"req"},{"name":"opts","class":"Hash","object_id":70097828649340,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000851,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1000850,"elapsed":0.000114,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.few\",\"value\":\"%{count} цвета\",\"overridden\":false,\"can_revert\":false},\"__r","object_id":70097613937720}},{"id":1000852,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":1000833,"elapsed":0.007752,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.few\",\"value\":\"%{count} цвета\",\"overridden\":false,\"can_revert\":false},\"__r","object_id":70097613937720}},{"id":1000853,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parent_id":1000820,"elapsed":0.008511,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.few\",\"value\":\"%{count} цвета\",\"overridden\":false,\"can_revert\":false},\"__r","object_id":70097613937720}},{"id":1000854,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000855,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1000854,"elapsed":6.0e-06},{"id":1000856,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000857,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1000856,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097613930960}},{"id":1000858,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097828399000,"value":"#<Admin::SiteTextsController:0x00007f81d8528f30>"}},{"id":1000859,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000860,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000859,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000861,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097828354280,"value":"#<User:0x00007f81d85131d0>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097827874300,"value":"#<ActionDispatch::Request::Session:0x00007f81d8428bf8>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097828530960,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81d8569620>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000862,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000863,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000864,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000863,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000865,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1000862,"elapsed":8.9e-05},{"id":1000866,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000867,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799474560,"value":"#<TestCurrentUserProvider:0x00007f81d4dfdb00>"}},{"id":1000868,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000867,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d85131d0>","object_id":70097828354280}},{"id":1000869,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1000866,"elapsed":8.7e-05},{"id":1000870,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1000861,"elapsed":0.000333},{"id":1000871,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1000858,"elapsed":0.000526},{"id":1000872,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1000755,"elapsed":0.018041,"http_server_response":{"status":200}},{"id":1000873,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613963280,"value":"#<TestCurrentUserProvider:0x00007f81bec28020>"}},{"id":1000874,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1000873,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000875,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1000876,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1000875,"elapsed":4.0e-06},{"id":1000877,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1000878,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1000877,"elapsed":4.0e-06},{"id":1000879,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614078800,"value":"#<TestCurrentUserProvider:0x00007f81bec606a0>"}},{"id":1000880,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097614101160,"value":"b991961539f8b9b7eb31e31f24748f3c","kind":"req"},{"name":"opts","class":"Hash","object_id":70097614100580,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1000881,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097614101160,"value":"b991961539f8b9b7eb31e31f24748f3c","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1000882,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1000883,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1000882,"elapsed":9.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1000884,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1000881,"elapsed":0.000111,"return_value":{"class":"String","value":"kJl0EFKTD9JM2p2w2ZlBGzS8Ink=","object_id":70097614116980}},{"id":1000885,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'kJl0EFKTD9JM2p2w2ZlBGzS8Ink=' OR\n                          prev_auth_token = 'kJl0EFKTD9JM2p2w2ZlBGzS8Ink=') AND rotated_at > '2020-03-29 19:01:31.546259') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000886,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000885,"elapsed":0.001044},{"id":1000887,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1000880,"elapsed":0.004381,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81be24cb50>","object_id":70097608795560}},{"id":1000888,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000889,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000888,"elapsed":0.001083},{"id":1000890,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800133260,"value":"#<User:0x00007f81d4f3f518>"}},{"id":1000891,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1000890,"elapsed":1.7e-05},{"id":1000892,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614078800,"value":"#<TestCurrentUserProvider:0x00007f81bec606a0>"}},{"id":1000893,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1000892,"elapsed":0.00091,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000894,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097800133260,"value":"#<User:0x00007f81d4f3f518>"}},{"id":1000895,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1000894,"elapsed":0.000822},{"id":1000896,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097800127560,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097800133260,"value":"#<User:0x00007f81d4f3f518>"}},{"id":1000897,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1000896,"elapsed":3.4e-05},{"id":1000898,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000879,"elapsed":0.011119,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000899,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614078800,"value":"#<TestCurrentUserProvider:0x00007f81bec606a0>"}},{"id":1000900,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000899,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000901,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800133260,"value":"#<User:0x00007f81d4f3f518>"}},{"id":1000902,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1000901,"elapsed":1.1e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000903,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800160000,"value":"#<TestCurrentUserProvider:0x00007f81d4f4c600>"}},{"id":1000904,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000903,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000905,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800160000,"value":"#<TestCurrentUserProvider:0x00007f81d4f4c600>"}},{"id":1000906,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000905,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000907,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800133260,"value":"#<User:0x00007f81d4f3f518>"}},{"id":1000908,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1000907,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000909,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000910,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000909,"elapsed":1.0e-05},{"id":1000911,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/customize/site_texts/colour.other.json"},"message":[{"name":"controller","class":"String","value":"admin/site_texts","object_id":70097755323000},{"name":"action","class":"String","value":"show","object_id":70097755323060},{"name":"id","class":"String","value":"colour.other","object_id":70097614079060}]},{"id":1000912,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000913,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000914,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000915,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000916,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000915,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000917,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1000914,"elapsed":0.000117,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4f6ff10>","object_id":70097800232840}},{"id":1000918,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097800232840,"value":"#<Guardian:0x00007f81d4f6ff10>"}},{"id":1000919,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1000918,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000920,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1000913,"elapsed":0.000332},{"id":1000921,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000922,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000921,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000923,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000924,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000923,"elapsed":0.00096},{"id":1000925,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000926,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1000925,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4f6ff10>","object_id":70097800232840}},{"id":1000927,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097569054140,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097800232840,"value":"#<Guardian:0x00007f81d4f6ff10>"}},{"id":1000928,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1000927,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000929,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1000912,"elapsed":0.00525,"return_value":{"class":"Array","value":"[2]","object_id":70097569054140}},{"id":1000930,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000931,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000932,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000931,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000933,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000934,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000933,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000935,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000936,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000935,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000937,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1000930,"elapsed":0.000329,"return_value":{"class":"String","value":"site_texts/show","object_id":70097569082560}},{"id":1000938,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000939,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000940,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000939,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000941,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1000938,"elapsed":0.000106},{"id":1000942,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000943,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000944,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000943,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000945,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000946,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000945,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000947,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800133260,"value":"#<User:0x00007f81d4f3f518>"}},{"id":1000948,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1000947,"elapsed":6.0e-06,"return_value":{"class":"String","value":"ru","object_id":70097720257900}},{"id":1000949,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000950,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000949,"elapsed":1.0e-05},{"id":1000951,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000952,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000951,"elapsed":7.0e-06},{"id":1000953,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1000942,"elapsed":0.000516,"return_value":{"class":"Array","value":"[:ru, :en]","object_id":70097817311720}},{"id":1000954,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000955,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1000954,"elapsed":6.0e-06},{"id":1000956,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000957,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000958,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000957,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000959,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1000956,"elapsed":9.5e-05},{"id":1000960,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000961,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000960,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000962,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000963,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000962,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000964,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000965,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000964,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000966,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1000967,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1000966,"elapsed":3.0e-06},{"id":1000968,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000969,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1000968,"elapsed":7.0e-06},{"id":1000970,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000971,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000970,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000972,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1000973,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1000972,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1000974,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800133260,"value":"#<User:0x00007f81d4f3f518>"}},{"id":1000975,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1000974,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1000976,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000977,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1000978,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parent_id":1000977,"elapsed":3.0e-06,"return_value":{"class":"Array","value":"[\"user_notifications.confirm_old_email.title\", \"user_notifications.confirm_old_email.subject_templat","object_id":70097828931840}},{"id":1000979,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000980,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000979,"elapsed":7.0e-06},{"id":1000981,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000982,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000981,"elapsed":6.0e-06},{"id":1000983,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1000984,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1000983,"elapsed":3.0e-06},{"id":1000985,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1000986,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1000985,"elapsed":2.0e-06},{"id":1000987,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1000988,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1000987,"elapsed":7.0e-06},{"id":1000989,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097828967440,"value":"{:id=>\"colour.other\", :value=>\"%{count} colours\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097828967420,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000990,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097828967440,"value":"{:id=>\"colour.other\", :value=>\"%{count} colours\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097828967420,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000991,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1000992,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1000991,"elapsed":3.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4f6ff10>","object_id":70097800232840}},{"id":1000993,"event":"call","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097828984240,"value":"#<SiteTextSerializer:0x00007f81d8646b60>"}},{"id":1000994,"event":"return","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parent_id":1000993,"elapsed":3.0e-06,"return_value":{"class":"String","value":"colour.other","object_id":70097614079060}},{"id":1000995,"event":"call","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097828984240,"value":"#<SiteTextSerializer:0x00007f81d8646b60>"}},{"id":1000996,"event":"return","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":1000995,"elapsed":3.0e-06,"return_value":{"class":"String","value":"%{count} colours","object_id":70097828967820}},{"id":1000997,"event":"call","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097828984240,"value":"#<SiteTextSerializer:0x00007f81d8646b60>"}},{"id":1000998,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.other' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1000999,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1000998,"elapsed":0.001052},{"id":1001000,"event":"return","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1000997,"elapsed":0.004273},{"id":1001001,"event":"call","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097828984240,"value":"#<SiteTextSerializer:0x00007f81d8646b60>"}},{"id":1001002,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.other' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001003,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001002,"elapsed":2.0e-05},{"id":1001004,"event":"return","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1001001,"elapsed":0.003033},{"id":1001005,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":1000990,"elapsed":0.007844,"return_value":{"class":"Hash","value":"{\"site_text\"=>{:id=>\"colour.other\", :value=>\"%{count} colours\", :overridden=>false, :can_revert=>fal","object_id":70097828983980}},{"id":1001006,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097828983980,"value":"{\"site_text\"=>{:id=>\"colour.other\", :value=>\"%{count} colours\", :overridden=>false, :can_revert=>fal","kind":"req"},{"name":"opts","class":"Hash","object_id":70097828967420,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1001007,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1001006,"elapsed":0.000123,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.other\",\"value\":\"%{count} colours\",\"overridden\":false,\"can_revert\":false},","object_id":70097588773100}},{"id":1001008,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":1000989,"elapsed":0.008213,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.other\",\"value\":\"%{count} colours\",\"overridden\":false,\"can_revert\":false},","object_id":70097588773100}},{"id":1001009,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parent_id":1000976,"elapsed":0.008957,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.other\",\"value\":\"%{count} colours\",\"overridden\":false,\"can_revert\":false},","object_id":70097588773100}},{"id":1001010,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1001011,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1001010,"elapsed":6.0e-06},{"id":1001012,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1001013,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1001012,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097588789840}},{"id":1001014,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097800198940,"value":"#<Admin::SiteTextsController:0x00007f81d4f5f638>"}},{"id":1001015,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1001016,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001015,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1001017,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097800133260,"value":"#<User:0x00007f81d4f3f518>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097614014540,"value":"#<ActionDispatch::Request::Session:0x00007f81bec41098>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097569054560,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81b967fec0>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1001018,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1001019,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1001020,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001019,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1001021,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1001018,"elapsed":8.9e-05},{"id":1001022,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1001023,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800210620,"value":"#<TestCurrentUserProvider:0x00007f81d4f65178>"}},{"id":1001024,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001023,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f3f518>","object_id":70097800133260}},{"id":1001025,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1001022,"elapsed":8.6e-05},{"id":1001026,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1001017,"elapsed":0.000332},{"id":1001027,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1001014,"elapsed":0.000528},{"id":1001028,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1000911,"elapsed":0.018502,"http_server_response":{"status":200}},{"id":1001029,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097588841400,"value":"#<TestCurrentUserProvider:0x00007f81bbc3d770>"}},{"id":1001030,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1001029,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001031,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1001032,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1001031,"elapsed":4.0e-06},{"id":1001033,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1001034,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1001033,"elapsed":4.0e-06}]}