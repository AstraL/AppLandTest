{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::EmailController #incoming_from_bounced bounced email log entry exists returns an incoming email sent to the reply_by_email_address","app":"Discourse","feature":"Admin::EmailController #incoming_from_bounced","feature_group":"Admin email","recorder":{"name":"rspec"}},"classMap":[{"name":"lib/validators","type":"package","children":[{"name":"ReplyByEmailAddressValidator","type":"class","children":[{"name":"valid_value?","type":"function","location":"lib/validators/reply_by_email_address_validator.rb:8","static":false}]}]},{"name":"app/models","type":"package","children":[{"name":"Site","type":"class","children":[{"name":"clear_anon_cache!","type":"function","location":"app/models/site.rb:129","static":true}]},{"name":"EmailLog","type":"class","children":[{"name":"bounce_key","type":"function","location":"app/models/email_log.rb:69","static":false}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true},{"name":"skip_db?","type":"function","location":"app/models/global_setting.rb:84","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/email","type":"package","children":[{"name":"Email","type":"class","children":[{"name":"Sender","type":"class","children":[{"name":"bounce_address","type":"function","location":"lib/email/sender.rb:370","static":true},{"name":"bounceable_reply_address?","type":"function","location":"lib/email/sender.rb:366","static":true}]}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"EmailController","type":"class","children":[{"name":"incoming_from_bounced","type":"function","location":"app/controllers/admin/email_controller.rb:178","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"app/serializers","type":"package","children":[{"name":"IncomingEmailDetailsSerializer","type":"class","children":[{"name":"error","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:20","static":false},{"name":"include_error_description?","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:29","static":false},{"name":"error_description","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:24","static":false},{"name":"headers","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:33","static":false},{"name":"subject","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:37","static":false},{"name":"body","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:41","static":false}]}]}],"events":[{"id":1012233,"event":"call","defined_class":"ReplyByEmailAddressValidator","method_id":"valid_value?","path":"lib/validators/reply_by_email_address_validator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097797248340,"value":"replies+%{reply_key}@example.com","kind":"req"}],"receiver":{"class":"ReplyByEmailAddressValidator","object_id":70097754897220,"value":"#<ReplyByEmailAddressValidator:0x00007f81cf8f7688>"}},{"id":1012234,"event":"return","defined_class":"ReplyByEmailAddressValidator","method_id":"valid_value?","path":"lib/validators/reply_by_email_address_validator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1012233,"elapsed":2.6e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012235,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":1012236,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":1012235,"elapsed":0.00014,"return_value":{"class":"Integer","value":"13559","object_id":27119}},{"id":1012237,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"email_logs\".* FROM \"email_logs\" WHERE \"email_logs\".\"id\" = 23 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012238,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012237,"elapsed":0.0031},{"id":1012239,"event":"call","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"EmailLog","object_id":70097796400960,"value":"#<EmailLog:0x00007f81d4820e80>"}},{"id":1012240,"event":"return","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parent_id":1012239,"elapsed":3.1e-05,"return_value":{"class":"String","value":"ec1f82c299c9740d91307f0093735371","object_id":70097796460540}},{"id":1012241,"event":"call","defined_class":"Email::Sender","method_id":"bounce_address","path":"lib/email/sender.rb","lineno":370,"static":true,"thread_id":70097708498960,"parameters":[{"name":"bounce_key","class":"String","object_id":70097796460540,"value":"ec1f82c299c9740d91307f0093735371","kind":"req"}],"receiver":{"class":"Class","object_id":70097587325720,"value":"Email::Sender"}},{"id":1012242,"event":"return","defined_class":"Email::Sender","method_id":"bounce_address","path":"lib/email/sender.rb","lineno":370,"static":true,"thread_id":70097708498960,"parent_id":1012241,"elapsed":1.8e-05,"return_value":{"class":"String","value":"replies+verp-ec1f82c299c9740d91307f0093735371@example.com","object_id":70097796421640}},{"id":1012243,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1012244,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012243,"elapsed":0.001126},{"id":1012245,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"incoming_emails\" (\"raw\", \"error\", \"message_id\", \"from_address\", \"to_addresses\", \"subject\", \"created_at\", \"updated_at\", \"is_bounce\") VALUES ('Return-Path: <foo@example.com>\nFrom: Foo <foo@example.com>\nTo: someone@else.com\nSubject: Hello world\nDate: Fri, 15 Jan 2016 00:12:43 +0100\nMessage-ID: <12345@example.com>\nMime-Version: 1.0\nContent-Type: text/plain; charset=UTF-8\nContent-Transfer-Encoding: quoted-printable\n\nThe body contains \"Hello world\" too.\n', 'Email::Receiver::BouncedEmailError', '12345@example.com', 'foo@example.com', 'replies+verp-ec1f82c299c9740d91307f0093735371@example.com', 'Hello world', '2020-05-28 19:01:44.068527', '2020-05-28 19:01:44.068527', TRUE) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1012246,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012245,"elapsed":0.001482},{"id":1012247,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1012248,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012247,"elapsed":0.001255},{"id":1012249,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097730606420,"value":"#<TestCurrentUserProvider:0x00007f81ccaa2aa8>"}},{"id":1012250,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097730639620,"value":"91c00292c1dba8655c8d675d52b67f86","kind":"req"},{"name":"opts","class":"Hash","object_id":70097730637700,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1012251,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097730639620,"value":"91c00292c1dba8655c8d675d52b67f86","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1012252,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1012253,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1012252,"elapsed":1.1e-05,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1012254,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1012251,"elapsed":0.000155,"return_value":{"class":"String","value":"Ut2m/L4n8Drs3pLQCkLLYvWl6aM=","object_id":70097730687180}},{"id":1012255,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'Ut2m/L4n8Drs3pLQCkLLYvWl6aM=' OR\n                          prev_auth_token = 'Ut2m/L4n8Drs3pLQCkLLYvWl6aM=') AND rotated_at > '2020-03-29 19:01:44.085312') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012256,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012255,"elapsed":0.00241},{"id":1012257,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 19:01:44.092146' WHERE \"user_auth_tokens\".\"id\" = 1175 AND \"user_auth_tokens\".\"auth_token\" = 'Ut2m/L4n8Drs3pLQCkLLYvWl6aM='","database_type":"postgres","server_version":110006}},{"id":1012258,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012257,"elapsed":0.001716},{"id":1012259,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097813806100,"value":"{:action=>\"seen token\", :user_auth_token_id=>1175, :user_id=>1349, :auth_token=>\"Ut2m/L4n8Drs3pLQCkL","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1012260,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1012261,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012260,"elapsed":0.001099},{"id":1012262,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 1175, 1349, '127.0.0.1/32', 'Ut2m/L4n8Drs3pLQCkLLYvWl6aM=', '2020-05-28 19:01:44.098504') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1012263,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012262,"elapsed":0.001441},{"id":1012264,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1012265,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012264,"elapsed":0.001315},{"id":1012266,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1012259,"elapsed":0.0166,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81d69515f0>","object_id":70097813801720}},{"id":1012267,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1012250,"elapsed":0.029926,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81cce33898>","object_id":70097732475980}},{"id":1012268,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1349 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012269,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012268,"elapsed":0.001473},{"id":1012270,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097815814360,"value":"#<User:0x00007f81d6d281b0>"}},{"id":1012271,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1012270,"elapsed":2.2e-05},{"id":1012272,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097730606420,"value":"#<TestCurrentUserProvider:0x00007f81ccaa2aa8>"}},{"id":1012273,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1012272,"elapsed":0.001058,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012274,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097815814360,"value":"#<User:0x00007f81d6d281b0>"}},{"id":1012275,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1012274,"elapsed":0.000967},{"id":1012276,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097815830580,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097815814360,"value":"#<User:0x00007f81d6d281b0>"}},{"id":1012277,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 1349","database_type":"postgres","server_version":110006}},{"id":1012278,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012277,"elapsed":0.001442},{"id":1012279,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1012276,"elapsed":0.004392,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012280,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012249,"elapsed":0.043138,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012281,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097730606420,"value":"#<TestCurrentUserProvider:0x00007f81ccaa2aa8>"}},{"id":1012282,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012281,"elapsed":6.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012283,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097815814360,"value":"#<User:0x00007f81d6d281b0>"}},{"id":1012284,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1012283,"elapsed":2.2e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012285,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817147640,"value":"#<TestCurrentUserProvider:0x00007f81d6fb31f0>"}},{"id":1012286,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012285,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012287,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817147640,"value":"#<TestCurrentUserProvider:0x00007f81d6fb31f0>"}},{"id":1012288,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012287,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012289,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097815814360,"value":"#<User:0x00007f81d6d281b0>"}},{"id":1012290,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1012289,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012291,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012292,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012291,"elapsed":7.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1012293,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012294,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012293,"elapsed":1.3e-05},{"id":1012295,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/email/incoming_from_bounced/23.json"},"message":[{"name":"controller","class":"String","value":"admin/email","object_id":70097794412560},{"name":"action","class":"String","value":"incoming_from_bounced","object_id":70097794412620},{"name":"id","class":"String","value":"23","object_id":70097730608120},{"name":"format","class":"String","value":"json","object_id":70097730607900}]},{"id":1012296,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012297,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012298,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012299,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012300,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012299,"elapsed":6.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012301,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1012298,"elapsed":0.000182,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d6fe2608>","object_id":70097817244420}},{"id":1012302,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097817244420,"value":"#<Guardian:0x00007f81d6fe2608>"}},{"id":1012303,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1012302,"elapsed":1.1e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012304,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1012297,"elapsed":0.000503},{"id":1012305,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012306,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012305,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012307,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1349 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012308,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012307,"elapsed":0.001375},{"id":1012309,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012310,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1012309,"elapsed":7.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d6fe2608>","object_id":70097817244420}},{"id":1012311,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097592128540,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097817244420,"value":"#<Guardian:0x00007f81d6fe2608>"}},{"id":1012312,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1012311,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012313,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1012296,"elapsed":0.006997,"return_value":{"class":"Array","value":"[2]","object_id":70097592128540}},{"id":1012314,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012315,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012316,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012315,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012317,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012318,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012317,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012319,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012320,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012319,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012321,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1012314,"elapsed":0.000447,"return_value":{"class":"String","value":"email/incoming_from_bounced","object_id":70097592174560}},{"id":1012322,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012323,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012324,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012323,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012325,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1012322,"elapsed":0.000141},{"id":1012326,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012327,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012328,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012327,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012329,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012330,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012329,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012331,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097815814360,"value":"#<User:0x00007f81d6d281b0>"}},{"id":1012332,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1012331,"elapsed":1.8e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":1012333,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012334,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012333,"elapsed":5.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1012335,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012336,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012335,"elapsed":1.2e-05},{"id":1012337,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012338,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012337,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1012339,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012340,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012339,"elapsed":8.0e-06},{"id":1012341,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1012326,"elapsed":0.000903,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097592271680}},{"id":1012342,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012343,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1012342,"elapsed":1.0e-05},{"id":1012344,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012345,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012346,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012345,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012347,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1012344,"elapsed":0.000122},{"id":1012348,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012349,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012348,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012350,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012351,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012350,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012352,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012353,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012352,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012354,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097793560780,"value":"Admin::EmailController"}},{"id":1012355,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1012354,"elapsed":4.0e-06},{"id":1012356,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012357,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1012356,"elapsed":1.1e-05},{"id":1012358,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012359,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012358,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012360,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012361,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012360,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012362,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097815814360,"value":"#<User:0x00007f81d6d281b0>"}},{"id":1012363,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1012362,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012364,"event":"call","defined_class":"Admin::EmailController","method_id":"incoming_from_bounced","path":"app/controllers/admin/email_controller.rb","lineno":178,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012365,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"email_logs\".* FROM \"email_logs\" WHERE \"email_logs\".\"id\" = 23 AND \"email_logs\".\"bounced\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012366,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012365,"elapsed":0.001459},{"id":1012367,"event":"call","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"EmailLog","object_id":70097593911360,"value":"#<EmailLog:0x00007f81bc5e9080>"}},{"id":1012368,"event":"return","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parent_id":1012367,"elapsed":2.6e-05,"return_value":{"class":"String","value":"ec1f82c299c9740d91307f0093735371","object_id":70097593932240}},{"id":1012369,"event":"call","defined_class":"Email::Sender","method_id":"bounceable_reply_address?","path":"lib/email/sender.rb","lineno":366,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587325720,"value":"Email::Sender"}},{"id":1012370,"event":"return","defined_class":"Email::Sender","method_id":"bounceable_reply_address?","path":"lib/email/sender.rb","lineno":366,"static":true,"thread_id":70097708498960,"parent_id":1012369,"elapsed":1.3e-05,"return_value":{"class":"String","value":"+","object_id":70097593949760}},{"id":1012371,"event":"call","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"EmailLog","object_id":70097593911360,"value":"#<EmailLog:0x00007f81bc5e9080>"}},{"id":1012372,"event":"return","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parent_id":1012371,"elapsed":8.0e-06,"return_value":{"class":"String","value":"ec1f82c299c9740d91307f0093735371","object_id":70097593965800}},{"id":1012373,"event":"call","defined_class":"Email::Sender","method_id":"bounce_address","path":"lib/email/sender.rb","lineno":370,"static":true,"thread_id":70097708498960,"parameters":[{"name":"bounce_key","class":"String","object_id":70097593965800,"value":"ec1f82c299c9740d91307f0093735371","kind":"req"}],"receiver":{"class":"Class","object_id":70097587325720,"value":"Email::Sender"}},{"id":1012374,"event":"return","defined_class":"Email::Sender","method_id":"bounce_address","path":"lib/email/sender.rb","lineno":370,"static":true,"thread_id":70097708498960,"parent_id":1012373,"elapsed":1.1e-05,"return_value":{"class":"String","value":"replies+verp-ec1f82c299c9740d91307f0093735371@example.com","object_id":70097593981700}},{"id":1012375,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"incoming_emails\".* FROM \"incoming_emails\" WHERE \"incoming_emails\".\"to_addresses\" = 'replies+verp-ec1f82c299c9740d91307f0093735371@example.com' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012376,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012375,"elapsed":0.001359},{"id":1012377,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"IncomingEmailDetailsSerializer","object_id":70097587553760,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bb9c8bc0>","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012378,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"error","path":"app/serializers/incoming_email_details_serializer.rb","lineno":20,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097587553760,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bb9c8bc0>"}},{"id":1012379,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"error","path":"app/serializers/incoming_email_details_serializer.rb","lineno":20,"static":false,"thread_id":70097708498960,"parent_id":1012378,"elapsed":7.0e-06,"return_value":{"class":"String","value":"Email::Receiver::BouncedEmailError","object_id":70097587553660}},{"id":1012380,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"include_error_description?","path":"app/serializers/incoming_email_details_serializer.rb","lineno":29,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097587553760,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bb9c8bc0>"}},{"id":1012381,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"include_error_description?","path":"app/serializers/incoming_email_details_serializer.rb","lineno":29,"static":false,"thread_id":70097708498960,"parent_id":1012380,"elapsed":5.0e-06,"return_value":{"class":"String","value":"Email::Receiver::","object_id":70097587620240}},{"id":1012382,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"error_description","path":"app/serializers/incoming_email_details_serializer.rb","lineno":24,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097587553760,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bb9c8bc0>"}},{"id":1012383,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012384,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012383,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1012385,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012386,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012385,"elapsed":1.0e-05},{"id":1012387,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1012388,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1012387,"elapsed":2.0e-06},{"id":1012389,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1012390,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1012389,"elapsed":3.0e-06},{"id":1012391,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"error_description","path":"app/serializers/incoming_email_details_serializer.rb","lineno":24,"static":false,"thread_id":70097708498960,"parent_id":1012382,"elapsed":0.000409,"return_value":{"class":"String","value":"Email is a bounced email report.","object_id":70097621398740}},{"id":1012392,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"headers","path":"app/serializers/incoming_email_details_serializer.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097587553760,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bb9c8bc0>"}},{"id":1012393,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"headers","path":"app/serializers/incoming_email_details_serializer.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1012392,"elapsed":0.000544,"return_value":{"class":"String","value":"Return-Path: <foo@example.com>\r\nDate: Fri, 15 Jan 2016 00:12:43 +0100\r\nFrom: Foo <foo@example.com>\r\n","object_id":70097587654060}},{"id":1012394,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"subject","path":"app/serializers/incoming_email_details_serializer.rb","lineno":37,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097587553760,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bb9c8bc0>"}},{"id":1012395,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"subject","path":"app/serializers/incoming_email_details_serializer.rb","lineno":37,"static":false,"thread_id":70097708498960,"parent_id":1012394,"elapsed":2.5e-05,"return_value":{"class":"String","value":"Hello world","object_id":70097797648920}},{"id":1012396,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"body","path":"app/serializers/incoming_email_details_serializer.rb","lineno":41,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097587553760,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bb9c8bc0>"}},{"id":1012397,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"body","path":"app/serializers/incoming_email_details_serializer.rb","lineno":41,"static":false,"thread_id":70097708498960,"parent_id":1012396,"elapsed":0.000166,"return_value":{"class":"String","value":"The body contains \"Hello world\" too.","object_id":70097797749040}},{"id":1012398,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1012377,"elapsed":0.002132,"return_value":{"class":"String","value":"{\"error\":\"Email::Receiver::BouncedEmailError\",\"error_description\":\"Email is a bounced email report.\"","object_id":70097797747540}},{"id":1012399,"event":"return","defined_class":"Admin::EmailController","method_id":"incoming_from_bounced","path":"app/controllers/admin/email_controller.rb","lineno":178,"static":false,"thread_id":70097708498960,"parent_id":1012364,"elapsed":0.014291,"return_value":{"class":"String","value":"{\"error\":\"Email::Receiver::BouncedEmailError\",\"error_description\":\"Email is a bounced email report.\"","object_id":70097797747540}},{"id":1012400,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012401,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1012400,"elapsed":9.0e-06},{"id":1012402,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012403,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1012402,"elapsed":7.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097797765960}},{"id":1012404,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097817159280,"value":"#<Admin::EmailController:0x00007f81d6fb8ce0>"}},{"id":1012405,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012406,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012405,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012407,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097815814360,"value":"#<User:0x00007f81d6d281b0>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097803847680,"value":"#<ActionDispatch::Request::Session:0x00007f81d5655000>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097592129200,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81bc282d60>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012408,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012409,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012410,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012409,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012411,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1012408,"elapsed":0.000119},{"id":1012412,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012413,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097817223960,"value":"#<TestCurrentUserProvider:0x00007f81d6fd8630>"}},{"id":1012414,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012413,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6d281b0>","object_id":70097815814360}},{"id":1012415,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1012412,"elapsed":0.000116},{"id":1012416,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1012407,"elapsed":0.000445},{"id":1012417,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1012404,"elapsed":0.000721},{"id":1012418,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1012295,"elapsed":0.027368,"http_server_response":{"status":200}},{"id":1012419,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797788100,"value":"#<TestCurrentUserProvider:0x00007f81d4ac6388>"}},{"id":1012420,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1012419,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012421,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1012422,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1012421,"elapsed":8.0e-06},{"id":1012423,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1012424,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1012423,"elapsed":4.0e-06}]}