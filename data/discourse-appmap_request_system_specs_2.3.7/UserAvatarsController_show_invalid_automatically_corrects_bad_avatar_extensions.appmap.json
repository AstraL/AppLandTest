{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"UserAvatarsController show invalid automatically corrects bad avatar extensions","app":"Discourse","feature":"UserAvatarsController show","feature_group":"User avatars","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","type":"class","children":[{"name":"Upload","type":"function","location":"app/models/site_setting.rb:172","static":true}]},{"name":"SiteSetting","type":"class","children":[{"name":"Upload","type":"class","children":[{"name":"enable_s3_uploads","type":"function","location":"app/models/site_setting.rb:146","static":true}]}]},{"name":"GlobalSetting","type":"class","children":[{"name":"use_s3?","type":"function","location":"app/models/global_setting.rb:96","static":true}]},{"name":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","type":"class","children":[{"name":"generate_digest","type":"function","location":"app/models/upload.rb:264","static":true}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"Site","type":"class","children":[{"name":"clear_anon_cache!","type":"function","location":"app/models/site.rb:129","static":true}]},{"name":"User","type":"class","children":[{"name":"password=","type":"function","location":"app/models/user.rb:618","static":false},{"name":"email=","type":"function","location":"app/models/user.rb:1198","static":false},{"name":"should_validate_email_address?","type":"function","location":"app/models/user.rb:432","static":false},{"name":"username_format_validator","type":"function","location":"app/models/user.rb:924","static":false},{"name":"confirm_password?","type":"function","location":"app/models/user.rb:650","static":false},{"name":"password_validator","type":"function","location":"app/models/user.rb:646","static":false},{"name":"password_validation_required?","type":"function","location":"app/models/user.rb:638","static":false},{"name":"password_required?","type":"function","location":"app/models/user.rb:634","static":false},{"name":"email","type":"function","location":"app/models/user.rb:1194","static":false},{"name":"create_user_profile","type":"function","location":"app/models/user.rb:1139","static":false},{"name":"set_random_avatar","type":"function","location":"app/models/user.rb:1143","static":false},{"name":"refresh_avatar","type":"function","location":"app/models/user.rb:1053","static":false}]},{"name":"UsernameValidator","type":"class","children":[{"name":"perform_validation","type":"function","location":"app/models/username_validator.rb:11","static":true},{"name":"valid_format?","type":"function","location":"app/models/username_validator.rb:30","static":false},{"name":"invalid_char_pattern","type":"function","location":"app/models/username_validator.rb:132","static":true},{"name":"char_whitelist_exists?","type":"function","location":"app/models/username_validator.rb:136","static":true}]},{"name":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","type":"class","children":[{"name":"username_length","type":"function","location":"app/models/user.rb:241","static":true},{"name":"normalize_username","type":"function","location":"app/models/user.rb:245","static":true},{"name":"max_password_length","type":"function","location":"app/models/user.rb:237","static":true}]},{"name":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"should_block?","type":"function","location":"app/models/screened_ip_address.rb:74","static":true},{"name":"exists_for_ip_address_and_action?","type":"function","location":"app/models/screened_ip_address.rb:82","static":true},{"name":"match_for_ip_address","type":"function","location":"app/models/screened_ip_address.rb:64","static":true}]},{"name":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","type":"class","children":[{"name":"should_block?","type":"function","location":"app/models/screened_email.rb:35","static":true},{"name":"canonical","type":"function","location":"app/models/screened_email.rb:21","static":true}]},{"name":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"generate_token","type":"function","location":"app/models/email_token.rb:36","static":true},{"name":"token_length","type":"function","location":"app/models/email_token.rb:20","static":true}]},{"name":"UserOption","type":"class","children":[{"name":"set_defaults","type":"function","location":"app/models/user_option.rb:47","static":false},{"name":"text_size=","type":"function","location":"app/models/user_option.rb:172","static":false},{"name":"title_count_mode=","type":"function","location":"app/models/user_option.rb:180","static":false}]},{"name":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","type":"class","children":[{"name":"text_sizes","type":"function","location":"app/models/user_option.rb:30","static":true},{"name":"title_count_modes","type":"function","location":"app/models/user_option.rb:34","static":true}]},{"name":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","type":"class","children":[{"name":"notification_levels","type":"function","location":"app/models/topic_user.rb:29","static":true}]},{"name":"HasCustomFields","type":"class","children":[{"name":"save_custom_fields","type":"function","location":"app/models/concerns/has_custom_fields.rb:204","static":false},{"name":"custom_fields_clean?","type":"function","location":"app/models/concerns/has_custom_fields.rb:185","static":false}]},{"name":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"enqueue_object_hooks","type":"function","location":"app/models/web_hook.rb:60","static":true},{"name":"active_web_hooks","type":"function","location":"app/models/web_hook.rb:45","static":true}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"UserAvatar","type":"class","children":[{"name":"contains_upload?","type":"function","location":"app/models/user_avatar.rb:16","static":false}]},{"name":"Upload","type":"class","children":[{"name":"get_optimized_image","type":"function","location":"app/models/upload.rb:73","static":false},{"name":"fix_image_extension","type":"function","location":"app/models/upload.rb:92","static":false}]},{"name":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","type":"class","children":[{"name":"create_for","type":"function","location":"app/models/optimized_image.rb:30","static":true},{"name":"lock","type":"function","location":"app/models/optimized_image.rb:11","static":true},{"name":"resize","type":"function","location":"app/models/optimized_image.rb:311","static":true},{"name":"optimize","type":"function","location":"app/models/optimized_image.rb:324","static":true},{"name":"resize_instructions","type":"function","location":"app/models/optimized_image.rb:210","static":true},{"name":"ensure_safe_paths!","type":"function","location":"app/models/optimized_image.rb:179","static":true},{"name":"safe_path?","type":"function","location":"app/models/optimized_image.rb:171","static":true},{"name":"prepend_decoder!","type":"function","location":"app/models/optimized_image.rb:187","static":true},{"name":"thumbnail_or_resize","type":"function","location":"app/models/optimized_image.rb:206","static":true},{"name":"convert_with","type":"function","location":"app/models/optimized_image.rb:337","static":true}]},{"name":"OptimizedImage","type":"class","children":[{"name":"local?","type":"function","location":"app/models/optimized_image.rb:141","static":false}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/validators","type":"package","children":[{"name":"UploadValidator","type":"class","children":[{"name":"validate","type":"function","location":"lib/validators/upload_validator.rb:9","static":false},{"name":"is_authorized?","type":"function","location":"lib/validators/upload_validator.rb:47","static":false},{"name":"authorized_image_extension","type":"function","location":"lib/validators/upload_validator.rb:51","static":false},{"name":"maximum_image_file_size","type":"function","location":"lib/validators/upload_validator.rb:55","static":false}]},{"name":"RegexSettingValidation","type":"class","children":[{"name":"initialize_regex_opts","type":"function","location":"lib/validators/regex_setting_validation.rb:5","static":false},{"name":"regex_match?","type":"function","location":"lib/validators/regex_setting_validation.rb:10","static":false}]},{"name":"StringSettingValidator","type":"class","children":[{"name":"valid_value?","type":"function","location":"lib/validators/string_setting_validator.rb:12","static":false}]},{"name":"PasswordValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/password_validator.rb:5","static":false}]},{"name":"UserFullNameValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/user_full_name_validator.rb:5","static":false}]},{"name":"AllowedIpAddressValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/allowed_ip_address_validator.rb:5","static":false}]},{"name":"EmailValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/email_validator.rb:5","static":false},{"name":"allowed?","type":"function","location":"lib/validators/email_validator.rb:15","static":true},{"name":"email_in_restriction_setting?","type":"function","location":"lib/validators/email_validator.rb:33","static":true}]},{"name":"TimezoneValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/timezone_validator.rb:14","static":false}]}]},{"name":"app/services","type":"package","children":[{"name":"BadgeGranter","type":"class","children":[{"name":"queue_badge_grant","type":"function","location":"app/services/badge_granter.rb:126","static":true}]},{"name":"TrackedTopicsUpdater","type":"class","children":[{"name":"call","type":"function","location":"app/services/tracked_topics_updater.rb:10","static":false}]},{"name":"SearchIndexer","type":"class","children":[{"name":"index","type":"function","location":"app/services/search_indexer.rb:126","static":true}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"immutable_for","type":"function","location":"app/controllers/application_controller.rb:79","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"UserAvatarsController","type":"class","children":[{"name":"show","type":"function","location":"app/controllers/user_avatars_controller.rb:77","static":false}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]}],"events":[{"id":1173411,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1173412,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":1173411,"elapsed":9.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":1173413,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":1173414,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1173415,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":1173414,"elapsed":4.0e-06},{"id":1173416,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":1173413,"elapsed":0.000115},{"id":1173417,"event":"call","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"generate_digest","path":"app/models/upload.rb","lineno":264,"static":true,"thread_id":70097708498960,"parameters":[{"name":"path","class":"File","object_id":70097621281760,"value":"#<File:0x00007f81bfa1d7c0>","kind":"req"}],"receiver":{"class":"Class","object_id":70097756332220,"value":"Upload"}},{"id":1173418,"event":"return","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"generate_digest","path":"app/models/upload.rb","lineno":264,"static":true,"thread_id":70097708498960,"parent_id":1173417,"elapsed":6.1e-05,"return_value":{"class":"String","value":"8eec1e99191f08577a00374dca1c5bc0e0666033","object_id":70097621315460}},{"id":1173419,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"uploads\".* FROM \"uploads\" WHERE \"uploads\".\"sha1\" = '8eec1e99191f08577a00374dca1c5bc0e0666033' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173420,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173419,"elapsed":0.000918},{"id":1173421,"event":"call","defined_class":"UploadValidator","method_id":"validate","path":"lib/validators/upload_validator.rb","lineno":9,"static":false,"thread_id":70097708498960,"parameters":[{"name":"upload","class":"Upload","object_id":70097714646180,"value":"","kind":"req"}],"receiver":{"class":"UploadValidator","object_id":70097757024380,"value":"#<UploadValidator:0x00007f81cfd060f8>"}},{"id":1173422,"event":"call","defined_class":"UploadValidator","method_id":"is_authorized?","path":"lib/validators/upload_validator.rb","lineno":47,"static":false,"thread_id":70097708498960,"parameters":[{"name":"upload","class":"Upload","object_id":70097714646180,"value":"","kind":"req"},{"name":"extension","class":"String","object_id":70097714927000,"value":"png","kind":"req"}],"receiver":{"class":"UploadValidator","object_id":70097757024380,"value":"#<UploadValidator:0x00007f81cfd060f8>"}},{"id":1173423,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173424,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173423,"elapsed":0.001335},{"id":1173425,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = -1 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173426,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173425,"elapsed":0.001546},{"id":1173427,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097793905520,"value":"#<User:0x00007f81d435e6e0>"}},{"id":1173428,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1173427,"elapsed":1.7e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173429,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097793905520,"value":"#<User:0x00007f81d435e6e0>"}},{"id":1173430,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1173429,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173431,"event":"return","defined_class":"UploadValidator","method_id":"is_authorized?","path":"lib/validators/upload_validator.rb","lineno":47,"static":false,"thread_id":70097708498960,"parent_id":1173422,"elapsed":0.012948,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173432,"event":"call","defined_class":"UploadValidator","method_id":"authorized_image_extension","path":"lib/validators/upload_validator.rb","lineno":51,"static":false,"thread_id":70097708498960,"parameters":[{"name":"upload","class":"Upload","object_id":70097714646180,"value":"","kind":"req"},{"name":"extension","class":"String","object_id":70097714927000,"value":"png","kind":"req"}],"receiver":{"class":"UploadValidator","object_id":70097757024380,"value":"#<UploadValidator:0x00007f81cfd060f8>"}},{"id":1173433,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097793905520,"value":"#<User:0x00007f81d435e6e0>"}},{"id":1173434,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1173433,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173435,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097793905520,"value":"#<User:0x00007f81d435e6e0>"}},{"id":1173436,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1173435,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173437,"event":"return","defined_class":"UploadValidator","method_id":"authorized_image_extension","path":"lib/validators/upload_validator.rb","lineno":51,"static":false,"thread_id":70097708498960,"parent_id":1173432,"elapsed":0.00031,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173438,"event":"call","defined_class":"UploadValidator","method_id":"maximum_image_file_size","path":"lib/validators/upload_validator.rb","lineno":55,"static":false,"thread_id":70097708498960,"parameters":[{"name":"upload","class":"Upload","object_id":70097714646180,"value":"","kind":"req"}],"receiver":{"class":"UploadValidator","object_id":70097757024380,"value":"#<UploadValidator:0x00007f81cfd060f8>"}},{"id":1173439,"event":"return","defined_class":"UploadValidator","method_id":"maximum_image_file_size","path":"lib/validators/upload_validator.rb","lineno":55,"static":false,"thread_id":70097708498960,"parent_id":1173438,"elapsed":1.9e-05},{"id":1173440,"event":"return","defined_class":"UploadValidator","method_id":"validate","path":"lib/validators/upload_validator.rb","lineno":9,"static":false,"thread_id":70097708498960,"parent_id":1173421,"elapsed":0.013704},{"id":1173441,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"uploads\" (\"user_id\", \"original_filename\", \"filesize\", \"width\", \"height\", \"url\", \"created_at\", \"updated_at\", \"sha1\", \"extension\", \"thumbnail_width\", \"thumbnail_height\") VALUES (-1, 'test.png', 113, 5, 1, '', '2020-05-28 19:04:10.907004', '2020-05-28 19:04:10.907004', '8eec1e99191f08577a00374dca1c5bc0e0666033', 'png', 5, 1) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1173442,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173441,"elapsed":0.001228},{"id":1173443,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173444,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173443,"elapsed":0.000791},{"id":1173445,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1173446,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":1173445,"elapsed":7.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":1173447,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":1173448,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1173449,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":1173448,"elapsed":5.0e-06},{"id":1173450,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":1173447,"elapsed":0.000139},{"id":1173451,"event":"call","defined_class":"UploadValidator","method_id":"validate","path":"lib/validators/upload_validator.rb","lineno":9,"static":false,"thread_id":70097708498960,"parameters":[{"name":"upload","class":"Upload","object_id":70097714646180,"value":"/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png","kind":"req"}],"receiver":{"class":"UploadValidator","object_id":70097757024380,"value":"#<UploadValidator:0x00007f81cfd060f8>"}},{"id":1173452,"event":"call","defined_class":"UploadValidator","method_id":"is_authorized?","path":"lib/validators/upload_validator.rb","lineno":47,"static":false,"thread_id":70097708498960,"parameters":[{"name":"upload","class":"Upload","object_id":70097714646180,"value":"/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png","kind":"req"},{"name":"extension","class":"String","object_id":70097803381460,"value":"png","kind":"req"}],"receiver":{"class":"UploadValidator","object_id":70097757024380,"value":"#<UploadValidator:0x00007f81cfd060f8>"}},{"id":1173453,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097793905520,"value":"#<User:0x00007f81d435e6e0>"}},{"id":1173454,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1173453,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173455,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097793905520,"value":"#<User:0x00007f81d435e6e0>"}},{"id":1173456,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1173455,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173457,"event":"return","defined_class":"UploadValidator","method_id":"is_authorized?","path":"lib/validators/upload_validator.rb","lineno":47,"static":false,"thread_id":70097708498960,"parent_id":1173452,"elapsed":0.000332,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173458,"event":"call","defined_class":"UploadValidator","method_id":"authorized_image_extension","path":"lib/validators/upload_validator.rb","lineno":51,"static":false,"thread_id":70097708498960,"parameters":[{"name":"upload","class":"Upload","object_id":70097714646180,"value":"/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png","kind":"req"},{"name":"extension","class":"String","object_id":70097803381460,"value":"png","kind":"req"}],"receiver":{"class":"UploadValidator","object_id":70097757024380,"value":"#<UploadValidator:0x00007f81cfd060f8>"}},{"id":1173459,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097793905520,"value":"#<User:0x00007f81d435e6e0>"}},{"id":1173460,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1173459,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173461,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097793905520,"value":"#<User:0x00007f81d435e6e0>"}},{"id":1173462,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1173461,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173463,"event":"return","defined_class":"UploadValidator","method_id":"authorized_image_extension","path":"lib/validators/upload_validator.rb","lineno":51,"static":false,"thread_id":70097708498960,"parent_id":1173458,"elapsed":0.0003,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173464,"event":"call","defined_class":"UploadValidator","method_id":"maximum_image_file_size","path":"lib/validators/upload_validator.rb","lineno":55,"static":false,"thread_id":70097708498960,"parameters":[{"name":"upload","class":"Upload","object_id":70097714646180,"value":"/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png","kind":"req"}],"receiver":{"class":"UploadValidator","object_id":70097757024380,"value":"#<UploadValidator:0x00007f81cfd060f8>"}},{"id":1173465,"event":"return","defined_class":"UploadValidator","method_id":"maximum_image_file_size","path":"lib/validators/upload_validator.rb","lineno":55,"static":false,"thread_id":70097708498960,"parent_id":1173464,"elapsed":1.7e-05},{"id":1173466,"event":"return","defined_class":"UploadValidator","method_id":"validate","path":"lib/validators/upload_validator.rb","lineno":9,"static":false,"thread_id":70097708498960,"parent_id":1173451,"elapsed":0.001088},{"id":1173467,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173468,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173467,"elapsed":0.000929},{"id":1173469,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"uploads\" SET \"url\" = '/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png', \"updated_at\" = '2020-05-28 19:04:10.918110' WHERE \"uploads\".\"id\" = 35","database_type":"postgres","server_version":110006}},{"id":1173470,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173469,"elapsed":0.001194},{"id":1173471,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173472,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173471,"elapsed":0.000856},{"id":1173473,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_uploads\".* FROM \"user_uploads\" WHERE \"user_uploads\".\"user_id\" = -1 AND \"user_uploads\".\"upload_id\" = 35 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173474,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173473,"elapsed":0.001356},{"id":1173475,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173476,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173475,"elapsed":0.00095},{"id":1173477,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_uploads\" (\"upload_id\", \"user_id\", \"created_at\") VALUES (35, -1, '2020-05-28 19:04:10.934831') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1173478,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173477,"elapsed":0.000978},{"id":1173479,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173480,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173479,"elapsed":0.000857},{"id":1173481,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"uploads\" SET \"original_filename\" = 'bob.jpg', \"extension\" = 'jpg', \"url\" = '/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png.jpg' WHERE \"uploads\".\"id\" = 35","database_type":"postgres","server_version":110006}},{"id":1173482,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173481,"elapsed":0.001031},{"id":1173483,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1173484,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":1173483,"elapsed":6.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":1173485,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":1173486,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1173487,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":1173486,"elapsed":4.0e-06},{"id":1173488,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":1173485,"elapsed":0.000114},{"id":1173489,"event":"call","defined_class":"RegexSettingValidation","method_id":"initialize_regex_opts","path":"lib/validators/regex_setting_validation.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"opts","class":"Hash","object_id":70097703352260,"value":"{:name=>:avatar_sizes}","kind":"opt"}],"receiver":{"class":"StringSettingValidator","object_id":70097816357260,"value":"#<StringSettingValidator:0x00007f81d6e31318>"}},{"id":1173490,"event":"return","defined_class":"RegexSettingValidation","method_id":"initialize_regex_opts","path":"lib/validators/regex_setting_validation.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1173489,"elapsed":5.0e-06,"return_value":{"class":"String","value":"site_settings.errors.regex_mismatch","object_id":70097724330800}},{"id":1173491,"event":"call","defined_class":"StringSettingValidator","method_id":"valid_value?","path":"lib/validators/string_setting_validator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097732357140,"value":"50","kind":"req"}],"receiver":{"class":"StringSettingValidator","object_id":70097816357260,"value":"#<StringSettingValidator:0x00007f81d6e31318>"}},{"id":1173492,"event":"call","defined_class":"RegexSettingValidation","method_id":"regex_match?","path":"lib/validators/regex_setting_validation.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097732357140,"value":"50","kind":"req"}],"receiver":{"class":"StringSettingValidator","object_id":70097816357260,"value":"#<StringSettingValidator:0x00007f81d6e31318>"}},{"id":1173493,"event":"return","defined_class":"RegexSettingValidation","method_id":"regex_match?","path":"lib/validators/regex_setting_validation.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":1173492,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173494,"event":"return","defined_class":"StringSettingValidator","method_id":"valid_value?","path":"lib/validators/string_setting_validator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":1173491,"elapsed":0.000116,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173495,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":1173496,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":1173495,"elapsed":0.0001,"return_value":{"class":"Integer","value":"15623","object_id":31247}},{"id":1173497,"event":"call","defined_class":"User","method_id":"password=","path":"app/models/user.rb","lineno":618,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097783082600,"value":"myawesomepassword","kind":"req"}],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173498,"event":"return","defined_class":"User","method_id":"password=","path":"app/models/user.rb","lineno":618,"static":false,"thread_id":70097708498960,"parent_id":1173497,"elapsed":6.0e-06,"return_value":{"class":"String","value":"myawesomepassword","object_id":70097783082600}},{"id":1173499,"event":"call","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_email","class":"String","object_id":70097816423980,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173500,"event":"return","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parent_id":1173499,"elapsed":0.000174,"return_value":{"class":"UserEmail","value":"#<UserEmail:0x00007f81d6e69b78>","object_id":70097816473020}},{"id":1173501,"event":"call","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173502,"event":"return","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parent_id":1173501,"elapsed":1.3e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173503,"event":"call","defined_class":"User","method_id":"username_format_validator","path":"app/models/user.rb","lineno":924,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173504,"event":"call","defined_class":"UsernameValidator","method_id":"perform_validation","path":"app/models/username_validator.rb","lineno":11,"static":true,"thread_id":70097708498960,"parameters":[{"name":"object","class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>","kind":"req"},{"name":"field_name","class":"String","object_id":70097713120640,"value":"username","kind":"req"}],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":1173505,"event":"call","defined_class":"UsernameValidator","method_id":"valid_format?","path":"app/models/username_validator.rb","lineno":30,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UsernameValidator","object_id":70097816569720,"value":"#<UsernameValidator:0x00007f81d6e98ef0>"}},{"id":1173506,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1173507,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parent_id":1173506,"elapsed":1.2e-05,"return_value":{"class":"Range","value":"3..20","object_id":70097816587260}},{"id":1173508,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1173509,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parent_id":1173508,"elapsed":6.0e-06,"return_value":{"class":"Range","value":"3..20","object_id":70097816606080}},{"id":1173510,"event":"call","defined_class":"UsernameValidator","method_id":"invalid_char_pattern","path":"app/models/username_validator.rb","lineno":132,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":1173511,"event":"return","defined_class":"UsernameValidator","method_id":"invalid_char_pattern","path":"app/models/username_validator.rb","lineno":132,"static":true,"thread_id":70097708498960,"parent_id":1173510,"elapsed":5.0e-06,"return_value":{"class":"Regexp","value":"(?-mix:[^\\w.-])","object_id":70097569557580}},{"id":1173512,"event":"call","defined_class":"UsernameValidator","method_id":"char_whitelist_exists?","path":"app/models/username_validator.rb","lineno":136,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":1173513,"event":"return","defined_class":"UsernameValidator","method_id":"char_whitelist_exists?","path":"app/models/username_validator.rb","lineno":136,"static":true,"thread_id":70097708498960,"parent_id":1173512,"elapsed":5.0e-06},{"id":1173514,"event":"return","defined_class":"UsernameValidator","method_id":"valid_format?","path":"app/models/username_validator.rb","lineno":30,"static":false,"thread_id":70097708498960,"parent_id":1173505,"elapsed":0.000483,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173515,"event":"return","defined_class":"UsernameValidator","method_id":"perform_validation","path":"app/models/username_validator.rb","lineno":11,"static":true,"thread_id":70097708498960,"parent_id":1173504,"elapsed":0.000609},{"id":1173516,"event":"return","defined_class":"User","method_id":"username_format_validator","path":"app/models/user.rb","lineno":924,"static":false,"thread_id":70097708498960,"parent_id":1173503,"elapsed":0.000732},{"id":1173517,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"normalize_username","path":"app/models/user.rb","lineno":245,"static":true,"thread_id":70097708498960,"parameters":[{"name":"username","class":"String","object_id":70097816555800,"value":"bruce1405","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1173518,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"normalize_username","path":"app/models/user.rb","lineno":245,"static":true,"thread_id":70097708498960,"parent_id":1173517,"elapsed":1.0e-05,"return_value":{"class":"String","value":"bruce1405","object_id":70097816633640}},{"id":1173519,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173520,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173519,"elapsed":0.000803},{"id":1173521,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097816555800,"value":"bruce1405","kind":"req"}],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173522,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":1173521,"elapsed":1.5e-05},{"id":1173523,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097591423360,"value":"bruce1405","kind":"req"}],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173524,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":1173523,"elapsed":6.0e-06},{"id":1173525,"event":"call","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173526,"event":"call","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":727708,"value":"password","kind":"req"},{"name":"value","class":"String","object_id":70097783082600,"value":"myawesomepassword","kind":"req"}],"receiver":{"class":"PasswordValidator","object_id":70097816228200,"value":"#<PasswordValidator:0x00007f81d6df22d0>"}},{"id":1173527,"event":"call","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173528,"event":"call","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173529,"event":"return","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parent_id":1173528,"elapsed":3.0e-06},{"id":1173530,"event":"return","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parent_id":1173527,"elapsed":0.000106,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173531,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173532,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1173531,"elapsed":1.6e-05,"return_value":{"class":"String","value":"bruce1367@wayne.com","object_id":70097591454880}},{"id":1173533,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173534,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1173533,"elapsed":1.1e-05,"return_value":{"class":"String","value":"bruce1367@wayne.com","object_id":70097591454880}},{"id":1173535,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097783082600,"value":"myawesomepassword","kind":"req"}],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173536,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":1173535,"elapsed":2.9e-05},{"id":1173537,"event":"return","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1173526,"elapsed":0.002567},{"id":1173538,"event":"return","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parent_id":1173525,"elapsed":0.002743},{"id":1173539,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1173540,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parent_id":1173539,"elapsed":5.0e-06,"return_value":{"class":"Integer","value":"200","object_id":401}},{"id":1173541,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097591507400,"value":"Bruce Wayne","kind":"req"}],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173542,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":1173541,"elapsed":7.0e-06},{"id":1173543,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097591502200,"value":"bruce wayne","kind":"req"}],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173544,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":1173543,"elapsed":6.0e-06},{"id":1173545,"event":"call","defined_class":"UserFullNameValidator","method_id":"validate_each","path":"lib/validators/user_full_name_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":88028,"value":"name","kind":"req"},{"name":"value","class":"String","object_id":70097591457700,"value":"Bruce Wayne","kind":"req"}],"receiver":{"class":"UserFullNameValidator","object_id":70097719440680,"value":"#<UserFullNameValidator:0x00007f81cb556a50>"}},{"id":1173546,"event":"return","defined_class":"UserFullNameValidator","method_id":"validate_each","path":"lib/validators/user_full_name_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1173545,"elapsed":8.0e-06},{"id":1173547,"event":"call","defined_class":"AllowedIpAddressValidator","method_id":"validate_each","path":"lib/validators/allowed_ip_address_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097591557720,"value":"99.232.23.8","kind":"req"}],"receiver":{"class":"AllowedIpAddressValidator","object_id":70097719544680,"value":"#<AllowedIpAddressValidator:0x00007f81cb5896d0>"}},{"id":1173548,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"should_block?","path":"app/models/screened_ip_address.rb","lineno":74,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097591557720,"value":"99.232.23.8","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1173549,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"exists_for_ip_address_and_action?","path":"app/models/screened_ip_address.rb","lineno":82,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097591557720,"value":"99.232.23.8","kind":"req"},{"name":"action_type","class":"Integer","object_id":3,"value":"1","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1173550,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097591557720,"value":"99.232.23.8","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1173551,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('99.232.23.8' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173552,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173551,"elapsed":0.00111},{"id":1173553,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1173550,"elapsed":0.004713},{"id":1173554,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"exists_for_ip_address_and_action?","path":"app/models/screened_ip_address.rb","lineno":82,"static":true,"thread_id":70097708498960,"parent_id":1173549,"elapsed":0.004875},{"id":1173555,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"should_block?","path":"app/models/screened_ip_address.rb","lineno":74,"static":true,"thread_id":70097708498960,"parent_id":1173548,"elapsed":0.005023},{"id":1173556,"event":"return","defined_class":"AllowedIpAddressValidator","method_id":"validate_each","path":"lib/validators/allowed_ip_address_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1173547,"elapsed":0.005162},{"id":1173557,"event":"call","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserEmail","object_id":70097816473020,"value":"#<UserEmail:0x00007f81d6e69b78>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":735708,"value":"email","kind":"req"},{"name":"value","class":"String","object_id":70097593028660,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"EmailValidator","object_id":70097803750180,"value":"#<EmailValidator:0x00007f81d5625648>"}},{"id":1173558,"event":"call","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097593028660,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1173559,"event":"call","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[{"name":"setting","class":"String","object_id":70097723515680,"value":"mailinator.com","kind":"req"},{"name":"value","class":"String","object_id":70097593028660,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1173560,"event":"return","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":1173559,"elapsed":3.2e-05},{"id":1173561,"event":"return","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parent_id":1173558,"elapsed":0.000151,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173562,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097593028660,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":1173563,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097593028660,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":1173564,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parent_id":1173563,"elapsed":1.0e-05,"return_value":{"class":"String","value":"bruce1367@wayne.com","object_id":70097593095620}},{"id":1173565,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_emails\".* FROM \"screened_emails\" ORDER BY \"screened_emails\".\"created_at\" DESC LIMIT 100","database_type":"postgres","server_version":110006}},{"id":1173566,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173565,"elapsed":0.001038},{"id":1173567,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":1173562,"elapsed":0.004952},{"id":1173568,"event":"return","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1173557,"elapsed":0.005369},{"id":1173569,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE (lower(email) = 'bruce1367@wayne.com') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173570,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173569,"elapsed":0.001021},{"id":1173571,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1173572,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parent_id":1173571,"elapsed":6.0e-06,"return_value":{"class":"Integer","value":"200","object_id":401}},{"id":1173573,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"users\" (\"username\", \"created_at\", \"updated_at\", \"name\", \"password_hash\", \"salt\", \"active\", \"username_lower\", \"trust_level\", \"ip_address\") VALUES ('bruce1405', '2020-05-28 19:04:10.984280', '2020-05-28 19:04:10.984280', 'Bruce Wayne', '76e9a5d25eb12f4e6632e072d541af38669de54d648dc05d9ce27eaf20549930', '40d9c37fdf15bdecc556aa94198a69d2', TRUE, 'bruce1405', 1, '99.232.23.8/32') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1173574,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173573,"elapsed":0.001283},{"id":1173575,"event":"call","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserEmail","object_id":70097816473020,"value":"#<UserEmail:0x00007f81d6e69b78>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":735708,"value":"email","kind":"req"},{"name":"value","class":"String","object_id":70097567176440,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"EmailValidator","object_id":70097803750180,"value":"#<EmailValidator:0x00007f81d5625648>"}},{"id":1173576,"event":"call","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097567176440,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1173577,"event":"call","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[{"name":"setting","class":"String","object_id":70097723515680,"value":"mailinator.com","kind":"req"},{"name":"value","class":"String","object_id":70097567176440,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1173578,"event":"return","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":1173577,"elapsed":6.5e-05},{"id":1173579,"event":"return","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parent_id":1173576,"elapsed":0.00022,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173580,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097567176440,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":1173581,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097567176440,"value":"bruce1367@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":1173582,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parent_id":1173581,"elapsed":1.2e-05,"return_value":{"class":"String","value":"bruce1367@wayne.com","object_id":70097567227400}},{"id":1173583,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_emails\".* FROM \"screened_emails\" ORDER BY \"screened_emails\".\"created_at\" DESC LIMIT 100","database_type":"postgres","server_version":110006}},{"id":1173584,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173583,"elapsed":0.001077},{"id":1173585,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":1173580,"elapsed":0.005566},{"id":1173586,"event":"return","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1173575,"elapsed":0.006104},{"id":1173587,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE \"user_emails\".\"primary\" = TRUE AND \"user_emails\".\"user_id\" = 1526 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173588,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173587,"elapsed":0.002225},{"id":1173589,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE (lower(email) = 'bruce1367@wayne.com') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173590,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173589,"elapsed":0.00124},{"id":1173591,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_emails\" (\"user_id\", \"email\", \"primary\", \"created_at\", \"updated_at\") VALUES (1526, 'bruce1367@wayne.com', TRUE, '2020-05-28 19:04:11.006888', '2020-05-28 19:04:11.006888') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1173592,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173591,"elapsed":0.001},{"id":1173593,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173594,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1173593,"elapsed":1.7e-05,"return_value":{"class":"String","value":"bruce1367@wayne.com","object_id":70097827628140}},{"id":1173595,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"generate_token","path":"app/models/email_token.rb","lineno":36,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":1173596,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"token_length","path":"app/models/email_token.rb","lineno":20,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":1173597,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"token_length","path":"app/models/email_token.rb","lineno":20,"static":true,"thread_id":70097708498960,"parent_id":1173596,"elapsed":4.0e-06,"return_value":{"class":"Integer","value":"16","object_id":33}},{"id":1173598,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"generate_token","path":"app/models/email_token.rb","lineno":36,"static":true,"thread_id":70097708498960,"parent_id":1173595,"elapsed":0.000152,"return_value":{"class":"String","value":"1646aa8857d885586bce9410efa333c9","object_id":70097827666680}},{"id":1173599,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"email_tokens\" (\"user_id\", \"email\", \"token\", \"created_at\", \"updated_at\") VALUES (1526, 'bruce1367@wayne.com', '1646aa8857d885586bce9410efa333c9', '2020-05-28 19:04:11.012724', '2020-05-28 19:04:11.012724') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1173600,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173599,"elapsed":0.001142},{"id":1173601,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"email_tokens\" SET \"expired\" = TRUE WHERE \"email_tokens\".\"user_id\" = 1526 AND (id != 1775)","database_type":"postgres","server_version":110006}},{"id":1173602,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173601,"elapsed":0.001633},{"id":1173603,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_stats\" (\"user_id\", \"new_since\") VALUES (1526, '2020-05-28 19:04:11.023077') RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":1173604,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173603,"elapsed":0.001213},{"id":1173605,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1526 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173606,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173605,"elapsed":0.001391},{"id":1173607,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097568251860,"value":"{:user=>#<User id: 1526, username: \"bruce1405\", created_at: \"2020-05-28 19:04:10\", updated_at: \"2020","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":1173608,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1173607,"elapsed":1.2e-05},{"id":1173609,"event":"call","defined_class":"TimezoneValidator","method_id":"validate_each","path":"lib/validators/timezone_validator.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserOption","object_id":70097568284480,"value":"#<UserOption:0x00007f81b9507e80>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":5058588,"value":"timezone","kind":"req"},{"name":"value","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"TimezoneValidator","object_id":70097795312080,"value":"#<TimezoneValidator:0x00007f81d460d3a0>"}},{"id":1173610,"event":"return","defined_class":"TimezoneValidator","method_id":"validate_each","path":"lib/validators/timezone_validator.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1173609,"elapsed":5.0e-06},{"id":1173611,"event":"call","defined_class":"UserOption","method_id":"set_defaults","path":"app/models/user_option.rb","lineno":47,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserOption","object_id":70097568284480,"value":"#<UserOption:0x00007f81b9507e80>"}},{"id":1173612,"event":"call","defined_class":"UserOption","method_id":"text_size=","path":"app/models/user_option.rb","lineno":172,"static":false,"thread_id":70097708498960,"parameters":[{"name":"value","class":"String","object_id":70097723783240,"value":"normal","kind":"req"}],"receiver":{"class":"UserOption","object_id":70097568284480,"value":"#<UserOption:0x00007f81b9507e80>"}},{"id":1173613,"event":"call","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"text_sizes","path":"app/models/user_option.rb","lineno":30,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097795215760,"value":"UserOption"}},{"id":1173614,"event":"return","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"text_sizes","path":"app/models/user_option.rb","lineno":30,"static":true,"thread_id":70097708498960,"parent_id":1173613,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:normal=>0, :larger=>1, :largest=>2, :smaller=>3}","object_id":70097795246760}},{"id":1173615,"event":"return","defined_class":"UserOption","method_id":"text_size=","path":"app/models/user_option.rb","lineno":172,"static":false,"thread_id":70097708498960,"parent_id":1173612,"elapsed":0.00016,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1173616,"event":"call","defined_class":"UserOption","method_id":"title_count_mode=","path":"app/models/user_option.rb","lineno":180,"static":false,"thread_id":70097708498960,"parameters":[{"name":"value","class":"String","object_id":70097723782760,"value":"notifications","kind":"req"}],"receiver":{"class":"UserOption","object_id":70097568284480,"value":"#<UserOption:0x00007f81b9507e80>"}},{"id":1173617,"event":"call","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"title_count_modes","path":"app/models/user_option.rb","lineno":34,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097795215760,"value":"UserOption"}},{"id":1173618,"event":"return","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"title_count_modes","path":"app/models/user_option.rb","lineno":34,"static":true,"thread_id":70097708498960,"parent_id":1173617,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:notifications=>0, :contextual=>1}","object_id":70097816997920}},{"id":1173619,"event":"return","defined_class":"UserOption","method_id":"title_count_mode=","path":"app/models/user_option.rb","lineno":180,"static":false,"thread_id":70097708498960,"parent_id":1173616,"elapsed":0.000142,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1173620,"event":"return","defined_class":"UserOption","method_id":"set_defaults","path":"app/models/user_option.rb","lineno":47,"static":false,"thread_id":70097708498960,"parent_id":1173611,"elapsed":0.000623,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173621,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_options\" (\"user_id\", \"email_digests\", \"digest_after_minutes\", \"auto_track_topics_after_msecs\", \"new_topic_duration_minutes\", \"notification_level_when_replying\") VALUES (1526, TRUE, 10080, 240000, 2880, 2) RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":1173622,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173621,"elapsed":0.001513},{"id":1173623,"event":"call","defined_class":"TrackedTopicsUpdater","method_id":"call","path":"app/services/tracked_topics_updater.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TrackedTopicsUpdater","object_id":70097612967660,"value":"#<TrackedTopicsUpdater:0x00007f81bea41dd8>"}},{"id":1173624,"event":"call","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755252000,"value":"TopicUser"}},{"id":1173625,"event":"return","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parent_id":1173624,"elapsed":8.0e-06,"return_value":{"class":"Enum","value":"{:muted=>0, :regular=>1, :tracking=>2, :watching=>3}","object_id":70097795217940}},{"id":1173626,"event":"call","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755252000,"value":"TopicUser"}},{"id":1173627,"event":"return","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parent_id":1173626,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:muted=>0, :regular=>1, :tracking=>2, :watching=>3}","object_id":70097795217940}},{"id":1173628,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"topic_users\" SET notification_level = CASE WHEN total_msecs_viewed < 240000 THEN 1 ELSE 2 END WHERE \"topic_users\".\"notifications_reason_id\" IS NULL AND \"topic_users\".\"user_id\" = 1526","database_type":"postgres","server_version":110006}},{"id":1173629,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173628,"elapsed":0.001222},{"id":1173630,"event":"return","defined_class":"TrackedTopicsUpdater","method_id":"call","path":"app/services/tracked_topics_updater.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":1173623,"elapsed":0.004659,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1173631,"event":"call","defined_class":"User","method_id":"create_user_profile","path":"app/models/user.rb","lineno":1139,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173632,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1526 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173633,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173632,"elapsed":0.00111},{"id":1173634,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_profiles\" (\"user_id\") VALUES (1526) RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":1173635,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173634,"elapsed":0.001321},{"id":1173636,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097568656780,"value":"{:user=>#<UserProfile user_id: 1526, location: nil, website: nil, bio_raw: nil, bio_cooked: nil, dis","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":1173637,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1173636,"elapsed":1.1e-05},{"id":1173638,"event":"return","defined_class":"User","method_id":"create_user_profile","path":"app/models/user.rb","lineno":1139,"static":false,"thread_id":70097708498960,"parent_id":1173631,"elapsed":0.010432,"return_value":{"class":"UserProfile","value":"#<UserProfile:0x00007f81beb7bd48>","object_id":70097613610660}},{"id":1173639,"event":"call","defined_class":"User","method_id":"set_random_avatar","path":"app/models/user.rb","lineno":1143,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173640,"event":"return","defined_class":"User","method_id":"set_random_avatar","path":"app/models/user.rb","lineno":1143,"static":false,"thread_id":70097708498960,"parent_id":1173639,"elapsed":1.2e-05},{"id":1173641,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":1173642,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173641,"elapsed":0.001256},{"id":1173643,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":1173644,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173643,"elapsed":0.001179},{"id":1173645,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":1173646,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173645,"elapsed":0.001321},{"id":1173647,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":1173648,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173647,"elapsed":0.001308},{"id":1173649,"event":"call","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parameters":[{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173650,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173651,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":1173650,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173652,"event":"return","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parent_id":1173649,"elapsed":0.000106},{"id":1173653,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE \"user_auth_tokens\".\"user_id\" = 1526","database_type":"postgres","server_version":110006}},{"id":1173654,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173653,"elapsed":0.001193},{"id":1173655,"event":"call","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>"}},{"id":1173656,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_avatars\".* FROM \"user_avatars\" WHERE \"user_avatars\".\"user_id\" = 1526 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173657,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173656,"elapsed":0.00115},{"id":1173658,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_avatars\" (\"user_id\", \"created_at\", \"updated_at\") VALUES (1526, '2020-05-28 19:04:11.080342', '2020-05-28 19:04:11.080342') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1173659,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173658,"elapsed":0.001368},{"id":1173660,"event":"return","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parent_id":1173655,"elapsed":0.008836},{"id":1173661,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097614654420,"value":"{:user=>#<User id: 1526, username: \"bruce1405\", created_at: \"2020-05-28 19:04:10\", updated_at: \"2020","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":1173662,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1173661,"elapsed":8.0e-06},{"id":1173663,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":1173664,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1173663,"elapsed":4.0e-06},{"id":1173665,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173666,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173665,"elapsed":0.00104},{"id":1173667,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"},{"name":"object","class":"User","object_id":70097816422240,"value":"#<User:0x00007f81d6e50ec0>","kind":"req"},{"name":"event","class":"Symbol","object_id":12268508,"value":"user_created","kind":"req"},{"name":"serializer","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":1173668,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":1173669,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":1173668,"elapsed":0.000227,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81bbdf9af0>","object_id":70097589751160}},{"id":1173670,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'user') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173671,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173670,"elapsed":0.001425},{"id":1173672,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":1173667,"elapsed":0.00497},{"id":1173673,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_avatars\" SET \"custom_upload_id\" = 35 WHERE \"user_avatars\".\"id\" = 1721","database_type":"postgres","server_version":110006}},{"id":1173674,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173673,"elapsed":0.001279},{"id":1173675,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"uploaded_avatar_id\" = 35 WHERE \"users\".\"id\" = 1526","database_type":"postgres","server_version":110006}},{"id":1173676,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173675,"elapsed":0.001594},{"id":1173677,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1173678,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1173677,"elapsed":7.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1173679,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1173680,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1173679,"elapsed":1.2e-05},{"id":1173681,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/user_avatar/default/bruce1405/50/35.png"},"message":[{"name":"controller","class":"String","value":"user_avatars","object_id":70097801171920},{"name":"action","class":"String","value":"show","object_id":70097801171900},{"name":"hostname","class":"String","value":"default","object_id":70097624496280},{"name":"username","class":"String","value":"bruce1405","object_id":70097624496240},{"name":"size","class":"String","value":"50","object_id":70097624496220},{"name":"version","class":"String","value":"35","object_id":70097624496200}]},{"id":1173682,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173683,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173684,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173685,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173686,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1173685,"elapsed":3.4e-05},{"id":1173687,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1173684,"elapsed":0.000159,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81c004f8a0>","object_id":70097624530000}},{"id":1173688,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097624530000,"value":"#<Guardian:0x00007f81c004f8a0>"}},{"id":1173689,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1173688,"elapsed":1.2e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173690,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1173683,"elapsed":0.000423},{"id":1173691,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173692,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1173691,"elapsed":4.0e-06},{"id":1173693,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173694,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1173693,"elapsed":3.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81c004f8a0>","object_id":70097624530000}},{"id":1173695,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097624524680,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097624530000,"value":"#<Guardian:0x00007f81c004f8a0>"}},{"id":1173696,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1173695,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173697,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1173682,"elapsed":0.000879,"return_value":{"class":"Array","value":"[2]","object_id":70097624524680}},{"id":1173698,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173699,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173700,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1173699,"elapsed":3.0e-06},{"id":1173701,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1173698,"elapsed":9.2e-05,"return_value":{"class":"String","value":"user_avatars/show","object_id":70097624541680}},{"id":1173702,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173703,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173704,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1173703,"elapsed":2.1e-05},{"id":1173705,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1173702,"elapsed":0.000108},{"id":1173706,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173707,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173708,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1173707,"elapsed":3.0e-06},{"id":1173709,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1173710,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1173709,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1173711,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1173712,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1173711,"elapsed":8.0e-06},{"id":1173713,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1173714,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1173713,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1173715,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1173716,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1173715,"elapsed":7.0e-06},{"id":1173717,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1173706,"elapsed":0.000534,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097624577940}},{"id":1173718,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173719,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1173718,"elapsed":7.0e-06},{"id":1173720,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097732421640,"value":"UserAvatarsController"}},{"id":1173721,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1173720,"elapsed":3.0e-06},{"id":1173722,"event":"call","defined_class":"UserAvatarsController","method_id":"show","path":"app/controllers/user_avatars_controller.rb","lineno":77,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173723,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"username_lower\" = 'bruce1405' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173724,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173723,"elapsed":0.001368},{"id":1173725,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_avatars\".* FROM \"user_avatars\" WHERE \"user_avatars\".\"user_id\" = 1526 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173726,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173725,"elapsed":0.001271},{"id":1173727,"event":"call","defined_class":"UserAvatar","method_id":"contains_upload?","path":"app/models/user_avatar.rb","lineno":16,"static":false,"thread_id":70097708498960,"parameters":[{"name":"id","class":"Integer","object_id":71,"value":"35","kind":"req"}],"receiver":{"class":"UserAvatar","object_id":70097621461340,"value":"#<UserAvatar:0x00007f81bfa752b8>"}},{"id":1173728,"event":"return","defined_class":"UserAvatar","method_id":"contains_upload?","path":"app/models/user_avatar.rb","lineno":16,"static":false,"thread_id":70097708498960,"parent_id":1173727,"elapsed":1.7e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173729,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"uploads\".* FROM \"uploads\" WHERE \"uploads\".\"id\" = 35 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173730,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173729,"elapsed":0.001416},{"id":1173731,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"uploads\".* FROM \"uploads\" WHERE \"uploads\".\"id\" = 35 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173732,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173731,"elapsed":3.0e-05},{"id":1173733,"event":"call","defined_class":"Upload","method_id":"get_optimized_image","path":"app/models/upload.rb","lineno":73,"static":false,"thread_id":70097708498960,"parameters":[{"name":"width","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"height","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"opts","class":"Hash","object_id":70097783551640,"value":"{:allow_animation=>false}","kind":"req"}],"receiver":{"class":"Upload","object_id":70097782036760,"value":"/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png.jpg"}},{"id":1173734,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"create_for","path":"app/models/optimized_image.rb","lineno":30,"static":true,"thread_id":70097708498960,"parameters":[{"name":"upload","class":"Upload","object_id":70097782036760,"value":"/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png.jpg","kind":"req"},{"name":"width","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"height","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"opts","class":"Hash","object_id":70097783593980,"value":"{:allow_animation=>false, :raise_on_error=>true}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173735,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"optimized_images\".* FROM \"optimized_images\" WHERE \"optimized_images\".\"upload_id\" = 35 AND \"optimized_images\".\"width\" = 50 AND \"optimized_images\".\"height\" = 50 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173736,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173735,"elapsed":0.001388},{"id":1173737,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1173738,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":1173737,"elapsed":4.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":1173739,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":1173740,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1173741,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":1173740,"elapsed":4.0e-06},{"id":1173742,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":1173739,"elapsed":0.000125},{"id":1173743,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"lock","path":"app/models/optimized_image.rb","lineno":11,"static":true,"thread_id":70097708498960,"parameters":[{"name":"upload_id","class":"Integer","object_id":71,"value":"35","kind":"req"},{"name":"width","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"height","class":"Integer","object_id":101,"value":"50","kind":"req"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173744,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"optimized_images\".* FROM \"optimized_images\" WHERE \"optimized_images\".\"upload_id\" = 35 AND \"optimized_images\".\"width\" = 50 AND \"optimized_images\".\"height\" = 50 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173745,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173744,"elapsed":3.2e-05},{"id":1173746,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"resize","path":"app/models/optimized_image.rb","lineno":311,"static":true,"thread_id":70097708498960,"parameters":[{"name":"from","class":"String","object_id":70097757222920,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"req"},{"name":"to","class":"String","object_id":70097803678540,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg","kind":"req"},{"name":"width","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"height","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"opts","class":"Hash","object_id":70097783593980,"value":"{:allow_animation=>false, :raise_on_error=>true}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173747,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"optimize","path":"app/models/optimized_image.rb","lineno":324,"static":true,"thread_id":70097708498960,"parameters":[{"name":"operation","class":"String","object_id":70097607933240,"value":"resize","kind":"req"},{"name":"from","class":"String","object_id":70097757222920,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"req"},{"name":"to","class":"String","object_id":70097803678540,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg","kind":"req"},{"name":"dimensions","class":"String","object_id":70097803674780,"value":"50x50","kind":"req"},{"name":"opts","class":"Hash","object_id":70097783593980,"value":"{:allow_animation=>false, :raise_on_error=>true}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173748,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"resize_instructions","path":"app/models/optimized_image.rb","lineno":210,"static":true,"thread_id":70097708498960,"parameters":[{"name":"from","class":"String","object_id":70097757222920,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"req"},{"name":"to","class":"String","object_id":70097803678540,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg","kind":"req"},{"name":"dimensions","class":"String","object_id":70097803674780,"value":"50x50","kind":"req"},{"name":"opts","class":"Hash","object_id":70097783593980,"value":"{:allow_animation=>false, :raise_on_error=>true}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173749,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"ensure_safe_paths!","path":"app/models/optimized_image.rb","lineno":179,"static":true,"thread_id":70097708498960,"parameters":[{"name":"paths","class":"String","object_id":70097757222920,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"rest"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173750,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"safe_path?","path":"app/models/optimized_image.rb","lineno":171,"static":true,"thread_id":70097708498960,"parameters":[{"name":"path","class":"String","object_id":70097757222920,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"req"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173751,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"safe_path?","path":"app/models/optimized_image.rb","lineno":171,"static":true,"thread_id":70097708498960,"parent_id":1173750,"elapsed":2.6e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173752,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"safe_path?","path":"app/models/optimized_image.rb","lineno":171,"static":true,"thread_id":70097708498960,"parameters":[{"name":"path","class":"String","object_id":70097803678540,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg","kind":"req"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173753,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"safe_path?","path":"app/models/optimized_image.rb","lineno":171,"static":true,"thread_id":70097708498960,"parent_id":1173752,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173754,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"ensure_safe_paths!","path":"app/models/optimized_image.rb","lineno":179,"static":true,"thread_id":70097708498960,"parent_id":1173749,"elapsed":0.000295,"return_value":{"class":"Array","value":"[\"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f0857","object_id":70097803733260}},{"id":1173755,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"prepend_decoder!","path":"app/models/optimized_image.rb","lineno":187,"static":true,"thread_id":70097708498960,"parameters":[{"name":"path","class":"String","object_id":70097757222920,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"req"},{"name":"ext_path","class":"String","object_id":70097803678540,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg","kind":"opt"},{"name":"opts","class":"Hash","object_id":70097783593980,"value":"{:allow_animation=>false, :raise_on_error=>true}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173756,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"prepend_decoder!","path":"app/models/optimized_image.rb","lineno":187,"static":true,"thread_id":70097708498960,"parent_id":1173755,"elapsed":1.3e-05,"return_value":{"class":"String","value":"jpg:/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08","object_id":70097803803900}},{"id":1173757,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"prepend_decoder!","path":"app/models/optimized_image.rb","lineno":187,"static":true,"thread_id":70097708498960,"parameters":[{"name":"path","class":"String","object_id":70097803678540,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg","kind":"req"},{"name":"ext_path","class":"String","object_id":70097803678540,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg","kind":"opt"},{"name":"opts","class":"Hash","object_id":70097783593980,"value":"{:allow_animation=>false, :raise_on_error=>true}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173758,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"prepend_decoder!","path":"app/models/optimized_image.rb","lineno":187,"static":true,"thread_id":70097708498960,"parent_id":1173757,"elapsed":7.0e-06,"return_value":{"class":"String","value":"jpg:/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg","object_id":70097803852400}},{"id":1173759,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"thumbnail_or_resize","path":"app/models/optimized_image.rb","lineno":206,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173760,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"thumbnail_or_resize","path":"app/models/optimized_image.rb","lineno":206,"static":true,"thread_id":70097708498960,"parent_id":1173759,"elapsed":1.3e-05,"return_value":{"class":"String","value":"thumbnail","object_id":70097718229440}},{"id":1173761,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"resize_instructions","path":"app/models/optimized_image.rb","lineno":210,"static":true,"thread_id":70097708498960,"parent_id":1173748,"elapsed":0.000814,"return_value":{"class":"Array","value":"[\"convert\", \"jpg:/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8","object_id":70097803845780}},{"id":1173762,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"convert_with","path":"app/models/optimized_image.rb","lineno":337,"static":true,"thread_id":70097708498960,"parameters":[{"name":"instructions","class":"Array","object_id":70097803845780,"value":"[\"convert\", \"jpg:/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8","kind":"req"},{"name":"to","class":"String","object_id":70097803678540,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg","kind":"req"},{"name":"opts","class":"Hash","object_id":70097783593980,"value":"{:allow_animation=>false, :raise_on_error=>true}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173763,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"convert_with","path":"app/models/optimized_image.rb","lineno":337,"static":true,"thread_id":70097708498960,"parent_id":1173762,"elapsed":0.017396,"exceptions":[{"class":"RuntimeError","message":"lib/discourse.rb:90:in `exec': convert: Not a JPEG file: starts with 0x89 0x50 `/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png.jpg' @ error/jpeg.c/JPEGErrorHandler/343.\nconvert: no images defined `jpg:/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg' @ error/convert.c/ConvertImageCommand/3273.\n","object_id":70097804108620,"path":"lib/discourse.rb","lineno":100}]},{"id":1173764,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"optimize","path":"app/models/optimized_image.rb","lineno":324,"static":true,"thread_id":70097708498960,"parent_id":1173747,"elapsed":0.018913,"exceptions":[{"class":"RuntimeError","message":"lib/discourse.rb:90:in `exec': convert: Not a JPEG file: starts with 0x89 0x50 `/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png.jpg' @ error/jpeg.c/JPEGErrorHandler/343.\nconvert: no images defined `jpg:/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg' @ error/convert.c/ConvertImageCommand/3273.\n","object_id":70097804108620,"path":"lib/discourse.rb","lineno":100}]},{"id":1173765,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"resize","path":"app/models/optimized_image.rb","lineno":311,"static":true,"thread_id":70097708498960,"parent_id":1173746,"elapsed":0.019081,"exceptions":[{"class":"RuntimeError","message":"lib/discourse.rb:90:in `exec': convert: Not a JPEG file: starts with 0x89 0x50 `/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png.jpg' @ error/jpeg.c/JPEGErrorHandler/343.\nconvert: no images defined `jpg:/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg' @ error/convert.c/ConvertImageCommand/3273.\n","object_id":70097804108620,"path":"lib/discourse.rb","lineno":100}]},{"id":1173766,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"lock","path":"app/models/optimized_image.rb","lineno":11,"static":true,"thread_id":70097708498960,"parent_id":1173743,"elapsed":0.040023,"exceptions":[{"class":"RuntimeError","message":"lib/discourse.rb:90:in `exec': convert: Not a JPEG file: starts with 0x89 0x50 `/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png.jpg' @ error/jpeg.c/JPEGErrorHandler/343.\nconvert: no images defined `jpg:/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg' @ error/convert.c/ConvertImageCommand/3273.\n","object_id":70097804108620,"path":"lib/discourse.rb","lineno":100}]},{"id":1173767,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"create_for","path":"app/models/optimized_image.rb","lineno":30,"static":true,"thread_id":70097708498960,"parent_id":1173734,"elapsed":0.046086,"exceptions":[{"class":"RuntimeError","message":"lib/discourse.rb:90:in `exec': convert: Not a JPEG file: starts with 0x89 0x50 `/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png.jpg' @ error/jpeg.c/JPEGErrorHandler/343.\nconvert: no images defined `jpg:/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-42nkfj.jpg' @ error/convert.c/ConvertImageCommand/3273.\n","object_id":70097804108620,"path":"lib/discourse.rb","lineno":100}]},{"id":1173768,"event":"call","defined_class":"Upload","method_id":"fix_image_extension","path":"app/models/upload.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Upload","object_id":70097782036760,"value":"/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png.jpg"}},{"id":1173769,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1173770,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":1173769,"elapsed":4.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":1173771,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":1173772,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1173773,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":1173772,"elapsed":4.0e-06},{"id":1173774,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":1173771,"elapsed":0.000152},{"id":1173775,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"uploads\" SET \"extension\" = 'png' WHERE \"uploads\".\"id\" = 35","database_type":"postgres","server_version":110006}},{"id":1173776,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173775,"elapsed":0.001249},{"id":1173777,"event":"return","defined_class":"Upload","method_id":"fix_image_extension","path":"app/models/upload.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1173768,"elapsed":0.010308,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173778,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"create_for","path":"app/models/optimized_image.rb","lineno":30,"static":true,"thread_id":70097708498960,"parameters":[{"name":"upload","class":"Upload","object_id":70097782036760,"value":"/uploads/default/test_0/original/1X/8eec1e99191f08577a00374dca1c5bc0e0666033.png.jpg","kind":"req"},{"name":"width","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"height","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"opts","class":"Hash","object_id":70097730670080,"value":"{:allow_animation=>false, :raise_on_error=>false}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173779,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"optimized_images\".* FROM \"optimized_images\" WHERE \"optimized_images\".\"upload_id\" = 35 AND \"optimized_images\".\"width\" = 50 AND \"optimized_images\".\"height\" = 50 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173780,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173779,"elapsed":0.00109},{"id":1173781,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1173782,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":1173781,"elapsed":5.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":1173783,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":1173784,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1173785,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":1173784,"elapsed":4.0e-06},{"id":1173786,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":1173783,"elapsed":0.00015},{"id":1173787,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"lock","path":"app/models/optimized_image.rb","lineno":11,"static":true,"thread_id":70097708498960,"parameters":[{"name":"upload_id","class":"Integer","object_id":71,"value":"35","kind":"req"},{"name":"width","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"height","class":"Integer","object_id":101,"value":"50","kind":"req"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173788,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"optimized_images\".* FROM \"optimized_images\" WHERE \"optimized_images\".\"upload_id\" = 35 AND \"optimized_images\".\"width\" = 50 AND \"optimized_images\".\"height\" = 50 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173789,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173788,"elapsed":3.2e-05},{"id":1173790,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"resize","path":"app/models/optimized_image.rb","lineno":311,"static":true,"thread_id":70097708498960,"parameters":[{"name":"from","class":"String","object_id":70097826400100,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"req"},{"name":"to","class":"String","object_id":70097732835680,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-pww4sd.png","kind":"req"},{"name":"width","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"height","class":"Integer","object_id":101,"value":"50","kind":"req"},{"name":"opts","class":"Hash","object_id":70097730670080,"value":"{:allow_animation=>false, :raise_on_error=>false}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173791,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"optimize","path":"app/models/optimized_image.rb","lineno":324,"static":true,"thread_id":70097708498960,"parameters":[{"name":"operation","class":"String","object_id":70097607933240,"value":"resize","kind":"req"},{"name":"from","class":"String","object_id":70097826400100,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"req"},{"name":"to","class":"String","object_id":70097732835680,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-pww4sd.png","kind":"req"},{"name":"dimensions","class":"String","object_id":70097732831720,"value":"50x50","kind":"req"},{"name":"opts","class":"Hash","object_id":70097730670080,"value":"{:allow_animation=>false, :raise_on_error=>false}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173792,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"resize_instructions","path":"app/models/optimized_image.rb","lineno":210,"static":true,"thread_id":70097708498960,"parameters":[{"name":"from","class":"String","object_id":70097826400100,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"req"},{"name":"to","class":"String","object_id":70097732835680,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-pww4sd.png","kind":"req"},{"name":"dimensions","class":"String","object_id":70097732831720,"value":"50x50","kind":"req"},{"name":"opts","class":"Hash","object_id":70097730670080,"value":"{:allow_animation=>false, :raise_on_error=>false}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173793,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"ensure_safe_paths!","path":"app/models/optimized_image.rb","lineno":179,"static":true,"thread_id":70097708498960,"parameters":[{"name":"paths","class":"String","object_id":70097826400100,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"rest"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173794,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"safe_path?","path":"app/models/optimized_image.rb","lineno":171,"static":true,"thread_id":70097708498960,"parameters":[{"name":"path","class":"String","object_id":70097826400100,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"req"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173795,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"safe_path?","path":"app/models/optimized_image.rb","lineno":171,"static":true,"thread_id":70097708498960,"parent_id":1173794,"elapsed":2.6e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173796,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"safe_path?","path":"app/models/optimized_image.rb","lineno":171,"static":true,"thread_id":70097708498960,"parameters":[{"name":"path","class":"String","object_id":70097732835680,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-pww4sd.png","kind":"req"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173797,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"safe_path?","path":"app/models/optimized_image.rb","lineno":171,"static":true,"thread_id":70097708498960,"parent_id":1173796,"elapsed":1.8e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173798,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"ensure_safe_paths!","path":"app/models/optimized_image.rb","lineno":179,"static":true,"thread_id":70097708498960,"parent_id":1173793,"elapsed":0.000309,"return_value":{"class":"Array","value":"[\"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f0857","object_id":70097731663780}},{"id":1173799,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"prepend_decoder!","path":"app/models/optimized_image.rb","lineno":187,"static":true,"thread_id":70097708498960,"parameters":[{"name":"path","class":"String","object_id":70097826400100,"value":"/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08577a","kind":"req"},{"name":"ext_path","class":"String","object_id":70097732835680,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-pww4sd.png","kind":"opt"},{"name":"opts","class":"Hash","object_id":70097730670080,"value":"{:allow_animation=>false, :raise_on_error=>false}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173800,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"prepend_decoder!","path":"app/models/optimized_image.rb","lineno":187,"static":true,"thread_id":70097708498960,"parent_id":1173799,"elapsed":9.0e-06,"return_value":{"class":"String","value":"png:/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8eec1e99191f08","object_id":70097731634700}},{"id":1173801,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"prepend_decoder!","path":"app/models/optimized_image.rb","lineno":187,"static":true,"thread_id":70097708498960,"parameters":[{"name":"path","class":"String","object_id":70097732835680,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-pww4sd.png","kind":"req"},{"name":"ext_path","class":"String","object_id":70097732835680,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-pww4sd.png","kind":"opt"},{"name":"opts","class":"Hash","object_id":70097730670080,"value":"{:allow_animation=>false, :raise_on_error=>false}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173802,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"prepend_decoder!","path":"app/models/optimized_image.rb","lineno":187,"static":true,"thread_id":70097708498960,"parent_id":1173801,"elapsed":7.0e-06,"return_value":{"class":"String","value":"png:/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-pww4sd.png","object_id":70097731767660}},{"id":1173803,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"thumbnail_or_resize","path":"app/models/optimized_image.rb","lineno":206,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173804,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"thumbnail_or_resize","path":"app/models/optimized_image.rb","lineno":206,"static":true,"thread_id":70097708498960,"parent_id":1173803,"elapsed":1.4e-05,"return_value":{"class":"String","value":"thumbnail","object_id":70097718229440}},{"id":1173805,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"resize_instructions","path":"app/models/optimized_image.rb","lineno":210,"static":true,"thread_id":70097708498960,"parent_id":1173792,"elapsed":0.000905,"return_value":{"class":"Array","value":"[\"convert\", \"png:/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8","object_id":70097731766520}},{"id":1173806,"event":"call","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"convert_with","path":"app/models/optimized_image.rb","lineno":337,"static":true,"thread_id":70097708498960,"parameters":[{"name":"instructions","class":"Array","object_id":70097731766520,"value":"[\"convert\", \"png:/Users/kgilpin/source/appland/discourse/public/uploads/default/test_0/original/1X/8","kind":"req"},{"name":"to","class":"String","object_id":70097732835680,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-pww4sd.png","kind":"req"},{"name":"opts","class":"Hash","object_id":70097730670080,"value":"{:allow_animation=>false, :raise_on_error=>false}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097607929840,"value":"OptimizedImage"}},{"id":1173807,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"convert_with","path":"app/models/optimized_image.rb","lineno":337,"static":true,"thread_id":70097708498960,"parent_id":1173806,"elapsed":0.020595,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173808,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"optimize","path":"app/models/optimized_image.rb","lineno":324,"static":true,"thread_id":70097708498960,"parent_id":1173791,"elapsed":0.021965,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173809,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"resize","path":"app/models/optimized_image.rb","lineno":311,"static":true,"thread_id":70097708498960,"parent_id":1173790,"elapsed":0.022159,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173810,"event":"call","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"generate_digest","path":"app/models/upload.rb","lineno":264,"static":true,"thread_id":70097708498960,"parameters":[{"name":"path","class":"String","object_id":70097732835680,"value":"/var/folders/mp/5v5n_rwj5_1___9fxxwf_msr0000gn/T/discourse-thumbnail20200528-21437-pww4sd.png","kind":"req"}],"receiver":{"class":"Class","object_id":70097756332220,"value":"Upload"}},{"id":1173811,"event":"return","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"generate_digest","path":"app/models/upload.rb","lineno":264,"static":true,"thread_id":70097708498960,"parent_id":1173810,"elapsed":0.0001,"return_value":{"class":"String","value":"bb456e1cb661f8bacf976760343edaf49be09348","object_id":70097732872920}},{"id":1173812,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173813,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173812,"elapsed":0.00105},{"id":1173814,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"optimized_images\" (\"sha1\", \"extension\", \"width\", \"height\", \"upload_id\", \"url\", \"filesize\", \"version\") VALUES ('bb456e1cb661f8bacf976760343edaf49be09348', '.png', 50, 50, 35, '', 24483, 2) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1173815,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173814,"elapsed":0.001113},{"id":1173816,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173817,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173816,"elapsed":0.001014},{"id":1173818,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1173819,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":1173818,"elapsed":6.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":1173820,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":1173821,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1173822,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":1173821,"elapsed":4.0e-06},{"id":1173823,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":1173820,"elapsed":0.000133},{"id":1173824,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"uploads\".* FROM \"uploads\" WHERE \"uploads\".\"id\" = 35 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173825,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173824,"elapsed":0.002565},{"id":1173826,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173827,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173826,"elapsed":0.000825},{"id":1173828,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"optimized_images\" SET \"url\" = '/uploads/default/test_0/optimized/1X/8eec1e99191f08577a00374dca1c5bc0e0666033_2_50x50.png' WHERE \"optimized_images\".\"id\" = 9","database_type":"postgres","server_version":110006}},{"id":1173829,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173828,"elapsed":0.001296},{"id":1173830,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1173831,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173830,"elapsed":0.001092},{"id":1173832,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1173833,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":1173832,"elapsed":6.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":1173834,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":1173835,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1173836,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":1173835,"elapsed":4.0e-06},{"id":1173837,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":1173834,"elapsed":0.00012},{"id":1173838,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"lock","path":"app/models/optimized_image.rb","lineno":11,"static":true,"thread_id":70097708498960,"parent_id":1173787,"elapsed":0.114354,"return_value":{"class":"OptimizedImage","value":"#<OptimizedImage:0x00007f81ccef47c8>","object_id":70097732871140}},{"id":1173839,"event":"return","defined_class":"OptimizedImage(id: integer, sha1: string, extension: string, width: integer, height: integer, upload_id: integer, url: string, filesize: integer, etag: string, version: integer)","method_id":"create_for","path":"app/models/optimized_image.rb","lineno":30,"static":true,"thread_id":70097708498960,"parent_id":1173778,"elapsed":0.125165,"return_value":{"class":"OptimizedImage","value":"#<OptimizedImage:0x00007f81ccef47c8>","object_id":70097732871140}},{"id":1173840,"event":"return","defined_class":"Upload","method_id":"get_optimized_image","path":"app/models/upload.rb","lineno":73,"static":false,"thread_id":70097708498960,"parent_id":1173733,"elapsed":0.182316,"return_value":{"class":"OptimizedImage","value":"#<OptimizedImage:0x00007f81ccef47c8>","object_id":70097732871140}},{"id":1173841,"event":"call","defined_class":"OptimizedImage","method_id":"local?","path":"app/models/optimized_image.rb","lineno":141,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"OptimizedImage","object_id":70097732871140,"value":"#<OptimizedImage:0x00007f81ccef47c8>"}},{"id":1173842,"event":"return","defined_class":"OptimizedImage","method_id":"local?","path":"app/models/optimized_image.rb","lineno":141,"static":false,"thread_id":70097708498960,"parent_id":1173841,"elapsed":2.6e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1173843,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1173844,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":1173843,"elapsed":4.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":1173845,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":1173846,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1173847,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":1173846,"elapsed":3.0e-06},{"id":1173848,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":1173845,"elapsed":0.000124},{"id":1173849,"event":"call","defined_class":"ApplicationController","method_id":"immutable_for","path":"app/controllers/application_controller.rb","lineno":79,"static":false,"thread_id":70097708498960,"parameters":[{"name":"duration","class":"ActiveSupport::Duration","object_id":70097567534080,"value":"31556952","kind":"req"}],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173850,"event":"return","defined_class":"ApplicationController","method_id":"immutable_for","path":"app/controllers/application_controller.rb","lineno":79,"static":false,"thread_id":70097708498960,"parent_id":1173849,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[\"immutable\"]","object_id":70097567532040}},{"id":1173851,"event":"return","defined_class":"UserAvatarsController","method_id":"show","path":"app/controllers/user_avatars_controller.rb","lineno":77,"static":false,"thread_id":70097708498960,"parent_id":1173722,"elapsed":0.246498,"return_value":{"class":"ActionDispatch::Response::FileBody","value":"#<ActionDispatch::Response::FileBody:0x00007f81b93a30a8>","object_id":70097567553620}},{"id":1173852,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173853,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1173852,"elapsed":1.3e-05},{"id":1173854,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173855,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1173854,"elapsed":5.0e-06},{"id":1173856,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserAvatarsController","object_id":70097624495320,"value":"#<UserAvatarsController:0x00007f81c003e9b0>"}},{"id":1173857,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173858,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1173857,"elapsed":5.0e-06},{"id":1173859,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"NilClass","object_id":8,"value":null,"kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097624396120,"value":"#<ActionDispatch::Request::Session:0x00007f81c000e2b0>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097624524820,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81c004d028>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173860,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173861,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173862,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1173861,"elapsed":6.0e-06},{"id":1173863,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1173860,"elapsed":0.000263},{"id":1173864,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173865,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097624507540,"value":"#<TestCurrentUserProvider:0x00007f81c0044928>"}},{"id":1173866,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1173865,"elapsed":4.0e-06},{"id":1173867,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1173864,"elapsed":0.000132},{"id":1173868,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1173859,"elapsed":0.000662},{"id":1173869,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1173856,"elapsed":0.000937},{"id":1173870,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1173681,"elapsed":0.251507,"http_server_response":{"status":200}},{"id":1173871,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097567596640,"value":"#<TestCurrentUserProvider:0x00007f81b93b80c0>"}},{"id":1173872,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1173871,"elapsed":1.1e-05},{"id":1173873,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1173874,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1173873,"elapsed":6.0e-06},{"id":1173875,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1173876,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1173875,"elapsed":3.0e-06},{"id":1173877,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"optimized_images\" WHERE \"optimized_images\".\"upload_id\" = 35","database_type":"postgres","server_version":110006}},{"id":1173878,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173877,"elapsed":0.001525},{"id":1173879,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"uploads\".* FROM \"uploads\" WHERE \"uploads\".\"id\" = 35 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1173880,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1173879,"elapsed":0.001112}]}