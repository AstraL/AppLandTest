{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::SiteTextsController when logged in as admin #index does not return overrides for keys that do not exist in English","app":"Discourse","feature":"Admin::SiteTextsController when logged in as admin","feature_group":"Admin site texts","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"LocaleSiteSetting","type":"class","children":[{"name":"valid_value?","type":"function","location":"app/models/locale_site_setting.rb:5","static":true},{"name":"supported_locales","type":"function","location":"app/models/locale_site_setting.rb:39","static":true},{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"Site","type":"class","children":[{"name":"clear_anon_cache!","type":"function","location":"app/models/site.rb:129","static":true}]},{"name":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","type":"class","children":[{"name":"reset_cached_settings!","type":"function","location":"app/models/site_setting.rb:109","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true},{"name":"skip_db?","type":"function","location":"app/models/global_setting.rb:84","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_serialized","type":"function","location":"app/controllers/application_controller.rb:446","static":false},{"name":"serialize_data","type":"function","location":"app/controllers/application_controller.rb:431","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"SiteTextsController","type":"class","children":[{"name":"index","type":"function","location":"app/controllers/admin/site_texts_controller.rb:18","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]}],"events":[{"id":988029,"event":"call","defined_class":"LocaleSiteSetting","method_id":"valid_value?","path":"app/models/locale_site_setting.rb","lineno":5,"static":true,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097798970180,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988030,"event":"call","defined_class":"LocaleSiteSetting","method_id":"supported_locales","path":"app/models/locale_site_setting.rb","lineno":39,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988031,"event":"return","defined_class":"LocaleSiteSetting","method_id":"supported_locales","path":"app/models/locale_site_setting.rb","lineno":39,"static":true,"thread_id":70097708498960,"parent_id":988030,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[\"ar\", \"be\", \"bg\", \"bs_BA\", \"ca\", \"cs\", \"da\", \"de\", \"el\", \"en\", \"en_US\", \"es\", \"et\", \"fa_IR\", \"fi\", ","object_id":70097795581420}},{"id":988032,"event":"return","defined_class":"LocaleSiteSetting","method_id":"valid_value?","path":"app/models/locale_site_setting.rb","lineno":5,"static":true,"thread_id":70097708498960,"parent_id":988029,"elapsed":0.000141,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988033,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":988034,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":988033,"elapsed":6.9e-05,"return_value":{"class":"Integer","value":"13209","object_id":26419}},{"id":988035,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"reset_cached_settings!","path":"app/models/site_setting.rb","lineno":109,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":988036,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"reset_cached_settings!","path":"app/models/site_setting.rb","lineno":109,"static":true,"thread_id":70097708498960,"parent_id":988035,"elapsed":3.0e-06},{"id":988037,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":988038,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":988037,"elapsed":6.7e-05,"return_value":{"class":"Integer","value":"13210","object_id":26421}},{"id":988039,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":988040,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988039,"elapsed":0.000751},{"id":988041,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"translation_key\" = 'missing_plural_key.one' AND \"translation_overrides\".\"locale\" = 'ru' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":988042,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988041,"elapsed":0.001037},{"id":988043,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"translation_overrides\" (\"locale\", \"translation_key\", \"value\", \"created_at\", \"updated_at\") VALUES ('ru', 'missing_plural_key.one', 'ONE', '2020-05-28 19:01:25.106807', '2020-05-28 19:01:25.106807') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":988044,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988043,"elapsed":0.001162},{"id":988045,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":988046,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988045,"elapsed":0.00087},{"id":988047,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":988048,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988047,"elapsed":0.00083},{"id":988049,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"translation_key\" = 'another_missing_key' AND \"translation_overrides\".\"locale\" = 'ru' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":988050,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988049,"elapsed":0.000925},{"id":988051,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"translation_overrides\" (\"locale\", \"translation_key\", \"value\", \"created_at\", \"updated_at\") VALUES ('ru', 'another_missing_key', 'foo', '2020-05-28 19:01:25.119657', '2020-05-28 19:01:25.119657') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":988052,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988051,"elapsed":0.000762},{"id":988053,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":988054,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988053,"elapsed":0.000511},{"id":988055,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828776340,"value":"#<TestCurrentUserProvider:0x00007f81d85e1328>"}},{"id":988056,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097828798140,"value":"3e1b02e2b224e84b3c9be7dd0c29a6f1","kind":"req"},{"name":"opts","class":"Hash","object_id":70097828797640,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":988057,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097828798140,"value":"3e1b02e2b224e84b3c9be7dd0c29a6f1","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":988058,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":988059,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":988058,"elapsed":7.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":988060,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":988057,"elapsed":0.000109,"return_value":{"class":"String","value":"NbiQyl7AWhTYvUPakFIXCEa/E1I=","object_id":70097828792280}},{"id":988061,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'NbiQyl7AWhTYvUPakFIXCEa/E1I=' OR\n                          prev_auth_token = 'NbiQyl7AWhTYvUPakFIXCEa/E1I=') AND rotated_at > '2020-03-29 19:01:25.126903') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":988062,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988061,"elapsed":0.001036},{"id":988063,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 19:01:25.131094' WHERE \"user_auth_tokens\".\"id\" = 1120 AND \"user_auth_tokens\".\"auth_token\" = 'NbiQyl7AWhTYvUPakFIXCEa/E1I='","database_type":"postgres","server_version":110006}},{"id":988064,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988063,"elapsed":0.001062},{"id":988065,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097613785060,"value":"{:action=>\"seen token\", :user_auth_token_id=>1120, :user_id=>1330, :auth_token=>\"NbiQyl7AWhTYvUPakFI","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":988066,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":988067,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988066,"elapsed":0.000812},{"id":988068,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 1120, 1330, '127.0.0.1/32', 'NbiQyl7AWhTYvUPakFIXCEa/E1I=', '2020-05-28 19:01:25.135004') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":988069,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988068,"elapsed":0.000866},{"id":988070,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":988071,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988070,"elapsed":0.000875},{"id":988072,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":988065,"elapsed":0.011815,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81bebd00f0>","object_id":70097613783160}},{"id":988073,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":988056,"elapsed":0.019988,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81beaf3f60>","object_id":70097613332400}},{"id":988074,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":988075,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988074,"elapsed":0.001016},{"id":988076,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097568965660,"value":"#<User:0x00007f81b9654838>"}},{"id":988077,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":988076,"elapsed":1.6e-05},{"id":988078,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828776340,"value":"#<TestCurrentUserProvider:0x00007f81d85e1328>"}},{"id":988079,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":988078,"elapsed":0.000762,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988080,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097568965660,"value":"#<User:0x00007f81b9654838>"}},{"id":988081,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":988080,"elapsed":0.00078},{"id":988082,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097568984740,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097568965660,"value":"#<User:0x00007f81b9654838>"}},{"id":988083,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 1330","database_type":"postgres","server_version":110006}},{"id":988084,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988083,"elapsed":0.001012},{"id":988085,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":988082,"elapsed":0.003369,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988086,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988055,"elapsed":0.029755,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988087,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828776340,"value":"#<TestCurrentUserProvider:0x00007f81d85e1328>"}},{"id":988088,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988087,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988089,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097568965660,"value":"#<User:0x00007f81b9654838>"}},{"id":988090,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":988089,"elapsed":1.5e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988091,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614150820,"value":"#<TestCurrentUserProvider:0x00007f81bec83948>"}},{"id":988092,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988091,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988093,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614150820,"value":"#<TestCurrentUserProvider:0x00007f81bec83948>"}},{"id":988094,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988093,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988095,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097568965660,"value":"#<User:0x00007f81b9654838>"}},{"id":988096,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":988095,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988097,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988098,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988097,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":988099,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988100,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988099,"elapsed":1.1e-05},{"id":988101,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/customize/site_texts.json?q=missing_plural_key"},"message":[{"name":"q","class":"String","value":"missing_plural_key","object_id":70097828774700},{"name":"controller","class":"String","value":"admin/site_texts","object_id":70097754993340},{"name":"action","class":"String","value":"index","object_id":70097754993400},{"name":"format","class":"String","value":"json","object_id":70097828776780}]},{"id":988102,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988103,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988104,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988105,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988106,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988105,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988107,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":988104,"elapsed":0.000116,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bec90788>","object_id":70097614177220}},{"id":988108,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097614177220,"value":"#<Guardian:0x00007f81bec90788>"}},{"id":988109,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":988108,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988110,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":988103,"elapsed":0.000328},{"id":988111,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988112,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988111,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988113,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":988114,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988113,"elapsed":0.00096},{"id":988115,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988116,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":988115,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bec90788>","object_id":70097614177220}},{"id":988117,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097569424900,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097614177220,"value":"#<Guardian:0x00007f81bec90788>"}},{"id":988118,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":988117,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988119,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":988102,"elapsed":0.00489,"return_value":{"class":"Array","value":"[2]","object_id":70097569424900}},{"id":988120,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988121,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988122,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988121,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988123,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988124,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988123,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988125,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988126,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988125,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988127,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":988120,"elapsed":0.000336,"return_value":{"class":"String","value":"site_texts/index","object_id":70097569457100}},{"id":988128,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988129,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988130,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988129,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988131,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":988128,"elapsed":0.000109},{"id":988132,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988133,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988134,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988133,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988135,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988136,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988135,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988137,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097568965660,"value":"#<User:0x00007f81b9654838>"}},{"id":988138,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":988137,"elapsed":1.2e-05,"return_value":{"class":"String","value":"ru","object_id":70097798970180}},{"id":988139,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988140,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988139,"elapsed":8.0e-06},{"id":988141,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988142,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988141,"elapsed":6.0e-06},{"id":988143,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":988132,"elapsed":0.062994,"return_value":{"class":"Array","value":"[:ru, :en]","object_id":70097569490920}},{"id":988144,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988145,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":988144,"elapsed":9.0e-06},{"id":988146,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988147,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988148,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988147,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988149,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":988146,"elapsed":0.000104},{"id":988150,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988151,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988150,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988152,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988153,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988152,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988154,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988155,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988154,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988156,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":988157,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":988156,"elapsed":3.0e-06},{"id":988158,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988159,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":988158,"elapsed":7.0e-06},{"id":988160,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988161,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988160,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988162,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988163,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988162,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988164,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097568965660,"value":"#<User:0x00007f81b9654838>"}},{"id":988165,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":988164,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988166,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"index","path":"app/controllers/admin/site_texts_controller.rb","lineno":18,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988167,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988168,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988167,"elapsed":8.0e-06},{"id":988169,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988170,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988169,"elapsed":6.0e-06},{"id":988171,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":988172,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":988171,"elapsed":6.0e-06},{"id":988173,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"translation_overrides\".\"translation_key\", \"translation_overrides\".\"value\", \"translation_overrides\".\"compiled_js\" FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru'","database_type":"postgres","server_version":110006}},{"id":988174,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988173,"elapsed":0.001378},{"id":988175,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988176,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988175,"elapsed":1.3e-05},{"id":988177,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"translation_overrides\".\"translation_key\" FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru'","database_type":"postgres","server_version":110006}},{"id":988178,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988177,"elapsed":0.001115},{"id":988179,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097794708100,"value":"[]","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097801235940,"value":"{:root=>\"site_texts\", :rest_serializer=>true, :extras=>{}, :overridden_keys=>[\"missing_plural_key.on","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988180,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097794708100,"value":"[]","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097801235940,"value":"{:root=>\"site_texts\", :rest_serializer=>true, :extras=>{}, :overridden_keys=>[\"missing_plural_key.on","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988181,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988182,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":988181,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bec90788>","object_id":70097614177220}},{"id":988183,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":988180,"elapsed":0.000149,"return_value":{"class":"Hash","value":"{\"site_texts\"=>[]}","object_id":70097801367080}},{"id":988184,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097801367080,"value":"{\"site_texts\"=>[]}","kind":"req"},{"name":"opts","class":"Hash","object_id":70097801235940,"value":"{:root=>\"site_texts\", :rest_serializer=>true, :extras=>{}, :overridden_keys=>[\"missing_plural_key.on","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988185,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":988184,"elapsed":0.000154,"return_value":{"class":"String","value":"{\"site_texts\":[],\"__rest_serializer\":\"1\",\"extras\":{}}","object_id":70097801451440}},{"id":988186,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":988179,"elapsed":0.000586,"return_value":{"class":"String","value":"{\"site_texts\":[],\"__rest_serializer\":\"1\",\"extras\":{}}","object_id":70097801451440}},{"id":988187,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"index","path":"app/controllers/admin/site_texts_controller.rb","lineno":18,"static":false,"thread_id":70097708498960,"parent_id":988166,"elapsed":0.084053,"return_value":{"class":"String","value":"{\"site_texts\":[],\"__rest_serializer\":\"1\",\"extras\":{}}","object_id":70097801451440}},{"id":988188,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988189,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":988188,"elapsed":8.0e-06},{"id":988190,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988191,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":988190,"elapsed":7.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097801598020}},{"id":988192,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097614145220,"value":"#<Admin::SiteTextsController:0x00007f81bec80d88>"}},{"id":988193,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988194,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988193,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988195,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097568965660,"value":"#<User:0x00007f81b9654838>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097828716240,"value":"#<ActionDispatch::Request::Session:0x00007f81d85c3da0>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097569425120,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81b9734dc0>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988196,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988197,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988198,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988197,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988199,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":988196,"elapsed":0.000113},{"id":988200,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988201,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614179500,"value":"#<TestCurrentUserProvider:0x00007f81bec91958>"}},{"id":988202,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988201,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9654838>","object_id":70097568965660}},{"id":988203,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":988200,"elapsed":0.000113},{"id":988204,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":988195,"elapsed":0.000428},{"id":988205,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":988192,"elapsed":0.000685},{"id":988206,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":988101,"elapsed":0.156055,"http_server_response":{"status":200}},{"id":988207,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097801987280,"value":"#<TestCurrentUserProvider:0x00007f81d52c89a0>"}},{"id":988208,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":988207,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988209,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":988210,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":988209,"elapsed":6.0e-06},{"id":988211,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":988212,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":988211,"elapsed":4.0e-06},{"id":988213,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802462980,"value":"#<TestCurrentUserProvider:0x00007f81d53b0e08>"}},{"id":988214,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097802479720,"value":"3e1b02e2b224e84b3c9be7dd0c29a6f1","kind":"req"},{"name":"opts","class":"Hash","object_id":70097802478400,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":988215,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097802479720,"value":"3e1b02e2b224e84b3c9be7dd0c29a6f1","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":988216,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":988217,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":988216,"elapsed":9.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":988218,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":988215,"elapsed":0.000135,"return_value":{"class":"String","value":"NbiQyl7AWhTYvUPakFIXCEa/E1I=","object_id":70097802533140}},{"id":988219,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'NbiQyl7AWhTYvUPakFIXCEa/E1I=' OR\n                          prev_auth_token = 'NbiQyl7AWhTYvUPakFIXCEa/E1I=') AND rotated_at > '2020-03-29 19:01:25.317668') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":988220,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988219,"elapsed":0.001232},{"id":988221,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":988214,"elapsed":0.005108,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81ccc05c60>","object_id":70097731333680}},{"id":988222,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":988223,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988222,"elapsed":0.001167},{"id":988224,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097565685260,"value":"#<User:0x00007f81b9012c18>"}},{"id":988225,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":988224,"elapsed":1.7e-05},{"id":988226,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802462980,"value":"#<TestCurrentUserProvider:0x00007f81d53b0e08>"}},{"id":988227,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":988226,"elapsed":0.000827,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988228,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097565685260,"value":"#<User:0x00007f81b9012c18>"}},{"id":988229,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":988228,"elapsed":0.000803},{"id":988230,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097565743920,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097565685260,"value":"#<User:0x00007f81b9012c18>"}},{"id":988231,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":988230,"elapsed":3.9e-05},{"id":988232,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988213,"elapsed":0.011993,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988233,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802462980,"value":"#<TestCurrentUserProvider:0x00007f81d53b0e08>"}},{"id":988234,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988233,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988235,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097565685260,"value":"#<User:0x00007f81b9012c18>"}},{"id":988236,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":988235,"elapsed":1.2e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988237,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097565969260,"value":"#<TestCurrentUserProvider:0x00007f81b909d6d8>"}},{"id":988238,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988237,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988239,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097565969260,"value":"#<TestCurrentUserProvider:0x00007f81b909d6d8>"}},{"id":988240,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988239,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988241,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097565685260,"value":"#<User:0x00007f81b9012c18>"}},{"id":988242,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":988241,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988243,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988244,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988243,"elapsed":1.2e-05},{"id":988245,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/customize/site_texts.json?q=another_missing_key"},"message":[{"name":"q","class":"String","value":"another_missing_key","object_id":70097802482720},{"name":"controller","class":"String","value":"admin/site_texts","object_id":70097754993340},{"name":"action","class":"String","value":"index","object_id":70097754993400},{"name":"format","class":"String","value":"json","object_id":70097802463860}]},{"id":988246,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988247,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988248,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988249,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988250,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988249,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988251,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":988248,"elapsed":0.000126,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d465c248>","object_id":70097795473700}},{"id":988252,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097795473700,"value":"#<Guardian:0x00007f81d465c248>"}},{"id":988253,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":988252,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988254,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":988247,"elapsed":0.000365},{"id":988255,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988256,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988255,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988257,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":988258,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988257,"elapsed":0.000996},{"id":988259,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988260,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":988259,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d465c248>","object_id":70097795473700}},{"id":988261,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097566355580,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097795473700,"value":"#<Guardian:0x00007f81d465c248>"}},{"id":988262,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":988261,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988263,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":988246,"elapsed":0.005557,"return_value":{"class":"Array","value":"[2]","object_id":70097566355580}},{"id":988264,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988265,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988266,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988265,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988267,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988268,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988267,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988269,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988270,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988269,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988271,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":988264,"elapsed":0.00032,"return_value":{"class":"String","value":"site_texts/index","object_id":70097795677100}},{"id":988272,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988273,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988274,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988273,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988275,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":988272,"elapsed":0.000104},{"id":988276,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988277,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988278,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988277,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988279,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988280,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988279,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988281,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097565685260,"value":"#<User:0x00007f81b9012c18>"}},{"id":988282,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":988281,"elapsed":6.0e-06,"return_value":{"class":"String","value":"ru","object_id":70097798970180}},{"id":988283,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988284,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988283,"elapsed":9.0e-06},{"id":988285,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988286,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988285,"elapsed":6.0e-06},{"id":988287,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":988276,"elapsed":0.000477,"return_value":{"class":"Array","value":"[:ru, :en]","object_id":70097795696240}},{"id":988288,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988289,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":988288,"elapsed":6.0e-06},{"id":988290,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988291,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988292,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988291,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988293,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":988290,"elapsed":9.3e-05},{"id":988294,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988295,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988294,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988296,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988297,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988296,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988298,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988299,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988298,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988300,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":988301,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":988300,"elapsed":3.0e-06},{"id":988302,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988303,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":988302,"elapsed":7.0e-06},{"id":988304,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988305,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988304,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988306,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988307,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988306,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988308,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097565685260,"value":"#<User:0x00007f81b9012c18>"}},{"id":988309,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":988308,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988310,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"index","path":"app/controllers/admin/site_texts_controller.rb","lineno":18,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988311,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988312,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988311,"elapsed":7.0e-06},{"id":988313,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988314,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988313,"elapsed":6.0e-06},{"id":988315,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":988316,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":988315,"elapsed":5.0e-06},{"id":988317,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":988318,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":988317,"elapsed":1.1e-05},{"id":988319,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"translation_overrides\".\"translation_key\" FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru'","database_type":"postgres","server_version":110006}},{"id":988320,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":988319,"elapsed":0.001178},{"id":988321,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097815786100,"value":"[]","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097590894660,"value":"{:root=>\"site_texts\", :rest_serializer=>true, :extras=>{}, :overridden_keys=>[\"missing_plural_key.on","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988322,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097815786100,"value":"[]","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097590894660,"value":"{:root=>\"site_texts\", :rest_serializer=>true, :extras=>{}, :overridden_keys=>[\"missing_plural_key.on","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988323,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988324,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":988323,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d465c248>","object_id":70097795473700}},{"id":988325,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":988322,"elapsed":0.000126,"return_value":{"class":"Hash","value":"{\"site_texts\"=>[]}","object_id":70097590951620}},{"id":988326,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097590951620,"value":"{\"site_texts\"=>[]}","kind":"req"},{"name":"opts","class":"Hash","object_id":70097590894660,"value":"{:root=>\"site_texts\", :rest_serializer=>true, :extras=>{}, :overridden_keys=>[\"missing_plural_key.on","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988327,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":988326,"elapsed":0.000134,"return_value":{"class":"String","value":"{\"site_texts\":[],\"__rest_serializer\":\"1\",\"extras\":{}}","object_id":70097590944120}},{"id":988328,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":988321,"elapsed":0.000503,"return_value":{"class":"String","value":"{\"site_texts\":[],\"__rest_serializer\":\"1\",\"extras\":{}}","object_id":70097590944120}},{"id":988329,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"index","path":"app/controllers/admin/site_texts_controller.rb","lineno":18,"static":false,"thread_id":70097708498960,"parent_id":988310,"elapsed":0.029155,"return_value":{"class":"String","value":"{\"site_texts\":[],\"__rest_serializer\":\"1\",\"extras\":{}}","object_id":70097590944120}},{"id":988330,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988331,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":988330,"elapsed":7.0e-06},{"id":988332,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988333,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":988332,"elapsed":6.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097590977500}},{"id":988334,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097804467120,"value":"#<Admin::SiteTextsController:0x00007f81d5783760>"}},{"id":988335,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988336,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988335,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988337,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097565685260,"value":"#<User:0x00007f81b9012c18>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097802232940,"value":"#<ActionDispatch::Request::Session:0x00007f81d53408d8>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097566355980,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81b915a418>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988338,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988339,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988340,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988339,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988341,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":988338,"elapsed":9.8e-05},{"id":988342,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988343,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097795581500,"value":"#<TestCurrentUserProvider:0x00007f81d4690c78>"}},{"id":988344,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":988343,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b9012c18>","object_id":70097565685260}},{"id":988345,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":988342,"elapsed":0.00011},{"id":988346,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":988337,"elapsed":0.000389},{"id":988347,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":988334,"elapsed":0.000608},{"id":988348,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":988245,"elapsed":0.039076,"http_server_response":{"status":200}},{"id":988349,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591075780,"value":"#<TestCurrentUserProvider:0x00007f81bc080788>"}},{"id":988350,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":988349,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":988351,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":988352,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":988351,"elapsed":5.0e-06},{"id":988353,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":988354,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":988353,"elapsed":4.0e-06}]}