{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::PermalinksController #create works for tags","app":"Discourse","feature":"Admin::PermalinksController #create","feature_group":"Admin permalinks","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"Tag","type":"class","children":[{"name":"target_tag_validator","type":"function","location":"app/models/tag.rb:160","static":false},{"name":"index_search","type":"function","location":"app/models/tag.rb:152","static":false},{"name":"update_synonym_associations","type":"function","location":"app/models/tag.rb:168","static":false},{"name":"trigger_tag_created_event","type":"function","location":"app/models/tag.rb:180","static":false},{"name":"full_url","type":"function","location":"app/models/tag.rb:148","static":false}]},{"name":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"enqueue_object_hooks","type":"function","location":"app/models/web_hook.rb:60","static":true},{"name":"active_web_hooks","type":"function","location":"app/models/web_hook.rb:45","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"Tag(id: integer, name: string, topic_count: integer, created_at: datetime, updated_at: datetime, pm_topic_count: integer, target_tag_id: integer)","type":"class","children":[{"name":"find_by_name","type":"function","location":"app/models/tag.rb:87","static":true}]},{"name":"Permalink","type":"class","children":[{"name":"normalize_url","type":"function","location":"app/models/permalink.rb:75","static":false},{"name":"Normalizer","type":"class","children":[{"name":"normalize","type":"function","location":"app/models/permalink.rb:48","static":false}]}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"app/services","type":"package","children":[{"name":"SearchIndexer","type":"class","children":[{"name":"index","type":"function","location":"app/services/search_indexer.rb:126","static":true}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_serialized","type":"function","location":"app/controllers/application_controller.rb:446","static":false},{"name":"serialize_data","type":"function","location":"app/controllers/application_controller.rb:431","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"PermalinksController","type":"class","children":[{"name":"create","type":"function","location":"app/controllers/admin/permalinks_controller.rb:13","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"app/serializers","type":"package","children":[{"name":"PermalinkSerializer","type":"class","children":[{"name":"topic_title","type":"function","location":"app/serializers/permalink_serializer.rb:9","static":false},{"name":"topic_url","type":"function","location":"app/serializers/permalink_serializer.rb:13","static":false},{"name":"post_url","type":"function","location":"app/serializers/permalink_serializer.rb:17","static":false},{"name":"post_number","type":"function","location":"app/serializers/permalink_serializer.rb:22","static":false},{"name":"post_topic_title","type":"function","location":"app/serializers/permalink_serializer.rb:26","static":false},{"name":"category_name","type":"function","location":"app/serializers/permalink_serializer.rb:30","static":false},{"name":"category_url","type":"function","location":"app/serializers/permalink_serializer.rb:34","static":false},{"name":"tag_name","type":"function","location":"app/serializers/permalink_serializer.rb:38","static":false},{"name":"tag_url","type":"function","location":"app/serializers/permalink_serializer.rb:42","static":false}]}]}],"events":[{"id":1018603,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1018604,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018603,"elapsed":0.000776},{"id":1018605,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"tags\" WHERE LOWER(\"tags\".\"name\") = LOWER('tag30') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1018606,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018605,"elapsed":0.001166},{"id":1018607,"event":"call","defined_class":"Tag","method_id":"target_tag_validator","path":"app/models/tag.rb","lineno":160,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Tag","object_id":70097828286760,"value":"#<Tag:0x00007f81d84f2250>"}},{"id":1018608,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"tags\" WHERE \"tags\".\"target_tag_id\" IS NULL AND (1=0) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1018609,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018608,"elapsed":0.000885},{"id":1018610,"event":"return","defined_class":"Tag","method_id":"target_tag_validator","path":"app/models/tag.rb","lineno":160,"static":false,"thread_id":70097708498960,"parent_id":1018607,"elapsed":0.003761},{"id":1018611,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"tags\" (\"name\", \"created_at\", \"updated_at\") VALUES ('tag30', '2020-05-28 19:01:49.256895', '2020-05-28 19:01:49.256895') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1018612,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018611,"elapsed":0.000898},{"id":1018613,"event":"call","defined_class":"Tag","method_id":"index_search","path":"app/models/tag.rb","lineno":152,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Tag","object_id":70097828286760,"value":"#<Tag:0x00007f81d84f2250>"}},{"id":1018614,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Tag","object_id":70097828286760,"value":"#<Tag:0x00007f81d84f2250>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":1018615,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1018614,"elapsed":4.0e-06},{"id":1018616,"event":"return","defined_class":"Tag","method_id":"index_search","path":"app/models/tag.rb","lineno":152,"static":false,"thread_id":70097708498960,"parent_id":1018613,"elapsed":0.000139},{"id":1018617,"event":"call","defined_class":"Tag","method_id":"update_synonym_associations","path":"app/models/tag.rb","lineno":168,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Tag","object_id":70097828286760,"value":"#<Tag:0x00007f81d84f2250>"}},{"id":1018618,"event":"return","defined_class":"Tag","method_id":"update_synonym_associations","path":"app/models/tag.rb","lineno":168,"static":false,"thread_id":70097708498960,"parent_id":1018617,"elapsed":7.0e-06},{"id":1018619,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1018620,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018619,"elapsed":0.000747},{"id":1018621,"event":"call","defined_class":"Tag","method_id":"trigger_tag_created_event","path":"app/models/tag.rb","lineno":180,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Tag","object_id":70097828286760,"value":"#<Tag:0x00007f81d84f2250>"}},{"id":1018622,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":179868,"value":"tag","kind":"req"},{"name":"object","class":"Tag","object_id":70097828286760,"value":"#<Tag:0x00007f81d84f2250>","kind":"req"},{"name":"event","class":"Symbol","object_id":12692188,"value":"tag_created","kind":"req"},{"name":"serializer","class":"Class","object_id":70097614587000,"value":"TagSerializer","kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":1018623,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":179868,"value":"tag","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":1018624,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":1018623,"elapsed":0.000212,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81bec5a200>","object_id":70097614065920}},{"id":1018625,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'tag') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1018626,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018625,"elapsed":0.00108},{"id":1018627,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":1018622,"elapsed":0.004161},{"id":1018628,"event":"return","defined_class":"Tag","method_id":"trigger_tag_created_event","path":"app/models/tag.rb","lineno":180,"static":false,"thread_id":70097708498960,"parent_id":1018621,"elapsed":0.004321,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1018629,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608812340,"value":"#<TestCurrentUserProvider:0x00007f81be254e68>"}},{"id":1018630,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097608833820,"value":"344eedf0edd9223aeb1781ddd8eb997e","kind":"req"},{"name":"opts","class":"Hash","object_id":70097608833080,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1018631,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097608833820,"value":"344eedf0edd9223aeb1781ddd8eb997e","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1018632,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1018633,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1018632,"elapsed":8.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1018634,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1018631,"elapsed":0.000119,"return_value":{"class":"String","value":"R8HFyGQ3I8fCZWgIgVcnZaX8vfk=","object_id":70097608866080}},{"id":1018635,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'R8HFyGQ3I8fCZWgIgVcnZaX8vfk=' OR\n                          prev_auth_token = 'R8HFyGQ3I8fCZWgIgVcnZaX8vfk=') AND rotated_at > '2020-03-29 19:01:49.270076') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1018636,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018635,"elapsed":0.001009},{"id":1018637,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 19:01:49.274362' WHERE \"user_auth_tokens\".\"id\" = 1195 AND \"user_auth_tokens\".\"auth_token\" = 'R8HFyGQ3I8fCZWgIgVcnZaX8vfk='","database_type":"postgres","server_version":110006}},{"id":1018638,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018637,"elapsed":0.001144},{"id":1018639,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097814486880,"value":"{:action=>\"seen token\", :user_auth_token_id=>1195, :user_id=>1367, :auth_token=>\"R8HFyGQ3I8fCZWgIgVc","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1018640,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1018641,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018640,"elapsed":0.000746},{"id":1018642,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 1195, 1367, '127.0.0.1/32', 'R8HFyGQ3I8fCZWgIgVcnZaX8vfk=', '2020-05-28 19:01:49.278328') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1018643,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018642,"elapsed":0.000878},{"id":1018644,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1018645,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018644,"elapsed":0.000717},{"id":1018646,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1018639,"elapsed":0.011803,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81d6a9e840>","object_id":70097814484000}},{"id":1018647,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1018630,"elapsed":0.020145,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81d4f2fac8>","object_id":70097800101220}},{"id":1018648,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1367 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1018649,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018648,"elapsed":0.001204},{"id":1018650,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589516660,"value":"#<User:0x00007f81bbd872e8>"}},{"id":1018651,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1018650,"elapsed":1.6e-05},{"id":1018652,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608812340,"value":"#<TestCurrentUserProvider:0x00007f81be254e68>"}},{"id":1018653,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1018652,"elapsed":0.000794,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1018654,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097589516660,"value":"#<User:0x00007f81bbd872e8>"}},{"id":1018655,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1018654,"elapsed":0.000702},{"id":1018656,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097589512060,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097589516660,"value":"#<User:0x00007f81bbd872e8>"}},{"id":1018657,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 1367","database_type":"postgres","server_version":110006}},{"id":1018658,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018657,"elapsed":0.000976},{"id":1018659,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1018656,"elapsed":0.003439,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1018660,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018629,"elapsed":0.030294,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018661,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608812340,"value":"#<TestCurrentUserProvider:0x00007f81be254e68>"}},{"id":1018662,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018661,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018663,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589516660,"value":"#<User:0x00007f81bbd872e8>"}},{"id":1018664,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1018663,"elapsed":1.3e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1018665,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589657180,"value":"#<TestCurrentUserProvider:0x00007f81bbdcbcb8>"}},{"id":1018666,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018665,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018667,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589657180,"value":"#<TestCurrentUserProvider:0x00007f81bbdcbcb8>"}},{"id":1018668,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018667,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018669,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589516660,"value":"#<User:0x00007f81bbd872e8>"}},{"id":1018670,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1018669,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1018671,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1018672,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1018671,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1018673,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1018674,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1018673,"elapsed":1.1e-05},{"id":1018675,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"POST","path_info":"/admin/permalinks.json"},"message":[{"name":"url","class":"String","value":"/forums/12","object_id":70097608712660},{"name":"permalink_type","class":"String","value":"tag_name","object_id":70097608736560},{"name":"permalink_type_value","class":"String","value":"tag30","object_id":70097608736140},{"name":"controller","class":"String","value":"admin/permalinks","object_id":70097755727660},{"name":"action","class":"String","value":"create","object_id":70097708337360},{"name":"format","class":"String","value":"json","object_id":70097608813400}]},{"id":1018676,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018677,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018678,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018679,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018680,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018679,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018681,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1018678,"elapsed":0.000121,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bbddb5f0>","object_id":70097589689080}},{"id":1018682,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097589689080,"value":"#<Guardian:0x00007f81bbddb5f0>"}},{"id":1018683,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1018682,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1018684,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1018677,"elapsed":0.000345},{"id":1018685,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018686,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018685,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018687,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1367 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1018688,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018687,"elapsed":0.000884},{"id":1018689,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018690,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1018689,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bbddb5f0>","object_id":70097589689080}},{"id":1018691,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097609302440,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097589689080,"value":"#<Guardian:0x00007f81bbddb5f0>"}},{"id":1018692,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1018691,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1018693,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1018676,"elapsed":0.005068,"return_value":{"class":"Array","value":"[2]","object_id":70097609302440}},{"id":1018694,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018695,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018696,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018695,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018697,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018698,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018697,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018699,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018700,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018699,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018701,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1018694,"elapsed":0.000344,"return_value":{"class":"String","value":"permalinks/create","object_id":70097589954880}},{"id":1018702,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018703,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018704,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018703,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018705,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1018702,"elapsed":0.00011},{"id":1018706,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018707,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018708,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018707,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018709,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018710,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018709,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018711,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589516660,"value":"#<User:0x00007f81bbd872e8>"}},{"id":1018712,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1018711,"elapsed":1.3e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":1018713,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1018714,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1018713,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1018715,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1018716,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1018715,"elapsed":9.0e-06},{"id":1018717,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1018718,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1018717,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1018719,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1018720,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1018719,"elapsed":7.0e-06},{"id":1018721,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1018706,"elapsed":0.000709,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097569613420}},{"id":1018722,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018723,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1018722,"elapsed":8.0e-06},{"id":1018724,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018725,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018726,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018725,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018727,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1018724,"elapsed":9.7e-05},{"id":1018728,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018729,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018728,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018730,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018731,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018730,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018732,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018733,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018732,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018734,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097757594680,"value":"Admin::PermalinksController"}},{"id":1018735,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1018734,"elapsed":3.0e-06},{"id":1018736,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018737,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1018736,"elapsed":7.0e-06},{"id":1018738,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018739,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018740,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018739,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018741,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1018738,"elapsed":9.8e-05},{"id":1018742,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018743,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018744,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018743,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018745,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1018742,"elapsed":9.5e-05},{"id":1018746,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018747,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018746,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018748,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018749,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018748,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018750,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589516660,"value":"#<User:0x00007f81bbd872e8>"}},{"id":1018751,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1018750,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1018752,"event":"call","defined_class":"Admin::PermalinksController","method_id":"create","path":"app/controllers/admin/permalinks_controller.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018753,"event":"call","defined_class":"Tag(id: integer, name: string, topic_count: integer, created_at: datetime, updated_at: datetime, pm_topic_count: integer, target_tag_id: integer)","method_id":"find_by_name","path":"app/models/tag.rb","lineno":87,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097608736140,"value":"tag30","kind":"req"}],"receiver":{"class":"Class","object_id":70097755158320,"value":"Tag"}},{"id":1018754,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".* FROM \"tags\" WHERE (lower(name) = 'tag30') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1018755,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018754,"elapsed":0.000997},{"id":1018756,"event":"return","defined_class":"Tag(id: integer, name: string, topic_count: integer, created_at: datetime, updated_at: datetime, pm_topic_count: integer, target_tag_id: integer)","method_id":"find_by_name","path":"app/models/tag.rb","lineno":87,"static":true,"thread_id":70097708498960,"parent_id":1018753,"elapsed":0.00413,"return_value":{"class":"Tag","value":"#<Tag:0x00007f81c0044478>","object_id":70097624506940}},{"id":1018757,"event":"call","defined_class":"Permalink","method_id":"normalize_url","path":"app/models/permalink.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Permalink","object_id":70097624530480,"value":"#<Permalink:0x00007f81c004fc60>"}},{"id":1018758,"event":"call","defined_class":"Permalink::Normalizer","method_id":"normalize","path":"app/models/permalink.rb","lineno":48,"static":false,"thread_id":70097708498960,"parameters":[{"name":"url","class":"String","object_id":70097624527120,"value":"forums/12","kind":"req"}],"receiver":{"class":"Permalink::Normalizer","object_id":70097796075480,"value":"#<Permalink::Normalizer:0x00007f81d4781fb0>"}},{"id":1018759,"event":"return","defined_class":"Permalink::Normalizer","method_id":"normalize","path":"app/models/permalink.rb","lineno":48,"static":false,"thread_id":70097708498960,"parent_id":1018758,"elapsed":4.0e-06,"return_value":{"class":"String","value":"forums/12","object_id":70097624527120}},{"id":1018760,"event":"return","defined_class":"Permalink","method_id":"normalize_url","path":"app/models/permalink.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1018757,"elapsed":0.000145,"return_value":{"class":"String","value":"forums/12","object_id":70097624527120}},{"id":1018761,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1018762,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018761,"elapsed":0.000719},{"id":1018763,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"permalinks\" (\"url\", \"created_at\", \"updated_at\", \"tag_id\") VALUES ('forums/12', '2020-05-28 19:01:49.315120', '2020-05-28 19:01:49.315120', 90) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1018764,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018763,"elapsed":0.000838},{"id":1018765,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1018766,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018765,"elapsed":0.000969},{"id":1018767,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Permalink","object_id":70097624530480,"value":"#<Permalink:0x00007f81c004fc60>","kind":"req"},{"name":"serializer","class":"Class","object_id":70097827194200,"value":"PermalinkSerializer","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018768,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Permalink","object_id":70097624530480,"value":"#<Permalink:0x00007f81c004fc60>","kind":"req"},{"name":"serializer","class":"Class","object_id":70097827194200,"value":"PermalinkSerializer","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018769,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018770,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1018769,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bbddb5f0>","object_id":70097589689080}},{"id":1018771,"event":"call","defined_class":"PermalinkSerializer","method_id":"topic_title","path":"app/serializers/permalink_serializer.rb","lineno":9,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"PermalinkSerializer","object_id":70097792904080,"value":"#<PermalinkSerializer:0x00007f81d4175720>"}},{"id":1018772,"event":"return","defined_class":"PermalinkSerializer","method_id":"topic_title","path":"app/serializers/permalink_serializer.rb","lineno":9,"static":false,"thread_id":70097708498960,"parent_id":1018771,"elapsed":3.4e-05},{"id":1018773,"event":"call","defined_class":"PermalinkSerializer","method_id":"topic_url","path":"app/serializers/permalink_serializer.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"PermalinkSerializer","object_id":70097792904080,"value":"#<PermalinkSerializer:0x00007f81d4175720>"}},{"id":1018774,"event":"return","defined_class":"PermalinkSerializer","method_id":"topic_url","path":"app/serializers/permalink_serializer.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1018773,"elapsed":9.0e-06},{"id":1018775,"event":"call","defined_class":"PermalinkSerializer","method_id":"post_url","path":"app/serializers/permalink_serializer.rb","lineno":17,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"PermalinkSerializer","object_id":70097792904080,"value":"#<PermalinkSerializer:0x00007f81d4175720>"}},{"id":1018776,"event":"return","defined_class":"PermalinkSerializer","method_id":"post_url","path":"app/serializers/permalink_serializer.rb","lineno":17,"static":false,"thread_id":70097708498960,"parent_id":1018775,"elapsed":1.8e-05},{"id":1018777,"event":"call","defined_class":"PermalinkSerializer","method_id":"post_number","path":"app/serializers/permalink_serializer.rb","lineno":22,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"PermalinkSerializer","object_id":70097792904080,"value":"#<PermalinkSerializer:0x00007f81d4175720>"}},{"id":1018778,"event":"return","defined_class":"PermalinkSerializer","method_id":"post_number","path":"app/serializers/permalink_serializer.rb","lineno":22,"static":false,"thread_id":70097708498960,"parent_id":1018777,"elapsed":8.0e-06},{"id":1018779,"event":"call","defined_class":"PermalinkSerializer","method_id":"post_topic_title","path":"app/serializers/permalink_serializer.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"PermalinkSerializer","object_id":70097792904080,"value":"#<PermalinkSerializer:0x00007f81d4175720>"}},{"id":1018780,"event":"return","defined_class":"PermalinkSerializer","method_id":"post_topic_title","path":"app/serializers/permalink_serializer.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":1018779,"elapsed":8.0e-06},{"id":1018781,"event":"call","defined_class":"PermalinkSerializer","method_id":"category_name","path":"app/serializers/permalink_serializer.rb","lineno":30,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"PermalinkSerializer","object_id":70097792904080,"value":"#<PermalinkSerializer:0x00007f81d4175720>"}},{"id":1018782,"event":"return","defined_class":"PermalinkSerializer","method_id":"category_name","path":"app/serializers/permalink_serializer.rb","lineno":30,"static":false,"thread_id":70097708498960,"parent_id":1018781,"elapsed":1.7e-05},{"id":1018783,"event":"call","defined_class":"PermalinkSerializer","method_id":"category_url","path":"app/serializers/permalink_serializer.rb","lineno":34,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"PermalinkSerializer","object_id":70097792904080,"value":"#<PermalinkSerializer:0x00007f81d4175720>"}},{"id":1018784,"event":"return","defined_class":"PermalinkSerializer","method_id":"category_url","path":"app/serializers/permalink_serializer.rb","lineno":34,"static":false,"thread_id":70097708498960,"parent_id":1018783,"elapsed":8.0e-06},{"id":1018785,"event":"call","defined_class":"PermalinkSerializer","method_id":"tag_name","path":"app/serializers/permalink_serializer.rb","lineno":38,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"PermalinkSerializer","object_id":70097792904080,"value":"#<PermalinkSerializer:0x00007f81d4175720>"}},{"id":1018786,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".* FROM \"tags\" WHERE \"tags\".\"id\" = 90 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1018787,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018786,"elapsed":0.001017},{"id":1018788,"event":"return","defined_class":"PermalinkSerializer","method_id":"tag_name","path":"app/serializers/permalink_serializer.rb","lineno":38,"static":false,"thread_id":70097708498960,"parent_id":1018785,"elapsed":0.00565,"return_value":{"class":"String","value":"tag30","object_id":70097755419940}},{"id":1018789,"event":"call","defined_class":"PermalinkSerializer","method_id":"tag_url","path":"app/serializers/permalink_serializer.rb","lineno":42,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"PermalinkSerializer","object_id":70097792904080,"value":"#<PermalinkSerializer:0x00007f81d4175720>"}},{"id":1018790,"event":"call","defined_class":"Tag","method_id":"full_url","path":"app/models/tag.rb","lineno":148,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Tag","object_id":70097755421800,"value":"#<Tag:0x00007f81cf9f78d0>"}},{"id":1018791,"event":"return","defined_class":"Tag","method_id":"full_url","path":"app/models/tag.rb","lineno":148,"static":false,"thread_id":70097708498960,"parent_id":1018790,"elapsed":4.6e-05,"return_value":{"class":"String","value":"http://test.localhost/tag/tag30","object_id":70097755483480}},{"id":1018792,"event":"return","defined_class":"PermalinkSerializer","method_id":"tag_url","path":"app/serializers/permalink_serializer.rb","lineno":42,"static":false,"thread_id":70097708498960,"parent_id":1018789,"elapsed":0.000184,"return_value":{"class":"String","value":"http://test.localhost/tag/tag30","object_id":70097755483480}},{"id":1018793,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":1018768,"elapsed":0.007301,"return_value":{"class":"Hash","value":"{:permalink=>{:id=>22, :url=>\"forums/12\", :topic_id=>nil, :topic_title=>nil, :topic_url=>nil, :post_","object_id":70097792922820}},{"id":1018794,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097792922820,"value":"{:permalink=>{:id=>22, :url=>\"forums/12\", :topic_id=>nil, :topic_title=>nil, :topic_url=>nil, :post_","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018795,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1018794,"elapsed":0.000158,"return_value":{"class":"String","value":"{\"permalink\":{\"id\":22,\"url\":\"forums/12\",\"topic_id\":null,\"topic_title\":null,\"topic_url\":null,\"post_id","object_id":70097755583260}},{"id":1018796,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":1018767,"elapsed":0.007788,"return_value":{"class":"String","value":"{\"permalink\":{\"id\":22,\"url\":\"forums/12\",\"topic_id\":null,\"topic_title\":null,\"topic_url\":null,\"post_id","object_id":70097755583260}},{"id":1018797,"event":"return","defined_class":"Admin::PermalinksController","method_id":"create","path":"app/controllers/admin/permalinks_controller.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1018752,"elapsed":0.06651,"return_value":{"class":"String","value":"{\"permalink\":{\"id\":22,\"url\":\"forums/12\",\"topic_id\":null,\"topic_title\":null,\"topic_url\":null,\"post_id","object_id":70097755583260}},{"id":1018798,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018799,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1018798,"elapsed":6.0e-06},{"id":1018800,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018801,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1018800,"elapsed":7.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097755744880}},{"id":1018802,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::PermalinksController","object_id":70097589652180,"value":"#<Admin::PermalinksController:0x00007f81bbdc95a8>"}},{"id":1018803,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018804,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018803,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018805,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097589516660,"value":"#<User:0x00007f81bbd872e8>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097608735200,"value":"#<ActionDispatch::Request::Session:0x00007f81be22f3c0>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097609302640,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81be3444e0>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018806,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018807,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018808,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018807,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018809,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1018806,"elapsed":0.000119},{"id":1018810,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018811,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589666040,"value":"#<TestCurrentUserProvider:0x00007f81bbdd01f0>"}},{"id":1018812,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1018811,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbd872e8>","object_id":70097589516660}},{"id":1018813,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1018810,"elapsed":0.000134},{"id":1018814,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1018805,"elapsed":0.000465},{"id":1018815,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1018802,"elapsed":0.000731},{"id":1018816,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1018675,"elapsed":0.07686,"http_server_response":{"status":200}},{"id":1018817,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097756038080,"value":"#<TestCurrentUserProvider:0x00007f81cfb24780>"}},{"id":1018818,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1018817,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1018819,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1018820,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1018819,"elapsed":6.0e-06},{"id":1018821,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1018822,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1018821,"elapsed":7.0e-06},{"id":1018823,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"permalinks\".* FROM \"permalinks\" ORDER BY \"permalinks\".\"id\" DESC LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1018824,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1018823,"elapsed":0.001186}]}