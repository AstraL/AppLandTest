{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"ReviewablesController when logged in #perform validates the presenece of an action","app":"Discourse","feature":"ReviewablesController when logged in","feature_group":"Reviewables","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true},{"name":"skip_db?","type":"function","location":"app/models/global_setting.rb:84","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_visit_record!","type":"function","location":"app/models/user.rb:680","static":false},{"name":"visit_record_for","type":"function","location":"app/models/user.rb:676","static":false},{"name":"create_visit_record!","type":"function","location":"app/models/user.rb:671","static":false},{"name":"seen_before?","type":"function","location":"app/models/user.rb:667","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"secure_category_ids","type":"function","location":"app/models/user.rb:999","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"viewable_by","type":"function","location":"app/models/reviewable.rb:406","static":true},{"name":"action_aliases","type":"function","location":"app/models/reviewable.rb:41","static":true}]},{"name":"Reviewable","type":"class","children":[{"name":"perform","type":"function","location":"app/models/reviewable.rb:337","static":false},{"name":"actions_for","type":"function","location":"app/models/reviewable.rb:291","static":false},{"name":"pending?","type":"function","location":"app/models/reviewable.rb:82","static":false}]},{"name":"ReviewableUser","type":"class","children":[{"name":"build_actions","type":"function","location":"app/models/reviewable_user.rb:12","static":false}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"rescue_discourse_actions","type":"function","location":"app/controllers/application_controller.rb:229","static":false}]},{"name":"ReviewablesController","type":"class","children":[{"name":"perform","type":"function","location":"app/controllers/reviewables_controller.rb:177","static":false}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false},{"name":"is_staff?","type":"function","location":"lib/guardian.rb:88","static":false},{"name":"can_approve?","type":"function","location":"lib/guardian.rb:260","static":false}]},{"name":"EnsureMagic","type":"class","children":[{"name":"method_missing","type":"function","location":"lib/guardian/ensure_magic.rb:6","static":false}]},{"name":"UserGuardian","type":"class","children":[{"name":"can_see_review_queue?","type":"function","location":"lib/guardian/user_guardian.rb:148","static":false}]},{"name":"CategoryGuardian","type":"class","children":[{"name":"allowed_category_ids","type":"function","location":"lib/guardian/category_guardian.rb:62","static":false},{"name":"secure_category_ids","type":"function","location":"lib/guardian/category_guardian.rb:57","static":false}]}]}],"events":[{"id":25451,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"reviewables\".* FROM \"reviewables\" WHERE \"reviewables\".\"type\" = 'ReviewableUser' AND \"reviewables\".\"id\" = 22 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":25452,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25451,"elapsed":0.000918},{"id":25453,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":25454,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":25453,"elapsed":6.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":25455,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":25456,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":25455,"elapsed":1.1e-05},{"id":25457,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"PUT","path_info":"/review/22/perform/nope.json?version=0"},"message":[{"name":"version","class":"String","value":"0","object_id":70097828385600},{"name":"controller","class":"String","value":"reviewables","object_id":70097756680320},{"name":"action","class":"String","value":"perform","object_id":70097756680300},{"name":"reviewable_id","class":"String","value":"22","object_id":70097828349800},{"name":"action_id","class":"String","value":"nope","object_id":70097828349780},{"name":"format","class":"String","value":"json","object_id":70097828349760}]},{"id":25458,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25459,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25460,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25461,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25462,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097828402040,"value":"468601765a1e246c39a5b4ea0a6ecdc3","kind":"req"},{"name":"opts","class":"Hash","object_id":70097828401660,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":25463,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097828402040,"value":"468601765a1e246c39a5b4ea0a6ecdc3","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":25464,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":25465,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":25464,"elapsed":8.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":25466,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":25463,"elapsed":0.000121,"return_value":{"class":"String","value":"3X8V3H3Efj8LTqgtagED/dDBExE=","object_id":70097828397480}},{"id":25467,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = '3X8V3H3Efj8LTqgtagED/dDBExE=' OR\n                          prev_auth_token = '3X8V3H3Efj8LTqgtagED/dDBExE=') AND rotated_at > '2020-03-29 18:49:55.320689') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":25468,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25467,"elapsed":0.00113},{"id":25469,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 18:49:55.325637' WHERE \"user_auth_tokens\".\"id\" = 284 AND \"user_auth_tokens\".\"auth_token\" = '3X8V3H3Efj8LTqgtagED/dDBExE='","database_type":"postgres","server_version":110006}},{"id":25470,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25469,"elapsed":0.001159},{"id":25471,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097612868260,"value":"{:action=>\"seen token\", :user_auth_token_id=>284, :user_id=>55, :auth_token=>\"3X8V3H3Efj8LTqgtagED/d","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":25472,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":25473,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25472,"elapsed":0.000903},{"id":25474,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 284, 55, '127.0.0.1/32', '3X8V3H3Efj8LTqgtagED/dDBExE=', '2020-05-28 18:49:55.334297') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":25475,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25474,"elapsed":0.001166},{"id":25476,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":25477,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25476,"elapsed":0.000789},{"id":25478,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":25471,"elapsed":0.012855,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81bea10580>","object_id":70097612866240}},{"id":25479,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":25462,"elapsed":0.022433,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81d4e908b0>","object_id":70097799775320}},{"id":25480,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 55 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":25481,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25480,"elapsed":0.001087},{"id":25482,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25483,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":25482,"elapsed":1.6e-05},{"id":25484,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25485,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":25484,"elapsed":0.000848,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25486,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25487,"event":"call","defined_class":"User","method_id":"update_visit_record!","path":"app/models/user.rb","lineno":680,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097799963040,"value":"2020-05-28","kind":"req"}],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25488,"event":"call","defined_class":"User","method_id":"visit_record_for","path":"app/models/user.rb","lineno":676,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097799963040,"value":"2020-05-28","kind":"req"}],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25489,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_visits\".* FROM \"user_visits\" WHERE \"user_visits\".\"user_id\" = 55 AND \"user_visits\".\"visited_at\" = '2020-05-28' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":25490,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25489,"elapsed":0.001047},{"id":25491,"event":"return","defined_class":"User","method_id":"visit_record_for","path":"app/models/user.rb","lineno":676,"static":false,"thread_id":70097708498960,"parent_id":25488,"elapsed":0.004558},{"id":25492,"event":"call","defined_class":"User","method_id":"create_visit_record!","path":"app/models/user.rb","lineno":671,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097799963040,"value":"2020-05-28","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25493,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_stats\".\"user_id\", \"user_stats\".\"topics_entered\", \"user_stats\".\"time_read\", \"user_stats\".\"days_visited\", \"user_stats\".\"posts_read_count\", \"user_stats\".\"likes_given\", \"user_stats\".\"likes_received\", \"user_stats\".\"new_since\", \"user_stats\".\"read_faq\", \"user_stats\".\"first_post_created_at\", \"user_stats\".\"post_count\", \"user_stats\".\"topic_count\", \"user_stats\".\"bounce_score\", \"user_stats\".\"reset_bounce_score_after\", \"user_stats\".\"flags_agreed\", \"user_stats\".\"flags_disagreed\", \"user_stats\".\"flags_ignored\", \"user_stats\".\"first_unread_at\", \"user_stats\".\"distinct_badge_count\" FROM \"user_stats\" WHERE \"user_stats\".\"user_id\" = 55 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":25494,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25493,"elapsed":0.000976},{"id":25495,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_stats\" SET \"days_visited\" = 1 WHERE \"user_stats\".\"user_id\" = 55","database_type":"postgres","server_version":110006}},{"id":25496,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25495,"elapsed":0.000992},{"id":25497,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":25498,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25497,"elapsed":0.000721},{"id":25499,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_visits\" (\"user_id\", \"visited_at\") VALUES (55, '2020-05-28') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":25500,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25499,"elapsed":0.001073},{"id":25501,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":25502,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25501,"elapsed":0.000845},{"id":25503,"event":"return","defined_class":"User","method_id":"create_visit_record!","path":"app/models/user.rb","lineno":671,"static":false,"thread_id":70097708498960,"parent_id":25492,"elapsed":0.02103,"return_value":{"class":"UserVisit","value":"#<UserVisit:0x00007f81b96dfaa0>","object_id":70097569250640}},{"id":25504,"event":"return","defined_class":"User","method_id":"update_visit_record!","path":"app/models/user.rb","lineno":680,"static":false,"thread_id":70097708498960,"parent_id":25487,"elapsed":0.025877,"return_value":{"class":"UserVisit","value":"#<UserVisit:0x00007f81b96dfaa0>","object_id":70097569250640}},{"id":25505,"event":"call","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25506,"event":"return","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parent_id":25505,"elapsed":2.4e-05},{"id":25507,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"last_seen_at\" = '2020-05-28 18:49:55.348715' WHERE \"users\".\"id\" = 55","database_type":"postgres","server_version":110006}},{"id":25508,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25507,"elapsed":0.001292},{"id":25509,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"first_seen_at\" = '2020-05-28 18:49:55.348715' WHERE \"users\".\"id\" = 55","database_type":"postgres","server_version":110006}},{"id":25510,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25509,"elapsed":0.001013},{"id":25511,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":25486,"elapsed":0.035524},{"id":25512,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097799965720,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25513,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 55","database_type":"postgres","server_version":110006}},{"id":25514,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25513,"elapsed":0.000956},{"id":25515,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":25512,"elapsed":0.003574,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25516,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25461,"elapsed":0.067711,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25517,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":25460,"elapsed":0.067837,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81c0001600>","object_id":70097624369920}},{"id":25518,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097624369920,"value":"#<Guardian:0x00007f81c0001600>"}},{"id":25519,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":25518,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25520,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":25459,"elapsed":0.068067},{"id":25521,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25522,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25521,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25523,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 55 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":25524,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25523,"elapsed":0.000957},{"id":25525,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25526,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":25525,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81c0001600>","object_id":70097624369920}},{"id":25527,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097590213480,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097624369920,"value":"#<Guardian:0x00007f81c0001600>"}},{"id":25528,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":25527,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25529,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":25458,"elapsed":0.07247,"return_value":{"class":"Array","value":"[2]","object_id":70097590213480}},{"id":25530,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25531,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25532,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25531,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25533,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25534,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25533,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25535,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25536,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25535,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25537,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":25530,"elapsed":0.000319,"return_value":{"class":"String","value":"reviewables/perform","object_id":70097828880980}},{"id":25538,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25539,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25540,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25539,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25541,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":25538,"elapsed":0.000102},{"id":25542,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25543,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25544,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25543,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25545,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25546,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25545,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25547,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25548,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":25547,"elapsed":6.0e-06,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":25549,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":25550,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":25549,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":25551,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":25552,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":25551,"elapsed":7.0e-06},{"id":25553,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":25554,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":25553,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":25555,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":25556,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":25555,"elapsed":6.0e-06},{"id":25557,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":25542,"elapsed":0.000655,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097829690960}},{"id":25558,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25559,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":25558,"elapsed":6.0e-06},{"id":25560,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25561,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25562,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25561,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25563,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":25560,"elapsed":9.0e-05},{"id":25564,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25565,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25564,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25566,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25567,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25566,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25568,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25569,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25568,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25570,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097797000500,"value":"ReviewablesController"}},{"id":25571,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":25570,"elapsed":3.0e-06,"return_value":{"class":"Hash","value":"{}","object_id":70097797032140}},{"id":25572,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25573,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25572,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25574,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25575,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":25574,"elapsed":7.0e-06},{"id":25576,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25577,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25578,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25577,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25579,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":25576,"elapsed":9.0e-05},{"id":25580,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25581,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25582,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25581,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25583,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":25580,"elapsed":8.8e-05},{"id":25584,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25585,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25584,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25586,"event":"call","defined_class":"EnsureMagic","method_id":"method_missing","path":"lib/guardian/ensure_magic.rb","lineno":6,"static":false,"thread_id":70097708498960,"parameters":[{"name":"method","class":"Symbol","object_id":17086388,"value":"ensure_can_see_review_queue!","kind":"req"},{"name":"args","class":"NilClass","object_id":8,"value":null,"kind":"rest"},{"name":"block","class":"NilClass","object_id":8,"value":null,"kind":"block"}],"receiver":{"class":"Guardian","object_id":70097829692020,"value":"#<Guardian:0x00007f81d87a04e8>"}},{"id":25587,"event":"call","defined_class":"UserGuardian","method_id":"can_see_review_queue?","path":"lib/guardian/user_guardian.rb","lineno":148,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097829692020,"value":"#<Guardian:0x00007f81d87a04e8>"}},{"id":25588,"event":"call","defined_class":"Guardian","method_id":"is_staff?","path":"lib/guardian.rb","lineno":88,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097829692020,"value":"#<Guardian:0x00007f81d87a04e8>"}},{"id":25589,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25590,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":25589,"elapsed":1.9e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25591,"event":"return","defined_class":"Guardian","method_id":"is_staff?","path":"lib/guardian.rb","lineno":88,"static":false,"thread_id":70097708498960,"parent_id":25588,"elapsed":0.000107,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25592,"event":"return","defined_class":"UserGuardian","method_id":"can_see_review_queue?","path":"lib/guardian/user_guardian.rb","lineno":148,"static":false,"thread_id":70097708498960,"parent_id":25587,"elapsed":0.000189,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25593,"event":"return","defined_class":"EnsureMagic","method_id":"method_missing","path":"lib/guardian/ensure_magic.rb","lineno":6,"static":false,"thread_id":70097708498960,"parent_id":25586,"elapsed":0.00028},{"id":25594,"event":"call","defined_class":"ReviewablesController","method_id":"perform","path":"app/controllers/reviewables_controller.rb","lineno":177,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25595,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25596,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25595,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25597,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"viewable_by","path":"app/models/reviewable.rb","lineno":406,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>","kind":"req"},{"name":"order","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"preload","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":25598,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25599,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":25598,"elapsed":5.0e-06},{"id":25600,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25601,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":25600,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25602,"event":"call","defined_class":"CategoryGuardian","method_id":"allowed_category_ids","path":"lib/guardian/category_guardian.rb","lineno":62,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097829726320,"value":"#<Guardian:0x00007f81d87b10e0>"}},{"id":25603,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"categories\".\"id\" FROM \"categories\" WHERE \"categories\".\"read_restricted\" = FALSE","database_type":"postgres","server_version":110006}},{"id":25604,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25603,"elapsed":0.001001},{"id":25605,"event":"call","defined_class":"CategoryGuardian","method_id":"secure_category_ids","path":"lib/guardian/category_guardian.rb","lineno":57,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097829726320,"value":"#<Guardian:0x00007f81d87b10e0>"}},{"id":25606,"event":"call","defined_class":"User","method_id":"secure_category_ids","path":"app/models/user.rb","lineno":999,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25607,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25608,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":25607,"elapsed":6.0e-06},{"id":25609,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT categories.id FROM \"categories\" INNER JOIN \"category_groups\" ON \"categories\".\"id\" = \"category_groups\".\"category_id\" INNER JOIN \"groups\" ON \"category_groups\".\"group_id\" = \"groups\".\"id\" INNER JOIN \"group_users\" ON \"groups\".\"id\" = \"group_users\".\"group_id\" WHERE \"group_users\".\"user_id\" = 55","database_type":"postgres","server_version":110006}},{"id":25610,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25609,"elapsed":0.001268},{"id":25611,"event":"return","defined_class":"User","method_id":"secure_category_ids","path":"app/models/user.rb","lineno":999,"static":false,"thread_id":70097708498960,"parent_id":25606,"elapsed":0.043251,"return_value":{"class":"Array","value":"[]","object_id":70097716077020}},{"id":25612,"event":"return","defined_class":"CategoryGuardian","method_id":"secure_category_ids","path":"lib/guardian/category_guardian.rb","lineno":57,"static":false,"thread_id":70097708498960,"parent_id":25605,"elapsed":0.04341,"return_value":{"class":"Array","value":"[]","object_id":70097716077020}},{"id":25613,"event":"return","defined_class":"CategoryGuardian","method_id":"allowed_category_ids","path":"lib/guardian/category_guardian.rb","lineno":62,"static":false,"thread_id":70097708498960,"parent_id":25602,"elapsed":0.047087,"return_value":{"class":"Array","value":"[1, 39]","object_id":70097621180840}},{"id":25614,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"viewable_by","path":"app/models/reviewable.rb","lineno":406,"static":true,"thread_id":70097708498960,"parent_id":25597,"elapsed":0.04759,"return_value":{"class":"ActiveRecord::Relation","value":"#<Reviewable::ActiveRecord_Relation:0x00007f81cafae968>","object_id":70097716475060}},{"id":25615,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"reviewables\".* FROM \"reviewables\" WHERE ((reviewables.reviewable_by_moderator AND TRUE) OR (reviewables.reviewable_by_group_id IN (NULL))) AND (reviewables.category_id IS NULL OR reviewables.category_id IN (1,39)) AND \"reviewables\".\"id\" = 22 ORDER BY reviewables.score desc, reviewables.created_at desc LIMIT 1","database_type":"postgres","server_version":110006}},{"id":25616,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25615,"elapsed":0.001619},{"id":25617,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 51","database_type":"postgres","server_version":110006}},{"id":25618,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25617,"elapsed":0.001371},{"id":25619,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_stats\".\"user_id\", \"user_stats\".\"topics_entered\", \"user_stats\".\"time_read\", \"user_stats\".\"days_visited\", \"user_stats\".\"posts_read_count\", \"user_stats\".\"likes_given\", \"user_stats\".\"likes_received\", \"user_stats\".\"new_since\", \"user_stats\".\"read_faq\", \"user_stats\".\"first_post_created_at\", \"user_stats\".\"post_count\", \"user_stats\".\"topic_count\", \"user_stats\".\"bounce_score\", \"user_stats\".\"reset_bounce_score_after\", \"user_stats\".\"flags_agreed\", \"user_stats\".\"flags_disagreed\", \"user_stats\".\"flags_ignored\", \"user_stats\".\"first_unread_at\", \"user_stats\".\"distinct_badge_count\" FROM \"user_stats\" WHERE \"user_stats\".\"user_id\" = 51","database_type":"postgres","server_version":110006}},{"id":25620,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25619,"elapsed":0.001229},{"id":25621,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 52","database_type":"postgres","server_version":110006}},{"id":25622,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25621,"elapsed":0.001265},{"id":25623,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 53","database_type":"postgres","server_version":110006}},{"id":25624,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25623,"elapsed":0.001068},{"id":25625,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"reviewable_histories\".* FROM \"reviewable_histories\" WHERE \"reviewable_histories\".\"reviewable_id\" = 22","database_type":"postgres","server_version":110006}},{"id":25626,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25625,"elapsed":0.000995},{"id":25627,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"reviewable_scores\".* FROM \"reviewable_scores\" WHERE \"reviewable_scores\".\"reviewable_id\" = 22 ORDER BY \"reviewable_scores\".\"created_at\" DESC","database_type":"postgres","server_version":110006}},{"id":25628,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":25627,"elapsed":0.00098},{"id":25629,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828403860,"value":"#<TestCurrentUserProvider:0x00007f81d852b528>"}},{"id":25630,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":25629,"elapsed":6.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4eef720>","object_id":70097799969680}},{"id":25631,"event":"call","defined_class":"Reviewable","method_id":"perform","path":"app/models/reviewable.rb","lineno":337,"static":false,"thread_id":70097708498960,"parameters":[{"name":"performed_by","class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>","kind":"req"},{"name":"action_id","class":"Symbol","object_id":17225308,"value":"nope","kind":"req"},{"name":"args","class":"Hash","object_id":70097829709420,"value":"{:version=>0}","kind":"opt"}],"receiver":{"class":"ReviewableUser","object_id":70097754849560,"value":"#<ReviewableUser:0x00007f81cf8e0230>"}},{"id":25632,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"action_aliases","path":"app/models/reviewable.rb","lineno":41,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097586690280,"value":"ReviewableUser"}},{"id":25633,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"action_aliases","path":"app/models/reviewable.rb","lineno":41,"static":true,"thread_id":70097708498960,"parent_id":25632,"elapsed":3.0e-06,"return_value":{"class":"Hash","value":"{}","object_id":70097826072200}},{"id":25634,"event":"call","defined_class":"Reviewable","method_id":"actions_for","path":"app/models/reviewable.rb","lineno":291,"static":false,"thread_id":70097708498960,"parameters":[{"name":"guardian","class":"Guardian","object_id":70097826071100,"value":"#<Guardian:0x00007f81d80b8478>","kind":"req"},{"name":"args","class":"Hash","object_id":70097829709420,"value":"{:version=>0}","kind":"opt"}],"receiver":{"class":"ReviewableUser","object_id":70097754849560,"value":"#<ReviewableUser:0x00007f81cf8e0230>"}},{"id":25635,"event":"call","defined_class":"ReviewableUser","method_id":"build_actions","path":"app/models/reviewable_user.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[{"name":"actions","class":"Reviewable::Actions","object_id":70097826949280,"value":"#<Reviewable::Actions:0x00007f81d8265140>","kind":"req"},{"name":"guardian","class":"Guardian","object_id":70097826071100,"value":"#<Guardian:0x00007f81d80b8478>","kind":"req"},{"name":"args","class":"Hash","object_id":70097829709420,"value":"{:version=>0}","kind":"req"}],"receiver":{"class":"ReviewableUser","object_id":70097754849560,"value":"#<ReviewableUser:0x00007f81cf8e0230>"}},{"id":25636,"event":"call","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097754849560,"value":"#<ReviewableUser:0x00007f81cf8e0230>"}},{"id":25637,"event":"return","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":25636,"elapsed":1.5e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25638,"event":"call","defined_class":"Guardian","method_id":"can_approve?","path":"lib/guardian.rb","lineno":260,"static":false,"thread_id":70097708498960,"parameters":[{"name":"target","class":"User","object_id":70097712220500,"value":"#<User:0x00007f81ca7912a8>","kind":"req"}],"receiver":{"class":"Guardian","object_id":70097826071100,"value":"#<Guardian:0x00007f81d80b8478>"}},{"id":25639,"event":"call","defined_class":"Guardian","method_id":"is_staff?","path":"lib/guardian.rb","lineno":88,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097826071100,"value":"#<Guardian:0x00007f81d80b8478>"}},{"id":25640,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799969680,"value":"#<User:0x00007f81d4eef720>"}},{"id":25641,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":25640,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25642,"event":"return","defined_class":"Guardian","method_id":"is_staff?","path":"lib/guardian.rb","lineno":88,"static":false,"thread_id":70097708498960,"parent_id":25639,"elapsed":0.0001,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25643,"event":"return","defined_class":"Guardian","method_id":"can_approve?","path":"lib/guardian.rb","lineno":260,"static":false,"thread_id":70097708498960,"parent_id":25638,"elapsed":0.000223,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25644,"event":"return","defined_class":"ReviewableUser","method_id":"build_actions","path":"app/models/reviewable_user.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":25635,"elapsed":0.000474,"return_value":{"class":"Array","value":"[#<Reviewable::Actions::Action:0x00007f81d82750e0 @id=:reject_user_delete, @icon=\"user-times\", @butt","object_id":70097826982280}},{"id":25645,"event":"return","defined_class":"Reviewable","method_id":"actions_for","path":"app/models/reviewable.rb","lineno":291,"static":false,"thread_id":70097708498960,"parent_id":25634,"elapsed":0.003103,"return_value":{"class":"Reviewable::Actions","value":"#<Reviewable::Actions:0x00007f81d8265140>","object_id":70097826949280}},{"id":25646,"event":"return","defined_class":"Reviewable","method_id":"perform","path":"app/models/reviewable.rb","lineno":337,"static":false,"thread_id":70097708498960,"parent_id":25631,"elapsed":0.003433,"exceptions":[{"class":"Reviewable::InvalidAction","message":"Can't peform `nope` on ReviewableUser","object_id":70097827026580,"path":"/Users/kgilpin/source/appland/discourse/app/models/reviewable.rb","lineno":346}]},{"id":25647,"event":"return","defined_class":"ReviewablesController","method_id":"perform","path":"app/controllers/reviewables_controller.rb","lineno":177,"static":false,"thread_id":70097708498960,"parent_id":25594,"elapsed":0.08985,"exceptions":[{"class":"Discourse::InvalidAccess","message":"Can't peform `nope` on ReviewableUser","object_id":70097827004160,"path":"/Users/kgilpin/source/appland/discourse/app/controllers/reviewables_controller.rb","lineno":191},{"class":"Reviewable::InvalidAction","message":"Can't peform `nope` on ReviewableUser","object_id":70097827026580,"path":"/Users/kgilpin/source/appland/discourse/app/models/reviewable.rb","lineno":346}]},{"id":25648,"event":"call","defined_class":"ApplicationController","method_id":"rescue_discourse_actions","path":"app/controllers/application_controller.rb","lineno":229,"static":false,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":16369308,"value":"invalid_access","kind":"req"},{"name":"status_code","class":"Integer","object_id":807,"value":"403","kind":"req"},{"name":"opts","class":"Hash","object_id":70097827010700,"value":"{:include_ember=>true, :custom_message=>nil, :group=>nil}","kind":"opt"}],"receiver":{"class":"ReviewablesController","object_id":70097828349040,"value":"#<ReviewablesController:0x00007f81d85108e0>"}},{"id":25649,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":25650,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":25649,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":25651,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":25652,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":25651,"elapsed":1.0e-05},{"id":25653,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":25654,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":25653,"elapsed":3.0e-06},{"id":25655,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":25656,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":25655,"elapsed":3.0e-06},{"id":25657,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":25658,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":25657,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":25659,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":25660,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":25659,"elapsed":7.0e-06},{"id":25661,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":25662,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":25661,"elapsed":3.0e-06},{"id":25663,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":25664,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":25663,"elapsed":3.0e-06},{"id":25665,"event":"return","defined_class":"ApplicationController","method_id":"rescue_discourse_actions","path":"app/controllers/application_controller.rb","lineno":229,"static":false,"thread_id":70097708498960,"parent_id":25648,"elapsed":0.000913,"return_value":{"class":"String","value":"{\"errors\":[\"You are not permitted to view the requested resource.\"],\"error_type\":\"invalid_access\"}","object_id":70097827072560}},{"id":25666,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":25457,"elapsed":0.167834,"http_server_response":{"status":403}},{"id":25667,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827088520,"value":"#<TestCurrentUserProvider:0x00007f81d82a9110>"}},{"id":25668,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":25667,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":25669,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":25670,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":25669,"elapsed":4.0e-06},{"id":25671,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041308,"value":"http_4xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":25672,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":25671,"elapsed":3.0e-06}]}