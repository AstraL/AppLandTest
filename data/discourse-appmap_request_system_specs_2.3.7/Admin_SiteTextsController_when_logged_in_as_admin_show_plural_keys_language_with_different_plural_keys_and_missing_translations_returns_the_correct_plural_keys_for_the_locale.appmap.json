{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::SiteTextsController when logged in as admin #show plural keys language with different plural keys and missing translations returns the correct plural keys for the locale","app":"Discourse","feature":"Admin::SiteTextsController when logged in as admin","feature_group":"Admin site texts","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"LocaleSiteSetting","type":"class","children":[{"name":"valid_value?","type":"function","location":"app/models/locale_site_setting.rb:5","static":true},{"name":"supported_locales","type":"function","location":"app/models/locale_site_setting.rb:39","static":true},{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"Site","type":"class","children":[{"name":"clear_anon_cache!","type":"function","location":"app/models/site.rb:129","static":true}]},{"name":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","type":"class","children":[{"name":"reset_cached_settings!","type":"function","location":"app/models/site_setting.rb:109","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true},{"name":"skip_db?","type":"function","location":"app/models/global_setting.rb:84","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_serialized","type":"function","location":"app/controllers/application_controller.rb:446","static":false},{"name":"serialize_data","type":"function","location":"app/controllers/application_controller.rb:431","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"SiteTextsController","type":"class","children":[{"name":"show","type":"function","location":"app/controllers/admin/site_texts_controller.rb:59","static":false},{"name":"restricted_keys","type":"function","location":"app/controllers/admin/site_texts_controller.rb:12","static":true}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"app/serializers","type":"package","children":[{"name":"SiteTextSerializer","type":"class","children":[{"name":"id","type":"function","location":"app/serializers/site_text_serializer.rb:6","static":false},{"name":"value","type":"function","location":"app/serializers/site_text_serializer.rb:10","static":false},{"name":"overridden?","type":"function","location":"app/serializers/site_text_serializer.rb:14","static":false}]}]}],"events":[{"id":1001037,"event":"call","defined_class":"LocaleSiteSetting","method_id":"valid_value?","path":"app/models/locale_site_setting.rb","lineno":5,"static":true,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097592683180,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001038,"event":"call","defined_class":"LocaleSiteSetting","method_id":"supported_locales","path":"app/models/locale_site_setting.rb","lineno":39,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001039,"event":"return","defined_class":"LocaleSiteSetting","method_id":"supported_locales","path":"app/models/locale_site_setting.rb","lineno":39,"static":true,"thread_id":70097708498960,"parent_id":1001038,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[\"ar\", \"be\", \"bg\", \"bs_BA\", \"ca\", \"cs\", \"da\", \"de\", \"el\", \"en\", \"en_US\", \"es\", \"et\", \"fa_IR\", \"fi\", ","object_id":70097795581420}},{"id":1001040,"event":"return","defined_class":"LocaleSiteSetting","method_id":"valid_value?","path":"app/models/locale_site_setting.rb","lineno":5,"static":true,"thread_id":70097708498960,"parent_id":1001037,"elapsed":0.000136,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001041,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":1001042,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":1001041,"elapsed":6.2e-05,"return_value":{"class":"Integer","value":"13306","object_id":26613}},{"id":1001043,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"reset_cached_settings!","path":"app/models/site_setting.rb","lineno":109,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1001044,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"reset_cached_settings!","path":"app/models/site_setting.rb","lineno":109,"static":true,"thread_id":70097708498960,"parent_id":1001043,"elapsed":4.0e-06},{"id":1001045,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":1001046,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":1001045,"elapsed":6.0e-05,"return_value":{"class":"Integer","value":"13307","object_id":26615}},{"id":1001047,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097593015820,"value":"#<TestCurrentUserProvider:0x00007f81bc433c18>"}},{"id":1001048,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097593027640,"value":"8ed840d0056c5e0d324e129e25e58dfb","kind":"req"},{"name":"opts","class":"Hash","object_id":70097593025140,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1001049,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097593027640,"value":"8ed840d0056c5e0d324e129e25e58dfb","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1001050,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1001051,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1001050,"elapsed":7.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1001052,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1001049,"elapsed":0.000111,"return_value":{"class":"String","value":"j7QivLi4JHNHUz49jMi8FDoWxuc=","object_id":70097593076280}},{"id":1001053,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'j7QivLi4JHNHUz49jMi8FDoWxuc=' OR\n                          prev_auth_token = 'j7QivLi4JHNHUz49jMi8FDoWxuc=') AND rotated_at > '2020-03-29 19:01:31.816760') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001054,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001053,"elapsed":0.000942},{"id":1001055,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 19:01:31.820954' WHERE \"user_auth_tokens\".\"id\" = 1136 AND \"user_auth_tokens\".\"auth_token\" = 'j7QivLi4JHNHUz49jMi8FDoWxuc='","database_type":"postgres","server_version":110006}},{"id":1001056,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001055,"elapsed":0.001023},{"id":1001057,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097797849900,"value":"{:action=>\"seen token\", :user_auth_token_id=>1136, :user_id=>1330, :auth_token=>\"j7QivLi4JHNHUz49jMi","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1001058,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1001059,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001058,"elapsed":0.000812},{"id":1001060,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 1136, 1330, '127.0.0.1/32', 'j7QivLi4JHNHUz49jMi8FDoWxuc=', '2020-05-28 19:01:31.824997') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1001061,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001060,"elapsed":0.00088},{"id":1001062,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1001063,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001062,"elapsed":0.000697},{"id":1001064,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1001057,"elapsed":0.011797,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81d4aeb9d0>","object_id":70097797864680}},{"id":1001065,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1001048,"elapsed":0.020132,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81bb9262d0>","object_id":70097587220840}},{"id":1001066,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001067,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001066,"elapsed":0.001047},{"id":1001068,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097798867640,"value":"#<User:0x00007f81d4cd5570>"}},{"id":1001069,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1001068,"elapsed":1.6e-05},{"id":1001070,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097593015820,"value":"#<TestCurrentUserProvider:0x00007f81bc433c18>"}},{"id":1001071,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1001070,"elapsed":0.000962,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001072,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097798867640,"value":"#<User:0x00007f81d4cd5570>"}},{"id":1001073,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1001072,"elapsed":0.000889},{"id":1001074,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097798885680,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097798867640,"value":"#<User:0x00007f81d4cd5570>"}},{"id":1001075,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 1330","database_type":"postgres","server_version":110006}},{"id":1001076,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001075,"elapsed":0.001013},{"id":1001077,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1001074,"elapsed":0.003639,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001078,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001047,"elapsed":0.030456,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001079,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097593015820,"value":"#<TestCurrentUserProvider:0x00007f81bc433c18>"}},{"id":1001080,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001079,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001081,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097798867640,"value":"#<User:0x00007f81d4cd5570>"}},{"id":1001082,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1001081,"elapsed":1.5e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001083,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827358240,"value":"#<TestCurrentUserProvider:0x00007f81d832cc40>"}},{"id":1001084,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001083,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001085,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827358240,"value":"#<TestCurrentUserProvider:0x00007f81d832cc40>"}},{"id":1001086,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001085,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001087,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097798867640,"value":"#<User:0x00007f81d4cd5570>"}},{"id":1001088,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1001087,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001089,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001090,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001089,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1001091,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001092,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001091,"elapsed":1.0e-05},{"id":1001093,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/customize/site_texts/colour.one.json"},"message":[{"name":"controller","class":"String","value":"admin/site_texts","object_id":70097755323000},{"name":"action","class":"String","value":"show","object_id":70097755323060},{"name":"id","class":"String","value":"colour.one","object_id":70097592992220}]},{"id":1001094,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001095,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001096,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001097,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001098,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001097,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001099,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1001096,"elapsed":0.000121,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d8349818>","object_id":70097827417100}},{"id":1001100,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097827417100,"value":"#<Guardian:0x00007f81d8349818>"}},{"id":1001101,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1001100,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001102,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1001095,"elapsed":0.000333},{"id":1001103,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001104,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001103,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001105,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001106,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001105,"elapsed":0.000971},{"id":1001107,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001108,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1001107,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d8349818>","object_id":70097827417100}},{"id":1001109,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097612441060,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097827417100,"value":"#<Guardian:0x00007f81d8349818>"}},{"id":1001110,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1001109,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001111,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1001094,"elapsed":0.005251,"return_value":{"class":"Array","value":"[2]","object_id":70097612441060}},{"id":1001112,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001113,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001114,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001113,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001115,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001116,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001115,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001117,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001118,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001117,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001119,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1001112,"elapsed":0.000342,"return_value":{"class":"String","value":"site_texts/show","object_id":70097612477140}},{"id":1001120,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001121,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001122,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001121,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001123,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1001120,"elapsed":0.000112},{"id":1001124,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001125,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001126,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001125,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001127,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001128,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001127,"elapsed":9.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001129,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097798867640,"value":"#<User:0x00007f81d4cd5570>"}},{"id":1001130,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1001129,"elapsed":1.3e-05,"return_value":{"class":"String","value":"ru","object_id":70097592683180}},{"id":1001131,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001132,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001131,"elapsed":8.0e-06},{"id":1001133,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001134,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001133,"elapsed":6.0e-06},{"id":1001135,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1001124,"elapsed":0.000559,"return_value":{"class":"Array","value":"[:ru, :en]","object_id":70097612508740}},{"id":1001136,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001137,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1001136,"elapsed":7.0e-06},{"id":1001138,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001139,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001140,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001139,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001141,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1001138,"elapsed":9.5e-05},{"id":1001142,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001143,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001142,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001144,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001145,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001144,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001146,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001147,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001146,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001148,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1001149,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1001148,"elapsed":3.0e-06},{"id":1001150,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001151,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1001150,"elapsed":7.0e-06},{"id":1001152,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001153,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001152,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001154,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001155,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001154,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001156,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097798867640,"value":"#<User:0x00007f81d4cd5570>"}},{"id":1001157,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1001156,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001158,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001159,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1001160,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parent_id":1001159,"elapsed":3.0e-06,"return_value":{"class":"Array","value":"[\"user_notifications.confirm_old_email.title\", \"user_notifications.confirm_old_email.subject_templat","object_id":70097612573080}},{"id":1001161,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001162,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001161,"elapsed":7.0e-06},{"id":1001163,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001164,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001163,"elapsed":7.0e-06},{"id":1001165,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1001166,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1001165,"elapsed":3.0e-06},{"id":1001167,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"translation_overrides\".\"translation_key\", \"translation_overrides\".\"value\", \"translation_overrides\".\"compiled_js\" FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru'","database_type":"postgres","server_version":110006}},{"id":1001168,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001167,"elapsed":0.000976},{"id":1001169,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1001170,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1001169,"elapsed":4.0e-06},{"id":1001171,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001172,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001171,"elapsed":8.0e-06},{"id":1001173,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097608382460,"value":"{:id=>\"colour.one\", :value=>\"%{count} colour\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097608382440,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001174,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097608382460,"value":"{:id=>\"colour.one\", :value=>\"%{count} colour\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097608382440,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001175,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001176,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1001175,"elapsed":3.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d8349818>","object_id":70097827417100}},{"id":1001177,"event":"call","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097608396300,"value":"#<SiteTextSerializer:0x00007f81be189c18>"}},{"id":1001178,"event":"return","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parent_id":1001177,"elapsed":4.0e-06,"return_value":{"class":"String","value":"colour.one","object_id":70097592992220}},{"id":1001179,"event":"call","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097608396300,"value":"#<SiteTextSerializer:0x00007f81be189c18>"}},{"id":1001180,"event":"return","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":1001179,"elapsed":3.0e-06,"return_value":{"class":"String","value":"%{count} colour","object_id":70097608382660}},{"id":1001181,"event":"call","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097608396300,"value":"#<SiteTextSerializer:0x00007f81be189c18>"}},{"id":1001182,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.one' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001183,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001182,"elapsed":0.000806},{"id":1001184,"event":"return","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1001181,"elapsed":0.004068},{"id":1001185,"event":"call","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097608396300,"value":"#<SiteTextSerializer:0x00007f81be189c18>"}},{"id":1001186,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.one' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001187,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001186,"elapsed":2.1e-05},{"id":1001188,"event":"return","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1001185,"elapsed":0.002993},{"id":1001189,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":1001174,"elapsed":0.007598,"return_value":{"class":"Hash","value":"{\"site_text\"=>{:id=>\"colour.one\", :value=>\"%{count} colour\", :overridden=>false, :can_revert=>false}","object_id":70097608395960}},{"id":1001190,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097608395960,"value":"{\"site_text\"=>{:id=>\"colour.one\", :value=>\"%{count} colour\", :overridden=>false, :can_revert=>false}","kind":"req"},{"name":"opts","class":"Hash","object_id":70097608382440,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001191,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1001190,"elapsed":0.000125,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.one\",\"value\":\"%{count} colour\",\"overridden\":false,\"can_revert\":false},\"__","object_id":70097568177080}},{"id":1001192,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":1001173,"elapsed":0.007963,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.one\",\"value\":\"%{count} colour\",\"overridden\":false,\"can_revert\":false},\"__","object_id":70097568177080}},{"id":1001193,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parent_id":1001158,"elapsed":0.012533,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.one\",\"value\":\"%{count} colour\",\"overridden\":false,\"can_revert\":false},\"__","object_id":70097568177080}},{"id":1001194,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001195,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1001194,"elapsed":7.0e-06},{"id":1001196,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001197,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1001196,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097568181300}},{"id":1001198,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097827383540,"value":"#<Admin::SiteTextsController:0x00007f81d83391e8>"}},{"id":1001199,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001200,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001199,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001201,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097798867640,"value":"#<User:0x00007f81d4cd5570>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097592832300,"value":"#<ActionDispatch::Request::Session:0x00007f81bc3da258>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097612441340,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81be940df8>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001202,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001203,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001204,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001203,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001205,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1001202,"elapsed":9.1e-05},{"id":1001206,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001207,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827419080,"value":"#<TestCurrentUserProvider:0x00007f81d834a790>"}},{"id":1001208,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001207,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4cd5570>","object_id":70097798867640}},{"id":1001209,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1001206,"elapsed":8.9e-05},{"id":1001210,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1001201,"elapsed":0.000342},{"id":1001211,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1001198,"elapsed":0.000548},{"id":1001212,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1001093,"elapsed":0.022287,"http_server_response":{"status":200}},{"id":1001213,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828430760,"value":"#<TestCurrentUserProvider:0x00007f81d8538750>"}},{"id":1001214,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1001213,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001215,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1001216,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1001215,"elapsed":4.0e-06},{"id":1001217,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1001218,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1001217,"elapsed":3.0e-06},{"id":1001219,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828499100,"value":"#<TestCurrentUserProvider:0x00007f81d8559d38>"}},{"id":1001220,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097828497400,"value":"8ed840d0056c5e0d324e129e25e58dfb","kind":"req"},{"name":"opts","class":"Hash","object_id":70097828497020,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1001221,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097828497400,"value":"8ed840d0056c5e0d324e129e25e58dfb","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1001222,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1001223,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1001222,"elapsed":7.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1001224,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1001221,"elapsed":0.00011,"return_value":{"class":"String","value":"j7QivLi4JHNHUz49jMi8FDoWxuc=","object_id":70097828517200}},{"id":1001225,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'j7QivLi4JHNHUz49jMi8FDoWxuc=' OR\n                          prev_auth_token = 'j7QivLi4JHNHUz49jMi8FDoWxuc=') AND rotated_at > '2020-03-29 19:01:31.874293') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001226,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001225,"elapsed":0.001127},{"id":1001227,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1001220,"elapsed":0.004511,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81bea5b648>","object_id":70097613019940}},{"id":1001228,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001229,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001228,"elapsed":0.001178},{"id":1001230,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097613621920,"value":"#<User:0x00007f81beb81540>"}},{"id":1001231,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1001230,"elapsed":1.6e-05},{"id":1001232,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828499100,"value":"#<TestCurrentUserProvider:0x00007f81d8559d38>"}},{"id":1001233,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1001232,"elapsed":0.000907,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001234,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097613621920,"value":"#<User:0x00007f81beb81540>"}},{"id":1001235,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1001234,"elapsed":0.000843},{"id":1001236,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097613640300,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097613621920,"value":"#<User:0x00007f81beb81540>"}},{"id":1001237,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1001236,"elapsed":3.5e-05},{"id":1001238,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001219,"elapsed":0.011415,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001239,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097828499100,"value":"#<TestCurrentUserProvider:0x00007f81d8559d38>"}},{"id":1001240,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001239,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001241,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097613621920,"value":"#<User:0x00007f81beb81540>"}},{"id":1001242,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1001241,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001243,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613655780,"value":"#<TestCurrentUserProvider:0x00007f81beb91dc8>"}},{"id":1001244,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001243,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001245,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613655780,"value":"#<TestCurrentUserProvider:0x00007f81beb91dc8>"}},{"id":1001246,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001245,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001247,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097613621920,"value":"#<User:0x00007f81beb81540>"}},{"id":1001248,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1001247,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001249,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001250,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001249,"elapsed":1.0e-05},{"id":1001251,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/customize/site_texts/colour.few.json"},"message":[{"name":"controller","class":"String","value":"admin/site_texts","object_id":70097755323000},{"name":"action","class":"String","value":"show","object_id":70097755323060},{"name":"id","class":"String","value":"colour.few","object_id":70097828499360}]},{"id":1001252,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001253,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001254,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001255,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001256,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001255,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001257,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1001254,"elapsed":0.000128,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81beba0ff8>","object_id":70097613686780}},{"id":1001258,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097613686780,"value":"#<Guardian:0x00007f81beba0ff8>"}},{"id":1001259,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1001258,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001260,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1001253,"elapsed":0.000338},{"id":1001261,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001262,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001261,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001263,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001264,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001263,"elapsed":0.000983},{"id":1001265,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001266,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1001265,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81beba0ff8>","object_id":70097613686780}},{"id":1001267,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097588449280,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097613686780,"value":"#<Guardian:0x00007f81beba0ff8>"}},{"id":1001268,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1001267,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001269,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1001252,"elapsed":0.00513,"return_value":{"class":"Array","value":"[2]","object_id":70097588449280}},{"id":1001270,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001271,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001272,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001271,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001273,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001274,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001273,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001275,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001276,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001275,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001277,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1001270,"elapsed":0.000324,"return_value":{"class":"String","value":"site_texts/show","object_id":70097588501620}},{"id":1001278,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001279,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001280,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001279,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001281,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1001278,"elapsed":0.000107},{"id":1001282,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001283,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001284,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001283,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001285,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001286,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001285,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001287,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097613621920,"value":"#<User:0x00007f81beb81540>"}},{"id":1001288,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1001287,"elapsed":7.0e-06,"return_value":{"class":"String","value":"ru","object_id":70097592683180}},{"id":1001289,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001290,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001289,"elapsed":9.0e-06},{"id":1001291,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001292,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001291,"elapsed":6.0e-06},{"id":1001293,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1001282,"elapsed":0.00051,"return_value":{"class":"Array","value":"[:ru, :en]","object_id":70097588551580}},{"id":1001294,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001295,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1001294,"elapsed":9.0e-06},{"id":1001296,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001297,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001298,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001297,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001299,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1001296,"elapsed":9.8e-05},{"id":1001300,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001301,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001300,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001302,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001303,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001302,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001304,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001305,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001304,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001306,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1001307,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1001306,"elapsed":3.0e-06},{"id":1001308,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001309,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1001308,"elapsed":7.0e-06},{"id":1001310,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001311,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001310,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001312,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001313,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001312,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001314,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097613621920,"value":"#<User:0x00007f81beb81540>"}},{"id":1001315,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1001314,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001316,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001317,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1001318,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parent_id":1001317,"elapsed":3.0e-06,"return_value":{"class":"Array","value":"[\"user_notifications.confirm_old_email.title\", \"user_notifications.confirm_old_email.subject_templat","object_id":70097608488600}},{"id":1001319,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001320,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001319,"elapsed":7.0e-06},{"id":1001321,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.few' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001322,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001321,"elapsed":0.000961},{"id":1001323,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001324,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001323,"elapsed":1.0e-05},{"id":1001325,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1001326,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1001325,"elapsed":4.0e-06},{"id":1001327,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1001328,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1001327,"elapsed":3.0e-06},{"id":1001329,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001330,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001329,"elapsed":7.0e-06},{"id":1001331,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1001332,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1001331,"elapsed":3.0e-06},{"id":1001333,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097799733060,"value":"{:id=>\"colour.few\", :value=>\"%{count} colours\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097799733040,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001334,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097799733060,"value":"{:id=>\"colour.few\", :value=>\"%{count} colours\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097799733040,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001335,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001336,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1001335,"elapsed":3.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81beba0ff8>","object_id":70097613686780}},{"id":1001337,"event":"call","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097799726080,"value":"#<SiteTextSerializer:0x00007f81d4e78800>"}},{"id":1001338,"event":"return","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parent_id":1001337,"elapsed":3.0e-06,"return_value":{"class":"String","value":"colour.few","object_id":70097828499360}},{"id":1001339,"event":"call","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097799726080,"value":"#<SiteTextSerializer:0x00007f81d4e78800>"}},{"id":1001340,"event":"return","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":1001339,"elapsed":3.0e-06,"return_value":{"class":"String","value":"%{count} colours","object_id":70097803369040}},{"id":1001341,"event":"call","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097799726080,"value":"#<SiteTextSerializer:0x00007f81d4e78800>"}},{"id":1001342,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.few' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001343,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001342,"elapsed":1.8e-05},{"id":1001344,"event":"return","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1001341,"elapsed":0.003147},{"id":1001345,"event":"call","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097799726080,"value":"#<SiteTextSerializer:0x00007f81d4e78800>"}},{"id":1001346,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.few' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001347,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001346,"elapsed":1.6e-05},{"id":1001348,"event":"return","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1001345,"elapsed":0.002938},{"id":1001349,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":1001334,"elapsed":0.006599,"return_value":{"class":"Hash","value":"{\"site_text\"=>{:id=>\"colour.few\", :value=>\"%{count} colours\", :overridden=>false, :can_revert=>false","object_id":70097799725640}},{"id":1001350,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097799725640,"value":"{\"site_text\"=>{:id=>\"colour.few\", :value=>\"%{count} colours\", :overridden=>false, :can_revert=>false","kind":"req"},{"name":"opts","class":"Hash","object_id":70097799733040,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001351,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1001350,"elapsed":0.000115,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.few\",\"value\":\"%{count} colours\",\"overridden\":false,\"can_revert\":false},\"_","object_id":70097614147820}},{"id":1001352,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":1001333,"elapsed":0.006947,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.few\",\"value\":\"%{count} colours\",\"overridden\":false,\"can_revert\":false},\"_","object_id":70097614147820}},{"id":1001353,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parent_id":1001316,"elapsed":0.011882,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.few\",\"value\":\"%{count} colours\",\"overridden\":false,\"can_revert\":false},\"_","object_id":70097614147820}},{"id":1001354,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001355,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1001354,"elapsed":6.0e-06},{"id":1001356,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001357,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1001356,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097614163900}},{"id":1001358,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097613674940,"value":"#<Admin::SiteTextsController:0x00007f81beb9b378>"}},{"id":1001359,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001360,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001359,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001361,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097613621920,"value":"#<User:0x00007f81beb81540>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097568326940,"value":"#<ActionDispatch::Request::Session:0x00007f81b951ca38>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097588449620,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81bbb7e2a8>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001362,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001363,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001364,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001363,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001365,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1001362,"elapsed":8.9e-05},{"id":1001366,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001367,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613688540,"value":"#<TestCurrentUserProvider:0x00007f81beba1db8>"}},{"id":1001368,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001367,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81beb81540>","object_id":70097613621920}},{"id":1001369,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1001366,"elapsed":8.9e-05},{"id":1001370,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1001361,"elapsed":0.000336},{"id":1001371,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1001358,"elapsed":0.000532},{"id":1001372,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1001251,"elapsed":0.02144,"http_server_response":{"status":200}},{"id":1001373,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614232320,"value":"#<TestCurrentUserProvider:0x00007f81becab600>"}},{"id":1001374,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1001373,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001375,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1001376,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1001375,"elapsed":4.0e-06},{"id":1001377,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1001378,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1001377,"elapsed":3.0e-06},{"id":1001379,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614397220,"value":"#<TestCurrentUserProvider:0x00007f81becfbe48>"}},{"id":1001380,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097614393580,"value":"8ed840d0056c5e0d324e129e25e58dfb","kind":"req"},{"name":"opts","class":"Hash","object_id":70097614392880,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1001381,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097614393580,"value":"8ed840d0056c5e0d324e129e25e58dfb","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1001382,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1001383,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1001382,"elapsed":7.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1001384,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1001381,"elapsed":0.000114,"return_value":{"class":"String","value":"j7QivLi4JHNHUz49jMi8FDoWxuc=","object_id":70097614410600}},{"id":1001385,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'j7QivLi4JHNHUz49jMi8FDoWxuc=' OR\n                          prev_auth_token = 'j7QivLi4JHNHUz49jMi8FDoWxuc=') AND rotated_at > '2020-03-29 19:01:31.911805') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001386,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001385,"elapsed":0.001034},{"id":1001387,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1001380,"elapsed":0.004415,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81d871f140>","object_id":70097829427360}},{"id":1001388,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001389,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001388,"elapsed":0.001197},{"id":1001390,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589171440,"value":"#<User:0x00007f81bbcde9e0>"}},{"id":1001391,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1001390,"elapsed":1.7e-05},{"id":1001392,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614397220,"value":"#<TestCurrentUserProvider:0x00007f81becfbe48>"}},{"id":1001393,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1001392,"elapsed":0.001036,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001394,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097589171440,"value":"#<User:0x00007f81bbcde9e0>"}},{"id":1001395,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1001394,"elapsed":0.000788},{"id":1001396,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097589189260,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097589171440,"value":"#<User:0x00007f81bbcde9e0>"}},{"id":1001397,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1001396,"elapsed":3.5e-05},{"id":1001398,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001379,"elapsed":0.011326,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001399,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097614397220,"value":"#<TestCurrentUserProvider:0x00007f81becfbe48>"}},{"id":1001400,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001399,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001401,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589171440,"value":"#<User:0x00007f81bbcde9e0>"}},{"id":1001402,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1001401,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001403,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589222400,"value":"#<TestCurrentUserProvider:0x00007f81bbcf7800>"}},{"id":1001404,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001403,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001405,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589222400,"value":"#<TestCurrentUserProvider:0x00007f81bbcf7800>"}},{"id":1001406,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001405,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001407,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589171440,"value":"#<User:0x00007f81bbcde9e0>"}},{"id":1001408,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1001407,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001409,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001410,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001409,"elapsed":1.1e-05},{"id":1001411,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/customize/site_texts/colour.other.json"},"message":[{"name":"controller","class":"String","value":"admin/site_texts","object_id":70097755323000},{"name":"action","class":"String","value":"show","object_id":70097755323060},{"name":"id","class":"String","value":"colour.other","object_id":70097614373180}]},{"id":1001412,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001413,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001414,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001415,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001416,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001415,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001417,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1001414,"elapsed":0.000117,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bbd0e168>","object_id":70097589268660}},{"id":1001418,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097589268660,"value":"#<Guardian:0x00007f81bbd0e168>"}},{"id":1001419,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1001418,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001420,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1001413,"elapsed":0.000332},{"id":1001421,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001422,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001421,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001423,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1330 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001424,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001423,"elapsed":0.000919},{"id":1001425,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001426,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1001425,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bbd0e168>","object_id":70097589268660}},{"id":1001427,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097589815340,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097589268660,"value":"#<Guardian:0x00007f81bbd0e168>"}},{"id":1001428,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1001427,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001429,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1001412,"elapsed":0.005173,"return_value":{"class":"Array","value":"[2]","object_id":70097589815340}},{"id":1001430,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001431,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001432,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001431,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001433,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001434,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001433,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001435,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001436,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001435,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001437,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1001430,"elapsed":0.000323,"return_value":{"class":"String","value":"site_texts/show","object_id":70097589846220}},{"id":1001438,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001439,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001440,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001439,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001441,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1001438,"elapsed":0.000105},{"id":1001442,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001443,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001444,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001443,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001445,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001446,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001445,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001447,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589171440,"value":"#<User:0x00007f81bbcde9e0>"}},{"id":1001448,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1001447,"elapsed":6.0e-06,"return_value":{"class":"String","value":"ru","object_id":70097592683180}},{"id":1001449,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001450,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001449,"elapsed":9.0e-06},{"id":1001451,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001452,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001451,"elapsed":7.0e-06},{"id":1001453,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1001442,"elapsed":0.00049,"return_value":{"class":"Array","value":"[:ru, :en]","object_id":70097589917440}},{"id":1001454,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001455,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1001454,"elapsed":7.0e-06},{"id":1001456,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001457,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001458,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001457,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001459,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1001456,"elapsed":9.5e-05},{"id":1001460,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001461,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001460,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001462,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001463,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001462,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001464,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001465,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001464,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001466,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1001467,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1001466,"elapsed":3.0e-06},{"id":1001468,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001469,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1001468,"elapsed":7.0e-06},{"id":1001470,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001471,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001470,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001472,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001473,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001472,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001474,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589171440,"value":"#<User:0x00007f81bbcde9e0>"}},{"id":1001475,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1001474,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001476,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001477,"event":"call","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803564860,"value":"Admin::SiteTextsController"}},{"id":1001478,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"restricted_keys","path":"app/controllers/admin/site_texts_controller.rb","lineno":12,"static":true,"thread_id":70097708498960,"parent_id":1001477,"elapsed":3.0e-06,"return_value":{"class":"Array","value":"[\"user_notifications.confirm_old_email.title\", \"user_notifications.confirm_old_email.subject_templat","object_id":70097608931400}},{"id":1001479,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001480,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001479,"elapsed":8.0e-06},{"id":1001481,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001482,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001481,"elapsed":6.0e-06},{"id":1001483,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1001484,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1001483,"elapsed":3.0e-06},{"id":1001485,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1001486,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1001485,"elapsed":3.0e-06},{"id":1001487,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":16614108,"value":"ru","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1001488,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1001487,"elapsed":6.0e-06},{"id":1001489,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097608981980,"value":"{:id=>\"colour.other\", :value=>\"%{count} colours\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097608981960,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001490,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097608981980,"value":"{:id=>\"colour.other\", :value=>\"%{count} colours\"}","kind":"req"},{"name":"serializer","class":"Class","object_id":70097732497100,"value":"SiteTextSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097608981960,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001491,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001492,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1001491,"elapsed":3.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bbd0e168>","object_id":70097589268660}},{"id":1001493,"event":"call","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097608992680,"value":"#<SiteTextSerializer:0x00007f81be2acf50>"}},{"id":1001494,"event":"return","defined_class":"SiteTextSerializer","method_id":"id","path":"app/serializers/site_text_serializer.rb","lineno":6,"static":false,"thread_id":70097708498960,"parent_id":1001493,"elapsed":4.0e-06,"return_value":{"class":"String","value":"colour.other","object_id":70097614373180}},{"id":1001495,"event":"call","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097608992680,"value":"#<SiteTextSerializer:0x00007f81be2acf50>"}},{"id":1001496,"event":"return","defined_class":"SiteTextSerializer","method_id":"value","path":"app/serializers/site_text_serializer.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":1001495,"elapsed":3.0e-06,"return_value":{"class":"String","value":"%{count} colours","object_id":70097608982300}},{"id":1001497,"event":"call","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097608992680,"value":"#<SiteTextSerializer:0x00007f81be2acf50>"}},{"id":1001498,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.other' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001499,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001498,"elapsed":0.001156},{"id":1001500,"event":"return","defined_class":"SiteTextSerializer","method_id":"overridden?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1001497,"elapsed":0.00424},{"id":1001501,"event":"call","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SiteTextSerializer","object_id":70097608992680,"value":"#<SiteTextSerializer:0x00007f81be2acf50>"}},{"id":1001502,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'ru' AND \"translation_overrides\".\"translation_key\" = 'colour.other' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1001503,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1001502,"elapsed":1.8e-05},{"id":1001504,"event":"return","defined_class":"SiteTextSerializer","method_id":"can_revert?","path":"app/serializers/site_text_serializer.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1001501,"elapsed":0.002851},{"id":1001505,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":1001490,"elapsed":0.007615,"return_value":{"class":"Hash","value":"{\"site_text\"=>{:id=>\"colour.other\", :value=>\"%{count} colours\", :overridden=>false, :can_revert=>fal","object_id":70097608992180}},{"id":1001506,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097608992180,"value":"{\"site_text\"=>{:id=>\"colour.other\", :value=>\"%{count} colours\", :overridden=>false, :can_revert=>fal","kind":"req"},{"name":"opts","class":"Hash","object_id":70097608981960,"value":"{:root=>\"site_text\", :rest_serializer=>true}","kind":"opt"}],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001507,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1001506,"elapsed":0.000112,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.other\",\"value\":\"%{count} colours\",\"overridden\":false,\"can_revert\":false},","object_id":70097829762020}},{"id":1001508,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":1001489,"elapsed":0.00796,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.other\",\"value\":\"%{count} colours\",\"overridden\":false,\"can_revert\":false},","object_id":70097829762020}},{"id":1001509,"event":"return","defined_class":"Admin::SiteTextsController","method_id":"show","path":"app/controllers/admin/site_texts_controller.rb","lineno":59,"static":false,"thread_id":70097708498960,"parent_id":1001476,"elapsed":0.008736,"return_value":{"class":"String","value":"{\"site_text\":{\"id\":\"colour.other\",\"value\":\"%{count} colours\",\"overridden\":false,\"can_revert\":false},","object_id":70097829762020}},{"id":1001510,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001511,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1001510,"elapsed":7.0e-06},{"id":1001512,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001513,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1001512,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097829778600}},{"id":1001514,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteTextsController","object_id":70097589237320,"value":"#<Admin::SiteTextsController:0x00007f81bbcfec90>"}},{"id":1001515,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001516,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001515,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001517,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097589171440,"value":"#<User:0x00007f81bbcde9e0>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097614279200,"value":"#<ActionDispatch::Request::Session:0x00007f81becc2440>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097589815620,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81bbe19288>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001518,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001519,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001520,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001519,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001521,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1001518,"elapsed":8.7e-05},{"id":1001522,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001523,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589271820,"value":"#<TestCurrentUserProvider:0x00007f81bbd0fa18>"}},{"id":1001524,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1001523,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbcde9e0>","object_id":70097589171440}},{"id":1001525,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1001522,"elapsed":8.8e-05},{"id":1001526,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1001517,"elapsed":0.00033},{"id":1001527,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1001514,"elapsed":0.000525},{"id":1001528,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1001411,"elapsed":0.018145,"http_server_response":{"status":200}},{"id":1001529,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097829807140,"value":"#<TestCurrentUserProvider:0x00007f81d87d8848>"}},{"id":1001530,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1001529,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1001531,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1001532,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1001531,"elapsed":5.0e-06},{"id":1001533,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1001534,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1001533,"elapsed":3.0e-06}]}