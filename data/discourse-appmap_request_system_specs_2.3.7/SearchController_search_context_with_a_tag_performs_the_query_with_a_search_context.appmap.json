{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"SearchController search context with a tag performs the query with a search context","app":"Discourse","feature":"SearchController search context","feature_group":"Search","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"Tag","type":"class","children":[{"name":"target_tag_validator","type":"function","location":"app/models/tag.rb:160","static":false},{"name":"index_search","type":"function","location":"app/models/tag.rb:152","static":false},{"name":"update_synonym_associations","type":"function","location":"app/models/tag.rb:168","static":false},{"name":"trigger_tag_created_event","type":"function","location":"app/models/tag.rb:180","static":false}]},{"name":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"enqueue_object_hooks","type":"function","location":"app/models/web_hook.rb:60","static":true},{"name":"active_web_hooks","type":"function","location":"app/models/web_hook.rb:45","static":true}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"SearchLog(id: integer, term: string, user_id: integer, ip_address: inet, search_result_id: integer, search_type: integer, created_at: datetime, search_result_type: integer)","type":"class","children":[{"name":"log","type":"function","location":"app/models/search_log.rb:47","static":true},{"name":"search_types","type":"function","location":"app/models/search_log.rb:16","static":true},{"name":"redis_key","type":"function","location":"app/models/search_log.rb:32","static":true}]},{"name":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","type":"class","children":[{"name":"visible_post_types","type":"function","location":"app/models/topic.rb:381","static":true}]},{"name":"Post(id: integer, user_id: integer, topic_id: integer, post_number: integer, raw: text, cooked: text, created_at: datetime, updated_at: datetime, reply_to_post_number: integer, reply_count: integer, quote_count: integer, deleted_at: datetime, off_topic_count: integer, like_count: integer, incoming_link_count: integer, bookmark_count: integer, score: float, reads: integer, post_type: integer, sort_order: integer, last_editor_id: integer, hidden: boolean, hidden_reason_id: integer, notify_moderators_count: integer, spam_count: integer, illegal_count: integer, inappropriate_count: integer, last_version_at: datetime, user_deleted: boolean, reply_to_user_id: integer, percent_rank: float, notify_user_count: integer, like_score: integer, deleted_by_id: integer, edit_reason: string, word_count: integer, version: integer, cook_method: integer, wiki: boolean, baked_at: datetime, baked_version: integer, hidden_at: datetime, self_edits: integer, reply_quoted: boolean, via_email: boolean, raw_email: text, public_version: integer, action_code: string, image_url: string, locked_by_id: integer, image_upload_id: integer)","type":"class","children":[{"name":"types","type":"function","location":"app/models/post.rb:139","static":true}]},{"name":"Trashable","type":"class","children":[{"name":"ClassMethods","type":"class","children":[{"name":"with_deleted_scope_sql","type":"function","location":"app/models/concerns/trashable.rb:27","static":false}]}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"app/services","type":"package","children":[{"name":"SearchIndexer","type":"class","children":[{"name":"index","type":"function","location":"app/services/search_indexer.rb:126","static":true}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_serialized","type":"function","location":"app/controllers/application_controller.rb:446","static":false},{"name":"serialize_data","type":"function","location":"app/controllers/application_controller.rb:431","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"SearchController","type":"class","children":[{"name":"query","type":"function","location":"app/controllers/search_controller.rb:72","static":false},{"name":"valid_context_types","type":"function","location":"app/controllers/search_controller.rb:9","static":true}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false},{"name":"can_see?","type":"function","location":"lib/guardian.rb:122","static":false},{"name":"user","type":"function","location":"lib/guardian.rb:71","static":false},{"name":"AnonymousUser","type":"class","children":[{"name":"blank?","type":"function","location":"lib/guardian.rb:26","static":false},{"name":"secure_category_ids","type":"function","location":"lib/guardian.rb:50","static":false}]},{"name":"can_create?","type":"function","location":"lib/guardian.rb:129","static":false},{"name":"authenticated?","type":"function","location":"lib/guardian.rb:80","static":false}]},{"name":"EnsureMagic","type":"class","children":[{"name":"ensure_can_see!","type":"function","location":"lib/guardian/ensure_magic.rb:20","static":false}]},{"name":"CategoryGuardian","type":"class","children":[{"name":"secure_category_ids","type":"function","location":"lib/guardian/category_guardian.rb:57","static":false}]}]},{"name":"app/serializers","type":"package","children":[{"name":"GroupedSearchResultSerializer","type":"class","children":[{"name":"include_search_log_id?","type":"function","location":"app/serializers/grouped_search_result_serializer.rb:15","static":false},{"name":"search_log_id","type":"function","location":"app/serializers/grouped_search_result_serializer.rb:11","static":false},{"name":"can_create_topic","type":"function","location":"app/serializers/grouped_search_result_serializer.rb:23","static":false},{"name":"include_tags?","type":"function","location":"app/serializers/grouped_search_result_serializer.rb:19","static":false}]}]}],"events":[{"id":145171,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":145172,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":145171,"elapsed":0.00074},{"id":145173,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"tags\" WHERE LOWER(\"tags\".\"name\") = LOWER('important-tag') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":145174,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":145173,"elapsed":0.000975},{"id":145175,"event":"call","defined_class":"Tag","method_id":"target_tag_validator","path":"app/models/tag.rb","lineno":160,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Tag","object_id":70097612429380,"value":"#<Tag:0x00007f81be93b088>"}},{"id":145176,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"tags\" WHERE \"tags\".\"target_tag_id\" IS NULL AND (1=0) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":145177,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":145176,"elapsed":0.00126},{"id":145178,"event":"return","defined_class":"Tag","method_id":"target_tag_validator","path":"app/models/tag.rb","lineno":160,"static":false,"thread_id":70097708498960,"parent_id":145175,"elapsed":0.004902},{"id":145179,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"tags\" (\"name\", \"created_at\", \"updated_at\") VALUES ('important-tag', '2020-05-28 18:51:04.332584', '2020-05-28 18:51:04.332584') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":145180,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":145179,"elapsed":0.001187},{"id":145181,"event":"call","defined_class":"Tag","method_id":"index_search","path":"app/models/tag.rb","lineno":152,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Tag","object_id":70097612429380,"value":"#<Tag:0x00007f81be93b088>"}},{"id":145182,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Tag","object_id":70097612429380,"value":"#<Tag:0x00007f81be93b088>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":145183,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":145182,"elapsed":5.0e-06},{"id":145184,"event":"return","defined_class":"Tag","method_id":"index_search","path":"app/models/tag.rb","lineno":152,"static":false,"thread_id":70097708498960,"parent_id":145181,"elapsed":0.000129},{"id":145185,"event":"call","defined_class":"Tag","method_id":"update_synonym_associations","path":"app/models/tag.rb","lineno":168,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Tag","object_id":70097612429380,"value":"#<Tag:0x00007f81be93b088>"}},{"id":145186,"event":"return","defined_class":"Tag","method_id":"update_synonym_associations","path":"app/models/tag.rb","lineno":168,"static":false,"thread_id":70097708498960,"parent_id":145185,"elapsed":7.0e-06},{"id":145187,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":145188,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":145187,"elapsed":0.000838},{"id":145189,"event":"call","defined_class":"Tag","method_id":"trigger_tag_created_event","path":"app/models/tag.rb","lineno":180,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Tag","object_id":70097612429380,"value":"#<Tag:0x00007f81be93b088>"}},{"id":145190,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":179868,"value":"tag","kind":"req"},{"name":"object","class":"Tag","object_id":70097612429380,"value":"#<Tag:0x00007f81be93b088>","kind":"req"},{"name":"event","class":"Symbol","object_id":12692188,"value":"tag_created","kind":"req"},{"name":"serializer","class":"Class","object_id":70097614587000,"value":"TagSerializer","kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":145191,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":179868,"value":"tag","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":145192,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":145191,"elapsed":0.000242,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81d85c24c8>","object_id":70097828713060}},{"id":145193,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'tag') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":145194,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":145193,"elapsed":0.001407},{"id":145195,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":145190,"elapsed":0.005298},{"id":145196,"event":"return","defined_class":"Tag","method_id":"trigger_tag_created_event","path":"app/models/tag.rb","lineno":180,"static":false,"thread_id":70097708498960,"parent_id":145189,"elapsed":0.005505,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":145197,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":145198,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":145197,"elapsed":2.0e-05,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":145199,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":145200,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":145199,"elapsed":1.3e-05},{"id":145201,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/search/query.json?term=test&search_context[type]=tag&search_context[id]=important-tag&search_context[name]=important-tag"},"message":[{"name":"term","class":"String","value":"test","object_id":70097613424900},{"name":"search_context","class":"ActiveSupport::HashWithIndifferentAccess","value":"{\"type\"=>\"tag\", \"id\"=>\"important-tag\", \"name\"=>\"important-tag\"}","object_id":70097613445860},{"name":"controller","class":"String","value":"search","object_id":70097804292440},{"name":"action","class":"String","value":"query","object_id":70097804292420},{"name":"format","class":"String","value":"json","object_id":70097613410000}]},{"id":145202,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145203,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145204,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145205,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145206,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145205,"elapsed":3.6e-05},{"id":145207,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":145204,"elapsed":0.000165,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81beb33908>","object_id":70097613462660}},{"id":145208,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097613462660,"value":"#<Guardian:0x00007f81beb33908>"}},{"id":145209,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":145208,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":145210,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":145203,"elapsed":0.00042},{"id":145211,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145212,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145211,"elapsed":4.0e-06},{"id":145213,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145214,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":145213,"elapsed":3.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81beb33908>","object_id":70097613462660}},{"id":145215,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097613457100,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097613462660,"value":"#<Guardian:0x00007f81beb33908>"}},{"id":145216,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":145215,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":145217,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":145202,"elapsed":0.000893,"return_value":{"class":"Array","value":"[2]","object_id":70097613457100}},{"id":145218,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145219,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145220,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145219,"elapsed":4.0e-06},{"id":145221,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":145218,"elapsed":0.000114,"return_value":{"class":"String","value":"search/query","object_id":70097613493840}},{"id":145222,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145223,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145224,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145223,"elapsed":4.0e-06},{"id":145225,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":145222,"elapsed":0.000104},{"id":145226,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145227,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145228,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145227,"elapsed":3.0e-06},{"id":145229,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":145230,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":145229,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":145231,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":145232,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":145231,"elapsed":9.0e-06},{"id":145233,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":145234,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":145233,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":145235,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":145236,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":145235,"elapsed":7.0e-06},{"id":145237,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":145226,"elapsed":0.000575,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097613570100}},{"id":145238,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145239,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":145238,"elapsed":7.0e-06},{"id":145240,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145241,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145242,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145241,"elapsed":4.0e-06},{"id":145243,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":145240,"elapsed":0.000102},{"id":145244,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145245,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145244,"elapsed":3.0e-06},{"id":145246,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145247,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145246,"elapsed":3.0e-06},{"id":145248,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145249,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145248,"elapsed":3.0e-06},{"id":145250,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794916820,"value":"SearchController"}},{"id":145251,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":145250,"elapsed":3.0e-06},{"id":145252,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145253,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":145252,"elapsed":8.0e-06},{"id":145254,"event":"call","defined_class":"SearchController","method_id":"query","path":"app/controllers/search_controller.rb","lineno":72,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145255,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145256,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":145255,"elapsed":3.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81beb33908>","object_id":70097613462660}},{"id":145257,"event":"call","defined_class":"SearchController","method_id":"valid_context_types","path":"app/controllers/search_controller.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794916820,"value":"SearchController"}},{"id":145258,"event":"return","defined_class":"SearchController","method_id":"valid_context_types","path":"app/controllers/search_controller.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":145257,"elapsed":4.0e-06,"return_value":{"class":"Array","value":"[\"user\", \"topic\", \"category\", \"private_messages\", \"tag\"]","object_id":70097613638140}},{"id":145259,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".* FROM \"tags\" WHERE (lower(tags.name) IN ('important-tag')) ORDER BY \"tags\".\"id\" ASC LIMIT 1","database_type":"postgres","server_version":110006}},{"id":145260,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":145259,"elapsed":0.001248},{"id":145261,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145262,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":145261,"elapsed":6.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81beb33908>","object_id":70097613462660}},{"id":145263,"event":"call","defined_class":"EnsureMagic","method_id":"ensure_can_see!","path":"lib/guardian/ensure_magic.rb","lineno":20,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Tag","object_id":70097588399960,"value":"#<Tag:0x00007f81bbb65eb0>","kind":"req"}],"receiver":{"class":"Guardian","object_id":70097613462660,"value":"#<Guardian:0x00007f81beb33908>"}},{"id":145264,"event":"call","defined_class":"Guardian","method_id":"can_see?","path":"lib/guardian.rb","lineno":122,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Tag","object_id":70097588399960,"value":"#<Tag:0x00007f81bbb65eb0>","kind":"req"}],"receiver":{"class":"Guardian","object_id":70097613462660,"value":"#<Guardian:0x00007f81beb33908>"}},{"id":145265,"event":"return","defined_class":"Guardian","method_id":"can_see?","path":"lib/guardian.rb","lineno":122,"static":false,"thread_id":70097708498960,"parent_id":145264,"elapsed":2.2e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":145266,"event":"return","defined_class":"EnsureMagic","method_id":"ensure_can_see!","path":"lib/guardian/ensure_magic.rb","lineno":20,"static":false,"thread_id":70097708498960,"parent_id":145263,"elapsed":0.000135},{"id":145267,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145268,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145267,"elapsed":5.0e-06},{"id":145269,"event":"call","defined_class":"SearchLog(id: integer, term: string, user_id: integer, ip_address: inet, search_result_id: integer, search_type: integer, created_at: datetime, search_result_type: integer)","method_id":"log","path":"app/models/search_log.rb","lineno":47,"static":true,"thread_id":70097708498960,"parameters":[{"name":"term","class":"Hash","object_id":70097588429900,"value":"{:term=>\"test\", :search_type=>:header, :ip_address=>\"127.0.0.1\", :user_id=>nil}","kind":"keyreq"},{"name":"search_type","class":"NilClass","object_id":8,"value":null,"kind":"keyreq"},{"name":"ip_address","class":"NilClass","object_id":8,"value":null,"kind":"keyreq"},{"name":"user_id","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097567488440,"value":"SearchLog"}},{"id":145270,"event":"call","defined_class":"SearchLog(id: integer, term: string, user_id: integer, ip_address: inet, search_result_id: integer, search_type: integer, created_at: datetime, search_result_type: integer)","method_id":"search_types","path":"app/models/search_log.rb","lineno":16,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097567488440,"value":"SearchLog"}},{"id":145271,"event":"return","defined_class":"SearchLog(id: integer, term: string, user_id: integer, ip_address: inet, search_result_id: integer, search_type: integer, created_at: datetime, search_result_type: integer)","method_id":"search_types","path":"app/models/search_log.rb","lineno":16,"static":true,"thread_id":70097708498960,"parent_id":145270,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:header=>1, :full_page=>2}","object_id":70097612668960}},{"id":145272,"event":"call","defined_class":"SearchLog(id: integer, term: string, user_id: integer, ip_address: inet, search_result_id: integer, search_type: integer, created_at: datetime, search_result_type: integer)","method_id":"redis_key","path":"app/models/search_log.rb","lineno":32,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"Hash","object_id":70097588447760,"value":"{:user_id=>nil, :ip_address=>\"127.0.0.1\"}","kind":"keyreq"},{"name":"user_id","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097567488440,"value":"SearchLog"}},{"id":145273,"event":"return","defined_class":"SearchLog(id: integer, term: string, user_id: integer, ip_address: inet, search_result_id: integer, search_type: integer, created_at: datetime, search_result_type: integer)","method_id":"redis_key","path":"app/models/search_log.rb","lineno":32,"static":true,"thread_id":70097708498960,"parent_id":145272,"elapsed":5.0e-06,"return_value":{"class":"String","value":"__SEARCH__LOG_127.0.0.1","object_id":70097588469280}},{"id":145274,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"search_logs\" SET \"created_at\" = '2020-05-28 18:51:04.360434', \"term\" = 'test' WHERE \"search_logs\".\"id\" = 13","database_type":"postgres","server_version":110006}},{"id":145275,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":145274,"elapsed":0.001056},{"id":145276,"event":"return","defined_class":"SearchLog(id: integer, term: string, user_id: integer, ip_address: inet, search_result_id: integer, search_type: integer, created_at: datetime, search_result_type: integer)","method_id":"log","path":"app/models/search_log.rb","lineno":47,"static":true,"thread_id":70097708498960,"parent_id":145269,"elapsed":0.005943,"return_value":{"class":"Array","value":"[:updated, 13]","object_id":70097568786460}},{"id":145277,"event":"call","defined_class":"Guardian","method_id":"user","path":"lib/guardian.rb","lineno":71,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097613462660,"value":"#<Guardian:0x00007f81beb33908>"}},{"id":145278,"event":"call","defined_class":"Guardian::AnonymousUser","method_id":"blank?","path":"lib/guardian.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian::AnonymousUser","object_id":70097613462640,"value":"#<Guardian::AnonymousUser:0x00007f81beb338e0>"}},{"id":145279,"event":"return","defined_class":"Guardian::AnonymousUser","method_id":"blank?","path":"lib/guardian.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":145278,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":145280,"event":"return","defined_class":"Guardian","method_id":"user","path":"lib/guardian.rb","lineno":71,"static":false,"thread_id":70097708498960,"parent_id":145277,"elapsed":0.000112},{"id":145281,"event":"call","defined_class":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","method_id":"visible_post_types","path":"app/models/topic.rb","lineno":381,"static":true,"thread_id":70097708498960,"parameters":[{"name":"viewed_by","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097777826960,"value":"Topic"}},{"id":145282,"event":"call","defined_class":"Post(id: integer, user_id: integer, topic_id: integer, post_number: integer, raw: text, cooked: text, created_at: datetime, updated_at: datetime, reply_to_post_number: integer, reply_count: integer, quote_count: integer, deleted_at: datetime, off_topic_count: integer, like_count: integer, incoming_link_count: integer, bookmark_count: integer, score: float, reads: integer, post_type: integer, sort_order: integer, last_editor_id: integer, hidden: boolean, hidden_reason_id: integer, notify_moderators_count: integer, spam_count: integer, illegal_count: integer, inappropriate_count: integer, last_version_at: datetime, user_deleted: boolean, reply_to_user_id: integer, percent_rank: float, notify_user_count: integer, like_score: integer, deleted_by_id: integer, edit_reason: string, word_count: integer, version: integer, cook_method: integer, wiki: boolean, baked_at: datetime, baked_version: integer, hidden_at: datetime, self_edits: integer, reply_quoted: boolean, via_email: boolean, raw_email: text, public_version: integer, action_code: string, image_url: string, locked_by_id: integer, image_upload_id: integer)","method_id":"types","path":"app/models/post.rb","lineno":139,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097792338860,"value":"Post"}},{"id":145283,"event":"return","defined_class":"Post(id: integer, user_id: integer, topic_id: integer, post_number: integer, raw: text, cooked: text, created_at: datetime, updated_at: datetime, reply_to_post_number: integer, reply_count: integer, quote_count: integer, deleted_at: datetime, off_topic_count: integer, like_count: integer, incoming_link_count: integer, bookmark_count: integer, score: float, reads: integer, post_type: integer, sort_order: integer, last_editor_id: integer, hidden: boolean, hidden_reason_id: integer, notify_moderators_count: integer, spam_count: integer, illegal_count: integer, inappropriate_count: integer, last_version_at: datetime, user_deleted: boolean, reply_to_user_id: integer, percent_rank: float, notify_user_count: integer, like_score: integer, deleted_by_id: integer, edit_reason: string, word_count: integer, version: integer, cook_method: integer, wiki: boolean, baked_at: datetime, baked_version: integer, hidden_at: datetime, self_edits: integer, reply_quoted: boolean, via_email: boolean, raw_email: text, public_version: integer, action_code: string, image_url: string, locked_by_id: integer, image_upload_id: integer)","method_id":"types","path":"app/models/post.rb","lineno":139,"static":true,"thread_id":70097708498960,"parent_id":145282,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:regular=>1, :moderator_action=>2, :small_action=>3, :whisper=>4}","object_id":70097781988260}},{"id":145284,"event":"return","defined_class":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","method_id":"visible_post_types","path":"app/models/topic.rb","lineno":381,"static":true,"thread_id":70097708498960,"parent_id":145281,"elapsed":0.000121,"return_value":{"class":"Array","value":"[1, 2, 3]","object_id":70097568822660}},{"id":145285,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097792338860,"value":"Post"}},{"id":145286,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":145285,"elapsed":6.0e-05,"return_value":{"class":"String","value":"\"posts\".\"deleted_at\" IS NULL","object_id":70097568817500}},{"id":145287,"event":"call","defined_class":"CategoryGuardian","method_id":"secure_category_ids","path":"lib/guardian/category_guardian.rb","lineno":57,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097613462660,"value":"#<Guardian:0x00007f81beb33908>"}},{"id":145288,"event":"call","defined_class":"Guardian::AnonymousUser","method_id":"secure_category_ids","path":"lib/guardian.rb","lineno":50,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian::AnonymousUser","object_id":70097613462640,"value":"#<Guardian::AnonymousUser:0x00007f81beb338e0>"}},{"id":145289,"event":"return","defined_class":"Guardian::AnonymousUser","method_id":"secure_category_ids","path":"lib/guardian.rb","lineno":50,"static":false,"thread_id":70097708498960,"parent_id":145288,"elapsed":3.0e-06,"return_value":{"class":"Array","value":"[]","object_id":70097799890820}},{"id":145290,"event":"return","defined_class":"CategoryGuardian","method_id":"secure_category_ids","path":"lib/guardian/category_guardian.rb","lineno":57,"static":false,"thread_id":70097708498960,"parent_id":145287,"elapsed":0.000114,"return_value":{"class":"Array","value":"[]","object_id":70097799890820}},{"id":145291,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097777826960,"value":"Topic"}},{"id":145292,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":145291,"elapsed":3.8e-05,"return_value":{"class":"String","value":"\"topics\".\"deleted_at\" IS NULL","object_id":70097799900940}},{"id":145293,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097792338860,"value":"Post"}},{"id":145294,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":145293,"elapsed":3.4e-05,"return_value":{"class":"String","value":"\"posts\".\"deleted_at\" IS NULL","object_id":70097799967820}},{"id":145295,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"posts\".\"id\", \"posts\".\"user_id\", \"posts\".\"topic_id\", \"posts\".\"post_number\", \"posts\".\"raw\", \"posts\".\"cooked\", \"posts\".\"created_at\", \"posts\".\"updated_at\", \"posts\".\"reply_to_post_number\", \"posts\".\"reply_count\", \"posts\".\"quote_count\", \"posts\".\"deleted_at\", \"posts\".\"off_topic_count\", \"posts\".\"like_count\", \"posts\".\"incoming_link_count\", \"posts\".\"bookmark_count\", \"posts\".\"score\", \"posts\".\"reads\", \"posts\".\"post_type\", \"posts\".\"sort_order\", \"posts\".\"last_editor_id\", \"posts\".\"hidden\", \"posts\".\"hidden_reason_id\", \"posts\".\"notify_moderators_count\", \"posts\".\"spam_count\", \"posts\".\"illegal_count\", \"posts\".\"inappropriate_count\", \"posts\".\"last_version_at\", \"posts\".\"user_deleted\", \"posts\".\"reply_to_user_id\", \"posts\".\"percent_rank\", \"posts\".\"notify_user_count\", \"posts\".\"like_score\", \"posts\".\"deleted_by_id\", \"posts\".\"edit_reason\", \"posts\".\"word_count\", \"posts\".\"version\", \"posts\".\"cook_method\", \"posts\".\"wiki\", \"posts\".\"baked_at\", \"posts\".\"baked_version\", \"posts\".\"hidden_at\", \"posts\".\"self_edits\", \"posts\".\"reply_quoted\", \"posts\".\"via_email\", \"posts\".\"raw_email\", \"posts\".\"public_version\", \"posts\".\"action_code\", \"posts\".\"image_url\", \"posts\".\"locked_by_id\", \"posts\".\"image_upload_id\" FROM \"posts\" JOIN (SELECT *, row_number() over() row_number FROM (SELECT topics.id, min(posts.post_number) post_number FROM \"posts\" INNER JOIN \"post_search_data\" ON \"post_search_data\".\"post_id\" = \"posts\".\"id\" INNER JOIN \"topics\" ON \"topics\".\"id\" = \"posts\".\"topic_id\" AND (\"topics\".\"deleted_at\" IS NULL) LEFT JOIN categories ON categories.id = topics.category_id LEFT JOIN topic_tags ON topic_tags.topic_id = topics.id LEFT JOIN tags ON tags.id = topic_tags.tag_id WHERE (\"posts\".\"deleted_at\" IS NULL) AND \"posts\".\"post_type\" IN (1, 2, 3) AND (topics.visible) AND (topics.archetype <> 'private_message') AND (post_search_data.search_data @@ TO_TSQUERY('english', '''test'':*ABD')) AND (tags.id = 4) AND ((categories.id IS NULL) OR (NOT categories.read_restricted)) GROUP BY topics.id ORDER BY MAX((\n  TS_RANK_CD(\n    post_search_data.search_data,\n    TO_TSQUERY('english', '''test'':*ABD'),\n    1|32\n  ) *\n  (\n    CASE categories.search_priority\n    WHEN 2\n    THEN 0.6\n    WHEN 3\n    THEN 0.8\n    WHEN 4\n    THEN 1.2\n    WHEN 5\n    THEN 1.4\n    ELSE\n      CASE WHEN topics.closed\n      THEN 0.9\n      ELSE 1\n      END\n    END\n  )\n)\n) DESC, topics.bumped_at DESC LIMIT 6 OFFSET 0) xxx) x ON x.id = posts.topic_id AND x.post_number = posts.post_number WHERE (\"posts\".\"deleted_at\" IS NULL) ORDER BY row_number","database_type":"postgres","server_version":110006}},{"id":145296,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":145295,"elapsed":0.003161},{"id":145297,"event":"call","defined_class":"Guardian","method_id":"user","path":"lib/guardian.rb","lineno":71,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097613462660,"value":"#<Guardian:0x00007f81beb33908>"}},{"id":145298,"event":"call","defined_class":"Guardian::AnonymousUser","method_id":"blank?","path":"lib/guardian.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian::AnonymousUser","object_id":70097613462640,"value":"#<Guardian::AnonymousUser:0x00007f81beb338e0>"}},{"id":145299,"event":"return","defined_class":"Guardian::AnonymousUser","method_id":"blank?","path":"lib/guardian.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":145298,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":145300,"event":"return","defined_class":"Guardian","method_id":"user","path":"lib/guardian.rb","lineno":71,"static":false,"thread_id":70097708498960,"parent_id":145297,"elapsed":0.000118},{"id":145301,"event":"call","defined_class":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","method_id":"visible_post_types","path":"app/models/topic.rb","lineno":381,"static":true,"thread_id":70097708498960,"parameters":[{"name":"viewed_by","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097777826960,"value":"Topic"}},{"id":145302,"event":"call","defined_class":"Post(id: integer, user_id: integer, topic_id: integer, post_number: integer, raw: text, cooked: text, created_at: datetime, updated_at: datetime, reply_to_post_number: integer, reply_count: integer, quote_count: integer, deleted_at: datetime, off_topic_count: integer, like_count: integer, incoming_link_count: integer, bookmark_count: integer, score: float, reads: integer, post_type: integer, sort_order: integer, last_editor_id: integer, hidden: boolean, hidden_reason_id: integer, notify_moderators_count: integer, spam_count: integer, illegal_count: integer, inappropriate_count: integer, last_version_at: datetime, user_deleted: boolean, reply_to_user_id: integer, percent_rank: float, notify_user_count: integer, like_score: integer, deleted_by_id: integer, edit_reason: string, word_count: integer, version: integer, cook_method: integer, wiki: boolean, baked_at: datetime, baked_version: integer, hidden_at: datetime, self_edits: integer, reply_quoted: boolean, via_email: boolean, raw_email: text, public_version: integer, action_code: string, image_url: string, locked_by_id: integer, image_upload_id: integer)","method_id":"types","path":"app/models/post.rb","lineno":139,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097792338860,"value":"Post"}},{"id":145303,"event":"return","defined_class":"Post(id: integer, user_id: integer, topic_id: integer, post_number: integer, raw: text, cooked: text, created_at: datetime, updated_at: datetime, reply_to_post_number: integer, reply_count: integer, quote_count: integer, deleted_at: datetime, off_topic_count: integer, like_count: integer, incoming_link_count: integer, bookmark_count: integer, score: float, reads: integer, post_type: integer, sort_order: integer, last_editor_id: integer, hidden: boolean, hidden_reason_id: integer, notify_moderators_count: integer, spam_count: integer, illegal_count: integer, inappropriate_count: integer, last_version_at: datetime, user_deleted: boolean, reply_to_user_id: integer, percent_rank: float, notify_user_count: integer, like_score: integer, deleted_by_id: integer, edit_reason: string, word_count: integer, version: integer, cook_method: integer, wiki: boolean, baked_at: datetime, baked_version: integer, hidden_at: datetime, self_edits: integer, reply_quoted: boolean, via_email: boolean, raw_email: text, public_version: integer, action_code: string, image_url: string, locked_by_id: integer, image_upload_id: integer)","method_id":"types","path":"app/models/post.rb","lineno":139,"static":true,"thread_id":70097708498960,"parent_id":145302,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:regular=>1, :moderator_action=>2, :small_action=>3, :whisper=>4}","object_id":70097781988260}},{"id":145304,"event":"return","defined_class":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","method_id":"visible_post_types","path":"app/models/topic.rb","lineno":381,"static":true,"thread_id":70097708498960,"parent_id":145301,"elapsed":0.000115,"return_value":{"class":"Array","value":"[1, 2, 3]","object_id":70097568921040}},{"id":145305,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097792338860,"value":"Post"}},{"id":145306,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":145305,"elapsed":5.0e-05,"return_value":{"class":"String","value":"\"posts\".\"deleted_at\" IS NULL","object_id":70097568915700}},{"id":145307,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097777826960,"value":"Topic"}},{"id":145308,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":145307,"elapsed":3.6e-05,"return_value":{"class":"String","value":"\"topics\".\"deleted_at\" IS NULL","object_id":70097568995780}},{"id":145309,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"posts\".\"id\", \"posts\".\"user_id\", \"posts\".\"topic_id\", \"posts\".\"post_number\", \"posts\".\"raw\", \"posts\".\"cooked\", \"posts\".\"created_at\", \"posts\".\"updated_at\", \"posts\".\"reply_to_post_number\", \"posts\".\"reply_count\", \"posts\".\"quote_count\", \"posts\".\"deleted_at\", \"posts\".\"off_topic_count\", \"posts\".\"like_count\", \"posts\".\"incoming_link_count\", \"posts\".\"bookmark_count\", \"posts\".\"score\", \"posts\".\"reads\", \"posts\".\"post_type\", \"posts\".\"sort_order\", \"posts\".\"last_editor_id\", \"posts\".\"hidden\", \"posts\".\"hidden_reason_id\", \"posts\".\"notify_moderators_count\", \"posts\".\"spam_count\", \"posts\".\"illegal_count\", \"posts\".\"inappropriate_count\", \"posts\".\"last_version_at\", \"posts\".\"user_deleted\", \"posts\".\"reply_to_user_id\", \"posts\".\"percent_rank\", \"posts\".\"notify_user_count\", \"posts\".\"like_score\", \"posts\".\"deleted_by_id\", \"posts\".\"edit_reason\", \"posts\".\"word_count\", \"posts\".\"version\", \"posts\".\"cook_method\", \"posts\".\"wiki\", \"posts\".\"baked_at\", \"posts\".\"baked_version\", \"posts\".\"hidden_at\", \"posts\".\"self_edits\", \"posts\".\"reply_quoted\", \"posts\".\"via_email\", \"posts\".\"raw_email\", \"posts\".\"public_version\", \"posts\".\"action_code\", \"posts\".\"image_url\", \"posts\".\"locked_by_id\", \"posts\".\"image_upload_id\" FROM \"posts\" INNER JOIN \"post_search_data\" ON \"post_search_data\".\"post_id\" = \"posts\".\"id\" INNER JOIN \"topics\" ON \"topics\".\"id\" = \"posts\".\"topic_id\" AND (\"topics\".\"deleted_at\" IS NULL) LEFT JOIN categories ON categories.id = topics.category_id LEFT JOIN topic_tags ON topic_tags.topic_id = topics.id LEFT JOIN tags ON tags.id = topic_tags.tag_id WHERE (\"posts\".\"deleted_at\" IS NULL) AND \"posts\".\"post_type\" IN (1, 2, 3) AND (topics.visible) AND (topics.archetype <> 'private_message') AND (post_search_data.search_data @@ TO_TSQUERY('english', '''test'':*ABD')) AND (tags.id = 4) AND ((categories.id IS NULL) OR (NOT categories.read_restricted)) ORDER BY (\n  TS_RANK_CD(\n    post_search_data.search_data,\n    TO_TSQUERY('english', '''test'':*ABD'),\n    1|32\n  ) *\n  (\n    CASE categories.search_priority\n    WHEN 2\n    THEN 0.6\n    WHEN 3\n    THEN 0.8\n    WHEN 4\n    THEN 1.2\n    WHEN 5\n    THEN 1.4\n    ELSE\n      CASE WHEN topics.closed\n      THEN 0.9\n      ELSE 1\n      END\n    END\n  )\n)\n DESC, topics.bumped_at DESC LIMIT 18 OFFSET 0","database_type":"postgres","server_version":110006}},{"id":145310,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":145309,"elapsed":0.002975},{"id":145311,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Search::GroupedSearchResults","object_id":70097588431740,"value":"#<Search::GroupedSearchResults:0x00007f81bbb756f8>","kind":"req"},{"name":"serializer","class":"Class","object_id":70097611831560,"value":"GroupedSearchResultSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097614425380,"value":"{:result=>#<Search::GroupedSearchResults:0x00007f81bbb756f8 @type_filter=nil, @term=\"test\", @search_","kind":"opt"}],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145312,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Search::GroupedSearchResults","object_id":70097588431740,"value":"#<Search::GroupedSearchResults:0x00007f81bbb756f8>","kind":"req"},{"name":"serializer","class":"Class","object_id":70097611831560,"value":"GroupedSearchResultSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097614425380,"value":"{:result=>#<Search::GroupedSearchResults:0x00007f81bbb756f8 @type_filter=nil, @term=\"test\", @search_","kind":"opt"}],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145313,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145314,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":145313,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81beb33908>","object_id":70097613462660}},{"id":145315,"event":"call","defined_class":"GroupedSearchResultSerializer","method_id":"include_search_log_id?","path":"app/serializers/grouped_search_result_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"GroupedSearchResultSerializer","object_id":70097614460540,"value":"#<GroupedSearchResultSerializer:0x00007f81bed1acf8>"}},{"id":145316,"event":"call","defined_class":"GroupedSearchResultSerializer","method_id":"search_log_id","path":"app/serializers/grouped_search_result_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"GroupedSearchResultSerializer","object_id":70097614460540,"value":"#<GroupedSearchResultSerializer:0x00007f81bed1acf8>"}},{"id":145317,"event":"return","defined_class":"GroupedSearchResultSerializer","method_id":"search_log_id","path":"app/serializers/grouped_search_result_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":145316,"elapsed":4.0e-06,"return_value":{"class":"Integer","value":"13","object_id":27}},{"id":145318,"event":"return","defined_class":"GroupedSearchResultSerializer","method_id":"include_search_log_id?","path":"app/serializers/grouped_search_result_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parent_id":145315,"elapsed":0.000105,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":145319,"event":"call","defined_class":"GroupedSearchResultSerializer","method_id":"search_log_id","path":"app/serializers/grouped_search_result_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"GroupedSearchResultSerializer","object_id":70097614460540,"value":"#<GroupedSearchResultSerializer:0x00007f81bed1acf8>"}},{"id":145320,"event":"return","defined_class":"GroupedSearchResultSerializer","method_id":"search_log_id","path":"app/serializers/grouped_search_result_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":145319,"elapsed":3.0e-06,"return_value":{"class":"Integer","value":"13","object_id":27}},{"id":145321,"event":"call","defined_class":"GroupedSearchResultSerializer","method_id":"can_create_topic","path":"app/serializers/grouped_search_result_serializer.rb","lineno":23,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"GroupedSearchResultSerializer","object_id":70097614460540,"value":"#<GroupedSearchResultSerializer:0x00007f81bed1acf8>"}},{"id":145322,"event":"call","defined_class":"Guardian","method_id":"can_create?","path":"lib/guardian.rb","lineno":129,"static":false,"thread_id":70097708498960,"parameters":[{"name":"klass","class":"Class","object_id":70097777826960,"value":"Topic","kind":"req"},{"name":"parent","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Guardian","object_id":70097613462660,"value":"#<Guardian:0x00007f81beb33908>"}},{"id":145323,"event":"call","defined_class":"Guardian","method_id":"authenticated?","path":"lib/guardian.rb","lineno":80,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097613462660,"value":"#<Guardian:0x00007f81beb33908>"}},{"id":145324,"event":"call","defined_class":"Guardian::AnonymousUser","method_id":"blank?","path":"lib/guardian.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian::AnonymousUser","object_id":70097613462640,"value":"#<Guardian::AnonymousUser:0x00007f81beb338e0>"}},{"id":145325,"event":"return","defined_class":"Guardian::AnonymousUser","method_id":"blank?","path":"lib/guardian.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":145324,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":145326,"event":"return","defined_class":"Guardian","method_id":"authenticated?","path":"lib/guardian.rb","lineno":80,"static":false,"thread_id":70097708498960,"parent_id":145323,"elapsed":9.7e-05},{"id":145327,"event":"return","defined_class":"Guardian","method_id":"can_create?","path":"lib/guardian.rb","lineno":129,"static":false,"thread_id":70097708498960,"parent_id":145322,"elapsed":0.000183},{"id":145328,"event":"return","defined_class":"GroupedSearchResultSerializer","method_id":"can_create_topic","path":"app/serializers/grouped_search_result_serializer.rb","lineno":23,"static":false,"thread_id":70097708498960,"parent_id":145321,"elapsed":0.000282},{"id":145329,"event":"call","defined_class":"GroupedSearchResultSerializer","method_id":"include_tags?","path":"app/serializers/grouped_search_result_serializer.rb","lineno":19,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"GroupedSearchResultSerializer","object_id":70097614460540,"value":"#<GroupedSearchResultSerializer:0x00007f81bed1acf8>"}},{"id":145330,"event":"return","defined_class":"GroupedSearchResultSerializer","method_id":"include_tags?","path":"app/serializers/grouped_search_result_serializer.rb","lineno":19,"static":false,"thread_id":70097708498960,"parent_id":145329,"elapsed":8.0e-06},{"id":145331,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":145312,"elapsed":0.001042,"return_value":{"class":"Hash","value":"{:posts=>[], :users=>[], :categories=>[], :groups=>[], :grouped_search_result=>{:more_posts=>nil, :m","object_id":70097614460160}},{"id":145332,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097614460160,"value":"{:posts=>[], :users=>[], :categories=>[], :groups=>[], :grouped_search_result=>{:more_posts=>nil, :m","kind":"req"},{"name":"opts","class":"Hash","object_id":70097614425380,"value":"{:result=>#<Search::GroupedSearchResults:0x00007f81bbb756f8 @type_filter=nil, @term=\"test\", @search_","kind":"opt"}],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145333,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":145332,"elapsed":0.000132,"return_value":{"class":"String","value":"{\"posts\":[],\"users\":[],\"categories\":[],\"groups\":[],\"grouped_search_result\":{\"more_posts\":null,\"more_","object_id":70097569116220}},{"id":145334,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":145311,"elapsed":0.001538,"return_value":{"class":"String","value":"{\"posts\":[],\"users\":[],\"categories\":[],\"groups\":[],\"grouped_search_result\":{\"more_posts\":null,\"more_","object_id":70097569116220}},{"id":145335,"event":"return","defined_class":"SearchController","method_id":"query","path":"app/controllers/search_controller.rb","lineno":72,"static":false,"thread_id":70097708498960,"parent_id":145254,"elapsed":0.033172,"return_value":{"class":"String","value":"{\"posts\":[],\"users\":[],\"categories\":[],\"groups\":[],\"grouped_search_result\":{\"more_posts\":null,\"more_","object_id":70097569116220}},{"id":145336,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145337,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":145336,"elapsed":8.0e-06},{"id":145338,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145339,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":145338,"elapsed":7.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097569121280}},{"id":145340,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"SearchController","object_id":70097613408560,"value":"#<SearchController:0x00007f81beb19260>"}},{"id":145341,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145342,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145341,"elapsed":4.0e-06},{"id":145343,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"NilClass","object_id":8,"value":null,"kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097613312360,"value":"#<ActionDispatch::Request::Session:0x00007f81beaea2d0>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097613457220,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81beb30e88>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145344,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145345,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145346,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145345,"elapsed":3.0e-06},{"id":145347,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":145344,"elapsed":9.2e-05},{"id":145348,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145349,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613439780,"value":"#<TestCurrentUserProvider:0x00007f81beb28648>"}},{"id":145350,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":145349,"elapsed":3.0e-06},{"id":145351,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":145348,"elapsed":8.8e-05},{"id":145352,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":145343,"elapsed":0.000356},{"id":145353,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":145340,"elapsed":0.00056},{"id":145354,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":145201,"elapsed":0.038402,"http_server_response":{"status":200}},{"id":145355,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569181540,"value":"#<TestCurrentUserProvider:0x00007f81b96bdec8>"}},{"id":145356,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":145355,"elapsed":7.0e-06},{"id":145357,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":145358,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":145357,"elapsed":5.0e-06},{"id":145359,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":145360,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":145359,"elapsed":4.0e-06}]}