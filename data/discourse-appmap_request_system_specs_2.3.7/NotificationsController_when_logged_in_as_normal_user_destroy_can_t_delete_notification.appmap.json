{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"NotificationsController when logged in as normal user #destroy can't delete notification","app":"Discourse","feature":"NotificationsController when logged in","feature_group":"Notifications","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"User","type":"class","children":[{"name":"password=","type":"function","location":"app/models/user.rb:618","static":false},{"name":"email=","type":"function","location":"app/models/user.rb:1198","static":false},{"name":"should_validate_email_address?","type":"function","location":"app/models/user.rb:432","static":false},{"name":"username_format_validator","type":"function","location":"app/models/user.rb:924","static":false},{"name":"confirm_password?","type":"function","location":"app/models/user.rb:650","static":false},{"name":"password_validator","type":"function","location":"app/models/user.rb:646","static":false},{"name":"password_validation_required?","type":"function","location":"app/models/user.rb:638","static":false},{"name":"password_required?","type":"function","location":"app/models/user.rb:634","static":false},{"name":"email","type":"function","location":"app/models/user.rb:1194","static":false},{"name":"create_user_profile","type":"function","location":"app/models/user.rb:1139","static":false},{"name":"set_random_avatar","type":"function","location":"app/models/user.rb:1143","static":false},{"name":"refresh_avatar","type":"function","location":"app/models/user.rb:1053","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"new_user?","type":"function","location":"app/models/user.rb:661","static":false},{"name":"new_user_posting_on_first_day?","type":"function","location":"app/models/user.rb:655","static":false},{"name":"first_post_created_at","type":"function","location":"app/models/user.rb:1067","static":false},{"name":"publish_notifications_state","type":"function","location":"app/models/user.rb:571","static":false},{"name":"unread_notifications","type":"function","location":"app/models/user.rb:521","static":false},{"name":"unread_private_messages","type":"function","location":"app/models/user.rb:500","static":false},{"name":"unread_high_priority_notifications","type":"function","location":"app/models/user.rb:504","static":false},{"name":"unread_notifications_of_priority","type":"function","location":"app/models/user.rb:480","static":false},{"name":"read_first_notification?","type":"function","location":"app/models/user.rb:561","static":false},{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_visit_record!","type":"function","location":"app/models/user.rb:680","static":false},{"name":"visit_record_for","type":"function","location":"app/models/user.rb:676","static":false},{"name":"create_visit_record!","type":"function","location":"app/models/user.rb:671","static":false},{"name":"seen_before?","type":"function","location":"app/models/user.rb:667","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"UsernameValidator","type":"class","children":[{"name":"perform_validation","type":"function","location":"app/models/username_validator.rb:11","static":true},{"name":"valid_format?","type":"function","location":"app/models/username_validator.rb:30","static":false},{"name":"invalid_char_pattern","type":"function","location":"app/models/username_validator.rb:132","static":true},{"name":"char_whitelist_exists?","type":"function","location":"app/models/username_validator.rb:136","static":true}]},{"name":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","type":"class","children":[{"name":"username_length","type":"function","location":"app/models/user.rb:241","static":true},{"name":"normalize_username","type":"function","location":"app/models/user.rb:245","static":true},{"name":"max_password_length","type":"function","location":"app/models/user.rb:237","static":true},{"name":"human_user_id?","type":"function","location":"app/models/user.rb:309","static":true},{"name":"max_unread_notifications","type":"function","location":"app/models/user.rb:513","static":true}]},{"name":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"should_block?","type":"function","location":"app/models/screened_ip_address.rb:74","static":true},{"name":"exists_for_ip_address_and_action?","type":"function","location":"app/models/screened_ip_address.rb:82","static":true},{"name":"match_for_ip_address","type":"function","location":"app/models/screened_ip_address.rb:64","static":true}]},{"name":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","type":"class","children":[{"name":"should_block?","type":"function","location":"app/models/screened_email.rb:35","static":true},{"name":"canonical","type":"function","location":"app/models/screened_email.rb:21","static":true}]},{"name":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"generate_token","type":"function","location":"app/models/email_token.rb:36","static":true},{"name":"token_length","type":"function","location":"app/models/email_token.rb:20","static":true}]},{"name":"UserOption","type":"class","children":[{"name":"set_defaults","type":"function","location":"app/models/user_option.rb:47","static":false},{"name":"text_size=","type":"function","location":"app/models/user_option.rb:172","static":false},{"name":"title_count_mode=","type":"function","location":"app/models/user_option.rb:180","static":false}]},{"name":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","type":"class","children":[{"name":"text_sizes","type":"function","location":"app/models/user_option.rb:30","static":true},{"name":"title_count_modes","type":"function","location":"app/models/user_option.rb:34","static":true}]},{"name":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","type":"class","children":[{"name":"notification_levels","type":"function","location":"app/models/topic_user.rb:29","static":true}]},{"name":"HasCustomFields","type":"class","children":[{"name":"save_custom_fields","type":"function","location":"app/models/concerns/has_custom_fields.rb:204","static":false},{"name":"custom_fields_clean?","type":"function","location":"app/models/concerns/has_custom_fields.rb:185","static":false}]},{"name":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"enqueue_object_hooks","type":"function","location":"app/models/web_hook.rb:60","static":true},{"name":"active_web_hooks","type":"function","location":"app/models/web_hook.rb:45","static":true}]},{"name":"Trashable","type":"class","children":[{"name":"ClassMethods","type":"class","children":[{"name":"with_deleted_scope_sql","type":"function","location":"app/models/concerns/trashable.rb:27","static":false}]}]},{"name":"Topic","type":"class","children":[{"name":"title=","type":"function","location":"app/models/topic.rb:1124","static":false},{"name":"private_message?","type":"function","location":"app/models/topic.rb:551","static":false},{"name":"ensure_topic_has_a_category","type":"function","location":"app/models/topic.rb:375","static":false},{"name":"inherit_auto_close_from_category","type":"function","location":"app/models/topic.rb:348","static":false},{"name":"initialize_default_values","type":"function","location":"app/models/topic.rb:343","static":false},{"name":"limit_topics_per_day","type":"function","location":"app/models/topic.rb:419","static":false},{"name":"limit_private_messages_per_day","type":"function","location":"app/models/topic.rb:427","static":false},{"name":"changed_to_category","type":"function","location":"app/models/topic.rb:784","static":false},{"name":"advance_draft_sequence","type":"function","location":"app/models/topic.rb:367","static":false},{"name":"fancy_title","type":"function","location":"app/models/topic.rb:438","static":false}]},{"name":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","type":"class","children":[{"name":"topic_title_length","type":"function","location":"app/models/site_setting.rb:36","static":true},{"name":"Upload","type":"function","location":"app/models/site_setting.rb:172","static":true}]},{"name":"WatchedWord(id: integer, word: string, action: integer, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"actions","type":"function","location":"app/models/watched_word.rb:5","static":true}]},{"name":"Emoji","type":"class","children":[{"name":"unicode_unescape","type":"function","location":"app/models/emoji.rb:185","static":true},{"name":"custom","type":"function","location":"app/models/emoji.rb:35","static":true},{"name":"cache_key","type":"function","location":"app/models/emoji.rb:79","static":true}]},{"name":"SiteSetting","type":"class","children":[{"name":"Upload","type":"class","children":[{"name":"enable_s3_uploads","type":"function","location":"app/models/site_setting.rb:146","static":true}]}]},{"name":"GlobalSetting","type":"class","children":[{"name":"use_s3?","type":"function","location":"app/models/global_setting.rb:96","static":true},{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true},{"name":"skip_db?","type":"function","location":"app/models/global_setting.rb:84","static":true}]},{"name":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","type":"class","children":[{"name":"max_fancy_title_length","type":"function","location":"app/models/topic.rb:27","static":true}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"DraftSequence(id: integer, user_id: integer, draft_key: string, sequence: integer)","type":"class","children":[{"name":"next!","type":"function","location":"app/models/draft_sequence.rb:4","static":true}]},{"name":"Notification(id: integer, notification_type: integer, user_id: integer, data: string, read: boolean, created_at: datetime, updated_at: datetime, topic_id: integer, post_number: integer, post_action_id: integer, high_priority: boolean)","type":"class","children":[{"name":"high_priority_types","type":"function","location":"app/models/notification.rb:117","static":true},{"name":"types","type":"function","location":"app/models/notification.rb:89","static":true}]},{"name":"Notification","type":"class","children":[{"name":"data_hash","type":"function","location":"app/models/notification.rb:186","static":false}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/validators","type":"package","children":[{"name":"PasswordValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/password_validator.rb:5","static":false}]},{"name":"UserFullNameValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/user_full_name_validator.rb:5","static":false}]},{"name":"AllowedIpAddressValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/allowed_ip_address_validator.rb:5","static":false}]},{"name":"EmailValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/email_validator.rb:5","static":false},{"name":"allowed?","type":"function","location":"lib/validators/email_validator.rb:15","static":true},{"name":"email_in_restriction_setting?","type":"function","location":"lib/validators/email_validator.rb:33","static":true}]},{"name":"TimezoneValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/timezone_validator.rb:14","static":false}]},{"name":"TopicTitleLengthValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/topic_title_length_validator.rb:5","static":false}]},{"name":"CensoredWordsValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/censored_words_validator.rb:4","static":false}]},{"name":"WatchedWordsValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/watched_words_validator.rb:4","static":false}]},{"name":"QualityTitleValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/quality_title_validator.rb:7","static":false}]},{"name":"MaxEmojisValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/max_emojis_validator.rb:5","static":false}]},{"name":"UniqueAmongValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/unique_among_validator.rb:4","static":false}]}]},{"name":"app/services","type":"package","children":[{"name":"BadgeGranter","type":"class","children":[{"name":"queue_badge_grant","type":"function","location":"app/services/badge_granter.rb:126","static":true}]},{"name":"TrackedTopicsUpdater","type":"class","children":[{"name":"call","type":"function","location":"app/services/tracked_topics_updater.rb:10","static":false}]},{"name":"SearchIndexer","type":"class","children":[{"name":"index","type":"function","location":"app/services/search_indexer.rb:126","static":true},{"name":"queue_post_reindex","type":"function","location":"app/services/search_indexer.rb:114","static":true}]},{"name":"WordWatcher","type":"class","children":[{"name":"word_matcher_regexp","type":"function","location":"app/services/word_watcher.rb:26","static":true},{"name":"get_cached_words","type":"function","location":"app/services/word_watcher.rb:17","static":true},{"name":"word_matcher_regexp_key","type":"function","location":"app/services/word_watcher.rb:55","static":true},{"name":"words_for_action","type":"function","location":"app/services/word_watcher.rb:9","static":true},{"name":"should_block?","type":"function","location":"app/services/word_watcher.rb:73","static":false},{"name":"word_matches_for_action?","type":"function","location":"app/services/word_watcher.rb:77","static":false}]},{"name":"NotificationConsolidator","type":"class","children":[{"name":"consolidate!","type":"function","location":"app/services/notification_consolidator.rb:30","static":false}]},{"name":"NotificationEmailer","type":"class","children":[{"name":"process_notification","type":"function","location":"app/services/notification_emailer.rb:126","static":true}]}]},{"name":"app/jobs","type":"package","children":[{"name":"Jobs","type":"class","children":[{"name":"enqueue","type":"function","location":"app/jobs/base.rb:284","static":true},{"name":"run_later?","type":"function","location":"app/jobs/base.rb:9","static":true}]}]},{"name":"app/serializers","type":"package","children":[{"name":"NotificationSerializer","type":"class","children":[{"name":"include_fancy_title?","type":"function","location":"app/serializers/notification_serializer.rb:25","static":false},{"name":"fancy_title","type":"function","location":"app/serializers/notification_serializer.rb:29","static":false},{"name":"slug","type":"function","location":"app/serializers/notification_serializer.rb:17","static":false},{"name":"data","type":"function","location":"app/serializers/notification_serializer.rb:37","static":false},{"name":"include_is_warning?","type":"function","location":"app/serializers/notification_serializer.rb:33","static":false},{"name":"is_warning","type":"function","location":"app/serializers/notification_serializer.rb:21","static":false}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"rescue_discourse_actions","type":"function","location":"app/controllers/application_controller.rb:229","static":false}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]}],"events":[{"id":1160341,"event":"call","defined_class":"User","method_id":"password=","path":"app/models/user.rb","lineno":618,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097783082600,"value":"myawesomepassword","kind":"req"}],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160342,"event":"return","defined_class":"User","method_id":"password=","path":"app/models/user.rb","lineno":618,"static":false,"thread_id":70097708498960,"parent_id":1160341,"elapsed":8.0e-06,"return_value":{"class":"String","value":"myawesomepassword","object_id":70097783082600}},{"id":1160343,"event":"call","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_email","class":"String","object_id":70097829860280,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160344,"event":"return","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parent_id":1160343,"elapsed":0.000171,"return_value":{"class":"UserEmail","value":"#<UserEmail:0x00007f81d87e7500>","object_id":70097829837440}},{"id":1160345,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1160346,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160345,"elapsed":0.000844},{"id":1160347,"event":"call","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160348,"event":"return","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parent_id":1160347,"elapsed":1.7e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160349,"event":"call","defined_class":"User","method_id":"username_format_validator","path":"app/models/user.rb","lineno":924,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160350,"event":"call","defined_class":"UsernameValidator","method_id":"perform_validation","path":"app/models/username_validator.rb","lineno":11,"static":true,"thread_id":70097708498960,"parameters":[{"name":"object","class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>","kind":"req"},{"name":"field_name","class":"String","object_id":70097713120640,"value":"username","kind":"req"}],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":1160351,"event":"call","defined_class":"UsernameValidator","method_id":"valid_format?","path":"app/models/username_validator.rb","lineno":30,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UsernameValidator","object_id":70097621380640,"value":"#<UsernameValidator:0x00007f81bfa4dc40>"}},{"id":1160352,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1160353,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parent_id":1160352,"elapsed":1.0e-05,"return_value":{"class":"Range","value":"3..20","object_id":70097621377880}},{"id":1160354,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1160355,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parent_id":1160354,"elapsed":6.0e-06,"return_value":{"class":"Range","value":"3..20","object_id":70097621400640}},{"id":1160356,"event":"call","defined_class":"UsernameValidator","method_id":"invalid_char_pattern","path":"app/models/username_validator.rb","lineno":132,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":1160357,"event":"return","defined_class":"UsernameValidator","method_id":"invalid_char_pattern","path":"app/models/username_validator.rb","lineno":132,"static":true,"thread_id":70097708498960,"parent_id":1160356,"elapsed":5.0e-06,"return_value":{"class":"Regexp","value":"(?-mix:[^\\w.-])","object_id":70097569557580}},{"id":1160358,"event":"call","defined_class":"UsernameValidator","method_id":"char_whitelist_exists?","path":"app/models/username_validator.rb","lineno":136,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":1160359,"event":"return","defined_class":"UsernameValidator","method_id":"char_whitelist_exists?","path":"app/models/username_validator.rb","lineno":136,"static":true,"thread_id":70097708498960,"parent_id":1160358,"elapsed":5.0e-06},{"id":1160360,"event":"return","defined_class":"UsernameValidator","method_id":"valid_format?","path":"app/models/username_validator.rb","lineno":30,"static":false,"thread_id":70097708498960,"parent_id":1160351,"elapsed":0.000456,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160361,"event":"return","defined_class":"UsernameValidator","method_id":"perform_validation","path":"app/models/username_validator.rb","lineno":11,"static":true,"thread_id":70097708498960,"parent_id":1160350,"elapsed":0.000576},{"id":1160362,"event":"return","defined_class":"User","method_id":"username_format_validator","path":"app/models/user.rb","lineno":924,"static":false,"thread_id":70097708498960,"parent_id":1160349,"elapsed":0.000692},{"id":1160363,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"normalize_username","path":"app/models/user.rb","lineno":245,"static":true,"thread_id":70097708498960,"parameters":[{"name":"username","class":"String","object_id":70097621383980,"value":"bruce1384","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1160364,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"normalize_username","path":"app/models/user.rb","lineno":245,"static":true,"thread_id":70097708498960,"parent_id":1160363,"elapsed":9.0e-06,"return_value":{"class":"String","value":"bruce1384","object_id":70097621393900}},{"id":1160365,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097621383980,"value":"bruce1384","kind":"req"}],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160366,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":1160365,"elapsed":9.0e-06},{"id":1160367,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097621415640,"value":"bruce1384","kind":"req"}],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160368,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":1160367,"elapsed":1.0e-05},{"id":1160369,"event":"call","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160370,"event":"call","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":727708,"value":"password","kind":"req"},{"name":"value","class":"String","object_id":70097783082600,"value":"myawesomepassword","kind":"req"}],"receiver":{"class":"PasswordValidator","object_id":70097621412680,"value":"#<PasswordValidator:0x00007f81bfa5d690>"}},{"id":1160371,"event":"call","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160372,"event":"call","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160373,"event":"return","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parent_id":1160372,"elapsed":4.0e-06},{"id":1160374,"event":"return","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parent_id":1160371,"elapsed":0.000105,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160375,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160376,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1160375,"elapsed":1.2e-05,"return_value":{"class":"String","value":"bruce1346@wayne.com","object_id":70097621430260}},{"id":1160377,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160378,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1160377,"elapsed":7.0e-06,"return_value":{"class":"String","value":"bruce1346@wayne.com","object_id":70097621430260}},{"id":1160379,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097783082600,"value":"myawesomepassword","kind":"req"}],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160380,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":1160379,"elapsed":6.0e-06},{"id":1160381,"event":"return","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1160370,"elapsed":0.002261},{"id":1160382,"event":"return","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parent_id":1160369,"elapsed":0.002432},{"id":1160383,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1160384,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parent_id":1160383,"elapsed":5.0e-06,"return_value":{"class":"Integer","value":"200","object_id":401}},{"id":1160385,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097621445360,"value":"Bruce Wayne","kind":"req"}],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160386,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":1160385,"elapsed":6.0e-06},{"id":1160387,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097621443820,"value":"bruce wayne","kind":"req"}],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160388,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":1160387,"elapsed":5.0e-06},{"id":1160389,"event":"call","defined_class":"UserFullNameValidator","method_id":"validate_each","path":"lib/validators/user_full_name_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":88028,"value":"name","kind":"req"},{"name":"value","class":"String","object_id":70097621431300,"value":"Bruce Wayne","kind":"req"}],"receiver":{"class":"UserFullNameValidator","object_id":70097719440680,"value":"#<UserFullNameValidator:0x00007f81cb556a50>"}},{"id":1160390,"event":"return","defined_class":"UserFullNameValidator","method_id":"validate_each","path":"lib/validators/user_full_name_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1160389,"elapsed":6.0e-06},{"id":1160391,"event":"call","defined_class":"AllowedIpAddressValidator","method_id":"validate_each","path":"lib/validators/allowed_ip_address_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097621463660,"value":"99.232.23.241","kind":"req"}],"receiver":{"class":"AllowedIpAddressValidator","object_id":70097719544680,"value":"#<AllowedIpAddressValidator:0x00007f81cb5896d0>"}},{"id":1160392,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"should_block?","path":"app/models/screened_ip_address.rb","lineno":74,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097621463660,"value":"99.232.23.241","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1160393,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"exists_for_ip_address_and_action?","path":"app/models/screened_ip_address.rb","lineno":82,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097621463660,"value":"99.232.23.241","kind":"req"},{"name":"action_type","class":"Integer","object_id":3,"value":"1","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1160394,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097621463660,"value":"99.232.23.241","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1160395,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('99.232.23.241' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160396,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160395,"elapsed":0.001241},{"id":1160397,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1160394,"elapsed":0.047843},{"id":1160398,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"exists_for_ip_address_and_action?","path":"app/models/screened_ip_address.rb","lineno":82,"static":true,"thread_id":70097708498960,"parent_id":1160393,"elapsed":0.048011},{"id":1160399,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"should_block?","path":"app/models/screened_ip_address.rb","lineno":74,"static":true,"thread_id":70097708498960,"parent_id":1160392,"elapsed":0.048149},{"id":1160400,"event":"return","defined_class":"AllowedIpAddressValidator","method_id":"validate_each","path":"lib/validators/allowed_ip_address_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1160391,"elapsed":0.048296},{"id":1160401,"event":"call","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserEmail","object_id":70097829837440,"value":"#<UserEmail:0x00007f81d87e7500>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":735708,"value":"email","kind":"req"},{"name":"value","class":"String","object_id":70097782427660,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"EmailValidator","object_id":70097803750180,"value":"#<EmailValidator:0x00007f81d5625648>"}},{"id":1160402,"event":"call","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097782427660,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1160403,"event":"call","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[{"name":"setting","class":"String","object_id":70097723515680,"value":"mailinator.com","kind":"req"},{"name":"value","class":"String","object_id":70097782427660,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1160404,"event":"return","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":1160403,"elapsed":8.0e-05},{"id":1160405,"event":"return","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parent_id":1160402,"elapsed":0.00026,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160406,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097782427660,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":1160407,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097782427660,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":1160408,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parent_id":1160407,"elapsed":1.5e-05,"return_value":{"class":"String","value":"bruce1346@wayne.com","object_id":70097782839640}},{"id":1160409,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_emails\".* FROM \"screened_emails\" ORDER BY \"screened_emails\".\"created_at\" DESC LIMIT 100","database_type":"postgres","server_version":110006}},{"id":1160410,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160409,"elapsed":0.001385},{"id":1160411,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":1160406,"elapsed":0.006264},{"id":1160412,"event":"return","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1160401,"elapsed":0.006834},{"id":1160413,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE (lower(email) = 'bruce1346@wayne.com') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160414,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160413,"elapsed":0.001322},{"id":1160415,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1160416,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parent_id":1160415,"elapsed":5.0e-06,"return_value":{"class":"Integer","value":"200","object_id":401}},{"id":1160417,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"users\" (\"username\", \"created_at\", \"updated_at\", \"name\", \"password_hash\", \"salt\", \"active\", \"username_lower\", \"trust_level\", \"ip_address\") VALUES ('bruce1384', '2020-05-28 19:03:52.710464', '2020-05-28 19:03:52.710464', 'Bruce Wayne', '3af6938e1ec2ccf97e87bc170505021b8a331d616becdfd41f32b86f8515ec10', '839794c0f4e8c41d2e9d5b0e497f1933', TRUE, 'bruce1384', 1, '99.232.23.241/32') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1160418,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160417,"elapsed":0.001402},{"id":1160419,"event":"call","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserEmail","object_id":70097829837440,"value":"#<UserEmail:0x00007f81d87e7500>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":735708,"value":"email","kind":"req"},{"name":"value","class":"String","object_id":70097804079980,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"EmailValidator","object_id":70097803750180,"value":"#<EmailValidator:0x00007f81d5625648>"}},{"id":1160420,"event":"call","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097804079980,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1160421,"event":"call","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[{"name":"setting","class":"String","object_id":70097723515680,"value":"mailinator.com","kind":"req"},{"name":"value","class":"String","object_id":70097804079980,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1160422,"event":"return","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":1160421,"elapsed":3.4e-05},{"id":1160423,"event":"return","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parent_id":1160420,"elapsed":0.000165,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160424,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097804079980,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":1160425,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097804079980,"value":"bruce1346@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":1160426,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parent_id":1160425,"elapsed":1.1e-05,"return_value":{"class":"String","value":"bruce1346@wayne.com","object_id":70097804275140}},{"id":1160427,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_emails\".* FROM \"screened_emails\" ORDER BY \"screened_emails\".\"created_at\" DESC LIMIT 100","database_type":"postgres","server_version":110006}},{"id":1160428,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160427,"elapsed":0.001444},{"id":1160429,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":1160424,"elapsed":0.006169},{"id":1160430,"event":"return","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1160419,"elapsed":0.00663},{"id":1160431,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE \"user_emails\".\"primary\" = TRUE AND \"user_emails\".\"user_id\" = 1505 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160432,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160431,"elapsed":0.001233},{"id":1160433,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE (lower(email) = 'bruce1346@wayne.com') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160434,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160433,"elapsed":0.001153},{"id":1160435,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_emails\" (\"user_id\", \"email\", \"primary\", \"created_at\", \"updated_at\") VALUES (1505, 'bruce1346@wayne.com', TRUE, '2020-05-28 19:03:52.733904', '2020-05-28 19:03:52.733904') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1160436,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160435,"elapsed":0.001159},{"id":1160437,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160438,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1160437,"elapsed":2.1e-05,"return_value":{"class":"String","value":"bruce1346@wayne.com","object_id":70097813385840}},{"id":1160439,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"generate_token","path":"app/models/email_token.rb","lineno":36,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":1160440,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"token_length","path":"app/models/email_token.rb","lineno":20,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":1160441,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"token_length","path":"app/models/email_token.rb","lineno":20,"static":true,"thread_id":70097708498960,"parent_id":1160440,"elapsed":3.0e-06,"return_value":{"class":"Integer","value":"16","object_id":33}},{"id":1160442,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"generate_token","path":"app/models/email_token.rb","lineno":36,"static":true,"thread_id":70097708498960,"parent_id":1160439,"elapsed":0.000142,"return_value":{"class":"String","value":"30c84bd7a1e05f7b2726833a01397a45","object_id":70097712378680}},{"id":1160443,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"email_tokens\" (\"user_id\", \"email\", \"token\", \"created_at\", \"updated_at\") VALUES (1505, 'bruce1346@wayne.com', '30c84bd7a1e05f7b2726833a01397a45', '2020-05-28 19:03:52.739615', '2020-05-28 19:03:52.739615') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1160444,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160443,"elapsed":0.001127},{"id":1160445,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"email_tokens\" SET \"expired\" = TRUE WHERE \"email_tokens\".\"user_id\" = 1505 AND (id != 1754)","database_type":"postgres","server_version":110006}},{"id":1160446,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160445,"elapsed":0.001065},{"id":1160447,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_stats\" (\"user_id\", \"new_since\") VALUES (1505, '2020-05-28 19:03:52.750312') RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":1160448,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160447,"elapsed":0.001348},{"id":1160449,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1505 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160450,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160449,"elapsed":0.001271},{"id":1160451,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097594074220,"value":"{:user=>#<User id: 1505, username: \"bruce1384\", created_at: \"2020-05-28 19:03:52\", updated_at: \"2020","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":1160452,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1160451,"elapsed":1.2e-05},{"id":1160453,"event":"call","defined_class":"TimezoneValidator","method_id":"validate_each","path":"lib/validators/timezone_validator.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserOption","object_id":70097594123580,"value":"#<UserOption:0x00007f81bc650a78>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":5058588,"value":"timezone","kind":"req"},{"name":"value","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"TimezoneValidator","object_id":70097795312080,"value":"#<TimezoneValidator:0x00007f81d460d3a0>"}},{"id":1160454,"event":"return","defined_class":"TimezoneValidator","method_id":"validate_each","path":"lib/validators/timezone_validator.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":1160453,"elapsed":4.0e-06},{"id":1160455,"event":"call","defined_class":"UserOption","method_id":"set_defaults","path":"app/models/user_option.rb","lineno":47,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserOption","object_id":70097594123580,"value":"#<UserOption:0x00007f81bc650a78>"}},{"id":1160456,"event":"call","defined_class":"UserOption","method_id":"text_size=","path":"app/models/user_option.rb","lineno":172,"static":false,"thread_id":70097708498960,"parameters":[{"name":"value","class":"String","object_id":70097723783240,"value":"normal","kind":"req"}],"receiver":{"class":"UserOption","object_id":70097594123580,"value":"#<UserOption:0x00007f81bc650a78>"}},{"id":1160457,"event":"call","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"text_sizes","path":"app/models/user_option.rb","lineno":30,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097795215760,"value":"UserOption"}},{"id":1160458,"event":"return","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"text_sizes","path":"app/models/user_option.rb","lineno":30,"static":true,"thread_id":70097708498960,"parent_id":1160457,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:normal=>0, :larger=>1, :largest=>2, :smaller=>3}","object_id":70097795246760}},{"id":1160459,"event":"return","defined_class":"UserOption","method_id":"text_size=","path":"app/models/user_option.rb","lineno":172,"static":false,"thread_id":70097708498960,"parent_id":1160456,"elapsed":0.00013,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1160460,"event":"call","defined_class":"UserOption","method_id":"title_count_mode=","path":"app/models/user_option.rb","lineno":180,"static":false,"thread_id":70097708498960,"parameters":[{"name":"value","class":"String","object_id":70097723782760,"value":"notifications","kind":"req"}],"receiver":{"class":"UserOption","object_id":70097594123580,"value":"#<UserOption:0x00007f81bc650a78>"}},{"id":1160461,"event":"call","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"title_count_modes","path":"app/models/user_option.rb","lineno":34,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097795215760,"value":"UserOption"}},{"id":1160462,"event":"return","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"title_count_modes","path":"app/models/user_option.rb","lineno":34,"static":true,"thread_id":70097708498960,"parent_id":1160461,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:notifications=>0, :contextual=>1}","object_id":70097816997920}},{"id":1160463,"event":"return","defined_class":"UserOption","method_id":"title_count_mode=","path":"app/models/user_option.rb","lineno":180,"static":false,"thread_id":70097708498960,"parent_id":1160460,"elapsed":0.000118,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1160464,"event":"return","defined_class":"UserOption","method_id":"set_defaults","path":"app/models/user_option.rb","lineno":47,"static":false,"thread_id":70097708498960,"parent_id":1160455,"elapsed":0.000536,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160465,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_options\" (\"user_id\", \"email_digests\", \"digest_after_minutes\", \"auto_track_topics_after_msecs\", \"new_topic_duration_minutes\", \"notification_level_when_replying\") VALUES (1505, TRUE, 10080, 240000, 2880, 2) RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":1160466,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160465,"elapsed":0.001159},{"id":1160467,"event":"call","defined_class":"TrackedTopicsUpdater","method_id":"call","path":"app/services/tracked_topics_updater.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TrackedTopicsUpdater","object_id":70097797787400,"value":"#<TrackedTopicsUpdater:0x00007f81d4ac5e10>"}},{"id":1160468,"event":"call","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755252000,"value":"TopicUser"}},{"id":1160469,"event":"return","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parent_id":1160468,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:muted=>0, :regular=>1, :tracking=>2, :watching=>3}","object_id":70097795217940}},{"id":1160470,"event":"call","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755252000,"value":"TopicUser"}},{"id":1160471,"event":"return","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parent_id":1160470,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:muted=>0, :regular=>1, :tracking=>2, :watching=>3}","object_id":70097795217940}},{"id":1160472,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"topic_users\" SET notification_level = CASE WHEN total_msecs_viewed < 240000 THEN 1 ELSE 2 END WHERE \"topic_users\".\"notifications_reason_id\" IS NULL AND \"topic_users\".\"user_id\" = 1505","database_type":"postgres","server_version":110006}},{"id":1160473,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160472,"elapsed":0.001272},{"id":1160474,"event":"return","defined_class":"TrackedTopicsUpdater","method_id":"call","path":"app/services/tracked_topics_updater.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":1160467,"elapsed":0.005219,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1160475,"event":"call","defined_class":"User","method_id":"create_user_profile","path":"app/models/user.rb","lineno":1139,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160476,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1505 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160477,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160476,"elapsed":0.001141},{"id":1160478,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_profiles\" (\"user_id\") VALUES (1505) RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":1160479,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160478,"elapsed":0.001812},{"id":1160480,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097798804760,"value":"{:user=>#<UserProfile user_id: 1505, location: nil, website: nil, bio_raw: nil, bio_cooked: nil, dis","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":1160481,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1160480,"elapsed":1.3e-05},{"id":1160482,"event":"return","defined_class":"User","method_id":"create_user_profile","path":"app/models/user.rb","lineno":1139,"static":false,"thread_id":70097708498960,"parent_id":1160475,"elapsed":0.011638,"return_value":{"class":"UserProfile","value":"#<UserProfile:0x00007f81b9243370>","object_id":70097566833080}},{"id":1160483,"event":"call","defined_class":"User","method_id":"set_random_avatar","path":"app/models/user.rb","lineno":1143,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160484,"event":"return","defined_class":"User","method_id":"set_random_avatar","path":"app/models/user.rb","lineno":1143,"static":false,"thread_id":70097708498960,"parent_id":1160483,"elapsed":8.0e-06},{"id":1160485,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":1160486,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160485,"elapsed":0.001405},{"id":1160487,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":1160488,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160487,"elapsed":0.001175},{"id":1160489,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":1160490,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160489,"elapsed":0.001061},{"id":1160491,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":1160492,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160491,"elapsed":0.001341},{"id":1160493,"event":"call","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parameters":[{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160494,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160495,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":1160494,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160496,"event":"return","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parent_id":1160493,"elapsed":0.000109},{"id":1160497,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE \"user_auth_tokens\".\"user_id\" = 1505","database_type":"postgres","server_version":110006}},{"id":1160498,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160497,"elapsed":0.001089},{"id":1160499,"event":"call","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160500,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_avatars\".* FROM \"user_avatars\" WHERE \"user_avatars\".\"user_id\" = 1505 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160501,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160500,"elapsed":0.001116},{"id":1160502,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_avatars\" (\"user_id\", \"created_at\", \"updated_at\") VALUES (1505, '2020-05-28 19:03:52.811015', '2020-05-28 19:03:52.811015') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1160503,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160502,"elapsed":0.000952},{"id":1160504,"event":"return","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parent_id":1160499,"elapsed":0.009114},{"id":1160505,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097799668960,"value":"{:user=>#<User id: 1505, username: \"bruce1384\", created_at: \"2020-05-28 19:03:52\", updated_at: \"2020","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":1160506,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1160505,"elapsed":8.0e-06},{"id":1160507,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":1160508,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1160507,"elapsed":3.0e-06},{"id":1160509,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1160510,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160509,"elapsed":0.000958},{"id":1160511,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"},{"name":"object","class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>","kind":"req"},{"name":"event","class":"Symbol","object_id":12268508,"value":"user_created","kind":"req"},{"name":"serializer","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":1160512,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":1160513,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":1160512,"elapsed":0.000233,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81d85db3b0>","object_id":70097828764120}},{"id":1160514,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'user') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160515,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160514,"elapsed":0.001383},{"id":1160516,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":1160511,"elapsed":0.005047},{"id":1160517,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097777826960,"value":"Topic"}},{"id":1160518,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":1160517,"elapsed":9.1e-05,"return_value":{"class":"String","value":"\"topics\".\"deleted_at\" IS NULL","object_id":70097613329420}},{"id":1160519,"event":"call","defined_class":"Topic","method_id":"title=","path":"app/models/topic.rb","lineno":1124,"static":false,"thread_id":70097708498960,"parameters":[{"name":"t","class":"String","object_id":70097613309140,"value":"This is a test topic 867","kind":"req"}],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160520,"event":"return","defined_class":"Topic","method_id":"title=","path":"app/models/topic.rb","lineno":1124,"static":false,"thread_id":70097708498960,"parent_id":1160519,"elapsed":8.6e-05,"return_value":{"class":"String","value":"This is a test topic 867","object_id":70097613309140}},{"id":1160521,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1160522,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160521,"elapsed":0.000995},{"id":1160523,"event":"call","defined_class":"Topic","method_id":"title=","path":"app/models/topic.rb","lineno":1124,"static":false,"thread_id":70097708498960,"parameters":[{"name":"t","class":"String","object_id":70097613835500,"value":"This is a test topic 867","kind":"req"}],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160524,"event":"return","defined_class":"Topic","method_id":"title=","path":"app/models/topic.rb","lineno":1124,"static":false,"thread_id":70097708498960,"parent_id":1160523,"elapsed":9.8e-05,"return_value":{"class":"String","value":"This is a test topic 867","object_id":70097613835500}},{"id":1160525,"event":"call","defined_class":"TopicTitleLengthValidator","method_id":"validate_each","path":"lib/validators/topic_title_length_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097613854940,"value":"This is a test topic 867","kind":"req"}],"receiver":{"class":"TopicTitleLengthValidator","object_id":70097778412020,"value":"#<TopicTitleLengthValidator:0x00007f81d25d13e8>"}},{"id":1160526,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160527,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1160526,"elapsed":1.3e-05},{"id":1160528,"event":"call","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160529,"event":"return","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parent_id":1160528,"elapsed":1.7e-05},{"id":1160530,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"topic_title_length","path":"app/models/site_setting.rb","lineno":36,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1160531,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"topic_title_length","path":"app/models/site_setting.rb","lineno":36,"static":true,"thread_id":70097708498960,"parent_id":1160530,"elapsed":2.2e-05,"return_value":{"class":"Range","value":"15..255","object_id":70097613871280}},{"id":1160532,"event":"return","defined_class":"TopicTitleLengthValidator","method_id":"validate_each","path":"lib/validators/topic_title_length_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1160525,"elapsed":0.000599,"return_value":{"class":"Hash","value":"{:is=>:==, :minimum=>:>=, :maximum=>:<=}","object_id":70097718258080}},{"id":1160533,"event":"call","defined_class":"CensoredWordsValidator","method_id":"validate_each","path":"lib/validators/censored_words_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097613854940,"value":"This is a test topic 867","kind":"req"}],"receiver":{"class":"CensoredWordsValidator","object_id":70097778515220,"value":"#<CensoredWordsValidator:0x00007f81d2603a28>"}},{"id":1160534,"event":"call","defined_class":"WordWatcher","method_id":"word_matcher_regexp","path":"app/services/word_watcher.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"},{"name":"raise_errors","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":1160535,"event":"call","defined_class":"WordWatcher","method_id":"get_cached_words","path":"app/services/word_watcher.rb","lineno":17,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":1160536,"event":"call","defined_class":"WordWatcher","method_id":"word_matcher_regexp_key","path":"app/services/word_watcher.rb","lineno":55,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":1160537,"event":"return","defined_class":"WordWatcher","method_id":"word_matcher_regexp_key","path":"app/services/word_watcher.rb","lineno":55,"static":true,"thread_id":70097708498960,"parent_id":1160536,"elapsed":4.0e-06,"return_value":{"class":"String","value":"watched-words-list:censor","object_id":70097613885800}},{"id":1160538,"event":"return","defined_class":"WordWatcher","method_id":"get_cached_words","path":"app/services/word_watcher.rb","lineno":17,"static":true,"thread_id":70097708498960,"parent_id":1160535,"elapsed":0.001307},{"id":1160539,"event":"return","defined_class":"WordWatcher","method_id":"word_matcher_regexp","path":"app/services/word_watcher.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1160534,"elapsed":0.001447},{"id":1160540,"event":"call","defined_class":"WordWatcher","method_id":"words_for_action","path":"app/services/word_watcher.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":1160541,"event":"call","defined_class":"WatchedWord(id: integer, word: string, action: integer, created_at: datetime, updated_at: datetime)","method_id":"actions","path":"app/models/watched_word.rb","lineno":5,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587074820,"value":"WatchedWord"}},{"id":1160542,"event":"return","defined_class":"WatchedWord(id: integer, word: string, action: integer, created_at: datetime, updated_at: datetime)","method_id":"actions","path":"app/models/watched_word.rb","lineno":5,"static":true,"thread_id":70097708498960,"parent_id":1160541,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:block=>1, :censor=>2, :require_approval=>3, :flag=>4}","object_id":70097568148260}},{"id":1160543,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"watched_words\".\"word\" FROM \"watched_words\" WHERE \"watched_words\".\"action\" = 2 LIMIT 1000","database_type":"postgres","server_version":110006}},{"id":1160544,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160543,"elapsed":0.001072},{"id":1160545,"event":"return","defined_class":"WordWatcher","method_id":"words_for_action","path":"app/services/word_watcher.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":1160540,"elapsed":0.004389,"return_value":{"class":"Array","value":"[]","object_id":70097608556380}},{"id":1160546,"event":"return","defined_class":"CensoredWordsValidator","method_id":"validate_each","path":"lib/validators/censored_words_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1160533,"elapsed":0.006125},{"id":1160547,"event":"call","defined_class":"WatchedWordsValidator","method_id":"validate_each","path":"lib/validators/watched_words_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097613854940,"value":"This is a test topic 867","kind":"req"}],"receiver":{"class":"WatchedWordsValidator","object_id":70097778596560,"value":"#<WatchedWordsValidator:0x00007f81d262b5a0>"}},{"id":1160548,"event":"call","defined_class":"WordWatcher","method_id":"should_block?","path":"app/services/word_watcher.rb","lineno":73,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"WordWatcher","object_id":70097608551640,"value":"#<WordWatcher:0x00007f81be1d59b0>"}},{"id":1160549,"event":"call","defined_class":"WordWatcher","method_id":"word_matches_for_action?","path":"app/services/word_watcher.rb","lineno":77,"static":false,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":613788,"value":"block","kind":"req"},{"name":"all_matches","class":"Hash","object_id":70097608550180,"value":"{:all_matches=>true}","kind":"key"}],"receiver":{"class":"WordWatcher","object_id":70097608551640,"value":"#<WordWatcher:0x00007f81be1d59b0>"}},{"id":1160550,"event":"call","defined_class":"WordWatcher","method_id":"word_matcher_regexp","path":"app/services/word_watcher.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":613788,"value":"block","kind":"req"},{"name":"raise_errors","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":1160551,"event":"call","defined_class":"WordWatcher","method_id":"get_cached_words","path":"app/services/word_watcher.rb","lineno":17,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":613788,"value":"block","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":1160552,"event":"call","defined_class":"WordWatcher","method_id":"word_matcher_regexp_key","path":"app/services/word_watcher.rb","lineno":55,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":613788,"value":"block","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":1160553,"event":"return","defined_class":"WordWatcher","method_id":"word_matcher_regexp_key","path":"app/services/word_watcher.rb","lineno":55,"static":true,"thread_id":70097708498960,"parent_id":1160552,"elapsed":6.0e-06,"return_value":{"class":"String","value":"watched-words-list:block","object_id":70097608566560}},{"id":1160554,"event":"return","defined_class":"WordWatcher","method_id":"get_cached_words","path":"app/services/word_watcher.rb","lineno":17,"static":true,"thread_id":70097708498960,"parent_id":1160551,"elapsed":0.001195},{"id":1160555,"event":"return","defined_class":"WordWatcher","method_id":"word_matcher_regexp","path":"app/services/word_watcher.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1160550,"elapsed":0.001358},{"id":1160556,"event":"return","defined_class":"WordWatcher","method_id":"word_matches_for_action?","path":"app/services/word_watcher.rb","lineno":77,"static":false,"thread_id":70097708498960,"parent_id":1160549,"elapsed":0.001465},{"id":1160557,"event":"return","defined_class":"WordWatcher","method_id":"should_block?","path":"app/services/word_watcher.rb","lineno":73,"static":false,"thread_id":70097708498960,"parent_id":1160548,"elapsed":0.001575},{"id":1160558,"event":"return","defined_class":"WatchedWordsValidator","method_id":"validate_each","path":"lib/validators/watched_words_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1160547,"elapsed":0.001681},{"id":1160559,"event":"call","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160560,"event":"return","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parent_id":1160559,"elapsed":1.0e-05},{"id":1160561,"event":"call","defined_class":"QualityTitleValidator","method_id":"validate_each","path":"lib/validators/quality_title_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097613854940,"value":"This is a test topic 867","kind":"req"}],"receiver":{"class":"QualityTitleValidator","object_id":70097778757840,"value":"#<QualityTitleValidator:0x00007f81d267a1a0>"}},{"id":1160562,"event":"return","defined_class":"QualityTitleValidator","method_id":"validate_each","path":"lib/validators/quality_title_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1160561,"elapsed":7.9e-05},{"id":1160563,"event":"call","defined_class":"MaxEmojisValidator","method_id":"validate_each","path":"lib/validators/max_emojis_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097613854940,"value":"This is a test topic 867","kind":"req"}],"receiver":{"class":"MaxEmojisValidator","object_id":70097778857220,"value":"#<MaxEmojisValidator:0x00007f81d26aaa08>"}},{"id":1160564,"event":"call","defined_class":"Emoji","method_id":"unicode_unescape","path":"app/models/emoji.rb","lineno":185,"static":true,"thread_id":70097708498960,"parameters":[{"name":"string","class":"String","object_id":70097608616720,"value":"This is a test topic 867","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":1160565,"event":"return","defined_class":"Emoji","method_id":"unicode_unescape","path":"app/models/emoji.rb","lineno":185,"static":true,"thread_id":70097708498960,"parent_id":1160564,"elapsed":0.000218,"return_value":{"class":"String","value":"This is a test topic 867","object_id":70097608638420}},{"id":1160566,"event":"call","defined_class":"Emoji","method_id":"custom","path":"app/models/emoji.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":1160567,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097715190900,"value":"custom_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":1160568,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":1160567,"elapsed":7.0e-06,"return_value":{"class":"String","value":"custom_emojis:v9:plugin-emoji","object_id":70097608632940}},{"id":1160569,"event":"return","defined_class":"Emoji","method_id":"custom","path":"app/models/emoji.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":1160566,"elapsed":0.001017,"return_value":{"class":"Array","value":"[]","object_id":70097608630480}},{"id":1160570,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":1160571,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":1160570,"elapsed":4.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":1160572,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":1160573,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1160574,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":1160573,"elapsed":3.0e-06},{"id":1160575,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":1160572,"elapsed":0.000103},{"id":1160576,"event":"return","defined_class":"MaxEmojisValidator","method_id":"validate_each","path":"lib/validators/max_emojis_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1160563,"elapsed":0.001999},{"id":1160577,"event":"call","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160578,"event":"return","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parent_id":1160577,"elapsed":6.0e-06},{"id":1160579,"event":"call","defined_class":"UniqueAmongValidator","method_id":"validate_each","path":"lib/validators/unique_among_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097613854940,"value":"This is a test topic 867","kind":"req"}],"receiver":{"class":"UniqueAmongValidator","object_id":70097778966840,"value":"#<UniqueAmongValidator:0x00007f81d26e0270>"}},{"id":1160580,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"topics\" WHERE LOWER(\"topics\".\"title\") = LOWER('This is a test topic 867') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160581,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160580,"elapsed":0.001092},{"id":1160582,"event":"return","defined_class":"UniqueAmongValidator","method_id":"validate_each","path":"lib/validators/unique_among_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1160579,"elapsed":0.004226},{"id":1160583,"event":"call","defined_class":"Topic","method_id":"ensure_topic_has_a_category","path":"app/models/topic.rb","lineno":375,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160584,"event":"return","defined_class":"Topic","method_id":"ensure_topic_has_a_category","path":"app/models/topic.rb","lineno":375,"static":false,"thread_id":70097708498960,"parent_id":1160583,"elapsed":1.0e-05},{"id":1160585,"event":"call","defined_class":"Emoji","method_id":"unicode_unescape","path":"app/models/emoji.rb","lineno":185,"static":true,"thread_id":70097708498960,"parameters":[{"name":"string","class":"String","object_id":70097799984260,"value":"This is a test topic 867","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":1160586,"event":"return","defined_class":"Emoji","method_id":"unicode_unescape","path":"app/models/emoji.rb","lineno":185,"static":true,"thread_id":70097708498960,"parent_id":1160585,"elapsed":0.000158,"return_value":{"class":"String","value":"This is a test topic 867","object_id":70097800002440}},{"id":1160587,"event":"call","defined_class":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","method_id":"max_fancy_title_length","path":"app/models/topic.rb","lineno":27,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097777826960,"value":"Topic"}},{"id":1160588,"event":"return","defined_class":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","method_id":"max_fancy_title_length","path":"app/models/topic.rb","lineno":27,"static":true,"thread_id":70097708498960,"parent_id":1160587,"elapsed":4.0e-06,"return_value":{"class":"Integer","value":"400","object_id":801}},{"id":1160589,"event":"call","defined_class":"Topic","method_id":"inherit_auto_close_from_category","path":"app/models/topic.rb","lineno":348,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160590,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"categories\".\"id\", \"categories\".\"name\", \"categories\".\"color\", \"categories\".\"topic_id\", \"categories\".\"topic_count\", \"categories\".\"created_at\", \"categories\".\"updated_at\", \"categories\".\"user_id\", \"categories\".\"topics_year\", \"categories\".\"topics_month\", \"categories\".\"topics_week\", \"categories\".\"slug\", \"categories\".\"description\", \"categories\".\"text_color\", \"categories\".\"read_restricted\", \"categories\".\"auto_close_hours\", \"categories\".\"post_count\", \"categories\".\"latest_post_id\", \"categories\".\"latest_topic_id\", \"categories\".\"position\", \"categories\".\"parent_category_id\", \"categories\".\"posts_year\", \"categories\".\"posts_month\", \"categories\".\"posts_week\", \"categories\".\"email_in\", \"categories\".\"email_in_allow_strangers\", \"categories\".\"topics_day\", \"categories\".\"posts_day\", \"categories\".\"allow_badges\", \"categories\".\"name_lower\", \"categories\".\"auto_close_based_on_last_post\", \"categories\".\"topic_template\", \"categories\".\"contains_messages\", \"categories\".\"sort_order\", \"categories\".\"sort_ascending\", \"categories\".\"uploaded_logo_id\", \"categories\".\"uploaded_background_id\", \"categories\".\"topic_featured_link_allowed\", \"categories\".\"all_topics_wiki\", \"categories\".\"show_subcategory_list\", \"categories\".\"num_featured_topics\", \"categories\".\"default_view\", \"categories\".\"subcategory_list_style\", \"categories\".\"default_top_period\", \"categories\".\"mailinglist_mirror\", \"categories\".\"minimum_required_tags\", \"categories\".\"navigate_to_first_post_after_read\", \"categories\".\"search_priority\", \"categories\".\"allow_global_tags\", \"categories\".\"reviewable_by_group_id\", \"categories\".\"required_tag_group_id\", \"categories\".\"min_tags_from_required_group\", \"categories\".\"read_only_banner\", \"categories\".\"default_list_filter\" FROM \"categories\" WHERE \"categories\".\"id\" = 1 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160591,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160590,"elapsed":0.001435},{"id":1160592,"event":"return","defined_class":"Topic","method_id":"inherit_auto_close_from_category","path":"app/models/topic.rb","lineno":348,"static":false,"thread_id":70097708498960,"parent_id":1160589,"elapsed":0.005257},{"id":1160593,"event":"call","defined_class":"Topic","method_id":"initialize_default_values","path":"app/models/topic.rb","lineno":343,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160594,"event":"return","defined_class":"Topic","method_id":"initialize_default_values","path":"app/models/topic.rb","lineno":343,"static":false,"thread_id":70097708498960,"parent_id":1160593,"elapsed":2.4e-05,"return_value":{"class":"Integer","value":"1505","object_id":3011}},{"id":1160595,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"topics\" (\"title\", \"created_at\", \"updated_at\", \"user_id\", \"last_post_user_id\", \"category_id\", \"bumped_at\", \"slug\", \"fancy_title\") VALUES ('This is a test topic 867', '2020-05-28 19:03:52.851802', '2020-05-28 19:03:52.851802', 1505, 1505, 1, '2020-05-28 19:03:52.851941', 'this-is-a-test-topic-867', 'This is a test topic 867') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1160596,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160595,"elapsed":0.001367},{"id":1160597,"event":"call","defined_class":"User","method_id":"new_user?","path":"app/models/user.rb","lineno":661,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160598,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160599,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1160598,"elapsed":8.0e-06},{"id":1160600,"event":"return","defined_class":"User","method_id":"new_user?","path":"app/models/user.rb","lineno":661,"static":false,"thread_id":70097708498960,"parent_id":1160597,"elapsed":0.000187,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160601,"event":"call","defined_class":"Topic","method_id":"limit_topics_per_day","path":"app/models/topic.rb","lineno":419,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160602,"event":"call","defined_class":"User","method_id":"new_user_posting_on_first_day?","path":"app/models/user.rb","lineno":655,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160603,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160604,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1160603,"elapsed":6.0e-06},{"id":1160605,"event":"call","defined_class":"User","method_id":"first_post_created_at","path":"app/models/user.rb","lineno":1067,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>"}},{"id":1160606,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_stats\".\"user_id\", \"user_stats\".\"topics_entered\", \"user_stats\".\"time_read\", \"user_stats\".\"days_visited\", \"user_stats\".\"posts_read_count\", \"user_stats\".\"likes_given\", \"user_stats\".\"likes_received\", \"user_stats\".\"new_since\", \"user_stats\".\"read_faq\", \"user_stats\".\"first_post_created_at\", \"user_stats\".\"post_count\", \"user_stats\".\"topic_count\", \"user_stats\".\"bounce_score\", \"user_stats\".\"reset_bounce_score_after\", \"user_stats\".\"flags_agreed\", \"user_stats\".\"flags_disagreed\", \"user_stats\".\"flags_ignored\", \"user_stats\".\"first_unread_at\", \"user_stats\".\"distinct_badge_count\" FROM \"user_stats\" WHERE \"user_stats\".\"user_id\" = 1505 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160607,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160606,"elapsed":0.001298},{"id":1160608,"event":"return","defined_class":"User","method_id":"first_post_created_at","path":"app/models/user.rb","lineno":1067,"static":false,"thread_id":70097708498960,"parent_id":1160605,"elapsed":0.004856},{"id":1160609,"event":"return","defined_class":"User","method_id":"new_user_posting_on_first_day?","path":"app/models/user.rb","lineno":655,"static":false,"thread_id":70097708498960,"parent_id":1160602,"elapsed":0.005118,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160610,"event":"return","defined_class":"Topic","method_id":"limit_topics_per_day","path":"app/models/topic.rb","lineno":419,"static":false,"thread_id":70097708498960,"parent_id":1160601,"elapsed":0.005279,"return_value":{"class":"RateLimiter","value":"#<RateLimiter:0x00007f81b97360d0>","object_id":70097569427560}},{"id":1160611,"event":"call","defined_class":"Topic","method_id":"limit_private_messages_per_day","path":"app/models/topic.rb","lineno":427,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160612,"event":"call","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160613,"event":"return","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parent_id":1160612,"elapsed":1.3e-05},{"id":1160614,"event":"return","defined_class":"Topic","method_id":"limit_private_messages_per_day","path":"app/models/topic.rb","lineno":427,"static":false,"thread_id":70097708498960,"parent_id":1160611,"elapsed":0.000116},{"id":1160615,"event":"call","defined_class":"Topic","method_id":"changed_to_category","path":"app/models/topic.rb","lineno":784,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_category","class":"Category","object_id":70097594528580,"value":"#<Category:0x00007f81bc716688>","kind":"req"}],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160616,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"categories\" WHERE \"categories\".\"topic_id\" = 1114 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160617,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160616,"elapsed":0.001444},{"id":1160618,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"categories\" SET topic_count = topic_count + 1 WHERE \"categories\".\"id\" = 1","database_type":"postgres","server_version":110006}},{"id":1160619,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160618,"elapsed":0.001372},{"id":1160620,"event":"return","defined_class":"Topic","method_id":"changed_to_category","path":"app/models/topic.rb","lineno":784,"static":false,"thread_id":70097708498960,"parent_id":1160615,"elapsed":0.00977,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160621,"event":"call","defined_class":"Topic","method_id":"advance_draft_sequence","path":"app/models/topic.rb","lineno":367,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160622,"event":"call","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160623,"event":"return","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parent_id":1160622,"elapsed":1.2e-05},{"id":1160624,"event":"call","defined_class":"DraftSequence(id: integer, user_id: integer, draft_key: string, sequence: integer)","method_id":"next!","path":"app/models/draft_sequence.rb","lineno":4,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097829859540,"value":"#<User:0x00007f81d87f21a8>","kind":"req"},{"name":"key","class":"String","object_id":70097796284180,"value":"new_topic","kind":"req"}],"receiver":{"class":"Class","object_id":70097730339440,"value":"DraftSequence"}},{"id":1160625,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user_id","class":"Integer","object_id":3011,"value":"1505","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1160626,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parent_id":1160625,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160627,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"draft_sequences\".* FROM \"draft_sequences\" WHERE \"draft_sequences\".\"user_id\" = 1505 AND \"draft_sequences\".\"draft_key\" = 'new_topic' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160628,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160627,"elapsed":0.001348},{"id":1160629,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"draft_sequences\" (\"user_id\", \"draft_key\", \"sequence\") VALUES (1505, 'new_topic', 1) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1160630,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160629,"elapsed":0.001303},{"id":1160631,"event":"return","defined_class":"DraftSequence(id: integer, user_id: integer, draft_key: string, sequence: integer)","method_id":"next!","path":"app/models/draft_sequence.rb","lineno":4,"static":true,"thread_id":70097708498960,"parent_id":1160624,"elapsed":0.010625,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1160632,"event":"return","defined_class":"Topic","method_id":"advance_draft_sequence","path":"app/models/topic.rb","lineno":367,"static":false,"thread_id":70097708498960,"parent_id":1160621,"elapsed":0.010987,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1160633,"event":"call","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parameters":[{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160634,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>"}},{"id":1160635,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":1160634,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160636,"event":"return","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parent_id":1160633,"elapsed":0.00012},{"id":1160637,"event":"call","defined_class":"SearchIndexer","method_id":"queue_post_reindex","path":"app/services/search_indexer.rb","lineno":114,"static":true,"thread_id":70097708498960,"parameters":[{"name":"topic_id","class":"Integer","object_id":2229,"value":"1114","kind":"req"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":1160638,"event":"return","defined_class":"SearchIndexer","method_id":"queue_post_reindex","path":"app/services/search_indexer.rb","lineno":114,"static":true,"thread_id":70097708498960,"parent_id":1160637,"elapsed":4.0e-06},{"id":1160639,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Topic","object_id":70097613308840,"value":"#<Topic:0x00007f81beae8750>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":1160640,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1160639,"elapsed":4.0e-06},{"id":1160641,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1160642,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160641,"elapsed":0.000976},{"id":1160643,"event":"call","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parameters":[{"name":"job","class":"Symbol","object_id":13678428,"value":"update_topic_upload_security","kind":"req"},{"name":"opts","class":"Hash","object_id":70097615567900,"value":"{:topic_id=>1114}","kind":"opt"}],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":1160644,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":1160645,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":1160644,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160646,"event":"return","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parent_id":1160643,"elapsed":0.000259,"return_value":{"class":"String","value":"30b37072727823944d0a392e","object_id":70097615563020}},{"id":1160647,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1160648,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160647,"elapsed":0.000893},{"id":1160649,"event":"call","defined_class":"Notification(id: integer, notification_type: integer, user_id: integer, data: string, read: boolean, created_at: datetime, updated_at: datetime, topic_id: integer, post_number: integer, post_action_id: integer, high_priority: boolean)","method_id":"high_priority_types","path":"app/models/notification.rb","lineno":117,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755059700,"value":"Notification"}},{"id":1160650,"event":"return","defined_class":"Notification(id: integer, notification_type: integer, user_id: integer, data: string, read: boolean, created_at: datetime, updated_at: datetime, topic_id: integer, post_number: integer, post_action_id: integer, high_priority: boolean)","method_id":"high_priority_types","path":"app/models/notification.rb","lineno":117,"static":true,"thread_id":70097708498960,"parent_id":1160649,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[6, 24]","object_id":70097587984360}},{"id":1160651,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"notifications\" (\"notification_type\", \"user_id\", \"data\", \"created_at\", \"updated_at\", \"topic_id\") VALUES (1, 1505, '{\"poison\":\"ivy\",\"killer\":\"croc\"}', '2020-05-28 19:03:52.891942', '2020-05-28 19:03:52.891942', 1114) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1160652,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160651,"elapsed":0.001041},{"id":1160653,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1160654,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160653,"elapsed":0.000806},{"id":1160655,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":2116508,"value":"notification","kind":"req"},{"name":"object","class":"Notification","object_id":70097615561100,"value":"#<Notification:0x00007f81bef34318>","kind":"req"},{"name":"event","class":"Symbol","object_id":12689308,"value":"notification_created","kind":"req"},{"name":"serializer","class":"Class","object_id":70097828747320,"value":"NotificationSerializer","kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":1160656,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":2116508,"value":"notification","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":1160657,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":1160656,"elapsed":0.000231,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81bf9c96e8>","object_id":70097621109620}},{"id":1160658,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'notification') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160659,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160658,"elapsed":0.001193},{"id":1160660,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":1160655,"elapsed":0.045429},{"id":1160661,"event":"call","defined_class":"Notification","method_id":"data_hash","path":"app/models/notification.rb","lineno":186,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Notification","object_id":70097615561100,"value":"#<Notification:0x00007f81bef34318>"}},{"id":1160662,"event":"return","defined_class":"Notification","method_id":"data_hash","path":"app/models/notification.rb","lineno":186,"static":false,"thread_id":70097708498960,"parent_id":1160661,"elapsed":3.7e-05,"return_value":{"class":"ActiveSupport::HashWithIndifferentAccess","value":"{\"poison\"=>\"ivy\", \"killer\"=>\"croc\"}","object_id":70097719030280}},{"id":1160663,"event":"call","defined_class":"Notification(id: integer, notification_type: integer, user_id: integer, data: string, read: boolean, created_at: datetime, updated_at: datetime, topic_id: integer, post_number: integer, post_action_id: integer, high_priority: boolean)","method_id":"types","path":"app/models/notification.rb","lineno":89,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755059700,"value":"Notification"}},{"id":1160664,"event":"return","defined_class":"Notification(id: integer, notification_type: integer, user_id: integer, data: string, read: boolean, created_at: datetime, updated_at: datetime, topic_id: integer, post_number: integer, post_action_id: integer, high_priority: boolean)","method_id":"types","path":"app/models/notification.rb","lineno":89,"static":true,"thread_id":70097708498960,"parent_id":1160663,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:mentioned=>1, :replied=>2, :quoted=>3, :edited=>4, :liked=>5, :private_message=>6, :invited_to_pri","object_id":70097799895020}},{"id":1160665,"event":"call","defined_class":"Notification(id: integer, notification_type: integer, user_id: integer, data: string, read: boolean, created_at: datetime, updated_at: datetime, topic_id: integer, post_number: integer, post_action_id: integer, high_priority: boolean)","method_id":"types","path":"app/models/notification.rb","lineno":89,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755059700,"value":"Notification"}},{"id":1160666,"event":"return","defined_class":"Notification(id: integer, notification_type: integer, user_id: integer, data: string, read: boolean, created_at: datetime, updated_at: datetime, topic_id: integer, post_number: integer, post_action_id: integer, high_priority: boolean)","method_id":"types","path":"app/models/notification.rb","lineno":89,"static":true,"thread_id":70097708498960,"parent_id":1160665,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:mentioned=>1, :replied=>2, :quoted=>3, :edited=>4, :liked=>5, :private_message=>6, :invited_to_pri","object_id":70097799895020}},{"id":1160667,"event":"call","defined_class":"NotificationConsolidator","method_id":"consolidate!","path":"app/services/notification_consolidator.rb","lineno":30,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationConsolidator","object_id":70097718843540,"value":"#<NotificationConsolidator:0x00007f81cb433128>"}},{"id":1160668,"event":"return","defined_class":"NotificationConsolidator","method_id":"consolidate!","path":"app/services/notification_consolidator.rb","lineno":30,"static":false,"thread_id":70097708498960,"parent_id":1160667,"elapsed":1.0e-05},{"id":1160669,"event":"call","defined_class":"NotificationEmailer","method_id":"process_notification","path":"app/services/notification_emailer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"notification","class":"Notification","object_id":70097615561100,"value":"#<Notification:0x00007f81bef34318>","kind":"req"}],"receiver":{"class":"Class","object_id":70097756944400,"value":"NotificationEmailer"}},{"id":1160670,"event":"return","defined_class":"NotificationEmailer","method_id":"process_notification","path":"app/services/notification_emailer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1160669,"elapsed":4.0e-06},{"id":1160671,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1505 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160672,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160671,"elapsed":0.001685},{"id":1160673,"event":"call","defined_class":"User","method_id":"publish_notifications_state","path":"app/models/user.rb","lineno":571,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097783066020,"value":"#<User:0x00007f81d2eb1b48>"}},{"id":1160674,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"notifications\".* FROM \"notifications\" LEFT JOIN topics ON notifications.topic_id = topics.id WHERE \"notifications\".\"user_id\" = 1505 AND (topics.id IS NULL OR topics.deleted_at IS NULL) ORDER BY notifications.created_at desc LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160675,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160674,"elapsed":0.002866},{"id":1160676,"event":"call","defined_class":"NotificationSerializer","method_id":"include_fancy_title?","path":"app/serializers/notification_serializer.rb","lineno":25,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationSerializer","object_id":70097796337560,"value":"#<NotificationSerializer:0x00007f81d4801f30>"}},{"id":1160677,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097777826960,"value":"Topic"}},{"id":1160678,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":1160677,"elapsed":7.9e-05,"return_value":{"class":"String","value":"\"topics\".\"deleted_at\" IS NULL","object_id":70097796376100}},{"id":1160679,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"topics\".\"id\", \"topics\".\"title\", \"topics\".\"last_posted_at\", \"topics\".\"created_at\", \"topics\".\"updated_at\", \"topics\".\"views\", \"topics\".\"posts_count\", \"topics\".\"user_id\", \"topics\".\"last_post_user_id\", \"topics\".\"reply_count\", \"topics\".\"featured_user1_id\", \"topics\".\"featured_user2_id\", \"topics\".\"featured_user3_id\", \"topics\".\"deleted_at\", \"topics\".\"highest_post_number\", \"topics\".\"image_url\", \"topics\".\"like_count\", \"topics\".\"incoming_link_count\", \"topics\".\"category_id\", \"topics\".\"visible\", \"topics\".\"moderator_posts_count\", \"topics\".\"closed\", \"topics\".\"archived\", \"topics\".\"bumped_at\", \"topics\".\"has_summary\", \"topics\".\"archetype\", \"topics\".\"featured_user4_id\", \"topics\".\"notify_moderators_count\", \"topics\".\"spam_count\", \"topics\".\"pinned_at\", \"topics\".\"score\", \"topics\".\"percent_rank\", \"topics\".\"subtype\", \"topics\".\"slug\", \"topics\".\"deleted_by_id\", \"topics\".\"participant_count\", \"topics\".\"word_count\", \"topics\".\"excerpt\", \"topics\".\"pinned_globally\", \"topics\".\"pinned_until\", \"topics\".\"fancy_title\", \"topics\".\"highest_staff_post_number\", \"topics\".\"featured_link\", \"topics\".\"reviewable_score\", \"topics\".\"image_upload_id\" FROM \"topics\" WHERE (\"topics\".\"deleted_at\" IS NULL) AND \"topics\".\"id\" = 1114 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160680,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160679,"elapsed":0.001471},{"id":1160681,"event":"call","defined_class":"Topic","method_id":"fancy_title","path":"app/models/topic.rb","lineno":438,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097757059520,"value":"#<Topic:0x00007f81cfd17380>"}},{"id":1160682,"event":"return","defined_class":"Topic","method_id":"fancy_title","path":"app/models/topic.rb","lineno":438,"static":false,"thread_id":70097708498960,"parent_id":1160681,"elapsed":5.1e-05,"return_value":{"class":"String","value":"This is a test topic 867","object_id":70097757071940}},{"id":1160683,"event":"return","defined_class":"NotificationSerializer","method_id":"include_fancy_title?","path":"app/serializers/notification_serializer.rb","lineno":25,"static":false,"thread_id":70097708498960,"parent_id":1160676,"elapsed":0.006613,"return_value":{"class":"String","value":"This is a test topic 867","object_id":70097757071940}},{"id":1160684,"event":"call","defined_class":"NotificationSerializer","method_id":"fancy_title","path":"app/serializers/notification_serializer.rb","lineno":29,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationSerializer","object_id":70097796337560,"value":"#<NotificationSerializer:0x00007f81d4801f30>"}},{"id":1160685,"event":"call","defined_class":"Topic","method_id":"fancy_title","path":"app/models/topic.rb","lineno":438,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097757059520,"value":"#<Topic:0x00007f81cfd17380>"}},{"id":1160686,"event":"return","defined_class":"Topic","method_id":"fancy_title","path":"app/models/topic.rb","lineno":438,"static":false,"thread_id":70097708498960,"parent_id":1160685,"elapsed":1.0e-05,"return_value":{"class":"String","value":"This is a test topic 867","object_id":70097757071940}},{"id":1160687,"event":"return","defined_class":"NotificationSerializer","method_id":"fancy_title","path":"app/serializers/notification_serializer.rb","lineno":29,"static":false,"thread_id":70097708498960,"parent_id":1160684,"elapsed":0.000147,"return_value":{"class":"String","value":"This is a test topic 867","object_id":70097757071940}},{"id":1160688,"event":"call","defined_class":"NotificationSerializer","method_id":"slug","path":"app/serializers/notification_serializer.rb","lineno":17,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationSerializer","object_id":70097796337560,"value":"#<NotificationSerializer:0x00007f81d4801f30>"}},{"id":1160689,"event":"return","defined_class":"NotificationSerializer","method_id":"slug","path":"app/serializers/notification_serializer.rb","lineno":17,"static":false,"thread_id":70097708498960,"parent_id":1160688,"elapsed":0.000139,"return_value":{"class":"String","value":"this-is-a-test-topic-867","object_id":70097757206740}},{"id":1160690,"event":"call","defined_class":"NotificationSerializer","method_id":"data","path":"app/serializers/notification_serializer.rb","lineno":37,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationSerializer","object_id":70097796337560,"value":"#<NotificationSerializer:0x00007f81d4801f30>"}},{"id":1160691,"event":"call","defined_class":"Notification","method_id":"data_hash","path":"app/models/notification.rb","lineno":186,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Notification","object_id":70097796338820,"value":"#<Notification:0x00007f81d4802908>"}},{"id":1160692,"event":"return","defined_class":"Notification","method_id":"data_hash","path":"app/models/notification.rb","lineno":186,"static":false,"thread_id":70097708498960,"parent_id":1160691,"elapsed":3.6e-05,"return_value":{"class":"ActiveSupport::HashWithIndifferentAccess","value":"{\"poison\"=>\"ivy\", \"killer\"=>\"croc\"}","object_id":70097757304640}},{"id":1160693,"event":"return","defined_class":"NotificationSerializer","method_id":"data","path":"app/serializers/notification_serializer.rb","lineno":37,"static":false,"thread_id":70097708498960,"parent_id":1160690,"elapsed":0.000178,"return_value":{"class":"ActiveSupport::HashWithIndifferentAccess","value":"{\"poison\"=>\"ivy\", \"killer\"=>\"croc\"}","object_id":70097757304640}},{"id":1160694,"event":"call","defined_class":"NotificationSerializer","method_id":"include_is_warning?","path":"app/serializers/notification_serializer.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationSerializer","object_id":70097796337560,"value":"#<NotificationSerializer:0x00007f81d4801f30>"}},{"id":1160695,"event":"call","defined_class":"NotificationSerializer","method_id":"is_warning","path":"app/serializers/notification_serializer.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationSerializer","object_id":70097796337560,"value":"#<NotificationSerializer:0x00007f81d4801f30>"}},{"id":1160696,"event":"return","defined_class":"NotificationSerializer","method_id":"is_warning","path":"app/serializers/notification_serializer.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1160695,"elapsed":2.8e-05},{"id":1160697,"event":"return","defined_class":"NotificationSerializer","method_id":"include_is_warning?","path":"app/serializers/notification_serializer.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1160694,"elapsed":0.000184},{"id":1160698,"event":"call","defined_class":"User","method_id":"unread_notifications","path":"app/models/user.rb","lineno":521,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097783066020,"value":"#<User:0x00007f81d2eb1b48>"}},{"id":1160699,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_unread_notifications","path":"app/models/user.rb","lineno":513,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1160700,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_unread_notifications","path":"app/models/user.rb","lineno":513,"static":true,"thread_id":70097708498960,"parent_id":1160699,"elapsed":5.0e-06,"return_value":{"class":"Integer","value":"99","object_id":199}},{"id":1160701,"event":"return","defined_class":"User","method_id":"unread_notifications","path":"app/models/user.rb","lineno":521,"static":false,"thread_id":70097708498960,"parent_id":1160698,"elapsed":0.001626,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1160702,"event":"call","defined_class":"User","method_id":"unread_private_messages","path":"app/models/user.rb","lineno":500,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097783066020,"value":"#<User:0x00007f81d2eb1b48>"}},{"id":1160703,"event":"call","defined_class":"User","method_id":"unread_high_priority_notifications","path":"app/models/user.rb","lineno":504,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097783066020,"value":"#<User:0x00007f81d2eb1b48>"}},{"id":1160704,"event":"call","defined_class":"User","method_id":"unread_notifications_of_priority","path":"app/models/user.rb","lineno":480,"static":false,"thread_id":70097708498960,"parameters":[{"name":"high_priority","class":"Hash","object_id":70097757613020,"value":"{:high_priority=>true}","kind":"keyreq"}],"receiver":{"class":"User","object_id":70097783066020,"value":"#<User:0x00007f81d2eb1b48>"}},{"id":1160705,"event":"return","defined_class":"User","method_id":"unread_notifications_of_priority","path":"app/models/user.rb","lineno":480,"static":false,"thread_id":70097708498960,"parent_id":1160704,"elapsed":0.001432,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1160706,"event":"return","defined_class":"User","method_id":"unread_high_priority_notifications","path":"app/models/user.rb","lineno":504,"static":false,"thread_id":70097708498960,"parent_id":1160703,"elapsed":0.00162,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1160707,"event":"return","defined_class":"User","method_id":"unread_private_messages","path":"app/models/user.rb","lineno":500,"static":false,"thread_id":70097708498960,"parent_id":1160702,"elapsed":0.001745,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1160708,"event":"call","defined_class":"User","method_id":"unread_high_priority_notifications","path":"app/models/user.rb","lineno":504,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097783066020,"value":"#<User:0x00007f81d2eb1b48>"}},{"id":1160709,"event":"return","defined_class":"User","method_id":"unread_high_priority_notifications","path":"app/models/user.rb","lineno":504,"static":false,"thread_id":70097708498960,"parent_id":1160708,"elapsed":5.0e-06,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1160710,"event":"call","defined_class":"User","method_id":"read_first_notification?","path":"app/models/user.rb","lineno":561,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097783066020,"value":"#<User:0x00007f81d2eb1b48>"}},{"id":1160711,"event":"return","defined_class":"User","method_id":"read_first_notification?","path":"app/models/user.rb","lineno":561,"static":false,"thread_id":70097708498960,"parent_id":1160710,"elapsed":4.2e-05},{"id":1160712,"event":"return","defined_class":"User","method_id":"publish_notifications_state","path":"app/models/user.rb","lineno":571,"static":false,"thread_id":70097708498960,"parent_id":1160673,"elapsed":0.021189,"return_value":{"class":"Integer","value":"15378","object_id":30757}},{"id":1160713,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"notifications\"","database_type":"postgres","server_version":110006}},{"id":1160714,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160713,"elapsed":0.00118},{"id":1160715,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1160716,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1160715,"elapsed":7.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1160717,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1160718,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1160717,"elapsed":1.2e-05},{"id":1160719,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"DELETE","path_info":"/notifications/34.json"},"message":[{"name":"controller","class":"String","value":"notifications","object_id":70097700691080},{"name":"action","class":"String","value":"destroy","object_id":70097716757540},{"name":"id","class":"String","value":"34","object_id":70097802723880},{"name":"format","class":"String","value":"json","object_id":70097802723800}]},{"id":1160720,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationsController","object_id":70097802745800,"value":"#<NotificationsController:0x00007f81d543af90>"}},{"id":1160721,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationsController","object_id":70097802745800,"value":"#<NotificationsController:0x00007f81d543af90>"}},{"id":1160722,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationsController","object_id":70097802745800,"value":"#<NotificationsController:0x00007f81d543af90>"}},{"id":1160723,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160724,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097802855720,"value":"1cad316d8455c021746101b8469bf31f","kind":"req"},{"name":"opts","class":"Hash","object_id":70097802878120,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1160725,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097802855720,"value":"1cad316d8455c021746101b8469bf31f","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1160726,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1160727,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1160726,"elapsed":9.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1160728,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1160725,"elapsed":0.00014,"return_value":{"class":"String","value":"asMBs1qv2Dq0J0VdZvKllZ4XGj8=","object_id":70097802921000}},{"id":1160729,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'asMBs1qv2Dq0J0VdZvKllZ4XGj8=' OR\n                          prev_auth_token = 'asMBs1qv2Dq0J0VdZvKllZ4XGj8=') AND rotated_at > '2020-03-29 19:03:52.979914') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160730,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160729,"elapsed":0.001443},{"id":1160731,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 19:03:52.986057' WHERE \"user_auth_tokens\".\"id\" = 1296 AND \"user_auth_tokens\".\"auth_token\" = 'asMBs1qv2Dq0J0VdZvKllZ4XGj8='","database_type":"postgres","server_version":110006}},{"id":1160732,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160731,"elapsed":0.001311},{"id":1160733,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097813708060,"value":"{:action=>\"seen token\", :user_auth_token_id=>1296, :user_id=>1504, :auth_token=>\"asMBs1qv2Dq0J0VdZvK","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1160734,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1160735,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160734,"elapsed":0.001257},{"id":1160736,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 1296, 1504, '127.0.0.1/32', 'asMBs1qv2Dq0J0VdZvKllZ4XGj8=', '2020-05-28 19:03:52.996740') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1160737,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160736,"elapsed":0.001721},{"id":1160738,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1160739,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160738,"elapsed":0.001106},{"id":1160740,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1160733,"elapsed":0.016229,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81d69217d8>","object_id":70097813703660}},{"id":1160741,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1160724,"elapsed":0.028076,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81ccd415e8>","object_id":70097731980020}},{"id":1160742,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1504 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160743,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160742,"elapsed":0.001352},{"id":1160744,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816830800,"value":"#<User:0x00007f81d6f186a0>"}},{"id":1160745,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1160744,"elapsed":1.8e-05},{"id":1160746,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160747,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1160746,"elapsed":0.001274,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160748,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097816830800,"value":"#<User:0x00007f81d6f186a0>"}},{"id":1160749,"event":"call","defined_class":"User","method_id":"update_visit_record!","path":"app/models/user.rb","lineno":680,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097816885280,"value":"2020-05-28","kind":"req"}],"receiver":{"class":"User","object_id":70097816830800,"value":"#<User:0x00007f81d6f186a0>"}},{"id":1160750,"event":"call","defined_class":"User","method_id":"visit_record_for","path":"app/models/user.rb","lineno":676,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097816885280,"value":"2020-05-28","kind":"req"}],"receiver":{"class":"User","object_id":70097816830800,"value":"#<User:0x00007f81d6f186a0>"}},{"id":1160751,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_visits\".* FROM \"user_visits\" WHERE \"user_visits\".\"user_id\" = 1504 AND \"user_visits\".\"visited_at\" = '2020-05-28' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160752,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160751,"elapsed":0.001283},{"id":1160753,"event":"return","defined_class":"User","method_id":"visit_record_for","path":"app/models/user.rb","lineno":676,"static":false,"thread_id":70097708498960,"parent_id":1160750,"elapsed":0.005793},{"id":1160754,"event":"call","defined_class":"User","method_id":"create_visit_record!","path":"app/models/user.rb","lineno":671,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097816885280,"value":"2020-05-28","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097816830800,"value":"#<User:0x00007f81d6f186a0>"}},{"id":1160755,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_stats\".\"user_id\", \"user_stats\".\"topics_entered\", \"user_stats\".\"time_read\", \"user_stats\".\"days_visited\", \"user_stats\".\"posts_read_count\", \"user_stats\".\"likes_given\", \"user_stats\".\"likes_received\", \"user_stats\".\"new_since\", \"user_stats\".\"read_faq\", \"user_stats\".\"first_post_created_at\", \"user_stats\".\"post_count\", \"user_stats\".\"topic_count\", \"user_stats\".\"bounce_score\", \"user_stats\".\"reset_bounce_score_after\", \"user_stats\".\"flags_agreed\", \"user_stats\".\"flags_disagreed\", \"user_stats\".\"flags_ignored\", \"user_stats\".\"first_unread_at\", \"user_stats\".\"distinct_badge_count\" FROM \"user_stats\" WHERE \"user_stats\".\"user_id\" = 1504 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160756,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160755,"elapsed":0.001338},{"id":1160757,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_stats\" SET \"days_visited\" = 1 WHERE \"user_stats\".\"user_id\" = 1504","database_type":"postgres","server_version":110006}},{"id":1160758,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160757,"elapsed":0.001809},{"id":1160759,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1160760,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160759,"elapsed":0.001155},{"id":1160761,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_visits\" (\"user_id\", \"visited_at\") VALUES (1504, '2020-05-28') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1160762,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160761,"elapsed":0.001401},{"id":1160763,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres","server_version":110006}},{"id":1160764,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160763,"elapsed":0.001151},{"id":1160765,"event":"return","defined_class":"User","method_id":"create_visit_record!","path":"app/models/user.rb","lineno":671,"static":false,"thread_id":70097708498960,"parent_id":1160754,"elapsed":0.027404,"return_value":{"class":"UserVisit","value":"#<UserVisit:0x00007f81bb9e10d0>","object_id":70097587603560}},{"id":1160766,"event":"return","defined_class":"User","method_id":"update_visit_record!","path":"app/models/user.rb","lineno":680,"static":false,"thread_id":70097708498960,"parent_id":1160749,"elapsed":0.033573,"return_value":{"class":"UserVisit","value":"#<UserVisit:0x00007f81bb9e10d0>","object_id":70097587603560}},{"id":1160767,"event":"call","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816830800,"value":"#<User:0x00007f81d6f186a0>"}},{"id":1160768,"event":"return","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parent_id":1160767,"elapsed":2.9e-05},{"id":1160769,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"last_seen_at\" = '2020-05-28 19:03:53.015098' WHERE \"users\".\"id\" = 1504","database_type":"postgres","server_version":110006}},{"id":1160770,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160769,"elapsed":0.001794},{"id":1160771,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"first_seen_at\" = '2020-05-28 19:03:53.015098' WHERE \"users\".\"id\" = 1504","database_type":"postgres","server_version":110006}},{"id":1160772,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160771,"elapsed":0.001396},{"id":1160773,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1160748,"elapsed":0.045696},{"id":1160774,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097816867980,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097816830800,"value":"#<User:0x00007f81d6f186a0>"}},{"id":1160775,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 1504","database_type":"postgres","server_version":110006}},{"id":1160776,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160775,"elapsed":0.001302},{"id":1160777,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1160774,"elapsed":0.004784,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160778,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160723,"elapsed":0.086361,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160779,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1160722,"elapsed":0.086519,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81be959c18>","object_id":70097612492300}},{"id":1160780,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097612492300,"value":"#<Guardian:0x00007f81be959c18>"}},{"id":1160781,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1160780,"elapsed":1.3e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160782,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1160721,"elapsed":0.086822},{"id":1160783,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160784,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160783,"elapsed":6.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160785,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1504 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1160786,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160785,"elapsed":0.001524},{"id":1160787,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationsController","object_id":70097802745800,"value":"#<NotificationsController:0x00007f81d543af90>"}},{"id":1160788,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1160787,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81be959c18>","object_id":70097612492300}},{"id":1160789,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097608384220,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097612492300,"value":"#<Guardian:0x00007f81be959c18>"}},{"id":1160790,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1160789,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160791,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1160720,"elapsed":0.092932,"return_value":{"class":"Array","value":"[2]","object_id":70097608384220}},{"id":1160792,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationsController","object_id":70097802745800,"value":"#<NotificationsController:0x00007f81d543af90>"}},{"id":1160793,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160794,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160793,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160795,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160796,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160795,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160797,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160798,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160797,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160799,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1160792,"elapsed":0.000362,"return_value":{"class":"String","value":"notifications/destroy","object_id":70097608412040}},{"id":1160800,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationsController","object_id":70097802745800,"value":"#<NotificationsController:0x00007f81d543af90>"}},{"id":1160801,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160802,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160801,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160803,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1160800,"elapsed":0.000113},{"id":1160804,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationsController","object_id":70097802745800,"value":"#<NotificationsController:0x00007f81d543af90>"}},{"id":1160805,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160806,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160805,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160807,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160808,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160807,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160809,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816830800,"value":"#<User:0x00007f81d6f186a0>"}},{"id":1160810,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1160809,"elapsed":1.3e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":1160811,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1160812,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1160811,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1160813,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1160814,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1160813,"elapsed":1.0e-05},{"id":1160815,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1160816,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1160815,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1160817,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1160818,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1160817,"elapsed":7.0e-06},{"id":1160819,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1160804,"elapsed":0.000776,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097608455620}},{"id":1160820,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationsController","object_id":70097802745800,"value":"#<NotificationsController:0x00007f81d543af90>"}},{"id":1160821,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1160820,"elapsed":7.0e-06},{"id":1160822,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160823,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160824,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160823,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160825,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1160822,"elapsed":0.000103},{"id":1160826,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160827,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160826,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160828,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160829,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160828,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160830,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160831,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160830,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160832,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097782080420,"value":"NotificationsController"}},{"id":1160833,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1160832,"elapsed":3.0e-06,"return_value":{"class":"Hash","value":"{}","object_id":70097782180520}},{"id":1160834,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160835,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160834,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160836,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"NotificationsController","object_id":70097802745800,"value":"#<NotificationsController:0x00007f81d543af90>"}},{"id":1160837,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1160836,"elapsed":8.0e-06},{"id":1160838,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160839,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160840,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160839,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160841,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1160838,"elapsed":0.000102},{"id":1160842,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160843,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160844,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160843,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160845,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1160842,"elapsed":0.000101},{"id":1160846,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160847,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160846,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160848,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802840540,"value":"#<TestCurrentUserProvider:0x00007f81d54693b8>"}},{"id":1160849,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1160848,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d6f186a0>","object_id":70097816830800}},{"id":1160850,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816830800,"value":"#<User:0x00007f81d6f186a0>"}},{"id":1160851,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1160850,"elapsed":1.4e-05},{"id":1160852,"event":"call","defined_class":"ApplicationController","method_id":"rescue_discourse_actions","path":"app/controllers/application_controller.rb","lineno":229,"static":false,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":16369308,"value":"invalid_access","kind":"req"},{"name":"status_code","class":"Integer","object_id":807,"value":"403","kind":"req"},{"name":"opts","class":"Hash","object_id":70097587010560,"value":"{:include_ember=>true, :custom_message=>nil, :group=>nil}","kind":"opt"}],"receiver":{"class":"NotificationsController","object_id":70097802745800,"value":"#<NotificationsController:0x00007f81d543af90>"}},{"id":1160853,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1160854,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1160853,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1160855,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1160856,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1160855,"elapsed":1.0e-05},{"id":1160857,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1160858,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1160857,"elapsed":3.0e-06},{"id":1160859,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1160860,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1160859,"elapsed":3.0e-06},{"id":1160861,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1160862,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1160861,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1160863,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1160864,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1160863,"elapsed":7.0e-06},{"id":1160865,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1160866,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1160865,"elapsed":3.0e-06},{"id":1160867,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1160868,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1160867,"elapsed":3.0e-06},{"id":1160869,"event":"return","defined_class":"ApplicationController","method_id":"rescue_discourse_actions","path":"app/controllers/application_controller.rb","lineno":229,"static":false,"thread_id":70097708498960,"parent_id":1160852,"elapsed":0.001059,"return_value":{"class":"String","value":"{\"errors\":[\"You are not permitted to view the requested resource.\"],\"error_type\":\"invalid_access\"}","object_id":70097587022540}},{"id":1160870,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1160719,"elapsed":0.098598,"http_server_response":{"status":403}},{"id":1160871,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097587058080,"value":"#<TestCurrentUserProvider:0x00007f81bb8d6b40>"}},{"id":1160872,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1160871,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1160873,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1160874,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1160873,"elapsed":8.0e-06},{"id":1160875,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041308,"value":"http_4xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1160876,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1160875,"elapsed":3.0e-06},{"id":1160877,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"notifications\"","database_type":"postgres","server_version":110006}},{"id":1160878,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1160877,"elapsed":0.001496}]}