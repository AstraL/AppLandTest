{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::SiteSettingsController while logged in as an admin #update default categories should update existing users user preference","app":"Discourse","feature":"Admin::SiteSettingsController while logged in as an admin","feature_group":"Admin site settings","recorder":{"name":"rspec"}},"classMap":[{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/models","type":"package","children":[{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"Site","type":"class","children":[{"name":"clear_anon_cache!","type":"function","location":"app/models/site.rb:129","static":true}]},{"name":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","type":"class","children":[{"name":"actions","type":"function","location":"app/models/user_history.rb:20","static":true},{"name":"admin_only_action_ids","type":"function","location":"app/models/user_history.rb:198","static":true}]},{"name":"UserHistory","type":"class","children":[{"name":"set_admin_only","type":"function","location":"app/models/user_history.rb:250","static":false}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"SiteSettingsController","type":"class","children":[{"name":"update","type":"function","location":"app/controllers/admin/site_settings_controller.rb:12","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"app/services","type":"package","children":[{"name":"StaffActionLogger","type":"class","children":[{"name":"log_site_setting_change","type":"function","location":"app/services/staff_action_logger.rb:151","static":false}]}]}],"events":[{"id":639215,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097566665700,"value":"#<TestCurrentUserProvider:0x00007f81b91f17c8>"}},{"id":639216,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097566681920,"value":"28096ddbddf0fd4de6c6db9005631d70","kind":"req"},{"name":"opts","class":"Hash","object_id":70097566680940,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":639217,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097566681920,"value":"28096ddbddf0fd4de6c6db9005631d70","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":639218,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":639219,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":639218,"elapsed":9.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":639220,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":639217,"elapsed":0.000121,"return_value":{"class":"String","value":"6rRO8r0V/q7c2QhZAJGxk2Qhm10=","object_id":70097566707260}},{"id":639221,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = '6rRO8r0V/q7c2QhZAJGxk2Qhm10=' OR\n                          prev_auth_token = '6rRO8r0V/q7c2QhZAJGxk2Qhm10=') AND rotated_at > '2020-03-29 18:56:49.751476') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":639222,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639221,"elapsed":0.00099},{"id":639223,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 18:56:49.755701' WHERE \"user_auth_tokens\".\"id\" = 796 AND \"user_auth_tokens\".\"auth_token\" = '6rRO8r0V/q7c2QhZAJGxk2Qhm10='","database_type":"postgres","server_version":110006}},{"id":639224,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639223,"elapsed":0.001117},{"id":639225,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097798210840,"value":"{:action=>\"seen token\", :user_auth_token_id=>796, :user_id=>845, :auth_token=>\"6rRO8r0V/q7c2QhZAJGxk","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":639226,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":639227,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639226,"elapsed":0.000953},{"id":639228,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 796, 845, '127.0.0.1/32', '6rRO8r0V/q7c2QhZAJGxk2Qhm10=', '2020-05-28 18:56:49.763342') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":639229,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639228,"elapsed":0.001177},{"id":639230,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":639231,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639230,"elapsed":0.000916},{"id":639232,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":639225,"elapsed":0.011577,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81d4b9e698>","object_id":70097798230860}},{"id":639233,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":639216,"elapsed":0.019994,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81b93a39b8>","object_id":70097567554780}},{"id":639234,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 845 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":639235,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639234,"elapsed":0.0011},{"id":639236,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097607999120,"value":"#<User:0x00007f81be0c7d20>"}},{"id":639237,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":639236,"elapsed":1.5e-05},{"id":639238,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097566665700,"value":"#<TestCurrentUserProvider:0x00007f81b91f17c8>"}},{"id":639239,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":639238,"elapsed":0.000814,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":639240,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097607999120,"value":"#<User:0x00007f81be0c7d20>"}},{"id":639241,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":639240,"elapsed":0.000752},{"id":639242,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097607993440,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097607999120,"value":"#<User:0x00007f81be0c7d20>"}},{"id":639243,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 845","database_type":"postgres","server_version":110006}},{"id":639244,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639243,"elapsed":0.001142},{"id":639245,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":639242,"elapsed":0.003516,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":639246,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639215,"elapsed":0.029817,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639247,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097566665700,"value":"#<TestCurrentUserProvider:0x00007f81b91f17c8>"}},{"id":639248,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639247,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639249,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097607999120,"value":"#<User:0x00007f81be0c7d20>"}},{"id":639250,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":639249,"elapsed":1.3e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":639251,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827940820,"value":"#<TestCurrentUserProvider:0x00007f81d84493a8>"}},{"id":639252,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639251,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639253,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827940820,"value":"#<TestCurrentUserProvider:0x00007f81d84493a8>"}},{"id":639254,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639253,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639255,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097607999120,"value":"#<User:0x00007f81be0c7d20>"}},{"id":639256,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":639255,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":639257,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":639258,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":639257,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":639259,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":639260,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":639259,"elapsed":1.1e-05},{"id":639261,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"PUT","path_info":"/admin/site_settings/default_categories_watching.json"},"message":[{"name":"default_categories_watching","class":"String","value":"194|195","object_id":70097566685980},{"name":"updateExistingUsers","class":"String","value":"true","object_id":70097566684520},{"name":"controller","class":"String","value":"admin/site_settings","object_id":70097797148940},{"name":"action","class":"String","value":"update","object_id":70097708598720},{"name":"id","class":"String","value":"default_categories_watching","object_id":70097566666540},{"name":"format","class":"String","value":"json","object_id":70097566666440}]},{"id":639262,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639263,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639264,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639265,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639266,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639265,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639267,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":639264,"elapsed":0.000112,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d8460030>","object_id":70097827987480}},{"id":639268,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097827987480,"value":"#<Guardian:0x00007f81d8460030>"}},{"id":639269,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":639268,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":639270,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":639263,"elapsed":0.000324},{"id":639271,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639272,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639271,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639273,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 845 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":639274,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639273,"elapsed":0.001156},{"id":639275,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639276,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":639275,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d8460030>","object_id":70097827987480}},{"id":639277,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097587037960,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097827987480,"value":"#<Guardian:0x00007f81d8460030>"}},{"id":639278,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":639277,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":639279,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":639262,"elapsed":0.005315,"return_value":{"class":"Array","value":"[2]","object_id":70097587037960}},{"id":639280,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639281,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639282,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639281,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639283,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639284,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639283,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639285,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639286,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639285,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639287,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":639280,"elapsed":0.000341,"return_value":{"class":"String","value":"site_settings/update","object_id":70097587093540}},{"id":639288,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639289,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639290,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639289,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639291,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":639288,"elapsed":0.000104},{"id":639292,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639293,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639294,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639293,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639295,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639296,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639295,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639297,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097607999120,"value":"#<User:0x00007f81be0c7d20>"}},{"id":639298,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":639297,"elapsed":1.2e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":639299,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":639300,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":639299,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":639301,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":639302,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":639301,"elapsed":1.0e-05},{"id":639303,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":639304,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":639303,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":639305,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":639306,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":639305,"elapsed":6.0e-06},{"id":639307,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":639292,"elapsed":0.000668,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097587720220}},{"id":639308,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639309,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":639308,"elapsed":7.0e-06},{"id":639310,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639311,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639312,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639311,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639313,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":639310,"elapsed":9.3e-05},{"id":639314,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639315,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639314,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639316,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639317,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639316,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639318,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639319,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639318,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639320,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097802513980,"value":"Admin::SiteSettingsController"}},{"id":639321,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":639320,"elapsed":3.0e-06},{"id":639322,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639323,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":639322,"elapsed":7.0e-06},{"id":639324,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639325,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639326,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639325,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639327,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":639324,"elapsed":9.2e-05},{"id":639328,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639329,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639330,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639329,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639331,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":639328,"elapsed":8.9e-05},{"id":639332,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639333,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639332,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639334,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639335,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639334,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639336,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097607999120,"value":"#<User:0x00007f81be0c7d20>"}},{"id":639337,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":639336,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":639338,"event":"call","defined_class":"Admin::SiteSettingsController","method_id":"update","path":"app/controllers/admin/site_settings_controller.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639339,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639340,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639339,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639341,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"categories\" WHERE \"categories\".\"id\" IN (194, 195)","database_type":"postgres","server_version":110006}},{"id":639342,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639341,"elapsed":0.00115},{"id":639343,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":639344,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":639343,"elapsed":0.000103,"return_value":{"class":"Integer","value":"7694","object_id":15389}},{"id":639345,"event":"call","defined_class":"StaffActionLogger","method_id":"log_site_setting_change","path":"app/services/staff_action_logger.rb","lineno":151,"static":false,"thread_id":70097708498960,"parameters":[{"name":"setting_name","class":"String","object_id":70097566666540,"value":"default_categories_watching","kind":"req"},{"name":"previous_value","class":"String","object_id":70097708321660,"value":"","kind":"req"},{"name":"new_value","class":"String","object_id":70097566685980,"value":"194|195","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"StaffActionLogger","object_id":70097587834340,"value":"#<StaffActionLogger:0x00007f81bba51bc8>"}},{"id":639346,"event":"call","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097565682280,"value":"UserHistory"}},{"id":639347,"event":"return","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parent_id":639346,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:delete_user=>1, :change_trust_level=>2, :change_site_setting=>3, :change_theme=>4, :delete_theme=>","object_id":70097826343960}},{"id":639348,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":639349,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639348,"elapsed":0.000929},{"id":639350,"event":"call","defined_class":"UserHistory","method_id":"set_admin_only","path":"app/models/user_history.rb","lineno":250,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserHistory","object_id":70097587849120,"value":"#<UserHistory:0x00007f81bba58f40>"}},{"id":639351,"event":"call","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"admin_only_action_ids","path":"app/models/user_history.rb","lineno":198,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097565682280,"value":"UserHistory"}},{"id":639352,"event":"return","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"admin_only_action_ids","path":"app/models/user_history.rb","lineno":198,"static":true,"thread_id":70097708498960,"parent_id":639351,"elapsed":3.0e-06,"return_value":{"class":"Array","value":"[3]","object_id":70097608682780}},{"id":639353,"event":"return","defined_class":"UserHistory","method_id":"set_admin_only","path":"app/models/user_history.rb","lineno":250,"static":false,"thread_id":70097708498960,"parent_id":639350,"elapsed":0.000195,"return_value":{"class":"UserHistory","value":"#<UserHistory:0x00007f81bba58f40>","object_id":70097587849120}},{"id":639354,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_histories\" (\"action\", \"acting_user_id\", \"created_at\", \"updated_at\", \"subject\", \"previous_value\", \"new_value\", \"admin_only\") VALUES (3, 845, '2020-05-28 18:56:49.801329', '2020-05-28 18:56:49.801329', 'default_categories_watching', '', '194|195', TRUE) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":639355,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639354,"elapsed":0.001061},{"id":639356,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":639357,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639356,"elapsed":0.000948},{"id":639358,"event":"return","defined_class":"StaffActionLogger","method_id":"log_site_setting_change","path":"app/services/staff_action_logger.rb","lineno":151,"static":false,"thread_id":70097708498960,"parent_id":639345,"elapsed":0.012909,"return_value":{"class":"UserHistory","value":"#<UserHistory:0x00007f81bba58f40>","object_id":70097587849120}},{"id":639359,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"DELETE FROM \"category_users\" WHERE 1=0 AND \"category_users\".\"notification_level\" = 3","database_type":"postgres","server_version":110006}},{"id":639360,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639359,"elapsed":0.001077},{"id":639361,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"category_users\".\"user_id\" FROM \"category_users\" WHERE \"category_users\".\"category_id\" = 194","database_type":"postgres","server_version":110006}},{"id":639362,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639361,"elapsed":0.001115},{"id":639363,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".\"id\" FROM \"users\" WHERE 1=1 ORDER BY \"users\".\"id\" ASC LIMIT 1000","database_type":"postgres","server_version":110006}},{"id":639364,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639363,"elapsed":0.001035},{"id":639365,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"category_users\" (\"category_id\",\"user_id\",\"notification_level\") VALUES (194, -1, 3), (194, 845, 3), (194, 856, 3), (194, 857, 3), (194, 858, 3), (194, 859, 3) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":639366,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639365,"elapsed":0.001041},{"id":639367,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"category_users\".\"user_id\" FROM \"category_users\" WHERE \"category_users\".\"category_id\" = 195","database_type":"postgres","server_version":110006}},{"id":639368,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639367,"elapsed":0.003131},{"id":639369,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".\"id\" FROM \"users\" WHERE \"users\".\"id\" != 859 ORDER BY \"users\".\"id\" ASC LIMIT 1000","database_type":"postgres","server_version":110006}},{"id":639370,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639369,"elapsed":0.002008},{"id":639371,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"category_users\" (\"category_id\",\"user_id\",\"notification_level\") VALUES (195, -1, 3), (195, 845, 3), (195, 856, 3), (195, 857, 3), (195, 858, 3) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":639372,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639371,"elapsed":0.00276},{"id":639373,"event":"return","defined_class":"Admin::SiteSettingsController","method_id":"update","path":"app/controllers/admin/site_settings_controller.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":639338,"elapsed":0.059508,"return_value":{"class":"String","value":"","object_id":70097589478040}},{"id":639374,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639375,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":639374,"elapsed":1.1e-05},{"id":639376,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639377,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":639376,"elapsed":7.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097589498140}},{"id":639378,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::SiteSettingsController","object_id":70097827958880,"value":"#<Admin::SiteSettingsController:0x00007f81d84520c0>"}},{"id":639379,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639380,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639379,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639381,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097607999120,"value":"#<User:0x00007f81be0c7d20>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097566762240,"value":"#<ActionDispatch::Request::Session:0x00007f81b9220a00>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097587038160,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81bb8ccfa0>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639382,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639383,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639384,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639383,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639385,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":639382,"elapsed":0.000112},{"id":639386,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639387,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827989100,"value":"#<TestCurrentUserProvider:0x00007f81d8460cd8>"}},{"id":639388,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":639387,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be0c7d20>","object_id":70097607999120}},{"id":639389,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":639386,"elapsed":0.000111},{"id":639390,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":639381,"elapsed":0.000435},{"id":639391,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":639378,"elapsed":0.000698},{"id":639392,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":639261,"elapsed":0.070039,"http_server_response":{"status":200}},{"id":639393,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589554500,"value":"#<TestCurrentUserProvider:0x00007f81bbd99a88>"}},{"id":639394,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":639393,"elapsed":1.2e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":639395,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":639396,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":639395,"elapsed":2.9e-05},{"id":639397,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":639398,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":639397,"elapsed":7.0e-06},{"id":639399,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"category_users\" WHERE \"category_users\".\"category_id\" = 193 AND \"category_users\".\"notification_level\" = 3","database_type":"postgres","server_version":110006}},{"id":639400,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639399,"elapsed":0.001455},{"id":639401,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"category_users\" WHERE \"category_users\".\"category_id\" = 195 AND \"category_users\".\"notification_level\" = 3","database_type":"postgres","server_version":110006}},{"id":639402,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639401,"elapsed":0.001643},{"id":639403,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"users\"","database_type":"postgres","server_version":110006}},{"id":639404,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":639403,"elapsed":0.001736}]}