{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::UserFieldsController when logged in #update updates the user field options","app":"Discourse","feature":"Admin::UserFieldsController when logged in","feature_group":"Admin user fields","recorder":{"name":"rspec"}},"classMap":[{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/models","type":"package","children":[{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"Site","type":"class","children":[{"name":"clear_anon_cache!","type":"function","location":"app/models/site.rb:129","static":true}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_serialized","type":"function","location":"app/controllers/application_controller.rb:446","static":false},{"name":"serialize_data","type":"function","location":"app/controllers/application_controller.rb:431","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"UserFieldsController","type":"class","children":[{"name":"update","type":"function","location":"app/controllers/admin/user_fields_controller.rb:26","static":false},{"name":"columns","type":"function","location":"app/controllers/admin/user_fields_controller.rb:5","static":true}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"app/serializers","type":"package","children":[{"name":"UserFieldSerializer","type":"class","children":[{"name":"include_options?","type":"function","location":"app/serializers/user_field_serializer.rb:19","static":false},{"name":"options","type":"function","location":"app/serializers/user_field_serializer.rb:15","static":false}]}]}],"events":[{"id":13789,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_fields\".* FROM \"user_fields\" WHERE \"user_fields\".\"id\" = 4 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":13790,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13789,"elapsed":0.000925},{"id":13791,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097731801780,"value":"#<TestCurrentUserProvider:0x00007f81cccea568>"}},{"id":13792,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097731839500,"value":"10e32f0678a3b479a0917a7b3aa5391b","kind":"req"},{"name":"opts","class":"Hash","object_id":70097731838460,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":13793,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097731839500,"value":"10e32f0678a3b479a0917a7b3aa5391b","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":13794,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":13795,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":13794,"elapsed":1.0e-05,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":13796,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":13793,"elapsed":0.000136,"return_value":{"class":"String","value":"bf2WnuEGkTX8iCiFCdiZqfe3r9s=","object_id":70097731896520}},{"id":13797,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'bf2WnuEGkTX8iCiFCdiZqfe3r9s=' OR\n                          prev_auth_token = 'bf2WnuEGkTX8iCiFCdiZqfe3r9s=') AND rotated_at > '2020-03-29 18:49:45.309766') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":13798,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13797,"elapsed":0.001306},{"id":13799,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 18:49:45.314744' WHERE \"user_auth_tokens\".\"id\" = 258 AND \"user_auth_tokens\".\"auth_token\" = 'bf2WnuEGkTX8iCiFCdiZqfe3r9s='","database_type":"postgres","server_version":110006}},{"id":13800,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13799,"elapsed":0.001242},{"id":13801,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097826483660,"value":"{:action=>\"seen token\", :user_auth_token_id=>258, :user_id=>32, :auth_token=>\"bf2WnuEGkTX8iCiFCdiZqf","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":13802,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":13803,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13802,"elapsed":0.001054},{"id":13804,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 258, 32, '127.0.0.1/32', 'bf2WnuEGkTX8iCiFCdiZqfe3r9s=', '2020-05-28 18:49:45.319229') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":13805,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13804,"elapsed":0.001063},{"id":13806,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":13807,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13806,"elapsed":0.000861},{"id":13808,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":13801,"elapsed":0.012835,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81d818baf8>","object_id":70097826504060}},{"id":13809,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":13792,"elapsed":0.022436,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81d6820be0>","object_id":70097813177840}},{"id":13810,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 32 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":13811,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13810,"elapsed":0.00101},{"id":13812,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097712361580,"value":"#<User:0x00007f81ca7d60d8>"}},{"id":13813,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":13812,"elapsed":3.4e-05},{"id":13814,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097731801780,"value":"#<TestCurrentUserProvider:0x00007f81cccea568>"}},{"id":13815,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":13814,"elapsed":0.00084,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":13816,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097712361580,"value":"#<User:0x00007f81ca7d60d8>"}},{"id":13817,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":13816,"elapsed":0.000802},{"id":13818,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097712381240,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097712361580,"value":"#<User:0x00007f81ca7d60d8>"}},{"id":13819,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 32","database_type":"postgres","server_version":110006}},{"id":13820,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13819,"elapsed":0.001068},{"id":13821,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":13818,"elapsed":0.003661,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":13822,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13791,"elapsed":0.032807,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13823,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097731801780,"value":"#<TestCurrentUserProvider:0x00007f81cccea568>"}},{"id":13824,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13823,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13825,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097712361580,"value":"#<User:0x00007f81ca7d60d8>"}},{"id":13826,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":13825,"elapsed":1.3e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":13827,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814642960,"value":"#<TestCurrentUserProvider:0x00007f81d6aec220>"}},{"id":13828,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13827,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13829,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814642960,"value":"#<TestCurrentUserProvider:0x00007f81d6aec220>"}},{"id":13830,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13829,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13831,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097712361580,"value":"#<User:0x00007f81ca7d60d8>"}},{"id":13832,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":13831,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":13833,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814682080,"value":"#<TestCurrentUserProvider:0x00007f81d6aff3c0>"}},{"id":13834,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13833,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13835,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814682080,"value":"#<TestCurrentUserProvider:0x00007f81d6aff3c0>"}},{"id":13836,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13835,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13837,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097712361580,"value":"#<User:0x00007f81ca7d60d8>"}},{"id":13838,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":13837,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":13839,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":13840,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":13839,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":13841,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":13842,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":13841,"elapsed":1.0e-05},{"id":13843,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"PUT","path_info":"/admin/customize/user_fields/4.json"},"message":[{"name":"user_field","class":"ActiveSupport::HashWithIndifferentAccess","value":"{\"name\"=>\"fraggle\", \"field_type\"=>\"dropdown\", \"description\"=>\"muppet\", \"options\"=>[\"hello\", \"hello\",","object_id":70097814731560},{"name":"controller","class":"String","value":"admin/user_fields","object_id":70097795196260},{"name":"action","class":"String","value":"update","object_id":70097708598720},{"name":"id","class":"String","value":"4","object_id":70097731802600},{"name":"format","class":"String","value":"json","object_id":70097731802540}]},{"id":13844,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13845,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13846,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13847,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13848,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13847,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13849,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":13846,"elapsed":0.000117,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d6b28068>","object_id":70097814765620}},{"id":13850,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097814765620,"value":"#<Guardian:0x00007f81d6b28068>"}},{"id":13851,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":13850,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":13852,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":13845,"elapsed":0.000342},{"id":13853,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13854,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13853,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13855,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 32 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":13856,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13855,"elapsed":0.001076},{"id":13857,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13858,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":13857,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d6b28068>","object_id":70097814765620}},{"id":13859,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097815802020,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097814765620,"value":"#<Guardian:0x00007f81d6b28068>"}},{"id":13860,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":13859,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":13861,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":13844,"elapsed":0.005403,"return_value":{"class":"Array","value":"[2]","object_id":70097815802020}},{"id":13862,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13863,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13864,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13863,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13865,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13866,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13865,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13867,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13868,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13867,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13869,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":13862,"elapsed":0.000336,"return_value":{"class":"String","value":"user_fields/update","object_id":70097815851000}},{"id":13870,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13871,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13872,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13871,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13873,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":13870,"elapsed":0.000112},{"id":13874,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13875,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13876,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13875,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13877,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13878,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13877,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13879,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097712361580,"value":"#<User:0x00007f81ca7d60d8>"}},{"id":13880,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":13879,"elapsed":1.0e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":13881,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":13882,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":13881,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":13883,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":13884,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":13883,"elapsed":9.0e-06},{"id":13885,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":13886,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":13885,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":13887,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":13888,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":13887,"elapsed":6.0e-06},{"id":13889,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":13874,"elapsed":0.00068,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097815914460}},{"id":13890,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13891,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":13890,"elapsed":8.0e-06},{"id":13892,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13893,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13894,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13893,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13895,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":13892,"elapsed":9.4e-05},{"id":13896,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13897,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13896,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13898,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13899,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13898,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13900,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13901,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13900,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13902,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097779592920,"value":"Admin::UserFieldsController"}},{"id":13903,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":13902,"elapsed":3.0e-06},{"id":13904,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13905,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":13904,"elapsed":7.0e-06},{"id":13906,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13907,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13908,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13907,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13909,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":13906,"elapsed":0.000102},{"id":13910,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13911,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13912,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13911,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13913,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":13910,"elapsed":9.2e-05},{"id":13914,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13915,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13914,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13916,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13917,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13916,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13918,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097712361580,"value":"#<User:0x00007f81ca7d60d8>"}},{"id":13919,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":13918,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":13920,"event":"call","defined_class":"Admin::UserFieldsController","method_id":"update","path":"app/controllers/admin/user_fields_controller.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13921,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_fields\".* FROM \"user_fields\" WHERE \"user_fields\".\"id\" = 4 ORDER BY \"user_fields\".\"id\" ASC LIMIT 1","database_type":"postgres","server_version":110006}},{"id":13922,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13921,"elapsed":0.001009},{"id":13923,"event":"call","defined_class":"Admin::UserFieldsController","method_id":"columns","path":"app/controllers/admin/user_fields_controller.rb","lineno":5,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097779592920,"value":"Admin::UserFieldsController"}},{"id":13924,"event":"return","defined_class":"Admin::UserFieldsController","method_id":"columns","path":"app/controllers/admin/user_fields_controller.rb","lineno":5,"static":true,"thread_id":70097708498960,"parent_id":13923,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[:name, :field_type, :editable, :description, :required, :show_on_profile, :show_on_user_card, :posi","object_id":70097817128380}},{"id":13925,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"DELETE FROM \"user_field_options\" WHERE \"user_field_options\".\"user_field_id\" = 4","database_type":"postgres","server_version":110006}},{"id":13926,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13925,"elapsed":0.001084},{"id":13927,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":13928,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13927,"elapsed":0.000922},{"id":13929,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_fields\" SET \"name\" = 'fraggle', \"field_type\" = 'dropdown', \"description\" = 'muppet', \"updated_at\" = '2020-05-28 18:49:45.362064' WHERE \"user_fields\".\"id\" = 4","database_type":"postgres","server_version":110006}},{"id":13930,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13929,"elapsed":0.000965},{"id":13931,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_field_options\" (\"user_field_id\", \"value\", \"created_at\", \"updated_at\") VALUES (4, 'hello', '2020-05-28 18:49:45.371043', '2020-05-28 18:49:45.371043') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":13932,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13931,"elapsed":0.000986},{"id":13933,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_field_options\" (\"user_field_id\", \"value\", \"created_at\", \"updated_at\") VALUES (4, 'world', '2020-05-28 18:49:45.376055', '2020-05-28 18:49:45.376055') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":13934,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13933,"elapsed":0.000952},{"id":13935,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":13936,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":13935,"elapsed":6.6e-05,"return_value":{"class":"Integer","value":"461","object_id":923}},{"id":13937,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":13938,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13937,"elapsed":0.000813},{"id":13939,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"UserField","object_id":70097817130160,"value":"#<UserField:0x00007f81d6faa960>","kind":"req"},{"name":"serializer","class":"Class","object_id":70097568675420,"value":"UserFieldSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097566703260,"value":"{:root=>\"user_field\"}","kind":"opt"}],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13940,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"UserField","object_id":70097817130160,"value":"#<UserField:0x00007f81d6faa960>","kind":"req"},{"name":"serializer","class":"Class","object_id":70097568675420,"value":"UserFieldSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097566703260,"value":"{:root=>\"user_field\"}","kind":"opt"}],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13941,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13942,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":13941,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d6b28068>","object_id":70097814765620}},{"id":13943,"event":"call","defined_class":"UserFieldSerializer","method_id":"include_options?","path":"app/serializers/user_field_serializer.rb","lineno":19,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserFieldSerializer","object_id":70097566696380,"value":"#<UserFieldSerializer:0x00007f81b9200778>"}},{"id":13944,"event":"call","defined_class":"UserFieldSerializer","method_id":"options","path":"app/serializers/user_field_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserFieldSerializer","object_id":70097566696380,"value":"#<UserFieldSerializer:0x00007f81b9200778>"}},{"id":13945,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_field_options\".\"value\" FROM \"user_field_options\" WHERE \"user_field_options\".\"user_field_id\" = 4","database_type":"postgres","server_version":110006}},{"id":13946,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13945,"elapsed":0.00096},{"id":13947,"event":"return","defined_class":"UserFieldSerializer","method_id":"options","path":"app/serializers/user_field_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parent_id":13944,"elapsed":0.003856,"return_value":{"class":"Array","value":"[\"hello\", \"world\"]","object_id":70097567045020}},{"id":13948,"event":"return","defined_class":"UserFieldSerializer","method_id":"include_options?","path":"app/serializers/user_field_serializer.rb","lineno":19,"static":false,"thread_id":70097708498960,"parent_id":13943,"elapsed":0.004019,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":13949,"event":"call","defined_class":"UserFieldSerializer","method_id":"options","path":"app/serializers/user_field_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserFieldSerializer","object_id":70097566696380,"value":"#<UserFieldSerializer:0x00007f81b9200778>"}},{"id":13950,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_field_options\".\"value\" FROM \"user_field_options\" WHERE \"user_field_options\".\"user_field_id\" = 4","database_type":"postgres","server_version":110006}},{"id":13951,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13950,"elapsed":0.000894},{"id":13952,"event":"return","defined_class":"UserFieldSerializer","method_id":"options","path":"app/serializers/user_field_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parent_id":13949,"elapsed":0.003565,"return_value":{"class":"Array","value":"[\"hello\", \"world\"]","object_id":70097567534980}},{"id":13953,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":13940,"elapsed":0.008018,"return_value":{"class":"Hash","value":"{\"user_field\"=>{:id=>4, :name=>\"fraggle\", :description=>\"muppet\", :field_type=>\"dropdown\", :editable","object_id":70097566695820}},{"id":13954,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Hash","object_id":70097566695820,"value":"{\"user_field\"=>{:id=>4, :name=>\"fraggle\", :description=>\"muppet\", :field_type=>\"dropdown\", :editable","kind":"req"},{"name":"opts","class":"Hash","object_id":70097566703260,"value":"{:root=>\"user_field\"}","kind":"opt"}],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13955,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":13954,"elapsed":0.000136,"return_value":{"class":"String","value":"{\"user_field\":{\"id\":4,\"name\":\"fraggle\",\"description\":\"muppet\",\"field_type\":\"dropdown\",\"editable\":tru","object_id":70097567531140}},{"id":13956,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":13939,"elapsed":0.008409,"return_value":{"class":"String","value":"{\"user_field\":{\"id\":4,\"name\":\"fraggle\",\"description\":\"muppet\",\"field_type\":\"dropdown\",\"editable\":tru","object_id":70097567531140}},{"id":13957,"event":"return","defined_class":"Admin::UserFieldsController","method_id":"update","path":"app/controllers/admin/user_fields_controller.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":13920,"elapsed":0.040255,"return_value":{"class":"String","value":"{\"user_field\":{\"id\":4,\"name\":\"fraggle\",\"description\":\"muppet\",\"field_type\":\"dropdown\",\"editable\":tru","object_id":70097567531140}},{"id":13958,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13959,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":13958,"elapsed":8.0e-06},{"id":13960,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13961,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":13960,"elapsed":6.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097567551120}},{"id":13962,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UserFieldsController","object_id":70097814694800,"value":"#<Admin::UserFieldsController:0x00007f81d6b05720>"}},{"id":13963,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13964,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13963,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13965,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097712361580,"value":"#<User:0x00007f81ca7d60d8>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097731567480,"value":"#<ActionDispatch::Request::Session:0x00007f81ccc77ef0>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097815802360,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81d6d223f0>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13966,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13967,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13968,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13967,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13969,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":13966,"elapsed":8.9e-05},{"id":13970,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13971,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097814770240,"value":"#<TestCurrentUserProvider:0x00007f81d6b2a480>"}},{"id":13972,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":13971,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81ca7d60d8>","object_id":70097712361580}},{"id":13973,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":13970,"elapsed":8.7e-05},{"id":13974,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":13965,"elapsed":0.000333},{"id":13975,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":13962,"elapsed":0.000532},{"id":13976,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":13843,"elapsed":0.050601,"http_server_response":{"status":200}},{"id":13977,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097567588300,"value":"#<TestCurrentUserProvider:0x00007f81b93b3f98>"}},{"id":13978,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":13977,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":13979,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":13980,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":13979,"elapsed":4.0e-06},{"id":13981,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":13982,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":13981,"elapsed":4.0e-06},{"id":13983,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_fields\".* FROM \"user_fields\" WHERE \"user_fields\".\"id\" = 4 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":13984,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13983,"elapsed":0.000961},{"id":13985,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"user_field_options\" WHERE \"user_field_options\".\"user_field_id\" = 4","database_type":"postgres","server_version":110006}},{"id":13986,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":13985,"elapsed":0.00091}]}