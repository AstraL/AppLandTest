{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::UsersController #approve calls approve","app":"Discourse","feature":"Admin::UsersController #approve","feature_group":"Admin users","recorder":{"name":"rspec"}},"classMap":[{"name":"app/jobs","type":"package","children":[{"name":"Jobs","type":"class","children":[{"name":"run_immediately!","type":"function","location":"app/jobs/base.rb:17","static":true},{"name":"enqueue","type":"function","location":"app/jobs/base.rb:284","static":true},{"name":"run_later?","type":"function","location":"app/jobs/base.rb:9","static":true},{"name":"Base","type":"class","children":[{"name":"perform","type":"function","location":"app/jobs/base.rb:187","static":false}]},{"name":"CreateUserReviewable","type":"class","children":[{"name":"execute","type":"function","location":"app/jobs/regular/create_user_reviewable.rb:6","static":false}]},{"name":"NotifyReviewable","type":"class","children":[{"name":"execute","type":"function","location":"app/jobs/regular/notify_reviewable.rb:5","static":false}]},{"name":"CriticalUserEmail","type":"class","children":[{"name":"execute","type":"function","location":"app/jobs/regular/critical_user_email.rb:14","static":false},{"name":"quit_email_early?","type":"function","location":"app/jobs/regular/critical_user_email.rb:10","static":false}]},{"name":"UserEmail","type":"class","children":[{"name":"execute","type":"function","location":"app/jobs/regular/user_email.rb:17","static":false},{"name":"set_skip_context","type":"function","location":"app/jobs/regular/user_email.rb:74","static":false},{"name":"message_for_email","type":"function","location":"app/jobs/regular/user_email.rb:86","static":false}]}]}]},{"name":"app/models","type":"package","children":[{"name":"User","type":"class","children":[{"name":"email=","type":"function","location":"app/models/user.rb:1198","static":false},{"name":"password=","type":"function","location":"app/models/user.rb:618","static":false},{"name":"should_validate_email_address?","type":"function","location":"app/models/user.rb:432","static":false},{"name":"username_format_validator","type":"function","location":"app/models/user.rb:924","static":false},{"name":"confirm_password?","type":"function","location":"app/models/user.rb:650","static":false},{"name":"password_validator","type":"function","location":"app/models/user.rb:646","static":false},{"name":"password_validation_required?","type":"function","location":"app/models/user.rb:638","static":false},{"name":"password_required?","type":"function","location":"app/models/user.rb:634","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"email","type":"function","location":"app/models/user.rb:1194","static":false},{"name":"create_user_profile","type":"function","location":"app/models/user.rb:1139","static":false},{"name":"set_random_avatar","type":"function","location":"app/models/user.rb:1143","static":false},{"name":"refresh_avatar","type":"function","location":"app/models/user.rb:1053","static":false},{"name":"activate","type":"function","location":"app/models/user.rb:934","static":false},{"name":"human?","type":"function","location":"app/models/user.rb:313","static":false},{"name":"set_automatic_groups","type":"function","location":"app/models/user.rb:1178","static":false},{"name":"email_confirmed?","type":"function","location":"app/models/user.rb:928","static":false},{"name":"create_reviewable","type":"function","location":"app/models/user.rb:1253","static":false},{"name":"bot?","type":"function","location":"app/models/user.rb:317","static":false},{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false},{"name":"anonymous?","type":"function","location":"app/models/user.rb:1155","static":false},{"name":"reload","type":"function","location":"app/models/user.rb:444","static":false}]},{"name":"UsernameValidator","type":"class","children":[{"name":"perform_validation","type":"function","location":"app/models/username_validator.rb:11","static":true},{"name":"valid_format?","type":"function","location":"app/models/username_validator.rb:30","static":false},{"name":"invalid_char_pattern","type":"function","location":"app/models/username_validator.rb:132","static":true},{"name":"char_whitelist_exists?","type":"function","location":"app/models/username_validator.rb:136","static":true}]},{"name":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","type":"class","children":[{"name":"username_length","type":"function","location":"app/models/user.rb:241","static":true},{"name":"normalize_username","type":"function","location":"app/models/user.rb:245","static":true},{"name":"max_password_length","type":"function","location":"app/models/user.rb:237","static":true},{"name":"human_user_id?","type":"function","location":"app/models/user.rb:309","static":true}]},{"name":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"should_block?","type":"function","location":"app/models/screened_ip_address.rb:74","static":true},{"name":"exists_for_ip_address_and_action?","type":"function","location":"app/models/screened_ip_address.rb:82","static":true},{"name":"match_for_ip_address","type":"function","location":"app/models/screened_ip_address.rb:64","static":true}]},{"name":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","type":"class","children":[{"name":"should_block?","type":"function","location":"app/models/screened_email.rb:35","static":true},{"name":"canonical","type":"function","location":"app/models/screened_email.rb:21","static":true}]},{"name":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"generate_token","type":"function","location":"app/models/email_token.rb:36","static":true},{"name":"token_length","type":"function","location":"app/models/email_token.rb:20","static":true},{"name":"active","type":"function","location":"app/models/email_token.rb:32","static":true},{"name":"valid_after","type":"function","location":"app/models/email_token.rb:24","static":true},{"name":"confirm","type":"function","location":"app/models/email_token.rb:62","static":true},{"name":"atomic_confirm","type":"function","location":"app/models/email_token.rb:44","static":true},{"name":"valid_token_format?","type":"function","location":"app/models/email_token.rb:40","static":true},{"name":"confirmable","type":"function","location":"app/models/email_token.rb:88","static":true}]},{"name":"UserOption","type":"class","children":[{"name":"set_defaults","type":"function","location":"app/models/user_option.rb:47","static":false},{"name":"text_size=","type":"function","location":"app/models/user_option.rb:172","static":false},{"name":"title_count_mode=","type":"function","location":"app/models/user_option.rb:180","static":false}]},{"name":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","type":"class","children":[{"name":"text_sizes","type":"function","location":"app/models/user_option.rb:30","static":true},{"name":"title_count_modes","type":"function","location":"app/models/user_option.rb:34","static":true},{"name":"email_level_types","type":"function","location":"app/models/user_option.rb:38","static":true}]},{"name":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","type":"class","children":[{"name":"notification_levels","type":"function","location":"app/models/topic_user.rb:29","static":true}]},{"name":"HasCustomFields","type":"class","children":[{"name":"save_custom_fields","type":"function","location":"app/models/concerns/has_custom_fields.rb:204","static":false},{"name":"custom_fields_clean?","type":"function","location":"app/models/concerns/has_custom_fields.rb:185","static":false},{"name":"custom_fields","type":"function","location":"app/models/concerns/has_custom_fields.rb:173","static":false},{"name":"reload","type":"function","location":"app/models/concerns/has_custom_fields.rb:140","static":false},{"name":"clear_custom_fields","type":"function","location":"app/models/concerns/has_custom_fields.rb:153","static":false}]},{"name":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"enqueue_object_hooks","type":"function","location":"app/models/web_hook.rb:60","static":true},{"name":"active_web_hooks","type":"function","location":"app/models/web_hook.rb:45","static":true}]},{"name":"Invite(id: integer, invite_key: string, email: string, invited_by_id: integer, user_id: integer, redeemed_at: datetime, created_at: datetime, updated_at: datetime, deleted_at: datetime, deleted_by_id: integer, invalidated_at: datetime, moderator: boolean, custom_message: text, emailed_status: integer)","type":"class","children":[{"name":"redeem_from_email","type":"function","location":"app/models/invite.rb:225","static":true}]},{"name":"Trashable","type":"class","children":[{"name":"ClassMethods","type":"class","children":[{"name":"with_deleted_scope_sql","type":"function","location":"app/models/concerns/trashable.rb:27","static":false}]}]},{"name":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"needs_review!","type":"function","location":"app/models/reviewable.rb:124","static":true},{"name":"statuses","type":"function","location":"app/models/reviewable.rb:64","static":true},{"name":"serializer_for","type":"function","location":"app/models/reviewable.rb:521","static":true},{"name":"min_score_for_priority","type":"function","location":"app/models/reviewable.rb:263","static":true},{"name":"priorities","type":"function","location":"app/models/reviewable.rb:46","static":true},{"name":"default_visible","type":"function","location":"app/models/reviewable.rb:86","static":true},{"name":"action_aliases","type":"function","location":"app/models/reviewable.rb:41","static":true}]},{"name":"Reviewable","type":"class","children":[{"name":"created_new!","type":"function","location":"app/models/reviewable.rb:113","static":false},{"name":"apply_review_group","type":"function","location":"app/models/reviewable.rb:283","static":false},{"name":"log_history","type":"function","location":"app/models/reviewable.rb:274","static":false},{"name":"pending?","type":"function","location":"app/models/reviewable.rb:82","static":false},{"name":"serializer","type":"function","location":"app/models/reviewable.rb:511","static":false},{"name":"add_score","type":"function","location":"app/models/reviewable.rb:185","static":false},{"name":"perform","type":"function","location":"app/models/reviewable.rb:337","static":false},{"name":"actions_for","type":"function","location":"app/models/reviewable.rb:291","static":false},{"name":"create_result","type":"function","location":"app/models/reviewable.rb:527","static":false},{"name":"transition_to","type":"function","location":"app/models/reviewable.rb:372","static":false}]},{"name":"ReviewableHistory(id: integer, reviewable_id: integer, reviewable_history_type: integer, status: integer, created_by_id: integer, edited: json, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"types","type":"function","location":"app/models/reviewable_history.rb:7","static":true}]},{"name":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","type":"class","children":[{"name":"types","type":"function","location":"app/models/reviewable_score.rb:11","static":true},{"name":"user_accuracy_bonus","type":"function","location":"app/models/reviewable_score.rb:70","static":true},{"name":"calculate_score","type":"function","location":"app/models/reviewable_score.rb:55","static":true},{"name":"user_flag_score","type":"function","location":"app/models/reviewable_score.rb:63","static":true},{"name":"statuses","type":"function","location":"app/models/reviewable_score.rb:24","static":true},{"name":"score_transitions","type":"function","location":"app/models/reviewable_score.rb:33","static":true}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true},{"name":"use_s3?","type":"function","location":"app/models/global_setting.rb:96","static":true}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true},{"name":"values","type":"function","location":"app/models/locale_site_setting.rb:9","static":true}]},{"name":"ReviewableUser","type":"class","children":[{"name":"build_actions","type":"function","location":"app/models/reviewable_user.rb:12","static":false},{"name":"perform_approve_user","type":"function","location":"app/models/reviewable_user.rb:39","static":false}]},{"name":"ReviewableUser(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"set_approved_fields!","type":"function","location":"app/models/reviewable_user.rb:91","static":true}]},{"name":"EmailLog(id: integer, to_address: string, email_type: string, user_id: integer, created_at: datetime, updated_at: datetime, post_id: integer, bounce_key: uuid, bounced: boolean, message_id: string)","type":"class","children":[{"name":"reached_max_emails?","type":"function","location":"app/models/email_log.rb:40","static":true},{"name":"unique_email_per_post","type":"function","location":"app/models/email_log.rb:28","static":true}]},{"name":"Emoji","type":"class","children":[{"name":"custom","type":"function","location":"app/models/emoji.rb:35","static":true},{"name":"cache_key","type":"function","location":"app/models/emoji.rb:79","static":true}]},{"name":"Upload","type":"class","children":[{"name":"to_s","type":"function","location":"app/models/upload.rb:50","static":false}]},{"name":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","type":"class","children":[{"name":"available_locales","type":"function","location":"app/models/site_setting.rb:32","static":true},{"name":"require_invite_code","type":"function","location":"app/models/site_setting.rb:176","static":true},{"name":"site_logo_url","type":"function","location":"app/models/site_setting.rb:201","static":true},{"name":"Upload","type":"function","location":"app/models/site_setting.rb:172","static":true},{"name":"site_logo_small_url","type":"function","location":"app/models/site_setting.rb:201","static":true},{"name":"site_mobile_logo_url","type":"function","location":"app/models/site_setting.rb:201","static":true},{"name":"site_favicon_url","type":"function","location":"app/models/site_setting.rb:201","static":true}]},{"name":"SiteSetting","type":"class","children":[{"name":"Upload","type":"class","children":[{"name":"s3_cdn_url","type":"function","location":"app/models/site_setting.rb:130","static":true},{"name":"enable_s3_uploads","type":"function","location":"app/models/site_setting.rb:146","static":true}]}]},{"name":"EmailStyle","type":"class","children":[{"name":"html","type":"function","location":"app/models/email_style.rb:12","static":false},{"name":"default_html","type":"function","location":"app/models/email_style.rb:24","static":false},{"name":"default_template","type":"function","location":"app/models/email_style.rb:32","static":true},{"name":"compiled_css","type":"function","location":"app/models/email_style.rb:20","static":false},{"name":"css","type":"function","location":"app/models/email_style.rb:16","static":false}]},{"name":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","type":"class","children":[{"name":"secure_media_url?","type":"function","location":"app/models/upload.rb:150","static":true}]},{"name":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","type":"class","children":[{"name":"actions","type":"function","location":"app/models/user_history.rb:20","static":true},{"name":"admin_only_action_ids","type":"function","location":"app/models/user_history.rb:198","static":true}]},{"name":"UserHistory","type":"class","children":[{"name":"set_admin_only","type":"function","location":"app/models/user_history.rb:250","static":false}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/validators","type":"package","children":[{"name":"PasswordValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/password_validator.rb:5","static":false},{"name":"is_developer?","type":"function","location":"lib/validators/password_validator.rb:29","static":false}]},{"name":"UserFullNameValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/user_full_name_validator.rb:5","static":false}]},{"name":"AllowedIpAddressValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/allowed_ip_address_validator.rb:5","static":false}]},{"name":"EmailValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/email_validator.rb:5","static":false},{"name":"allowed?","type":"function","location":"lib/validators/email_validator.rb:15","static":true},{"name":"email_in_restriction_setting?","type":"function","location":"lib/validators/email_validator.rb:33","static":true},{"name":"email_regex","type":"function","location":"lib/validators/email_validator.rb:43","static":true}]},{"name":"TimezoneValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/timezone_validator.rb:14","static":false}]}]},{"name":"app/services","type":"package","children":[{"name":"BadgeGranter","type":"class","children":[{"name":"queue_badge_grant","type":"function","location":"app/services/badge_granter.rb:126","static":true}]},{"name":"TrackedTopicsUpdater","type":"class","children":[{"name":"call","type":"function","location":"app/services/tracked_topics_updater.rb:10","static":false}]},{"name":"SearchIndexer","type":"class","children":[{"name":"index","type":"function","location":"app/services/search_indexer.rb:126","static":true}]},{"name":"WordWatcher","type":"class","children":[{"name":"word_matcher_regexp","type":"function","location":"app/services/word_watcher.rb:26","static":true},{"name":"get_cached_words","type":"function","location":"app/services/word_watcher.rb:17","static":true},{"name":"word_matcher_regexp_key","type":"function","location":"app/services/word_watcher.rb:55","static":true}]},{"name":"UserNotificationRenderer","type":"class","children":[{"name":"render","type":"function","location":"app/services/user_notification_renderer.rb:10","static":true}]},{"name":"StaffActionLogger","type":"class","children":[{"name":"log_user_approve","type":"function","location":"app/services/staff_action_logger.rb:578","static":false}]}]},{"name":"lib/email","type":"package","children":[{"name":"Email","type":"class","children":[{"name":"downcase","type":"function","location":"lib/email.rb:12","static":true},{"name":"is_valid?","type":"function","location":"lib/email.rb:7","static":true},{"name":"Sender","type":"class","children":[{"name":"send","type":"function","location":"lib/email/sender.rb:26","static":false},{"name":"to_address","type":"function","location":"lib/email/sender.rb:222","static":false},{"name":"host_for","type":"function","location":"lib/email/sender.rb:230","static":true},{"name":"bounceable_reply_address?","type":"function","location":"lib/email/sender.rb:366","static":true}]},{"name":"Renderer","type":"class","children":[{"name":"html","type":"function","location":"lib/email/renderer.rb:17","static":false},{"name":"text","type":"function","location":"lib/email/renderer.rb:11","static":false}]},{"name":"Styles","type":"class","children":[{"name":"format_basic","type":"function","location":"lib/email/styles.rb:58","static":false},{"name":"format_html","type":"function","location":"lib/email/styles.rb:172","static":false},{"name":"add_styles","type":"function","location":"lib/email/styles.rb:26","static":false},{"name":"onebox_styles","type":"function","location":"lib/email/styles.rb:112","static":false},{"name":"plugin_styles","type":"function","location":"lib/email/styles.rb:237","static":false},{"name":"format_custom","type":"function","location":"lib/email/styles.rb:230","static":false},{"name":"custom_styles","type":"function","location":"lib/email/styles.rb:36","static":false},{"name":"to_html","type":"function","location":"lib/email/styles.rb:241","static":false},{"name":"include_body?","type":"function","location":"lib/email/styles.rb:248","static":false}]}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"UsersController","type":"class","children":[{"name":"approve","type":"function","location":"app/controllers/admin/users_controller.rb:280","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false},{"name":"can_approve?","type":"function","location":"lib/guardian.rb:260","static":false},{"name":"is_staff?","type":"function","location":"lib/guardian.rb:88","static":false}]},{"name":"EnsureMagic","type":"class","children":[{"name":"method_missing","type":"function","location":"lib/guardian/ensure_magic.rb:6","static":false}]}]},{"name":"app/helpers","type":"package","children":[{"name":"EmailHelper","type":"class","children":[{"name":"email_html_template","type":"function","location":"app/helpers/email_helper.rb:28","static":false}]}]}],"events":[{"id":118701,"event":"call","defined_class":"Jobs","method_id":"run_immediately!","path":"app/jobs/base.rb","lineno":17,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":118702,"event":"return","defined_class":"Jobs","method_id":"run_immediately!","path":"app/jobs/base.rb","lineno":17,"static":true,"thread_id":70097708498960,"parent_id":118701,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118703,"event":"call","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_email","class":"String","object_id":70097783082100,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118704,"event":"return","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parent_id":118703,"elapsed":0.000197,"return_value":{"class":"UserEmail","value":"#<UserEmail:0x00007f81bc25b5d0>","object_id":70097592048360}},{"id":118705,"event":"call","defined_class":"User","method_id":"password=","path":"app/models/user.rb","lineno":618,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097783082060,"value":"imafish123","kind":"req"}],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118706,"event":"return","defined_class":"User","method_id":"password=","path":"app/models/user.rb","lineno":618,"static":false,"thread_id":70097708498960,"parent_id":118705,"elapsed":5.0e-06,"return_value":{"class":"String","value":"imafish123","object_id":70097783082060}},{"id":118707,"event":"call","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118708,"event":"return","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parent_id":118707,"elapsed":1.5e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118709,"event":"call","defined_class":"User","method_id":"username_format_validator","path":"app/models/user.rb","lineno":924,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118710,"event":"call","defined_class":"UsernameValidator","method_id":"perform_validation","path":"app/models/username_validator.rb","lineno":11,"static":true,"thread_id":70097708498960,"parameters":[{"name":"object","class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>","kind":"req"},{"name":"field_name","class":"String","object_id":70097713120640,"value":"username","kind":"req"}],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":118711,"event":"call","defined_class":"UsernameValidator","method_id":"valid_format?","path":"app/models/username_validator.rb","lineno":30,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UsernameValidator","object_id":70097592112880,"value":"#<UsernameValidator:0x00007f81bc27ade0>"}},{"id":118712,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":118713,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parent_id":118712,"elapsed":1.3e-05,"return_value":{"class":"Range","value":"3..20","object_id":70097592108820}},{"id":118714,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":118715,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parent_id":118714,"elapsed":6.0e-06,"return_value":{"class":"Range","value":"3..20","object_id":70097592130320}},{"id":118716,"event":"call","defined_class":"UsernameValidator","method_id":"invalid_char_pattern","path":"app/models/username_validator.rb","lineno":132,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":118717,"event":"return","defined_class":"UsernameValidator","method_id":"invalid_char_pattern","path":"app/models/username_validator.rb","lineno":132,"static":true,"thread_id":70097708498960,"parent_id":118716,"elapsed":6.0e-06,"return_value":{"class":"Regexp","value":"(?-mix:[^\\w.-])","object_id":70097569557580}},{"id":118718,"event":"call","defined_class":"UsernameValidator","method_id":"char_whitelist_exists?","path":"app/models/username_validator.rb","lineno":136,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":118719,"event":"return","defined_class":"UsernameValidator","method_id":"char_whitelist_exists?","path":"app/models/username_validator.rb","lineno":136,"static":true,"thread_id":70097708498960,"parent_id":118718,"elapsed":5.0e-06},{"id":118720,"event":"return","defined_class":"UsernameValidator","method_id":"valid_format?","path":"app/models/username_validator.rb","lineno":30,"static":false,"thread_id":70097708498960,"parent_id":118711,"elapsed":0.00049,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118721,"event":"return","defined_class":"UsernameValidator","method_id":"perform_validation","path":"app/models/username_validator.rb","lineno":11,"static":true,"thread_id":70097708498960,"parent_id":118710,"elapsed":0.000618},{"id":118722,"event":"return","defined_class":"User","method_id":"username_format_validator","path":"app/models/user.rb","lineno":924,"static":false,"thread_id":70097708498960,"parent_id":118709,"elapsed":0.000741},{"id":118723,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"normalize_username","path":"app/models/user.rb","lineno":245,"static":true,"thread_id":70097708498960,"parameters":[{"name":"username","class":"String","object_id":70097592093640,"value":"eviltrout","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":118724,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"normalize_username","path":"app/models/user.rb","lineno":245,"static":true,"thread_id":70097708498960,"parent_id":118723,"elapsed":9.0e-06,"return_value":{"class":"String","value":"eviltrout","object_id":70097592143000}},{"id":118725,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":118726,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118725,"elapsed":0.001188},{"id":118727,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097592093640,"value":"eviltrout","kind":"req"}],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118728,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":118727,"elapsed":1.2e-05},{"id":118729,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097593074200,"value":"eviltrout","kind":"req"}],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118730,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":118729,"elapsed":6.0e-06},{"id":118731,"event":"call","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118732,"event":"call","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":727708,"value":"password","kind":"req"},{"name":"value","class":"String","object_id":70097783082060,"value":"imafish123","kind":"req"}],"receiver":{"class":"PasswordValidator","object_id":70097593093600,"value":"#<PasswordValidator:0x00007f81bc459bc0>"}},{"id":118733,"event":"call","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118734,"event":"call","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118735,"event":"return","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parent_id":118734,"elapsed":5.0e-06},{"id":118736,"event":"return","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parent_id":118733,"elapsed":0.00011,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118737,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118738,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":118737,"elapsed":1.8e-05},{"id":118739,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118740,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":118739,"elapsed":1.9e-05,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097593127740}},{"id":118741,"event":"call","defined_class":"PasswordValidator","method_id":"is_developer?","path":"lib/validators/password_validator.rb","lineno":29,"static":false,"thread_id":70097708498960,"parameters":[{"name":"value","class":"String","object_id":70097593127740,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"PasswordValidator","object_id":70097593093600,"value":"#<PasswordValidator:0x00007f81bc459bc0>"}},{"id":118742,"event":"return","defined_class":"PasswordValidator","method_id":"is_developer?","path":"lib/validators/password_validator.rb","lineno":29,"static":false,"thread_id":70097708498960,"parent_id":118741,"elapsed":1.2e-05},{"id":118743,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118744,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":118743,"elapsed":7.0e-06,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097593127740}},{"id":118745,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118746,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":118745,"elapsed":7.0e-06,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097593127740}},{"id":118747,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097783082060,"value":"imafish123","kind":"req"}],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118748,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":118747,"elapsed":7.0e-06},{"id":118749,"event":"return","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":118732,"elapsed":0.002893},{"id":118750,"event":"return","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parent_id":118731,"elapsed":0.00308},{"id":118751,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":118752,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parent_id":118751,"elapsed":5.0e-06,"return_value":{"class":"Integer","value":"200","object_id":401}},{"id":118753,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097593175520,"value":"Evil Trout","kind":"req"}],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118754,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":118753,"elapsed":7.0e-06},{"id":118755,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097593172360,"value":"evil trout","kind":"req"}],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118756,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":118755,"elapsed":6.0e-06},{"id":118757,"event":"call","defined_class":"UserFullNameValidator","method_id":"validate_each","path":"lib/validators/user_full_name_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":88028,"value":"name","kind":"req"},{"name":"value","class":"String","object_id":70097593147260,"value":"Evil Trout","kind":"req"}],"receiver":{"class":"UserFullNameValidator","object_id":70097719440680,"value":"#<UserFullNameValidator:0x00007f81cb556a50>"}},{"id":118758,"event":"return","defined_class":"UserFullNameValidator","method_id":"validate_each","path":"lib/validators/user_full_name_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":118757,"elapsed":7.0e-06},{"id":118759,"event":"call","defined_class":"AllowedIpAddressValidator","method_id":"validate_each","path":"lib/validators/allowed_ip_address_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097593211620,"value":"99.232.23.162","kind":"req"}],"receiver":{"class":"AllowedIpAddressValidator","object_id":70097719544680,"value":"#<AllowedIpAddressValidator:0x00007f81cb5896d0>"}},{"id":118760,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"should_block?","path":"app/models/screened_ip_address.rb","lineno":74,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097593211620,"value":"99.232.23.162","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":118761,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"exists_for_ip_address_and_action?","path":"app/models/screened_ip_address.rb","lineno":82,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097593211620,"value":"99.232.23.162","kind":"req"},{"name":"action_type","class":"Integer","object_id":3,"value":"1","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":118762,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097593211620,"value":"99.232.23.162","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":118763,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('99.232.23.162' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118764,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118763,"elapsed":0.001762},{"id":118765,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":118762,"elapsed":0.005383},{"id":118766,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"exists_for_ip_address_and_action?","path":"app/models/screened_ip_address.rb","lineno":82,"static":true,"thread_id":70097708498960,"parent_id":118761,"elapsed":0.005544},{"id":118767,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"should_block?","path":"app/models/screened_ip_address.rb","lineno":74,"static":true,"thread_id":70097708498960,"parent_id":118760,"elapsed":0.005672},{"id":118768,"event":"return","defined_class":"AllowedIpAddressValidator","method_id":"validate_each","path":"lib/validators/allowed_ip_address_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":118759,"elapsed":0.005807},{"id":118769,"event":"call","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserEmail","object_id":70097592048360,"value":"#<UserEmail:0x00007f81bc25b5d0>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":735708,"value":"email","kind":"req"},{"name":"value","class":"String","object_id":70097594421580,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"EmailValidator","object_id":70097803750180,"value":"#<EmailValidator:0x00007f81d5625648>"}},{"id":118770,"event":"call","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097594421580,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":118771,"event":"call","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[{"name":"setting","class":"String","object_id":70097723515680,"value":"mailinator.com","kind":"req"},{"name":"value","class":"String","object_id":70097594421580,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":118772,"event":"return","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":118771,"elapsed":3.1e-05},{"id":118773,"event":"return","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parent_id":118770,"elapsed":0.000153,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118774,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097594421580,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":118775,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097594421580,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":118776,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parent_id":118775,"elapsed":9.0e-06,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097594454640}},{"id":118777,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_emails\".* FROM \"screened_emails\" ORDER BY \"screened_emails\".\"created_at\" DESC LIMIT 100","database_type":"postgres","server_version":110006}},{"id":118778,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118777,"elapsed":0.001815},{"id":118779,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":118774,"elapsed":0.005538},{"id":118780,"event":"return","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":118769,"elapsed":0.005953},{"id":118781,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE (lower(email) = 'eviltrout@somewhere.com') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118782,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118781,"elapsed":0.001334},{"id":118783,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":118784,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parent_id":118783,"elapsed":6.0e-06,"return_value":{"class":"Integer","value":"200","object_id":401}},{"id":118785,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"users\" (\"username\", \"created_at\", \"updated_at\", \"name\", \"password_hash\", \"salt\", \"active\", \"username_lower\", \"trust_level\", \"ip_address\") VALUES ('eviltrout', '2020-05-28 18:50:44.729356', '2020-05-28 18:50:44.729356', 'Evil Trout', 'e698cbedc4a6e47d1d216277ce49a20eed10c1f3f6d0eae4f675a38e34955857', 'db3de9e09815d4d6eeb70b450c7402ea', TRUE, 'eviltrout', 1, '99.232.23.162/32') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":118786,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118785,"elapsed":0.001753},{"id":118787,"event":"call","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserEmail","object_id":70097592048360,"value":"#<UserEmail:0x00007f81bc25b5d0>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":735708,"value":"email","kind":"req"},{"name":"value","class":"String","object_id":70097566795320,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"EmailValidator","object_id":70097803750180,"value":"#<EmailValidator:0x00007f81d5625648>"}},{"id":118788,"event":"call","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097566795320,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":118789,"event":"call","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[{"name":"setting","class":"String","object_id":70097723515680,"value":"mailinator.com","kind":"req"},{"name":"value","class":"String","object_id":70097566795320,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":118790,"event":"return","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":118789,"elapsed":3.0e-05},{"id":118791,"event":"return","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parent_id":118788,"elapsed":0.000151,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118792,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097566795320,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":118793,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097566795320,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":118794,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parent_id":118793,"elapsed":9.0e-06,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097566777900}},{"id":118795,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_emails\".* FROM \"screened_emails\" ORDER BY \"screened_emails\".\"created_at\" DESC LIMIT 100","database_type":"postgres","server_version":110006}},{"id":118796,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118795,"elapsed":0.001359},{"id":118797,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":118792,"elapsed":0.005063},{"id":118798,"event":"return","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":118787,"elapsed":0.005473},{"id":118799,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE \"user_emails\".\"primary\" = TRUE AND \"user_emails\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118800,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118799,"elapsed":0.001262},{"id":118801,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE (lower(email) = 'eviltrout@somewhere.com') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118802,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118801,"elapsed":0.001134},{"id":118803,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_emails\" (\"user_id\", \"email\", \"primary\", \"created_at\", \"updated_at\") VALUES (165, 'eviltrout@somewhere.com', TRUE, '2020-05-28 18:50:44.749887', '2020-05-28 18:50:44.749887') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":118804,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118803,"elapsed":0.00114},{"id":118805,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118806,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":118805,"elapsed":1.9e-05,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097798750840}},{"id":118807,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"generate_token","path":"app/models/email_token.rb","lineno":36,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":118808,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"token_length","path":"app/models/email_token.rb","lineno":20,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":118809,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"token_length","path":"app/models/email_token.rb","lineno":20,"static":true,"thread_id":70097708498960,"parent_id":118808,"elapsed":3.0e-06,"return_value":{"class":"Integer","value":"16","object_id":33}},{"id":118810,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"generate_token","path":"app/models/email_token.rb","lineno":36,"static":true,"thread_id":70097708498960,"parent_id":118807,"elapsed":0.00014,"return_value":{"class":"String","value":"48c9e1333dff564ee96163b9c4f21165","object_id":70097798790560}},{"id":118811,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"email_tokens\" (\"user_id\", \"email\", \"token\", \"created_at\", \"updated_at\") VALUES (165, 'eviltrout@somewhere.com', '48c9e1333dff564ee96163b9c4f21165', '2020-05-28 18:50:44.755425', '2020-05-28 18:50:44.755425') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":118812,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118811,"elapsed":0.001065},{"id":118813,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"email_tokens\" SET \"expired\" = TRUE WHERE \"email_tokens\".\"user_id\" = 165 AND (id != 361)","database_type":"postgres","server_version":110006}},{"id":118814,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118813,"elapsed":0.001137},{"id":118815,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_stats\" (\"user_id\", \"new_since\") VALUES (165, '2020-05-28 18:50:44.764723') RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":118816,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118815,"elapsed":0.001399},{"id":118817,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118818,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118817,"elapsed":0.001349},{"id":118819,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097827650140,"value":"{:user=>#<User id: 165, username: \"eviltrout\", created_at: \"2020-05-28 18:50:44\", updated_at: \"2020-","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":118820,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":118819,"elapsed":1.0e-05},{"id":118821,"event":"call","defined_class":"TimezoneValidator","method_id":"validate_each","path":"lib/validators/timezone_validator.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserOption","object_id":70097827667340,"value":"#<UserOption:0x00007f81d83c3b18>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":5058588,"value":"timezone","kind":"req"},{"name":"value","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"TimezoneValidator","object_id":70097795312080,"value":"#<TimezoneValidator:0x00007f81d460d3a0>"}},{"id":118822,"event":"return","defined_class":"TimezoneValidator","method_id":"validate_each","path":"lib/validators/timezone_validator.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":118821,"elapsed":5.0e-06},{"id":118823,"event":"call","defined_class":"UserOption","method_id":"set_defaults","path":"app/models/user_option.rb","lineno":47,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserOption","object_id":70097827667340,"value":"#<UserOption:0x00007f81d83c3b18>"}},{"id":118824,"event":"call","defined_class":"UserOption","method_id":"text_size=","path":"app/models/user_option.rb","lineno":172,"static":false,"thread_id":70097708498960,"parameters":[{"name":"value","class":"String","object_id":70097723783240,"value":"normal","kind":"req"}],"receiver":{"class":"UserOption","object_id":70097827667340,"value":"#<UserOption:0x00007f81d83c3b18>"}},{"id":118825,"event":"call","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"text_sizes","path":"app/models/user_option.rb","lineno":30,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097795215760,"value":"UserOption"}},{"id":118826,"event":"return","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"text_sizes","path":"app/models/user_option.rb","lineno":30,"static":true,"thread_id":70097708498960,"parent_id":118825,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:normal=>0, :larger=>1, :largest=>2, :smaller=>3}","object_id":70097795246760}},{"id":118827,"event":"return","defined_class":"UserOption","method_id":"text_size=","path":"app/models/user_option.rb","lineno":172,"static":false,"thread_id":70097708498960,"parent_id":118824,"elapsed":0.000124,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":118828,"event":"call","defined_class":"UserOption","method_id":"title_count_mode=","path":"app/models/user_option.rb","lineno":180,"static":false,"thread_id":70097708498960,"parameters":[{"name":"value","class":"String","object_id":70097723782760,"value":"notifications","kind":"req"}],"receiver":{"class":"UserOption","object_id":70097827667340,"value":"#<UserOption:0x00007f81d83c3b18>"}},{"id":118829,"event":"call","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"title_count_modes","path":"app/models/user_option.rb","lineno":34,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097795215760,"value":"UserOption"}},{"id":118830,"event":"return","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"title_count_modes","path":"app/models/user_option.rb","lineno":34,"static":true,"thread_id":70097708498960,"parent_id":118829,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:notifications=>0, :contextual=>1}","object_id":70097816997920}},{"id":118831,"event":"return","defined_class":"UserOption","method_id":"title_count_mode=","path":"app/models/user_option.rb","lineno":180,"static":false,"thread_id":70097708498960,"parent_id":118828,"elapsed":0.000112,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":118832,"event":"return","defined_class":"UserOption","method_id":"set_defaults","path":"app/models/user_option.rb","lineno":47,"static":false,"thread_id":70097708498960,"parent_id":118823,"elapsed":0.000526,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118833,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_options\" (\"user_id\", \"email_digests\", \"digest_after_minutes\", \"auto_track_topics_after_msecs\", \"new_topic_duration_minutes\", \"notification_level_when_replying\") VALUES (165, TRUE, 10080, 240000, 2880, 2) RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":118834,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118833,"elapsed":0.001484},{"id":118835,"event":"call","defined_class":"TrackedTopicsUpdater","method_id":"call","path":"app/services/tracked_topics_updater.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TrackedTopicsUpdater","object_id":70097612510240,"value":"#<TrackedTopicsUpdater:0x00007f81be962840>"}},{"id":118836,"event":"call","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755252000,"value":"TopicUser"}},{"id":118837,"event":"return","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parent_id":118836,"elapsed":8.0e-06,"return_value":{"class":"Enum","value":"{:muted=>0, :regular=>1, :tracking=>2, :watching=>3}","object_id":70097795217940}},{"id":118838,"event":"call","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755252000,"value":"TopicUser"}},{"id":118839,"event":"return","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parent_id":118838,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:muted=>0, :regular=>1, :tracking=>2, :watching=>3}","object_id":70097795217940}},{"id":118840,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"topic_users\" SET notification_level = CASE WHEN total_msecs_viewed < 240000 THEN 1 ELSE 2 END WHERE \"topic_users\".\"notifications_reason_id\" IS NULL AND \"topic_users\".\"user_id\" = 165","database_type":"postgres","server_version":110006}},{"id":118841,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118840,"elapsed":0.001311},{"id":118842,"event":"return","defined_class":"TrackedTopicsUpdater","method_id":"call","path":"app/services/tracked_topics_updater.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":118835,"elapsed":0.004607,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":118843,"event":"call","defined_class":"User","method_id":"create_user_profile","path":"app/models/user.rb","lineno":1139,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118844,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118845,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118844,"elapsed":0.001064},{"id":118846,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_profiles\" (\"user_id\") VALUES (165) RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":118847,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118846,"elapsed":0.001087},{"id":118848,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097612651460,"value":"{:user=>#<UserProfile user_id: 165, location: nil, website: nil, bio_raw: nil, bio_cooked: nil, dism","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":118849,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":118848,"elapsed":1.2e-05},{"id":118850,"event":"return","defined_class":"User","method_id":"create_user_profile","path":"app/models/user.rb","lineno":1139,"static":false,"thread_id":70097708498960,"parent_id":118843,"elapsed":0.00926,"return_value":{"class":"UserProfile","value":"#<UserProfile:0x00007f81d84b34b0>","object_id":70097828158040}},{"id":118851,"event":"call","defined_class":"User","method_id":"set_random_avatar","path":"app/models/user.rb","lineno":1143,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118852,"event":"return","defined_class":"User","method_id":"set_random_avatar","path":"app/models/user.rb","lineno":1143,"static":false,"thread_id":70097708498960,"parent_id":118851,"elapsed":1.1e-05},{"id":118853,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":118854,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118853,"elapsed":0.001191},{"id":118855,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":118856,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118855,"elapsed":0.001122},{"id":118857,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":118858,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118857,"elapsed":0.002216},{"id":118859,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":118860,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118859,"elapsed":0.00105},{"id":118861,"event":"call","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parameters":[{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118862,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118863,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":118862,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118864,"event":"return","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parent_id":118861,"elapsed":0.000119},{"id":118865,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE \"user_auth_tokens\".\"user_id\" = 165","database_type":"postgres","server_version":110006}},{"id":118866,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118865,"elapsed":0.001288},{"id":118867,"event":"call","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118868,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_avatars\".* FROM \"user_avatars\" WHERE \"user_avatars\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118869,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118868,"elapsed":0.001393},{"id":118870,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_avatars\" (\"user_id\", \"created_at\", \"updated_at\") VALUES (165, '2020-05-28 18:50:44.819879', '2020-05-28 18:50:44.819879') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":118871,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118870,"elapsed":0.001178},{"id":118872,"event":"return","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parent_id":118867,"elapsed":0.009137},{"id":118873,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097608715220,"value":"{:user=>#<User id: 165, username: \"eviltrout\", created_at: \"2020-05-28 18:50:44\", updated_at: \"2020-","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":118874,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":118873,"elapsed":9.0e-06},{"id":118875,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":118876,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":118875,"elapsed":4.0e-06},{"id":118877,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":118878,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118877,"elapsed":0.001135},{"id":118879,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"},{"name":"object","class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>","kind":"req"},{"name":"event","class":"Symbol","object_id":12268508,"value":"user_created","kind":"req"},{"name":"serializer","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":118880,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":118881,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":118880,"elapsed":0.000246,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81b95fc520>","object_id":70097568785040}},{"id":118882,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'user') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118883,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118882,"elapsed":0.001431},{"id":118884,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":118879,"elapsed":0.004989},{"id":118885,"event":"call","defined_class":"User","method_id":"activate","path":"app/models/user.rb","lineno":934,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118886,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"active","path":"app/models/email_token.rb","lineno":32,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":118887,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"valid_after","path":"app/models/email_token.rb","lineno":24,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":118888,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"valid_after","path":"app/models/email_token.rb","lineno":24,"static":true,"thread_id":70097708498960,"parent_id":118887,"elapsed":3.9e-05,"return_value":{"class":"Time","value":"2020-05-26 18:50:44 UTC","object_id":70097608839220}},{"id":118889,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"active","path":"app/models/email_token.rb","lineno":32,"static":true,"thread_id":70097708498960,"parent_id":118886,"elapsed":0.000327,"return_value":{"class":"ActiveRecord::AssociationRelation","value":"#<EmailToken::ActiveRecord_AssociationRelation:0x00007f81be261b68>","object_id":70097608838580}},{"id":118890,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118891,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":118890,"elapsed":2.0e-05,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097798750840}},{"id":118892,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"email_tokens\".* FROM \"email_tokens\" WHERE \"email_tokens\".\"user_id\" = 165 AND \"email_tokens\".\"expired\" = FALSE AND (created_at > '2020-05-26 18:50:44.834078') AND \"email_tokens\".\"email\" = 'eviltrout@somewhere.com' ORDER BY \"email_tokens\".\"id\" ASC LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118893,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118892,"elapsed":0.001266},{"id":118894,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"confirm","path":"app/models/email_token.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097594524800,"value":"48c9e1333dff564ee96163b9c4f21165","kind":"req"},{"name":"skip_reviewable","class":"Hash","object_id":70097594524760,"value":"{:skip_reviewable=>true}","kind":"key"}],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":118895,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":118896,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118895,"elapsed":0.00089},{"id":118897,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"atomic_confirm","path":"app/models/email_token.rb","lineno":44,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097594524800,"value":"48c9e1333dff564ee96163b9c4f21165","kind":"req"}],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":118898,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"valid_token_format?","path":"app/models/email_token.rb","lineno":40,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097594524800,"value":"48c9e1333dff564ee96163b9c4f21165","kind":"req"}],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":118899,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"valid_token_format?","path":"app/models/email_token.rb","lineno":40,"static":true,"thread_id":70097708498960,"parent_id":118898,"elapsed":2.0e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":118900,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"confirmable","path":"app/models/email_token.rb","lineno":88,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097594524800,"value":"48c9e1333dff564ee96163b9c4f21165","kind":"req"}],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":118901,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"valid_after","path":"app/models/email_token.rb","lineno":24,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":118902,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"valid_after","path":"app/models/email_token.rb","lineno":24,"static":true,"thread_id":70097708498960,"parent_id":118901,"elapsed":3.0e-05,"return_value":{"class":"Time","value":"2020-05-26 18:50:44 UTC","object_id":70097828969900}},{"id":118903,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"email_tokens\".* FROM \"email_tokens\" WHERE \"email_tokens\".\"token\" = '48c9e1333dff564ee96163b9c4f21165' AND \"email_tokens\".\"expired\" = FALSE AND \"email_tokens\".\"confirmed\" = FALSE AND (created_at >= '2020-05-26 18:50:44.840907') ORDER BY \"email_tokens\".\"id\" ASC LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118904,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118903,"elapsed":0.001099},{"id":118905,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 165","database_type":"postgres","server_version":110006}},{"id":118906,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118905,"elapsed":0.001431},{"id":118907,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"confirmable","path":"app/models/email_token.rb","lineno":88,"static":true,"thread_id":70097708498960,"parent_id":118900,"elapsed":0.008295,"return_value":{"class":"EmailToken","value":"#<EmailToken:0x00007f81beca3d10>","object_id":70097614216840}},{"id":118908,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"email_tokens\" SET confirmed = true WHERE \"email_tokens\".\"confirmed\" = FALSE AND \"email_tokens\".\"id\" = 361 AND \"email_tokens\".\"expired\" = FALSE","database_type":"postgres","server_version":110006}},{"id":118909,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118908,"elapsed":0.001052},{"id":118910,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"atomic_confirm","path":"app/models/email_token.rb","lineno":44,"static":true,"thread_id":70097708498960,"parent_id":118897,"elapsed":0.011551,"return_value":{"class":"Hash","value":"{:success=>true, :user=>#<User id: 165, username: \"eviltrout\", created_at: \"2020-05-28 18:50:44\", up","object_id":70097829227020}},{"id":118911,"event":"call","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_email","class":"String","object_id":70097829243620,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118912,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_emails\".\"id\", \"user_emails\".\"user_id\", \"user_emails\".\"email\", \"user_emails\".\"primary\", \"user_emails\".\"created_at\", \"user_emails\".\"updated_at\" FROM \"user_emails\" WHERE \"user_emails\".\"user_id\" = 165 AND \"user_emails\".\"primary\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118913,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118912,"elapsed":0.001254},{"id":118914,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE \"user_emails\".\"primary\" = TRUE AND \"user_emails\".\"id\" != 166 AND \"user_emails\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118915,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118914,"elapsed":0.001091},{"id":118916,"event":"return","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parent_id":118911,"elapsed":0.007923,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118917,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118918,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_custom_fields\".\"name\", \"user_custom_fields\".\"value\" FROM \"user_custom_fields\" WHERE \"user_custom_fields\".\"user_id\" = 165 ORDER BY id asc","database_type":"postgres","server_version":110006}},{"id":118919,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118918,"elapsed":0.001351},{"id":118920,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":118917,"elapsed":0.003515,"return_value":{"class":"Hash","value":"{}","object_id":70097614541940}},{"id":118921,"event":"call","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118922,"event":"return","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parent_id":118921,"elapsed":1.1e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118923,"event":"call","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118924,"event":"call","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":727708,"value":"password","kind":"req"},{"name":"value","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"PasswordValidator","object_id":70097614554260,"value":"#<PasswordValidator:0x00007f81bed48928>"}},{"id":118925,"event":"call","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118926,"event":"call","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118927,"event":"return","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parent_id":118926,"elapsed":3.0e-06},{"id":118928,"event":"return","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parent_id":118925,"elapsed":9.8e-05},{"id":118929,"event":"return","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":118924,"elapsed":0.000192},{"id":118930,"event":"return","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parent_id":118923,"elapsed":0.000309},{"id":118931,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE \"user_emails\".\"primary\" = TRUE AND \"user_emails\".\"id\" != 166 AND \"user_emails\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118932,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118931,"elapsed":0.001271},{"id":118933,"event":"call","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118934,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user_id","class":"Integer","object_id":331,"value":"165","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":118935,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parent_id":118934,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118936,"event":"return","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parent_id":118933,"elapsed":0.000132,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118937,"event":"call","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parameters":[{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118938,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118939,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":118938,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118940,"event":"return","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parent_id":118937,"elapsed":0.000103},{"id":118941,"event":"call","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118942,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_avatars\".* FROM \"user_avatars\" WHERE \"user_avatars\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118943,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118942,"elapsed":0.00129},{"id":118944,"event":"return","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parent_id":118941,"elapsed":0.003817},{"id":118945,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097609287920,"value":"{:user=>#<User id: 165, username: \"eviltrout\", created_at: \"2020-05-28 18:50:44\", updated_at: \"2020-","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":118946,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":118945,"elapsed":8.0e-06},{"id":118947,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":118948,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":118947,"elapsed":4.0e-06},{"id":118949,"event":"call","defined_class":"User","method_id":"set_automatic_groups","path":"app/models/user.rb","lineno":1178,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118950,"event":"call","defined_class":"User","method_id":"email_confirmed?","path":"app/models/user.rb","lineno":928,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118951,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118952,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":118951,"elapsed":1.0e-05,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097614572800}},{"id":118953,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"email_tokens\".* FROM \"email_tokens\" WHERE \"email_tokens\".\"user_id\" = 165 AND \"email_tokens\".\"email\" = 'eviltrout@somewhere.com' AND \"email_tokens\".\"confirmed\" = TRUE","database_type":"postgres","server_version":110006}},{"id":118954,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118953,"elapsed":0.001351},{"id":118955,"event":"return","defined_class":"User","method_id":"email_confirmed?","path":"app/models/user.rb","lineno":928,"static":false,"thread_id":70097708498960,"parent_id":118950,"elapsed":0.003978,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118956,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"groups\".\"id\", \"groups\".\"name\", \"groups\".\"created_at\", \"groups\".\"updated_at\", \"groups\".\"automatic\", \"groups\".\"user_count\", \"groups\".\"automatic_membership_email_domains\", \"groups\".\"primary_group\", \"groups\".\"title\", \"groups\".\"grant_trust_level\", \"groups\".\"incoming_email\", \"groups\".\"has_messages\", \"groups\".\"flair_bg_color\", \"groups\".\"flair_color\", \"groups\".\"bio_raw\", \"groups\".\"bio_cooked\", \"groups\".\"allow_membership_requests\", \"groups\".\"full_name\", \"groups\".\"default_notification_level\", \"groups\".\"visibility_level\", \"groups\".\"public_exit\", \"groups\".\"public_admission\", \"groups\".\"membership_request_template\", \"groups\".\"messageable_level\", \"groups\".\"mentionable_level\", \"groups\".\"publish_read_state\", \"groups\".\"members_visibility_level\", \"groups\".\"flair_icon\", \"groups\".\"flair_upload_id\" FROM \"groups\" WHERE \"groups\".\"automatic\" = FALSE AND (LENGTH(COALESCE(automatic_membership_email_domains, '')) > 0)","database_type":"postgres","server_version":110006}},{"id":118957,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118956,"elapsed":0.001467},{"id":118958,"event":"return","defined_class":"User","method_id":"set_automatic_groups","path":"app/models/user.rb","lineno":1178,"static":false,"thread_id":70097708498960,"parent_id":118949,"elapsed":0.007989,"return_value":{"class":"Array","value":"[]","object_id":70097615243600}},{"id":118959,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097569314860,"value":"#<User:0x00007f81b96ff058>"}},{"id":118960,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":118959,"elapsed":1.6e-05,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097614572800}},{"id":118961,"event":"call","defined_class":"Invite(id: integer, invite_key: string, email: string, invited_by_id: integer, user_id: integer, redeemed_at: datetime, created_at: datetime, updated_at: datetime, deleted_at: datetime, deleted_by_id: integer, invalidated_at: datetime, moderator: boolean, custom_message: text, emailed_status: integer)","method_id":"redeem_from_email","path":"app/models/invite.rb","lineno":225,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097614572800,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097588759140,"value":"Invite"}},{"id":118962,"event":"call","defined_class":"Email","method_id":"downcase","path":"lib/email.rb","lineno":12,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097614572800,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Module","object_id":70097614623220,"value":"Email"}},{"id":118963,"event":"call","defined_class":"Email","method_id":"is_valid?","path":"lib/email.rb","lineno":7,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097614572800,"value":"eviltrout@somewhere.com","kind":"req"}],"receiver":{"class":"Module","object_id":70097614623220,"value":"Email"}},{"id":118964,"event":"call","defined_class":"EmailValidator","method_id":"email_regex","path":"lib/validators/email_validator.rb","lineno":43,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":118965,"event":"return","defined_class":"EmailValidator","method_id":"email_regex","path":"lib/validators/email_validator.rb","lineno":43,"static":true,"thread_id":70097708498960,"parent_id":118964,"elapsed":3.0e-06,"return_value":{"class":"Regexp","value":"(?-mix:\\A[a-zA-Z0-9!#\\$%&'*+\\/=?\\^_`{|}~\\-]+(?:\\.[a-zA-Z0-9!#\\$%&'\\*+\\/=?\\^_`{|}~\\-]+)*@(?:[a-zA-Z0-","object_id":70097803665340}},{"id":118966,"event":"return","defined_class":"Email","method_id":"is_valid?","path":"lib/email.rb","lineno":7,"static":true,"thread_id":70097708498960,"parent_id":118963,"elapsed":0.000114,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118967,"event":"return","defined_class":"Email","method_id":"downcase","path":"lib/email.rb","lineno":12,"static":true,"thread_id":70097708498960,"parent_id":118962,"elapsed":0.000213,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097624389760}},{"id":118968,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097588759140,"value":"Invite"}},{"id":118969,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":118968,"elapsed":5.3e-05,"return_value":{"class":"String","value":"\"invites\".\"deleted_at\" IS NULL","object_id":70097624386940}},{"id":118970,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"invites\".* FROM \"invites\" WHERE (\"invites\".\"deleted_at\" IS NULL) AND \"invites\".\"email\" = 'eviltrout@somewhere.com' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118971,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118970,"elapsed":0.001165},{"id":118972,"event":"return","defined_class":"Invite(id: integer, invite_key: string, email: string, invited_by_id: integer, user_id: integer, redeemed_at: datetime, created_at: datetime, updated_at: datetime, deleted_at: datetime, deleted_by_id: integer, invalidated_at: datetime, moderator: boolean, custom_message: text, emailed_status: integer)","method_id":"redeem_from_email","path":"app/models/invite.rb","lineno":225,"static":true,"thread_id":70097708498960,"parent_id":118961,"elapsed":0.003945},{"id":118973,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":118974,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118973,"elapsed":0.000937},{"id":118975,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"confirm","path":"app/models/email_token.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":118894,"elapsed":0.05229,"return_value":{"class":"User","value":"#<User:0x00007f81b96ff058>","object_id":70097569314860}},{"id":118976,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":118977,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118976,"elapsed":0.000833},{"id":118978,"event":"call","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118979,"event":"return","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parent_id":118978,"elapsed":1.5e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118980,"event":"call","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118981,"event":"call","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":727708,"value":"password","kind":"req"},{"name":"value","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"PasswordValidator","object_id":70097620999000,"value":"#<PasswordValidator:0x00007f81bf9936b0>"}},{"id":118982,"event":"call","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118983,"event":"call","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118984,"event":"return","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parent_id":118983,"elapsed":4.0e-06},{"id":118985,"event":"return","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parent_id":118982,"elapsed":0.0001},{"id":118986,"event":"return","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":118981,"elapsed":0.000193},{"id":118987,"event":"return","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parent_id":118980,"elapsed":0.00031},{"id":118988,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE \"user_emails\".\"primary\" = TRUE AND \"user_emails\".\"id\" != 166 AND \"user_emails\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":118989,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":118988,"elapsed":0.001269},{"id":118990,"event":"call","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118991,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user_id","class":"Integer","object_id":331,"value":"165","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":118992,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parent_id":118991,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118993,"event":"return","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parent_id":118990,"elapsed":0.000128,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118994,"event":"call","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parameters":[{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118995,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118996,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":118995,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":118997,"event":"return","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parent_id":118994,"elapsed":0.000101},{"id":118998,"event":"call","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":118999,"event":"return","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parent_id":118998,"elapsed":2.0e-05},{"id":119000,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097621510140,"value":"{:user=>#<User id: 165, username: \"eviltrout\", created_at: \"2020-05-28 18:50:44\", updated_at: \"2020-","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":119001,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":119000,"elapsed":7.0e-06},{"id":119002,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":119003,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":119002,"elapsed":3.0e-06},{"id":119004,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119005,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119004,"elapsed":0.00098},{"id":119006,"event":"call","defined_class":"User","method_id":"create_reviewable","path":"app/models/user.rb","lineno":1253,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":119007,"event":"call","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parameters":[{"name":"job","class":"Symbol","object_id":12252188,"value":"create_user_reviewable","kind":"req"},{"name":"opts","class":"Hash","object_id":70097776264800,"value":"{:user_id=>165}","kind":"opt"}],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119008,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119009,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119008,"elapsed":5.0e-06},{"id":119010,"event":"call","defined_class":"Jobs::Base","method_id":"perform","path":"app/jobs/base.rb","lineno":187,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"Hash","object_id":70097776264800,"value":"{:user_id=>165, :current_site_id=>\"default\", :sync_exec=>true}","kind":"rest"}],"receiver":{"class":"Jobs::CreateUserReviewable","object_id":70097776532180,"value":"#<Jobs::CreateUserReviewable:0x00007f81d223b5a8>"}},{"id":119011,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119012,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119011,"elapsed":4.0e-06},{"id":119013,"event":"call","defined_class":"Jobs::CreateUserReviewable","method_id":"execute","path":"app/jobs/regular/create_user_reviewable.rb","lineno":6,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"ActiveSupport::HashWithIndifferentAccess","object_id":70097776592000,"value":"{\"user_id\"=>165, \"current_site_id\"=>\"default\"}","kind":"req"}],"receiver":{"class":"Jobs::CreateUserReviewable","object_id":70097776532180,"value":"#<Jobs::CreateUserReviewable:0x00007f81d223b5a8>"}},{"id":119014,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119015,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119014,"elapsed":0.001858},{"id":119016,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097783164320,"value":"#<User:0x00007f81d2ee1b40>"}},{"id":119017,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_emails\".\"id\", \"user_emails\".\"user_id\", \"user_emails\".\"email\", \"user_emails\".\"primary\", \"user_emails\".\"created_at\", \"user_emails\".\"updated_at\" FROM \"user_emails\" WHERE \"user_emails\".\"user_id\" = 165 AND \"user_emails\".\"primary\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119018,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119017,"elapsed":0.001509},{"id":119019,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":119016,"elapsed":0.004473,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097711992480}},{"id":119020,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_profiles\".* FROM \"user_profiles\" WHERE \"user_profiles\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119021,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119020,"elapsed":0.001383},{"id":119022,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"needs_review!","path":"app/models/reviewable.rb","lineno":124,"static":true,"thread_id":70097708498960,"parameters":[{"name":"created_by","class":"Hash","object_id":70097793646460,"value":"{:target=>#<User id: 165, username: \"eviltrout\", created_at: \"2020-05-28 18:50:44\", updated_at: \"202","kind":"keyreq"},{"name":"target","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"topic","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"payload","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"reviewable_by_moderator","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"potential_spam","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097586690280,"value":"ReviewableUser"}},{"id":119023,"event":"call","defined_class":"Reviewable","method_id":"created_new!","path":"app/models/reviewable.rb","lineno":113,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097793754120,"value":"#<ReviewableUser:0x00007f81d4314810>"}},{"id":119024,"event":"return","defined_class":"Reviewable","method_id":"created_new!","path":"app/models/reviewable.rb","lineno":113,"static":false,"thread_id":70097708498960,"parent_id":119023,"elapsed":4.2e-05},{"id":119025,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"statuses","path":"app/models/reviewable.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097586690280,"value":"ReviewableUser"}},{"id":119026,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"statuses","path":"app/models/reviewable.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":119025,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:pending=>0, :approved=>1, :rejected=>2, :ignored=>3, :deleted=>4}","object_id":70097720212940}},{"id":119027,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119028,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119027,"elapsed":0.00114},{"id":119029,"event":"call","defined_class":"Reviewable","method_id":"apply_review_group","path":"app/models/reviewable.rb","lineno":283,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097793754120,"value":"#<ReviewableUser:0x00007f81d4314810>"}},{"id":119030,"event":"return","defined_class":"Reviewable","method_id":"apply_review_group","path":"app/models/reviewable.rb","lineno":283,"static":false,"thread_id":70097708498960,"parent_id":119029,"elapsed":1.4e-05},{"id":119031,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"reviewables\" (\"type\", \"created_by_id\", \"reviewable_by_moderator\", \"potential_spam\", \"target_id\", \"target_type\", \"payload\", \"created_at\", \"updated_at\") VALUES ('ReviewableUser', -1, TRUE, TRUE, 165, 'User', '{\"username\":\"eviltrout\",\"name\":\"Evil Trout\",\"email\":\"eviltrout@somewhere.com\",\"website\":null}', '2020-05-28 18:50:44.967666', '2020-05-28 18:50:44.967666') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":119032,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119031,"elapsed":0.001371},{"id":119033,"event":"call","defined_class":"Reviewable","method_id":"log_history","path":"app/models/reviewable.rb","lineno":274,"static":false,"thread_id":70097708498960,"parameters":[{"name":"reviewable_history_type","class":"Symbol","object_id":1352988,"value":"created","kind":"req"},{"name":"performed_by","class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>","kind":"req"},{"name":"edited","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"ReviewableUser","object_id":70097793754120,"value":"#<ReviewableUser:0x00007f81d4314810>"}},{"id":119034,"event":"call","defined_class":"ReviewableHistory(id: integer, reviewable_id: integer, reviewable_history_type: integer, status: integer, created_by_id: integer, edited: json, created_at: datetime, updated_at: datetime)","method_id":"types","path":"app/models/reviewable_history.rb","lineno":7,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097814904680,"value":"ReviewableHistory"}},{"id":119035,"event":"return","defined_class":"ReviewableHistory(id: integer, reviewable_id: integer, reviewable_history_type: integer, status: integer, created_by_id: integer, edited: json, created_at: datetime, updated_at: datetime)","method_id":"types","path":"app/models/reviewable_history.rb","lineno":7,"static":true,"thread_id":70097708498960,"parent_id":119034,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:created=>0, :transitioned=>1, :edited=>2, :claimed=>3, :unclaimed=>4}","object_id":70097814734640}},{"id":119036,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"reviewable_histories\" (\"reviewable_id\", \"reviewable_history_type\", \"status\", \"created_by_id\", \"created_at\", \"updated_at\") VALUES (46, 0, 0, -1, '2020-05-28 18:50:44.973524', '2020-05-28 18:50:44.973524') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":119037,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119036,"elapsed":0.001797},{"id":119038,"event":"return","defined_class":"Reviewable","method_id":"log_history","path":"app/models/reviewable.rb","lineno":274,"static":false,"thread_id":70097708498960,"parent_id":119033,"elapsed":0.006948,"return_value":{"class":"ReviewableHistory","value":"#<ReviewableHistory:0x00007f81d557ba58>","object_id":70097803402540}},{"id":119039,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119040,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119039,"elapsed":0.001255},{"id":119041,"event":"call","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097793754120,"value":"#<ReviewableUser:0x00007f81d4314810>"}},{"id":119042,"event":"return","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":119041,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119043,"event":"call","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parameters":[{"name":"job","class":"Symbol","object_id":17527068,"value":"notify_reviewable","kind":"req"},{"name":"opts","class":"Hash","object_id":70097813702740,"value":"{:reviewable_id=>46}","kind":"opt"}],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119044,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119045,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119044,"elapsed":4.0e-06},{"id":119046,"event":"return","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parent_id":119043,"elapsed":0.000149},{"id":119047,"event":"call","defined_class":"Reviewable","method_id":"serializer","path":"app/models/reviewable.rb","lineno":511,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097793754120,"value":"#<ReviewableUser:0x00007f81d4314810>"}},{"id":119048,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"serializer_for","path":"app/models/reviewable.rb","lineno":521,"static":true,"thread_id":70097708498960,"parameters":[{"name":"reviewable","class":"ReviewableUser","object_id":70097793754120,"value":"#<ReviewableUser:0x00007f81d4314810>","kind":"req"}],"receiver":{"class":"Class","object_id":70097586690280,"value":"ReviewableUser"}},{"id":119049,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"serializer_for","path":"app/models/reviewable.rb","lineno":521,"static":true,"thread_id":70097708498960,"parent_id":119048,"elapsed":2.1e-05,"return_value":{"class":"Class","value":"ReviewableUserSerializer","object_id":70097816935560}},{"id":119050,"event":"return","defined_class":"Reviewable","method_id":"serializer","path":"app/models/reviewable.rb","lineno":511,"static":false,"thread_id":70097708498960,"parent_id":119047,"elapsed":0.000146,"return_value":{"class":"Class","value":"ReviewableUserSerializer","object_id":70097816935560}},{"id":119051,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":12225948,"value":"reviewable","kind":"req"},{"name":"object","class":"ReviewableUser","object_id":70097793754120,"value":"#<ReviewableUser:0x00007f81d4314810>","kind":"req"},{"name":"event","class":"Symbol","object_id":12688668,"value":"reviewable_created","kind":"req"},{"name":"serializer","class":"Class","object_id":70097816935560,"value":"ReviewableUserSerializer","kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":119052,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":12225948,"value":"reviewable","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":119053,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":119052,"elapsed":0.000249,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81d694ade0>","object_id":70097813788400}},{"id":119054,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'reviewable') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119055,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119054,"elapsed":0.001397},{"id":119056,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":119051,"elapsed":0.005046},{"id":119057,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"needs_review!","path":"app/models/reviewable.rb","lineno":124,"static":true,"thread_id":70097708498960,"parent_id":119022,"elapsed":0.02816,"return_value":{"class":"ReviewableUser","value":"#<ReviewableUser:0x00007f81d4314810>","object_id":70097793754120}},{"id":119058,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"types","path":"app/models/reviewable_score.rb","lineno":11,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":119059,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"types","path":"app/models/reviewable_score.rb","lineno":11,"static":true,"thread_id":70097708498960,"parent_id":119058,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:off_topic=>3, :inappropriate=>4, :spam=>8, :notify_user=>6, :notify_moderators=>7, :needs_approval","object_id":70097611954200}},{"id":119060,"event":"call","defined_class":"Reviewable","method_id":"add_score","path":"app/models/reviewable.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>","kind":"req"},{"name":"reviewable_score_type","class":"Integer","object_id":19,"value":"9","kind":"req"},{"name":"reason","class":"Hash","object_id":70097795708360,"value":"{:reason=>:must_approve_users, :force_review=>true}","kind":"key"},{"name":"created_at","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"take_action","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"meta_topic_id","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"force_review","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"ReviewableUser","object_id":70097793754120,"value":"#<ReviewableUser:0x00007f81d4314810>"}},{"id":119061,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"post_action_types\".\"score_bonus\" FROM \"post_action_types\" WHERE \"post_action_types\".\"id\" = 9","database_type":"postgres","server_version":110006}},{"id":119062,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119061,"elapsed":0.001014},{"id":119063,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"user_accuracy_bonus","path":"app/models/reviewable_score.rb","lineno":70,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>","kind":"req"}],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":119064,"event":"call","defined_class":"User","method_id":"bot?","path":"app/models/user.rb","lineno":317,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>"}},{"id":119065,"event":"call","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>"}},{"id":119066,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user_id","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":119067,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parent_id":119066,"elapsed":3.0e-06},{"id":119068,"event":"return","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parent_id":119065,"elapsed":0.000132},{"id":119069,"event":"return","defined_class":"User","method_id":"bot?","path":"app/models/user.rb","lineno":317,"static":false,"thread_id":70097708498960,"parent_id":119064,"elapsed":0.000233,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119070,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"user_accuracy_bonus","path":"app/models/reviewable_score.rb","lineno":70,"static":true,"thread_id":70097708498960,"parent_id":119063,"elapsed":0.00037,"return_value":{"class":"Float","value":"0.0","object_id":-9223372036854775806}},{"id":119071,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"calculate_score","path":"app/models/reviewable_score.rb","lineno":55,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>","kind":"req"},{"name":"type_bonus","class":"Integer","object_id":1,"value":"0","kind":"req"},{"name":"take_action_bonus","class":"Float","object_id":-9223372036854775806,"value":"0.0","kind":"req"}],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":119072,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"user_flag_score","path":"app/models/reviewable_score.rb","lineno":63,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>","kind":"req"}],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":119073,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>"}},{"id":119074,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":119073,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119075,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"user_accuracy_bonus","path":"app/models/reviewable_score.rb","lineno":70,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>","kind":"req"}],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":119076,"event":"call","defined_class":"User","method_id":"bot?","path":"app/models/user.rb","lineno":317,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>"}},{"id":119077,"event":"call","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097757843440,"value":"#<User:0x00007f81cfe95fe0>"}},{"id":119078,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user_id","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":119079,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parent_id":119078,"elapsed":4.0e-06},{"id":119080,"event":"return","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parent_id":119077,"elapsed":0.000114},{"id":119081,"event":"return","defined_class":"User","method_id":"bot?","path":"app/models/user.rb","lineno":317,"static":false,"thread_id":70097708498960,"parent_id":119076,"elapsed":0.000213,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119082,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"user_accuracy_bonus","path":"app/models/reviewable_score.rb","lineno":70,"static":true,"thread_id":70097708498960,"parent_id":119075,"elapsed":0.00032,"return_value":{"class":"Float","value":"0.0","object_id":-9223372036854775806}},{"id":119083,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"user_flag_score","path":"app/models/reviewable_score.rb","lineno":63,"static":true,"thread_id":70097708498960,"parent_id":119072,"elapsed":0.000562,"return_value":{"class":"Float","value":"6.0","object_id":54043195528445954}},{"id":119084,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"calculate_score","path":"app/models/reviewable_score.rb","lineno":55,"static":true,"thread_id":70097708498960,"parent_id":119071,"elapsed":0.000675,"return_value":{"class":"Float","value":"6.0","object_id":54043195528445954}},{"id":119085,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parameters":[{"name":"priority","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119086,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119087,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parent_id":119086,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:low=>0, :medium=>5, :high=>10}","object_id":70097794689200}},{"id":119088,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"plugin_store_rows\".* FROM \"plugin_store_rows\" WHERE \"plugin_store_rows\".\"plugin_name\" = 'reviewables' AND \"plugin_store_rows\".\"key\" = 'priority_0' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119089,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119088,"elapsed":0.001185},{"id":119090,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parent_id":119085,"elapsed":0.00366,"return_value":{"class":"Float","value":"0.0","object_id":-9223372036854775806}},{"id":119091,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":119092,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parent_id":119091,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:pending=>0, :agreed=>1, :disagreed=>2, :ignored=>3}","object_id":70097732890840}},{"id":119093,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119094,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119093,"elapsed":0.00094},{"id":119095,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"reviewable_scores\" (\"reviewable_id\", \"user_id\", \"reviewable_score_type\", \"status\", \"score\", \"created_at\", \"updated_at\", \"reason\") VALUES (46, -1, 9, 0, 6.0, '2020-05-28 18:50:44.998101', '2020-05-28 18:50:45.001875', 'must_approve_users') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":119096,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119095,"elapsed":0.001063},{"id":119097,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119098,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119097,"elapsed":0.000729},{"id":119099,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119100,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119099,"elapsed":0.00081},{"id":119101,"event":"call","defined_class":"Reviewable","method_id":"apply_review_group","path":"app/models/reviewable.rb","lineno":283,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097793754120,"value":"#<ReviewableUser:0x00007f81d4314810>"}},{"id":119102,"event":"return","defined_class":"Reviewable","method_id":"apply_review_group","path":"app/models/reviewable.rb","lineno":283,"static":false,"thread_id":70097708498960,"parent_id":119101,"elapsed":1.2e-05},{"id":119103,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"reviewables\" SET \"score\" = 6.0, \"latest_score\" = '2020-05-28 18:50:44.998101', \"updated_at\" = '2020-05-28 18:50:45.011807' WHERE \"reviewables\".\"id\" = 46","database_type":"postgres","server_version":110006}},{"id":119104,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119103,"elapsed":0.001325},{"id":119105,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119106,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119105,"elapsed":0.000867},{"id":119107,"event":"call","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097793754120,"value":"#<ReviewableUser:0x00007f81d4314810>"}},{"id":119108,"event":"return","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":119107,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119109,"event":"call","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parameters":[{"name":"job","class":"Symbol","object_id":17527068,"value":"notify_reviewable","kind":"req"},{"name":"opts","class":"Hash","object_id":70097816619020,"value":"{:reviewable_id=>46}","kind":"opt"}],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119110,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119111,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119110,"elapsed":4.0e-06},{"id":119112,"event":"return","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parent_id":119109,"elapsed":0.000135},{"id":119113,"event":"return","defined_class":"Reviewable","method_id":"add_score","path":"app/models/reviewable.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":119060,"elapsed":0.029806,"return_value":{"class":"ReviewableScore","value":"#<ReviewableScore:0x00007f81ccc98b28>","object_id":70097731634580}},{"id":119114,"event":"return","defined_class":"Jobs::CreateUserReviewable","method_id":"execute","path":"app/jobs/regular/create_user_reviewable.rb","lineno":6,"static":false,"thread_id":70097708498960,"parent_id":119013,"elapsed":0.072184,"return_value":{"class":"ReviewableScore","value":"#<ReviewableScore:0x00007f81ccc98b28>","object_id":70097731634580}},{"id":119115,"event":"return","defined_class":"Jobs::Base","method_id":"perform","path":"app/jobs/base.rb","lineno":187,"static":false,"thread_id":70097708498960,"parent_id":119010,"elapsed":0.07251,"return_value":{"class":"ReviewableScore","value":"#<ReviewableScore:0x00007f81ccc98b28>","object_id":70097731634580}},{"id":119116,"event":"call","defined_class":"Jobs::Base","method_id":"perform","path":"app/jobs/base.rb","lineno":187,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"Hash","object_id":70097813702740,"value":"{:reviewable_id=>46, :current_site_id=>\"default\", :sync_exec=>true}","kind":"rest"}],"receiver":{"class":"Jobs::NotifyReviewable","object_id":70097816652440,"value":"#<Jobs::NotifyReviewable:0x00007f81d6ec1530>"}},{"id":119117,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119118,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119117,"elapsed":3.0e-06},{"id":119119,"event":"call","defined_class":"Jobs::NotifyReviewable","method_id":"execute","path":"app/jobs/regular/notify_reviewable.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"ActiveSupport::HashWithIndifferentAccess","object_id":70097816673400,"value":"{\"reviewable_id\"=>46, \"current_site_id\"=>\"default\"}","kind":"req"}],"receiver":{"class":"Jobs::NotifyReviewable","object_id":70097816652440,"value":"#<Jobs::NotifyReviewable:0x00007f81d6ec1530>"}},{"id":119120,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"reviewables\".* FROM \"reviewables\" WHERE \"reviewables\".\"id\" = 46 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119121,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119120,"elapsed":0.001066},{"id":119122,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119123,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parameters":[{"name":"priority","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119124,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119125,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parent_id":119124,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:low=>0, :medium=>5, :high=>10}","object_id":70097794689200}},{"id":119126,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"plugin_store_rows\".* FROM \"plugin_store_rows\" WHERE \"plugin_store_rows\".\"plugin_name\" = 'reviewables' AND \"plugin_store_rows\".\"key\" = 'priority_0' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119127,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119126,"elapsed":0.001065},{"id":119128,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parent_id":119123,"elapsed":0.003199,"return_value":{"class":"Float","value":"0.0","object_id":-9223372036854775806}},{"id":119129,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parent_id":119122,"elapsed":0.003465,"return_value":{"class":"ActiveRecord::Relation","value":"#<Reviewable::ActiveRecord_Relation:0x00007f81bc119208>","object_id":70097591388420}},{"id":119130,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"reviewables\" WHERE (score >= 0.0) AND \"reviewables\".\"status\" = 0","database_type":"postgres","server_version":110006}},{"id":119131,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119130,"elapsed":0.00131},{"id":119132,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".\"id\" FROM \"users\" WHERE \"users\".\"admin\" = TRUE","database_type":"postgres","server_version":110006}},{"id":119133,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119132,"elapsed":0.001187},{"id":119134,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".\"id\" FROM \"users\" WHERE (id NOT IN (-1,140)) AND \"users\".\"moderator\" = TRUE","database_type":"postgres","server_version":110006}},{"id":119135,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119134,"elapsed":0.001189},{"id":119136,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119137,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parameters":[{"name":"priority","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119138,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119139,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parent_id":119138,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:low=>0, :medium=>5, :high=>10}","object_id":70097794689200}},{"id":119140,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"plugin_store_rows\".* FROM \"plugin_store_rows\" WHERE \"plugin_store_rows\".\"plugin_name\" = 'reviewables' AND \"plugin_store_rows\".\"key\" = 'priority_0' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119141,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119140,"elapsed":0.001024},{"id":119142,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parent_id":119137,"elapsed":0.002988,"return_value":{"class":"Float","value":"0.0","object_id":-9223372036854775806}},{"id":119143,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parent_id":119136,"elapsed":0.003189,"return_value":{"class":"ActiveRecord::Relation","value":"#<Reviewable::ActiveRecord_Relation:0x00007f81bc608688>","object_id":70097593975620}},{"id":119144,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"reviewables\" WHERE (score >= 0.0) AND \"reviewables\".\"status\" = 0 AND \"reviewables\".\"reviewable_by_moderator\" = TRUE","database_type":"postgres","server_version":110006}},{"id":119145,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119144,"elapsed":0.00125},{"id":119146,"event":"return","defined_class":"Jobs::NotifyReviewable","method_id":"execute","path":"app/jobs/regular/notify_reviewable.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":119119,"elapsed":0.024295},{"id":119147,"event":"return","defined_class":"Jobs::Base","method_id":"perform","path":"app/jobs/base.rb","lineno":187,"static":false,"thread_id":70097708498960,"parent_id":119116,"elapsed":0.024629},{"id":119148,"event":"call","defined_class":"Jobs::Base","method_id":"perform","path":"app/jobs/base.rb","lineno":187,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"Hash","object_id":70097816619020,"value":"{:reviewable_id=>46, :current_site_id=>\"default\", :sync_exec=>true}","kind":"rest"}],"receiver":{"class":"Jobs::NotifyReviewable","object_id":70097587224060,"value":"#<Jobs::NotifyReviewable:0x00007f81bb927bf8>"}},{"id":119149,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119150,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119149,"elapsed":3.0e-06},{"id":119151,"event":"call","defined_class":"Jobs::NotifyReviewable","method_id":"execute","path":"app/jobs/regular/notify_reviewable.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"ActiveSupport::HashWithIndifferentAccess","object_id":70097587222760,"value":"{\"reviewable_id\"=>46, \"current_site_id\"=>\"default\"}","kind":"req"}],"receiver":{"class":"Jobs::NotifyReviewable","object_id":70097587224060,"value":"#<Jobs::NotifyReviewable:0x00007f81bb927bf8>"}},{"id":119152,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"reviewables\".* FROM \"reviewables\" WHERE \"reviewables\".\"id\" = 46 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119153,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119152,"elapsed":0.001148},{"id":119154,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119155,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parameters":[{"name":"priority","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119156,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119157,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parent_id":119156,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:low=>0, :medium=>5, :high=>10}","object_id":70097794689200}},{"id":119158,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"plugin_store_rows\".* FROM \"plugin_store_rows\" WHERE \"plugin_store_rows\".\"plugin_name\" = 'reviewables' AND \"plugin_store_rows\".\"key\" = 'priority_0' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119159,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119158,"elapsed":0.001027},{"id":119160,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parent_id":119155,"elapsed":0.002993,"return_value":{"class":"Float","value":"0.0","object_id":-9223372036854775806}},{"id":119161,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parent_id":119154,"elapsed":0.003205,"return_value":{"class":"ActiveRecord::Relation","value":"#<Reviewable::ActiveRecord_Relation:0x00007f81d4ae2c68>","object_id":70097797846580}},{"id":119162,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"reviewables\" WHERE (score >= 0.0) AND \"reviewables\".\"status\" = 0","database_type":"postgres","server_version":110006}},{"id":119163,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119162,"elapsed":0.001271},{"id":119164,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".\"id\" FROM \"users\" WHERE \"users\".\"admin\" = TRUE","database_type":"postgres","server_version":110006}},{"id":119165,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119164,"elapsed":0.00108},{"id":119166,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".\"id\" FROM \"users\" WHERE (id NOT IN (-1,140)) AND \"users\".\"moderator\" = TRUE","database_type":"postgres","server_version":110006}},{"id":119167,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119166,"elapsed":0.001303},{"id":119168,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119169,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parameters":[{"name":"priority","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119170,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119171,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parent_id":119170,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:low=>0, :medium=>5, :high=>10}","object_id":70097794689200}},{"id":119172,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"plugin_store_rows\".* FROM \"plugin_store_rows\" WHERE \"plugin_store_rows\".\"plugin_name\" = 'reviewables' AND \"plugin_store_rows\".\"key\" = 'priority_0' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119173,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119172,"elapsed":0.001288},{"id":119174,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parent_id":119169,"elapsed":0.00342,"return_value":{"class":"Float","value":"0.0","object_id":-9223372036854775806}},{"id":119175,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parent_id":119168,"elapsed":0.003667,"return_value":{"class":"ActiveRecord::Relation","value":"#<Reviewable::ActiveRecord_Relation:0x00007f81b92f3360>","object_id":70097567193520}},{"id":119176,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"reviewables\" WHERE (score >= 0.0) AND \"reviewables\".\"status\" = 0 AND \"reviewables\".\"reviewable_by_moderator\" = TRUE","database_type":"postgres","server_version":110006}},{"id":119177,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119176,"elapsed":0.001158},{"id":119178,"event":"return","defined_class":"Jobs::NotifyReviewable","method_id":"execute","path":"app/jobs/regular/notify_reviewable.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":119151,"elapsed":0.024134},{"id":119179,"event":"return","defined_class":"Jobs::Base","method_id":"perform","path":"app/jobs/base.rb","lineno":187,"static":false,"thread_id":70097708498960,"parent_id":119148,"elapsed":0.024459},{"id":119180,"event":"return","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parent_id":119007,"elapsed":0.122183},{"id":119181,"event":"return","defined_class":"User","method_id":"create_reviewable","path":"app/models/user.rb","lineno":1253,"static":false,"thread_id":70097708498960,"parent_id":119006,"elapsed":0.122368},{"id":119182,"event":"return","defined_class":"User","method_id":"activate","path":"app/models/user.rb","lineno":934,"static":false,"thread_id":70097708498960,"parent_id":118885,"elapsed":0.235397},{"id":119183,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097567552200,"value":"#<TestCurrentUserProvider:0x00007f81b93a2590>"}},{"id":119184,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097567550420,"value":"5c63f568643d7b79a8d0a171b9f3db00","kind":"req"},{"name":"opts","class":"Hash","object_id":70097567550040,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":119185,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097567550420,"value":"5c63f568643d7b79a8d0a171b9f3db00","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":119186,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":119187,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":119186,"elapsed":8.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":119188,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":119185,"elapsed":0.000137,"return_value":{"class":"String","value":"6iDvbzf8iO771mHShucOT+z9ilE=","object_id":70097567570460}},{"id":119189,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = '6iDvbzf8iO771mHShucOT+z9ilE=' OR\n                          prev_auth_token = '6iDvbzf8iO771mHShucOT+z9ilE=') AND rotated_at > '2020-03-29 18:50:45.071451') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119190,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119189,"elapsed":0.001079},{"id":119191,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 18:50:45.077060' WHERE \"user_auth_tokens\".\"id\" = 406 AND \"user_auth_tokens\".\"auth_token\" = '6iDvbzf8iO771mHShucOT+z9ilE='","database_type":"postgres","server_version":110006}},{"id":119192,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119191,"elapsed":0.001586},{"id":119193,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097798245540,"value":"{:action=>\"seen token\", :user_auth_token_id=>406, :user_id=>140, :auth_token=>\"6iDvbzf8iO771mHShucOT","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":119194,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119195,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119194,"elapsed":0.001292},{"id":119196,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 406, 140, '127.0.0.1/32', '6iDvbzf8iO771mHShucOT+z9ilE=', '2020-05-28 18:50:45.081961') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":119197,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119196,"elapsed":0.001057},{"id":119198,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119199,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119198,"elapsed":0.00086},{"id":119200,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":119193,"elapsed":0.012904,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81d4ba4e08>","object_id":70097798244100}},{"id":119201,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":119184,"elapsed":0.023522,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81d1005078>","object_id":70097766983740}},{"id":119202,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 140 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119203,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119202,"elapsed":0.001352},{"id":119204,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>"}},{"id":119205,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":119204,"elapsed":1.7e-05},{"id":119206,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097567552200,"value":"#<TestCurrentUserProvider:0x00007f81b93a2590>"}},{"id":119207,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":119206,"elapsed":0.000842,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119208,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>"}},{"id":119209,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":119208,"elapsed":0.000843},{"id":119210,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097799264660,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>"}},{"id":119211,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 140","database_type":"postgres","server_version":110006}},{"id":119212,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119211,"elapsed":0.00119},{"id":119213,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":119210,"elapsed":0.003732,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119214,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119183,"elapsed":0.03444,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119215,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097567552200,"value":"#<TestCurrentUserProvider:0x00007f81b93a2590>"}},{"id":119216,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119215,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119217,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>"}},{"id":119218,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":119217,"elapsed":1.4e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119219,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":119220,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":119219,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":119221,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":119222,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":119221,"elapsed":1.0e-05},{"id":119223,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"PUT","path_info":"/admin/users/165/approve.json"},"message":[{"name":"controller","class":"String","value":"admin/users","object_id":70097793791760},{"name":"action","class":"String","value":"approve","object_id":70097783392820},{"name":"user_id","class":"String","value":"165","object_id":70097567552500},{"name":"format","class":"String","value":"json","object_id":70097567552480}]},{"id":119224,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119225,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119226,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119227,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119228,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119227,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119229,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":119226,"elapsed":0.000127,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d83935a8>","object_id":70097827568340}},{"id":119230,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097827568340,"value":"#<Guardian:0x00007f81d83935a8>"}},{"id":119231,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":119230,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119232,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":119225,"elapsed":0.000357},{"id":119233,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119234,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119233,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119235,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 140 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119236,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119235,"elapsed":0.001289},{"id":119237,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119238,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":119237,"elapsed":7.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d83935a8>","object_id":70097827568340}},{"id":119239,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097612390740,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097827568340,"value":"#<Guardian:0x00007f81d83935a8>"}},{"id":119240,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":119239,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119241,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":119224,"elapsed":0.005919,"return_value":{"class":"Array","value":"[2]","object_id":70097612390740}},{"id":119242,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119243,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119244,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119243,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119245,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119246,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119245,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119247,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119248,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119247,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119249,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":119242,"elapsed":0.00039,"return_value":{"class":"String","value":"users/approve","object_id":70097612427820}},{"id":119250,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119251,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119252,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119251,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119253,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":119250,"elapsed":0.000119},{"id":119254,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119255,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119256,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119255,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119257,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119258,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119257,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119259,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>"}},{"id":119260,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":119259,"elapsed":1.4e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":119261,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":119262,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":119261,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":119263,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":119264,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":119263,"elapsed":1.2e-05},{"id":119265,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":119266,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":119265,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":119267,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":119268,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":119267,"elapsed":7.0e-06},{"id":119269,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":119254,"elapsed":0.000759,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097612458160}},{"id":119270,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119271,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":119270,"elapsed":9.0e-06},{"id":119272,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119273,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119274,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119273,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119275,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":119272,"elapsed":0.000103},{"id":119276,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119277,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119276,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119278,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119279,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119278,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119280,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119281,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119280,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119282,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703976700,"value":"Admin::UsersController"}},{"id":119283,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":119282,"elapsed":3.0e-06},{"id":119284,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119285,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":119284,"elapsed":7.0e-06},{"id":119286,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119287,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119288,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119287,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119289,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":119286,"elapsed":0.000102},{"id":119290,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119291,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119292,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119291,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119293,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":119290,"elapsed":9.7e-05},{"id":119294,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119295,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119294,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119296,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119297,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119296,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119298,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>"}},{"id":119299,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":119298,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119300,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119301,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119300,"elapsed":0.001309},{"id":119302,"event":"call","defined_class":"Admin::UsersController","method_id":"approve","path":"app/controllers/admin/users_controller.rb","lineno":280,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119303,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119304,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":119303,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d83935a8>","object_id":70097827568340}},{"id":119305,"event":"call","defined_class":"EnsureMagic","method_id":"method_missing","path":"lib/guardian/ensure_magic.rb","lineno":6,"static":false,"thread_id":70097708498960,"parameters":[{"name":"method","class":"Symbol","object_id":16765108,"value":"ensure_can_approve!","kind":"req"},{"name":"args","class":"User","object_id":70097608135340,"value":"#<User:0x00007f81be10a558>","kind":"rest"},{"name":"block","class":"NilClass","object_id":8,"value":null,"kind":"block"}],"receiver":{"class":"Guardian","object_id":70097827568340,"value":"#<Guardian:0x00007f81d83935a8>"}},{"id":119306,"event":"call","defined_class":"Guardian","method_id":"can_approve?","path":"lib/guardian.rb","lineno":260,"static":false,"thread_id":70097708498960,"parameters":[{"name":"target","class":"User","object_id":70097608135340,"value":"#<User:0x00007f81be10a558>","kind":"req"}],"receiver":{"class":"Guardian","object_id":70097827568340,"value":"#<Guardian:0x00007f81d83935a8>"}},{"id":119307,"event":"call","defined_class":"Guardian","method_id":"is_staff?","path":"lib/guardian.rb","lineno":88,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097827568340,"value":"#<Guardian:0x00007f81d83935a8>"}},{"id":119308,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>"}},{"id":119309,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":119308,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119310,"event":"return","defined_class":"Guardian","method_id":"is_staff?","path":"lib/guardian.rb","lineno":88,"static":false,"thread_id":70097708498960,"parent_id":119307,"elapsed":0.000106,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119311,"event":"return","defined_class":"Guardian","method_id":"can_approve?","path":"lib/guardian.rb","lineno":260,"static":false,"thread_id":70097708498960,"parent_id":119306,"elapsed":0.000223,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119312,"event":"return","defined_class":"EnsureMagic","method_id":"method_missing","path":"lib/guardian/ensure_magic.rb","lineno":6,"static":false,"thread_id":70097708498960,"parent_id":119305,"elapsed":0.000339},{"id":119313,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"reviewables\".* FROM \"reviewables\" WHERE \"reviewables\".\"type\" = 'ReviewableUser' AND \"reviewables\".\"target_type\" = 'User' AND \"reviewables\".\"target_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119314,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119313,"elapsed":0.001047},{"id":119315,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119316,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119315,"elapsed":6.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119317,"event":"call","defined_class":"Reviewable","method_id":"perform","path":"app/models/reviewable.rb","lineno":337,"static":false,"thread_id":70097708498960,"parameters":[{"name":"performed_by","class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>","kind":"req"},{"name":"action_id","class":"Symbol","object_id":12279708,"value":"approve_user","kind":"req"},{"name":"args","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119318,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"action_aliases","path":"app/models/reviewable.rb","lineno":41,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097586690280,"value":"ReviewableUser"}},{"id":119319,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"action_aliases","path":"app/models/reviewable.rb","lineno":41,"static":true,"thread_id":70097708498960,"parent_id":119318,"elapsed":3.0e-06,"return_value":{"class":"Hash","value":"{}","object_id":70097587735140}},{"id":119320,"event":"call","defined_class":"Reviewable","method_id":"actions_for","path":"app/models/reviewable.rb","lineno":291,"static":false,"thread_id":70097708498960,"parameters":[{"name":"guardian","class":"Guardian","object_id":70097587733560,"value":"#<Guardian:0x00007f81bba20870>","kind":"req"},{"name":"args","class":"Hash","object_id":70097587738580,"value":"{}","kind":"opt"}],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119321,"event":"call","defined_class":"ReviewableUser","method_id":"build_actions","path":"app/models/reviewable_user.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[{"name":"actions","class":"Reviewable::Actions","object_id":70097587755920,"value":"#<Reviewable::Actions:0x00007f81bba2b720>","kind":"req"},{"name":"guardian","class":"Guardian","object_id":70097587733560,"value":"#<Guardian:0x00007f81bba20870>","kind":"req"},{"name":"args","class":"Hash","object_id":70097587738580,"value":"{}","kind":"req"}],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119322,"event":"call","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119323,"event":"return","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":119322,"elapsed":1.6e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119324,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119325,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119324,"elapsed":0.001339},{"id":119326,"event":"call","defined_class":"Guardian","method_id":"can_approve?","path":"lib/guardian.rb","lineno":260,"static":false,"thread_id":70097708498960,"parameters":[{"name":"target","class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>","kind":"req"}],"receiver":{"class":"Guardian","object_id":70097587733560,"value":"#<Guardian:0x00007f81bba20870>"}},{"id":119327,"event":"call","defined_class":"Guardian","method_id":"is_staff?","path":"lib/guardian.rb","lineno":88,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097587733560,"value":"#<Guardian:0x00007f81bba20870>"}},{"id":119328,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>"}},{"id":119329,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":119328,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119330,"event":"return","defined_class":"Guardian","method_id":"is_staff?","path":"lib/guardian.rb","lineno":88,"static":false,"thread_id":70097708498960,"parent_id":119327,"elapsed":0.000112,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119331,"event":"return","defined_class":"Guardian","method_id":"can_approve?","path":"lib/guardian.rb","lineno":260,"static":false,"thread_id":70097708498960,"parent_id":119326,"elapsed":0.000235,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119332,"event":"return","defined_class":"ReviewableUser","method_id":"build_actions","path":"app/models/reviewable_user.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":119321,"elapsed":0.005579,"return_value":{"class":"Array","value":"[#<Reviewable::Actions::Action:0x00007f81be9db290 @id=:reject_user_delete, @icon=\"user-times\", @butt","object_id":70097612757480}},{"id":119333,"event":"return","defined_class":"Reviewable","method_id":"actions_for","path":"app/models/reviewable.rb","lineno":291,"static":false,"thread_id":70097708498960,"parent_id":119320,"elapsed":0.005735,"return_value":{"class":"Reviewable::Actions","value":"#<Reviewable::Actions:0x00007f81bba2b720>","object_id":70097587755920}},{"id":119334,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119335,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119334,"elapsed":0.000832},{"id":119336,"event":"call","defined_class":"ReviewableUser","method_id":"perform_approve_user","path":"app/models/reviewable_user.rb","lineno":39,"static":false,"thread_id":70097708498960,"parameters":[{"name":"performed_by","class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>","kind":"req"},{"name":"args","class":"Hash","object_id":70097587738580,"value":"{}","kind":"req"}],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119337,"event":"call","defined_class":"ReviewableUser(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"set_approved_fields!","path":"app/models/reviewable_user.rb","lineno":91,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>","kind":"req"},{"name":"approved_by","class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>","kind":"req"}],"receiver":{"class":"Class","object_id":70097586690280,"value":"ReviewableUser"}},{"id":119338,"event":"return","defined_class":"ReviewableUser(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"set_approved_fields!","path":"app/models/reviewable_user.rb","lineno":91,"static":true,"thread_id":70097708498960,"parent_id":119337,"elapsed":9.2e-05,"return_value":{"class":"Time","value":"2020-05-28 18:50:45 UTC","object_id":70097799653960}},{"id":119339,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_emails\".\"id\", \"user_emails\".\"user_id\", \"user_emails\".\"email\", \"user_emails\".\"primary\", \"user_emails\".\"created_at\", \"user_emails\".\"updated_at\" FROM \"user_emails\" WHERE \"user_emails\".\"user_id\" = 165 AND \"user_emails\".\"primary\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119340,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119339,"elapsed":0.001005},{"id":119341,"event":"call","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>"}},{"id":119342,"event":"return","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parent_id":119341,"elapsed":2.6e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119343,"event":"call","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>"}},{"id":119344,"event":"call","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":727708,"value":"password","kind":"req"},{"name":"value","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"PasswordValidator","object_id":70097612905020,"value":"#<PasswordValidator:0x00007f81bea23478>"}},{"id":119345,"event":"call","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>"}},{"id":119346,"event":"call","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>"}},{"id":119347,"event":"return","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parent_id":119346,"elapsed":4.0e-06},{"id":119348,"event":"return","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parent_id":119345,"elapsed":0.000101},{"id":119349,"event":"return","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":119344,"elapsed":0.000198},{"id":119350,"event":"return","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parent_id":119343,"elapsed":0.000315},{"id":119351,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE \"user_emails\".\"primary\" = TRUE AND \"user_emails\".\"id\" != 166 AND \"user_emails\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119352,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119351,"elapsed":0.001171},{"id":119353,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"approved\" = TRUE, \"approved_by_id\" = 140, \"approved_at\" = '2020-05-28 18:50:45.137502', \"updated_at\" = '2020-05-28 18:50:45.149942' WHERE \"users\".\"id\" = 165","database_type":"postgres","server_version":110006}},{"id":119354,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119353,"elapsed":0.001308},{"id":119355,"event":"call","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>"}},{"id":119356,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user_id","class":"Integer","object_id":331,"value":"165","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":119357,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parent_id":119356,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119358,"event":"return","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parent_id":119355,"elapsed":0.000144,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119359,"event":"call","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parameters":[{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>"}},{"id":119360,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>"}},{"id":119361,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":119360,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119362,"event":"return","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parent_id":119359,"elapsed":9.9e-05},{"id":119363,"event":"call","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>"}},{"id":119364,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_avatars\".* FROM \"user_avatars\" WHERE \"user_avatars\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119365,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119364,"elapsed":0.001063},{"id":119366,"event":"return","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parent_id":119363,"elapsed":0.005138},{"id":119367,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097568739700,"value":"{:user=>#<User id: 165, username: \"eviltrout\", created_at: \"2020-05-28 18:50:44\", updated_at: \"2020-","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":119368,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":119367,"elapsed":9.0e-06},{"id":119369,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":119370,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":119369,"elapsed":4.0e-06},{"id":119371,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"},{"name":"object","class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>","kind":"req"},{"name":"event","class":"Symbol","object_id":12690908,"value":"user_approved","kind":"req"},{"name":"serializer","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":119372,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":119373,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":119372,"elapsed":0.000223,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81b95fd9e8>","object_id":70097568787700}},{"id":119374,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'user') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119375,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119374,"elapsed":0.001838},{"id":119376,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":119371,"elapsed":0.005957},{"id":119377,"event":"call","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parameters":[{"name":"job","class":"Symbol","object_id":16758108,"value":"critical_user_email","kind":"req"},{"name":"opts","class":"Hash","object_id":70097800364920,"value":"{:type=>:signup_after_approval, :user_id=>165}","kind":"opt"}],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119378,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119379,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119378,"elapsed":4.0e-06},{"id":119380,"event":"call","defined_class":"Jobs::Base","method_id":"perform","path":"app/jobs/base.rb","lineno":187,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"Hash","object_id":70097800364920,"value":"{:type=>:signup_after_approval, :user_id=>165, :current_site_id=>\"default\", :sync_exec=>true}","kind":"rest"}],"receiver":{"class":"Jobs::CriticalUserEmail","object_id":70097800377180,"value":"#<Jobs::CriticalUserEmail:0x00007f81d4fb66b8>"}},{"id":119381,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119382,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119381,"elapsed":4.0e-06},{"id":119383,"event":"call","defined_class":"Jobs::CriticalUserEmail","method_id":"execute","path":"app/jobs/regular/critical_user_email.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"ActiveSupport::HashWithIndifferentAccess","object_id":70097800374860,"value":"{\"type\"=>:signup_after_approval, \"user_id\"=>165, \"current_site_id\"=>\"default\"}","kind":"req"}],"receiver":{"class":"Jobs::CriticalUserEmail","object_id":70097800377180,"value":"#<Jobs::CriticalUserEmail:0x00007f81d4fb66b8>"}},{"id":119384,"event":"call","defined_class":"Jobs::UserEmail","method_id":"execute","path":"app/jobs/regular/user_email.rb","lineno":17,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"ActiveSupport::HashWithIndifferentAccess","object_id":70097800374860,"value":"{\"type\"=>:signup_after_approval, \"user_id\"=>165, \"current_site_id\"=>\"default\"}","kind":"req"}],"receiver":{"class":"Jobs::CriticalUserEmail","object_id":70097800377180,"value":"#<Jobs::CriticalUserEmail:0x00007f81d4fb66b8>"}},{"id":119385,"event":"call","defined_class":"Jobs::CriticalUserEmail","method_id":"quit_email_early?","path":"app/jobs/regular/critical_user_email.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Jobs::CriticalUserEmail","object_id":70097800377180,"value":"#<Jobs::CriticalUserEmail:0x00007f81d4fb66b8>"}},{"id":119386,"event":"return","defined_class":"Jobs::CriticalUserEmail","method_id":"quit_email_early?","path":"app/jobs/regular/critical_user_email.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":119385,"elapsed":3.0e-06},{"id":119387,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119388,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119387,"elapsed":0.001234},{"id":119389,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_emails\".\"id\", \"user_emails\".\"user_id\", \"user_emails\".\"email\", \"user_emails\".\"primary\", \"user_emails\".\"created_at\", \"user_emails\".\"updated_at\" FROM \"user_emails\" WHERE \"user_emails\".\"user_id\" = 165 AND \"user_emails\".\"primary\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119390,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119389,"elapsed":0.001047},{"id":119391,"event":"call","defined_class":"Jobs::UserEmail","method_id":"set_skip_context","path":"app/jobs/regular/user_email.rb","lineno":74,"static":false,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":70097720705620,"value":"signup_after_approval","kind":"req"},{"name":"user_id","class":"Integer","object_id":331,"value":"165","kind":"req"},{"name":"to_address","class":"String","object_id":70097569247960,"value":"eviltrout@somewhere.com","kind":"req"},{"name":"post_id","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"Jobs::CriticalUserEmail","object_id":70097800377180,"value":"#<Jobs::CriticalUserEmail:0x00007f81d4fb66b8>"}},{"id":119392,"event":"return","defined_class":"Jobs::UserEmail","method_id":"set_skip_context","path":"app/jobs/regular/user_email.rb","lineno":74,"static":false,"thread_id":70097708498960,"parent_id":119391,"elapsed":7.0e-06,"return_value":{"class":"Hash","value":"{:type=>:signup_after_approval, :user_id=>165, :to_address=>\"eviltrout@somewhere.com\", :post_id=>nil","object_id":70097569245780}},{"id":119393,"event":"call","defined_class":"Jobs::UserEmail","method_id":"message_for_email","path":"app/jobs/regular/user_email.rb","lineno":86,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097829078900,"value":"#<User:0x00007f81d8674ee8>","kind":"req"},{"name":"post","class":"NilClass","object_id":8,"value":null,"kind":"req"},{"name":"type","class":"Symbol","object_id":70097720705620,"value":"signup_after_approval","kind":"req"},{"name":"notification","class":"NilClass","object_id":8,"value":null,"kind":"req"},{"name":"args","class":"ActiveSupport::HashWithIndifferentAccess","object_id":70097800374860,"value":"{\"type\"=>:signup_after_approval, \"user_id\"=>165, \"current_site_id\"=>\"default\"}","kind":"opt"}],"receiver":{"class":"Jobs::CriticalUserEmail","object_id":70097800377180,"value":"#<Jobs::CriticalUserEmail:0x00007f81d4fb66b8>"}},{"id":119394,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829078900,"value":"#<User:0x00007f81d8674ee8>"}},{"id":119395,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":119394,"elapsed":9.0e-06,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097569247960}},{"id":119396,"event":"call","defined_class":"Jobs::UserEmail","method_id":"set_skip_context","path":"app/jobs/regular/user_email.rb","lineno":74,"static":false,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":70097720705620,"value":"signup_after_approval","kind":"req"},{"name":"user_id","class":"Integer","object_id":331,"value":"165","kind":"req"},{"name":"to_address","class":"String","object_id":70097569247960,"value":"eviltrout@somewhere.com","kind":"req"},{"name":"post_id","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"Jobs::CriticalUserEmail","object_id":70097800377180,"value":"#<Jobs::CriticalUserEmail:0x00007f81d4fb66b8>"}},{"id":119397,"event":"return","defined_class":"Jobs::UserEmail","method_id":"set_skip_context","path":"app/jobs/regular/user_email.rb","lineno":74,"static":false,"thread_id":70097708498960,"parent_id":119396,"elapsed":3.0e-06,"return_value":{"class":"Hash","value":"{:type=>:signup_after_approval, :user_id=>165, :to_address=>\"eviltrout@somewhere.com\", :post_id=>nil","object_id":70097569262260}},{"id":119398,"event":"call","defined_class":"User","method_id":"anonymous?","path":"app/models/user.rb","lineno":1155,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829078900,"value":"#<User:0x00007f81d8674ee8>"}},{"id":119399,"event":"return","defined_class":"User","method_id":"anonymous?","path":"app/models/user.rb","lineno":1155,"static":false,"thread_id":70097708498960,"parent_id":119398,"elapsed":1.2e-05},{"id":119400,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097829078900,"value":"#<User:0x00007f81d8674ee8>"}},{"id":119401,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":119400,"elapsed":1.7e-05},{"id":119402,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119403,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119402,"elapsed":0.001258},{"id":119404,"event":"call","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"email_level_types","path":"app/models/user_option.rb","lineno":38,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097795215760,"value":"UserOption"}},{"id":119405,"event":"return","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"email_level_types","path":"app/models/user_option.rb","lineno":38,"static":true,"thread_id":70097708498960,"parent_id":119404,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:always=>0, :only_when_away=>1, :never=>2}","object_id":70097795245460}},{"id":119406,"event":"call","defined_class":"EmailLog(id: integer, to_address: string, email_type: string, user_id: integer, created_at: datetime, updated_at: datetime, post_id: integer, bounce_key: uuid, bounced: boolean, message_id: string)","method_id":"reached_max_emails?","path":"app/models/email_log.rb","lineno":40,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097829078900,"value":"#<User:0x00007f81d8674ee8>","kind":"req"},{"name":"email_type","class":"String","object_id":70097829543380,"value":"signup_after_approval","kind":"opt"}],"receiver":{"class":"Class","object_id":70097569414460,"value":"EmailLog"}},{"id":119407,"event":"return","defined_class":"EmailLog(id: integer, to_address: string, email_type: string, user_id: integer, created_at: datetime, updated_at: datetime, post_id: integer, bounce_key: uuid, bounced: boolean, message_id: string)","method_id":"reached_max_emails?","path":"app/models/email_log.rb","lineno":40,"static":true,"thread_id":70097708498960,"parent_id":119406,"elapsed":1.3e-05},{"id":119408,"event":"call","defined_class":"EmailLog(id: integer, to_address: string, email_type: string, user_id: integer, created_at: datetime, updated_at: datetime, post_id: integer, bounce_key: uuid, bounced: boolean, message_id: string)","method_id":"unique_email_per_post","path":"app/models/email_log.rb","lineno":28,"static":true,"thread_id":70097708498960,"parameters":[{"name":"post","class":"NilClass","object_id":8,"value":null,"kind":"req"},{"name":"user","class":"User","object_id":70097829078900,"value":"#<User:0x00007f81d8674ee8>","kind":"req"}],"receiver":{"class":"Class","object_id":70097569414460,"value":"EmailLog"}},{"id":119409,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"translation_overrides\" WHERE \"translation_overrides\".\"locale\" = 'en_US' AND \"translation_overrides\".\"translation_key\" = 'user_notifications.signup_after_approval.subject_template' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119410,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119409,"elapsed":0.001104},{"id":119411,"event":"return","defined_class":"EmailLog(id: integer, to_address: string, email_type: string, user_id: integer, created_at: datetime, updated_at: datetime, post_id: integer, bounce_key: uuid, bounced: boolean, message_id: string)","method_id":"unique_email_per_post","path":"app/models/email_log.rb","lineno":28,"static":true,"thread_id":70097708498960,"parent_id":119408,"elapsed":1.2e-05,"return_value":{"class":"ActionMailer::MessageDelivery","value":"Date: Thu, 28 May 2020 14:50:45 -0400\r\nFrom: Discourse <noreply@test.localhost>\r\nReply-To: Discourse","object_id":70097829540340}},{"id":119412,"event":"return","defined_class":"Jobs::UserEmail","method_id":"message_for_email","path":"app/jobs/regular/user_email.rb","lineno":86,"static":false,"thread_id":70097708498960,"parent_id":119393,"elapsed":0.01312,"return_value":{"class":"Array","value":"[#<Mail::Message:70097829540060, Multipart: false, Headers: <Date: Thu, 28 May 2020 14:50:45 -0400>,","object_id":70097589517420}},{"id":119413,"event":"call","defined_class":"Email::Sender","method_id":"send","path":"lib/email/sender.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Sender","object_id":70097589515880,"value":"#<Email::Sender:0x00007f81bbd86cd0>"}},{"id":119414,"event":"call","defined_class":"Email::Sender","method_id":"to_address","path":"lib/email/sender.rb","lineno":222,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Sender","object_id":70097589515880,"value":"#<Email::Sender:0x00007f81bbd86cd0>"}},{"id":119415,"event":"return","defined_class":"Email::Sender","method_id":"to_address","path":"lib/email/sender.rb","lineno":222,"static":false,"thread_id":70097708498960,"parent_id":119414,"elapsed":2.6e-05,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097589513340}},{"id":119416,"event":"call","defined_class":"Email::Renderer","method_id":"html","path":"lib/email/renderer.rb","lineno":17,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Renderer","object_id":70097589511900,"value":"#<Email::Renderer:0x00007f81bbd84db8>"}},{"id":119417,"event":"call","defined_class":"Email::Renderer","method_id":"text","path":"lib/email/renderer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Renderer","object_id":70097589511900,"value":"#<Email::Renderer:0x00007f81bbd84db8>"}},{"id":119418,"event":"return","defined_class":"Email::Renderer","method_id":"text","path":"lib/email/renderer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":119417,"elapsed":1.7e-05,"return_value":{"class":"String","value":"Welcome to Discourse!\r\n\r\nA staff member approved your account on Discourse.\r\n\r\nYou can now access yo","object_id":70097589552300}},{"id":119419,"event":"call","defined_class":"Emoji","method_id":"custom","path":"app/models/emoji.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":119420,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097715190900,"value":"custom_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":119421,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":119420,"elapsed":6.0e-06,"return_value":{"class":"String","value":"custom_emojis:v9:plugin-emoji","object_id":70097614527040}},{"id":119422,"event":"return","defined_class":"Emoji","method_id":"custom","path":"app/models/emoji.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":119419,"elapsed":0.001196,"return_value":{"class":"Array","value":"[]","object_id":70097614525760}},{"id":119423,"event":"call","defined_class":"Upload","method_id":"to_s","path":"app/models/upload.rb","lineno":50,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Upload","object_id":70097731301500,"value":"/images/discourse-logo-sketch.png"}},{"id":119424,"event":"return","defined_class":"Upload","method_id":"to_s","path":"app/models/upload.rb","lineno":50,"static":false,"thread_id":70097708498960,"parent_id":119423,"elapsed":6.0e-06,"return_value":{"class":"String","value":"/images/discourse-logo-sketch.png","object_id":70097731301280}},{"id":119425,"event":"call","defined_class":"Upload","method_id":"to_s","path":"app/models/upload.rb","lineno":50,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Upload","object_id":70097607913040,"value":"/images/discourse-logo-sketch-small.png"}},{"id":119426,"event":"return","defined_class":"Upload","method_id":"to_s","path":"app/models/upload.rb","lineno":50,"static":false,"thread_id":70097708498960,"parent_id":119425,"elapsed":4.0e-06,"return_value":{"class":"String","value":"/images/discourse-logo-sketch-small.png","object_id":70097567913280}},{"id":119427,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"available_locales","path":"app/models/site_setting.rb","lineno":32,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":119428,"event":"call","defined_class":"LocaleSiteSetting","method_id":"values","path":"app/models/locale_site_setting.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":119429,"event":"return","defined_class":"LocaleSiteSetting","method_id":"values","path":"app/models/locale_site_setting.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119428,"elapsed":3.0e-06,"return_value":{"class":"Array","value":"[{:name=>\"اللغة العربية\", :value=>\"ar\"}, {:name=>\"беларуская мова\", :value=>\"be\"}, {:name=>\"българск","object_id":70097567928580}},{"id":119430,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"available_locales","path":"app/models/site_setting.rb","lineno":32,"static":true,"thread_id":70097708498960,"parent_id":119427,"elapsed":0.00026,"return_value":{"class":"String","value":"[{\"name\":\"اللغة العربية\",\"value\":\"ar\"},{\"name\":\"беларуская мова\",\"value\":\"be\"},{\"name\":\"български ез","object_id":70097614554200}},{"id":119431,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"require_invite_code","path":"app/models/site_setting.rb","lineno":176,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":119432,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"require_invite_code","path":"app/models/site_setting.rb","lineno":176,"static":true,"thread_id":70097708498960,"parent_id":119431,"elapsed":7.0e-06},{"id":119433,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"site_logo_url","path":"app/models/site_setting.rb","lineno":201,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":119434,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":119435,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":119434,"elapsed":3.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":119436,"event":"call","defined_class":"SiteSetting::Upload","method_id":"s3_cdn_url","path":"app/models/site_setting.rb","lineno":130,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":119437,"event":"return","defined_class":"SiteSetting::Upload","method_id":"s3_cdn_url","path":"app/models/site_setting.rb","lineno":130,"static":true,"thread_id":70097708498960,"parent_id":119436,"elapsed":7.0e-06},{"id":119438,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"site_logo_url","path":"app/models/site_setting.rb","lineno":201,"static":true,"thread_id":70097708498960,"parent_id":119433,"elapsed":0.000278,"return_value":{"class":"String","value":"http://test.localhost/images/discourse-logo-sketch.png","object_id":70097614571680}},{"id":119439,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"site_logo_small_url","path":"app/models/site_setting.rb","lineno":201,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":119440,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":119441,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":119440,"elapsed":3.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":119442,"event":"call","defined_class":"SiteSetting::Upload","method_id":"s3_cdn_url","path":"app/models/site_setting.rb","lineno":130,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":119443,"event":"return","defined_class":"SiteSetting::Upload","method_id":"s3_cdn_url","path":"app/models/site_setting.rb","lineno":130,"static":true,"thread_id":70097708498960,"parent_id":119442,"elapsed":6.0e-06},{"id":119444,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"site_logo_small_url","path":"app/models/site_setting.rb","lineno":201,"static":true,"thread_id":70097708498960,"parent_id":119439,"elapsed":0.000259,"return_value":{"class":"String","value":"http://test.localhost/images/discourse-logo-sketch-small.png","object_id":70097614591320}},{"id":119445,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"site_mobile_logo_url","path":"app/models/site_setting.rb","lineno":201,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":119446,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"site_mobile_logo_url","path":"app/models/site_setting.rb","lineno":201,"static":true,"thread_id":70097708498960,"parent_id":119445,"elapsed":1.4e-05,"return_value":{"class":"String","value":"http://test.localhost/images/discourse-logo-sketch.png","object_id":70097827165660}},{"id":119447,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"site_favicon_url","path":"app/models/site_setting.rb","lineno":201,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":119448,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"site_favicon_url","path":"app/models/site_setting.rb","lineno":201,"static":true,"thread_id":70097708498960,"parent_id":119447,"elapsed":1.0e-05,"return_value":{"class":"String","value":"http://test.localhost/uploads/default/test_0/optimized/1X/_129430568242d1b7f853bb13ebea28b3f6af4e7_2","object_id":70097828369720}},{"id":119449,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":119450,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":119449,"elapsed":5.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":119451,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":119452,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":119453,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":119452,"elapsed":4.0e-06},{"id":119454,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":119451,"elapsed":0.000104},{"id":119455,"event":"call","defined_class":"WordWatcher","method_id":"word_matcher_regexp","path":"app/services/word_watcher.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"},{"name":"raise_errors","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":119456,"event":"call","defined_class":"WordWatcher","method_id":"get_cached_words","path":"app/services/word_watcher.rb","lineno":17,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":119457,"event":"call","defined_class":"WordWatcher","method_id":"word_matcher_regexp_key","path":"app/services/word_watcher.rb","lineno":55,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":119458,"event":"return","defined_class":"WordWatcher","method_id":"word_matcher_regexp_key","path":"app/services/word_watcher.rb","lineno":55,"static":true,"thread_id":70097708498960,"parent_id":119457,"elapsed":4.0e-06,"return_value":{"class":"String","value":"watched-words-list:censor","object_id":70097614621800}},{"id":119459,"event":"return","defined_class":"WordWatcher","method_id":"get_cached_words","path":"app/services/word_watcher.rb","lineno":17,"static":true,"thread_id":70097708498960,"parent_id":119456,"elapsed":0.000956},{"id":119460,"event":"return","defined_class":"WordWatcher","method_id":"word_matcher_regexp","path":"app/services/word_watcher.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":119455,"elapsed":0.001072},{"id":119461,"event":"call","defined_class":"UserNotificationRenderer","method_id":"render","path":"app/services/user_notification_renderer.rb","lineno":10,"static":true,"thread_id":70097708498960,"parameters":[{"name":"args","class":"Hash","object_id":70097614850020,"value":"{:template=>\"layouts/email_template\", :format=>:html, :locals=>{:html_body=>\"<p>Welcome to Discourse","kind":"rest"}],"receiver":{"class":"Class","object_id":70097797777140,"value":"UserNotificationRenderer"}},{"id":119462,"event":"call","defined_class":"EmailHelper","method_id":"email_html_template","path":"app/helpers/email_helper.rb","lineno":28,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserNotificationRenderer","object_id":70097566174800,"value":"#<UserNotificationRenderer:0x00007f81b9101ca0>"}},{"id":119463,"event":"call","defined_class":"EmailStyle","method_id":"html","path":"app/models/email_style.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"EmailStyle","object_id":70097614870820,"value":"#<EmailStyle:0x00007f81bede3248>"}},{"id":119464,"event":"call","defined_class":"EmailStyle","method_id":"default_html","path":"app/models/email_style.rb","lineno":24,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"EmailStyle","object_id":70097614870820,"value":"#<EmailStyle:0x00007f81bede3248>"}},{"id":119465,"event":"call","defined_class":"EmailStyle","method_id":"default_template","path":"app/models/email_style.rb","lineno":32,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097566750080,"value":"EmailStyle"}},{"id":119466,"event":"return","defined_class":"EmailStyle","method_id":"default_template","path":"app/models/email_style.rb","lineno":32,"static":true,"thread_id":70097708498960,"parent_id":119465,"elapsed":4.0e-06,"return_value":{"class":"String","value":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtm","object_id":70097566420600}},{"id":119467,"event":"return","defined_class":"EmailStyle","method_id":"default_html","path":"app/models/email_style.rb","lineno":24,"static":false,"thread_id":70097708498960,"parent_id":119464,"elapsed":0.000126,"return_value":{"class":"String","value":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtm","object_id":70097566420600}},{"id":119468,"event":"return","defined_class":"EmailStyle","method_id":"html","path":"app/models/email_style.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":119463,"elapsed":0.000221,"return_value":{"class":"String","value":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtm","object_id":70097566420600}},{"id":119469,"event":"return","defined_class":"EmailHelper","method_id":"email_html_template","path":"app/helpers/email_helper.rb","lineno":28,"static":false,"thread_id":70097708498960,"parent_id":119462,"elapsed":0.000349,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtm","object_id":70097614865460}},{"id":119470,"event":"return","defined_class":"UserNotificationRenderer","method_id":"render","path":"app/services/user_notification_renderer.rb","lineno":10,"static":true,"thread_id":70097708498960,"parent_id":119461,"elapsed":0.000613,"return_value":{"class":"ActionView::OutputBuffer","value":"  <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xh","object_id":70097614872140}},{"id":119471,"event":"call","defined_class":"Email::Styles","method_id":"format_basic","path":"lib/email/styles.rb","lineno":58,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119472,"event":"return","defined_class":"Email::Styles","method_id":"format_basic","path":"lib/email/styles.rb","lineno":58,"static":false,"thread_id":70097708498960,"parent_id":119471,"elapsed":0.000343,"return_value":{"class":"Nokogiri::XML::NodeSet","value":"","object_id":70097614882860}},{"id":119473,"event":"call","defined_class":"Email::Styles","method_id":"format_html","path":"lib/email/styles.rb","lineno":172,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119474,"event":"call","defined_class":"Email::Styles","method_id":"add_styles","path":"lib/email/styles.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[{"name":"node","class":"Nokogiri::XML::Element","object_id":70097614902100,"value":"<body>\n\n<!--[if mso]>\n<style type=\"text/css\">\nbody, table, td, th, h1, h2, h3 {font-family: Helvetic","kind":"req"},{"name":"new_styles","class":"String","object_id":70097614902660,"value":"text-align:left;","kind":"req"}],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119475,"event":"return","defined_class":"Email::Styles","method_id":"add_styles","path":"lib/email/styles.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":119474,"elapsed":8.0e-06,"return_value":{"class":"String","value":"text-align:left;","object_id":70097614902660}},{"id":119476,"event":"call","defined_class":"Email::Styles","method_id":"add_styles","path":"lib/email/styles.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[{"name":"node","class":"Nokogiri::XML::Element","object_id":70097614917080,"value":"<a href=\"http://test.localhost\" class=\"onebox\" target=\"_blank\">http://test.localhost</a>","kind":"req"},{"name":"new_styles","class":"String","object_id":70097589651660,"value":"text-decoration: none; font-weight: bold; color: #006699;","kind":"req"}],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119477,"event":"return","defined_class":"Email::Styles","method_id":"add_styles","path":"lib/email/styles.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":119476,"elapsed":8.0e-06,"return_value":{"class":"String","value":"text-decoration: none; font-weight: bold; color: #006699;","object_id":70097589651660}},{"id":119478,"event":"call","defined_class":"Email::Styles","method_id":"add_styles","path":"lib/email/styles.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[{"name":"node","class":"Nokogiri::XML::Element","object_id":70097614935180,"value":"<a href=\"https://blog.discourse.org/2016/12/discourse-new-user-tips-and-tricks/\" rel=\"nofollow noope","kind":"req"},{"name":"new_styles","class":"String","object_id":70097589651660,"value":"text-decoration: none; font-weight: bold; color: #006699;","kind":"req"}],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119479,"event":"return","defined_class":"Email::Styles","method_id":"add_styles","path":"lib/email/styles.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":119478,"elapsed":7.0e-06,"return_value":{"class":"String","value":"text-decoration: none; font-weight: bold; color: #006699;","object_id":70097589651660}},{"id":119480,"event":"call","defined_class":"Email::Styles","method_id":"add_styles","path":"lib/email/styles.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[{"name":"node","class":"Nokogiri::XML::Element","object_id":70097614953160,"value":"<a href=\"https://blog.discourse.org/2018/06/understanding-discourse-trust-levels/\" rel=\"nofollow noo","kind":"req"},{"name":"new_styles","class":"String","object_id":70097589651660,"value":"text-decoration: none; font-weight: bold; color: #006699;","kind":"req"}],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119481,"event":"return","defined_class":"Email::Styles","method_id":"add_styles","path":"lib/email/styles.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":119480,"elapsed":6.0e-06,"return_value":{"class":"String","value":"text-decoration: none; font-weight: bold; color: #006699;","object_id":70097589651660}},{"id":119482,"event":"call","defined_class":"Email::Styles","method_id":"add_styles","path":"lib/email/styles.rb","lineno":26,"static":false,"thread_id":70097708498960,"parameters":[{"name":"node","class":"Nokogiri::XML::Element","object_id":70097614947320,"value":"<a href=\"http://test.localhost/guidelines\">civilized community behavior</a>","kind":"req"},{"name":"new_styles","class":"String","object_id":70097589651660,"value":"text-decoration: none; font-weight: bold; color: #006699;","kind":"req"}],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119483,"event":"return","defined_class":"Email::Styles","method_id":"add_styles","path":"lib/email/styles.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":119482,"elapsed":6.0e-06,"return_value":{"class":"String","value":"text-decoration: none; font-weight: bold; color: #006699;","object_id":70097589651660}},{"id":119484,"event":"call","defined_class":"Email::Styles","method_id":"onebox_styles","path":"lib/email/styles.rb","lineno":112,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119485,"event":"return","defined_class":"Email::Styles","method_id":"onebox_styles","path":"lib/email/styles.rb","lineno":112,"static":false,"thread_id":70097708498960,"parent_id":119484,"elapsed":0.001017,"return_value":{"class":"Nokogiri::XML::NodeSet","value":"","object_id":70097589772100}},{"id":119486,"event":"call","defined_class":"Email::Styles","method_id":"plugin_styles","path":"lib/email/styles.rb","lineno":237,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119487,"event":"return","defined_class":"Email::Styles","method_id":"plugin_styles","path":"lib/email/styles.rb","lineno":237,"static":false,"thread_id":70097708498960,"parent_id":119486,"elapsed":4.0e-06,"return_value":{"class":"Array","value":"[]","object_id":70097566593840}},{"id":119488,"event":"call","defined_class":"Email::Styles","method_id":"format_custom","path":"lib/email/styles.rb","lineno":230,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119489,"event":"call","defined_class":"Email::Styles","method_id":"custom_styles","path":"lib/email/styles.rb","lineno":36,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119490,"event":"call","defined_class":"EmailStyle","method_id":"compiled_css","path":"app/models/email_style.rb","lineno":20,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"EmailStyle","object_id":70097589767720,"value":"#<EmailStyle:0x00007f81bbe01c50>"}},{"id":119491,"event":"call","defined_class":"EmailStyle","method_id":"css","path":"app/models/email_style.rb","lineno":16,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"EmailStyle","object_id":70097589767720,"value":"#<EmailStyle:0x00007f81bbe01c50>"}},{"id":119492,"event":"return","defined_class":"EmailStyle","method_id":"css","path":"app/models/email_style.rb","lineno":16,"static":false,"thread_id":70097708498960,"parent_id":119491,"elapsed":5.0e-06,"return_value":{"class":"String","value":"","object_id":70097723636360}},{"id":119493,"event":"return","defined_class":"EmailStyle","method_id":"compiled_css","path":"app/models/email_style.rb","lineno":20,"static":false,"thread_id":70097708498960,"parent_id":119490,"elapsed":9.7e-05,"return_value":{"class":"String","value":"","object_id":70097723636360}},{"id":119494,"event":"return","defined_class":"Email::Styles","method_id":"custom_styles","path":"lib/email/styles.rb","lineno":36,"static":false,"thread_id":70097708498960,"parent_id":119489,"elapsed":0.000186,"return_value":{"class":"Hash","value":"{}","object_id":70097589764560}},{"id":119495,"event":"return","defined_class":"Email::Styles","method_id":"format_custom","path":"lib/email/styles.rb","lineno":230,"static":false,"thread_id":70097708498960,"parent_id":119488,"elapsed":0.000275,"return_value":{"class":"Hash","value":"{}","object_id":70097589764560}},{"id":119496,"event":"return","defined_class":"Email::Styles","method_id":"format_html","path":"lib/email/styles.rb","lineno":172,"static":false,"thread_id":70097708498960,"parent_id":119473,"elapsed":0.005673,"return_value":{"class":"Hash","value":"{}","object_id":70097589764560}},{"id":119497,"event":"call","defined_class":"Email::Styles","method_id":"to_html","path":"lib/email/styles.rb","lineno":241,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119498,"event":"call","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"secure_media_url?","path":"app/models/upload.rb","lineno":150,"static":true,"thread_id":70097708498960,"parameters":[{"name":"url","class":"String","object_id":70097589782880,"value":"http://test.localhost","kind":"req"}],"receiver":{"class":"Class","object_id":70097756332220,"value":"Upload"}},{"id":119499,"event":"return","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"secure_media_url?","path":"app/models/upload.rb","lineno":150,"static":true,"thread_id":70097708498960,"parent_id":119498,"elapsed":5.0e-06},{"id":119500,"event":"call","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"secure_media_url?","path":"app/models/upload.rb","lineno":150,"static":true,"thread_id":70097708498960,"parameters":[{"name":"url","class":"String","object_id":70097589781440,"value":"https://blog.discourse.org/2016/12/discourse-new-user-tips-and-tricks/","kind":"req"}],"receiver":{"class":"Class","object_id":70097756332220,"value":"Upload"}},{"id":119501,"event":"return","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"secure_media_url?","path":"app/models/upload.rb","lineno":150,"static":true,"thread_id":70097708498960,"parent_id":119500,"elapsed":4.0e-06},{"id":119502,"event":"call","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"secure_media_url?","path":"app/models/upload.rb","lineno":150,"static":true,"thread_id":70097708498960,"parameters":[{"name":"url","class":"String","object_id":70097589804420,"value":"https://blog.discourse.org/2018/06/understanding-discourse-trust-levels/","kind":"req"}],"receiver":{"class":"Class","object_id":70097756332220,"value":"Upload"}},{"id":119503,"event":"return","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"secure_media_url?","path":"app/models/upload.rb","lineno":150,"static":true,"thread_id":70097708498960,"parent_id":119502,"elapsed":3.0e-06},{"id":119504,"event":"call","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"secure_media_url?","path":"app/models/upload.rb","lineno":150,"static":true,"thread_id":70097708498960,"parameters":[{"name":"url","class":"String","object_id":70097589802640,"value":"http://test.localhost/guidelines","kind":"req"}],"receiver":{"class":"Class","object_id":70097756332220,"value":"Upload"}},{"id":119505,"event":"return","defined_class":"Upload(id: integer, user_id: integer, original_filename: string, filesize: integer, width: integer, height: integer, url: string, created_at: datetime, updated_at: datetime, sha1: string, origin: string, retain_hours: integer, extension: string, thumbnail_width: integer, thumbnail_height: integer, etag: string, secure: boolean, access_control_post_id: integer, original_sha1: string)","method_id":"secure_media_url?","path":"app/models/upload.rb","lineno":150,"static":true,"thread_id":70097708498960,"parent_id":119504,"elapsed":3.0e-06},{"id":119506,"event":"call","defined_class":"Email::Styles","method_id":"include_body?","path":"lib/email/styles.rb","lineno":248,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Styles","object_id":70097614888480,"value":"#<Email::Styles:0x00007f81bedebc40>"}},{"id":119507,"event":"return","defined_class":"Email::Styles","method_id":"include_body?","path":"lib/email/styles.rb","lineno":248,"static":false,"thread_id":70097708498960,"parent_id":119506,"elapsed":6.0e-06,"return_value":{"class":"Integer","value":"483","object_id":967}},{"id":119508,"event":"return","defined_class":"Email::Styles","method_id":"to_html","path":"lib/email/styles.rb","lineno":241,"static":false,"thread_id":70097708498960,"parent_id":119497,"elapsed":0.001047,"return_value":{"class":"String","value":"<body style=\"text-align:left;\" dir=\"ltr\">\n\n<!--[if mso]>\n<style type=\"text/css\">\nbody, table, td, th","object_id":70097589820820}},{"id":119509,"event":"return","defined_class":"Email::Renderer","method_id":"html","path":"lib/email/renderer.rb","lineno":17,"static":false,"thread_id":70097708498960,"parent_id":119416,"elapsed":0.039833,"return_value":{"class":"String","value":"<body style=\"text-align:left;\" dir=\"ltr\">\n\n<!--[if mso]>\n<style type=\"text/css\">\nbody, table, td, th","object_id":70097589820820}},{"id":119510,"event":"call","defined_class":"Email::Sender","method_id":"to_address","path":"lib/email/sender.rb","lineno":222,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Email::Sender","object_id":70097589515880,"value":"#<Email::Sender:0x00007f81bbd86cd0>"}},{"id":119511,"event":"return","defined_class":"Email::Sender","method_id":"to_address","path":"lib/email/sender.rb","lineno":222,"static":false,"thread_id":70097708498960,"parent_id":119510,"elapsed":4.0e-06,"return_value":{"class":"String","value":"eviltrout@somewhere.com","object_id":70097589513340}},{"id":119512,"event":"call","defined_class":"Email::Sender","method_id":"host_for","path":"lib/email/sender.rb","lineno":230,"static":true,"thread_id":70097708498960,"parameters":[{"name":"base_url","class":"String","object_id":70097799929880,"value":"http://test.localhost","kind":"req"}],"receiver":{"class":"Class","object_id":70097587325720,"value":"Email::Sender"}},{"id":119513,"event":"return","defined_class":"Email::Sender","method_id":"host_for","path":"lib/email/sender.rb","lineno":230,"static":true,"thread_id":70097708498960,"parent_id":119512,"elapsed":2.1e-05,"return_value":{"class":"String","value":"test.localhost","object_id":70097797511240}},{"id":119514,"event":"call","defined_class":"Email::Sender","method_id":"bounceable_reply_address?","path":"lib/email/sender.rb","lineno":366,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587325720,"value":"Email::Sender"}},{"id":119515,"event":"return","defined_class":"Email::Sender","method_id":"bounceable_reply_address?","path":"lib/email/sender.rb","lineno":366,"static":true,"thread_id":70097708498960,"parent_id":119514,"elapsed":6.0e-06},{"id":119516,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"email_logs\" (\"to_address\", \"email_type\", \"user_id\", \"created_at\", \"updated_at\", \"message_id\") VALUES ('eviltrout@somewhere.com', 'signup_after_approval', 165, '2020-05-28 18:50:45.235510', '2020-05-28 18:50:45.235510', 'daf628ce-b15d-4e00-abaf-0bf0be20780e@test.localhost') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":119517,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119516,"elapsed":0.001572},{"id":119518,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET last_emailed_at = CURRENT_TIMESTAMP WHERE \"users\".\"id\" = 165","database_type":"postgres","server_version":110006}},{"id":119519,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119518,"elapsed":0.00142},{"id":119520,"event":"return","defined_class":"Email::Sender","method_id":"send","path":"lib/email/sender.rb","lineno":26,"static":false,"thread_id":70097708498960,"parent_id":119413,"elapsed":0.05359,"return_value":{"class":"EmailLog","value":"#<EmailLog:0x00007f81d4edc878>","object_id":70097799930940}},{"id":119521,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_stats\".\"user_id\", \"user_stats\".\"topics_entered\", \"user_stats\".\"time_read\", \"user_stats\".\"days_visited\", \"user_stats\".\"posts_read_count\", \"user_stats\".\"likes_given\", \"user_stats\".\"likes_received\", \"user_stats\".\"new_since\", \"user_stats\".\"read_faq\", \"user_stats\".\"first_post_created_at\", \"user_stats\".\"post_count\", \"user_stats\".\"topic_count\", \"user_stats\".\"bounce_score\", \"user_stats\".\"reset_bounce_score_after\", \"user_stats\".\"flags_agreed\", \"user_stats\".\"flags_disagreed\", \"user_stats\".\"flags_ignored\", \"user_stats\".\"first_unread_at\", \"user_stats\".\"distinct_badge_count\" FROM \"user_stats\" WHERE \"user_stats\".\"user_id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119522,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119521,"elapsed":0.001244},{"id":119523,"event":"return","defined_class":"Jobs::UserEmail","method_id":"execute","path":"app/jobs/regular/user_email.rb","lineno":17,"static":false,"thread_id":70097708498960,"parent_id":119384,"elapsed":0.082293},{"id":119524,"event":"return","defined_class":"Jobs::CriticalUserEmail","method_id":"execute","path":"app/jobs/regular/critical_user_email.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":119383,"elapsed":0.082429},{"id":119525,"event":"return","defined_class":"Jobs::Base","method_id":"perform","path":"app/jobs/base.rb","lineno":187,"static":false,"thread_id":70097708498960,"parent_id":119380,"elapsed":0.082701},{"id":119526,"event":"return","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parent_id":119377,"elapsed":0.08295},{"id":119527,"event":"call","defined_class":"StaffActionLogger","method_id":"log_user_approve","path":"app/services/staff_action_logger.rb","lineno":578,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097612739000,"value":"#<User:0x00007f81be9d2370>","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"StaffActionLogger","object_id":70097620977300,"value":"#<StaffActionLogger:0x00007f81bf988d28>"}},{"id":119528,"event":"call","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097565682280,"value":"UserHistory"}},{"id":119529,"event":"return","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parent_id":119528,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:delete_user=>1, :change_trust_level=>2, :change_site_setting=>3, :change_theme=>4, :delete_theme=>","object_id":70097826343960}},{"id":119530,"event":"call","defined_class":"UserHistory","method_id":"set_admin_only","path":"app/models/user_history.rb","lineno":250,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserHistory","object_id":70097620993520,"value":"#<UserHistory:0x00007f81bf990be0>"}},{"id":119531,"event":"call","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"admin_only_action_ids","path":"app/models/user_history.rb","lineno":198,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097565682280,"value":"UserHistory"}},{"id":119532,"event":"return","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"admin_only_action_ids","path":"app/models/user_history.rb","lineno":198,"static":true,"thread_id":70097708498960,"parent_id":119531,"elapsed":4.0e-06,"return_value":{"class":"Array","value":"[3]","object_id":70097608682780}},{"id":119533,"event":"return","defined_class":"UserHistory","method_id":"set_admin_only","path":"app/models/user_history.rb","lineno":250,"static":false,"thread_id":70097708498960,"parent_id":119530,"elapsed":0.000127,"return_value":{"class":"UserHistory","value":"#<UserHistory:0x00007f81bf990be0>","object_id":70097620993520}},{"id":119534,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_histories\" (\"action\", \"acting_user_id\", \"target_user_id\", \"created_at\", \"updated_at\") VALUES (69, 140, 165, '2020-05-28 18:50:45.252699', '2020-05-28 18:50:45.252699') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":119535,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119534,"elapsed":0.00112},{"id":119536,"event":"return","defined_class":"StaffActionLogger","method_id":"log_user_approve","path":"app/services/staff_action_logger.rb","lineno":578,"static":false,"thread_id":70097708498960,"parent_id":119527,"elapsed":0.00636,"return_value":{"class":"UserHistory","value":"#<UserHistory:0x00007f81bf990be0>","object_id":70097620993520}},{"id":119537,"event":"call","defined_class":"Reviewable","method_id":"create_result","path":"app/models/reviewable.rb","lineno":527,"static":false,"thread_id":70097708498960,"parameters":[{"name":"status","class":"Symbol","object_id":1272668,"value":"success","kind":"req"},{"name":"transition_to","class":"Symbol","object_id":70097715272740,"value":"approved","kind":"opt"}],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119538,"event":"return","defined_class":"Reviewable","method_id":"create_result","path":"app/models/reviewable.rb","lineno":527,"static":false,"thread_id":70097708498960,"parent_id":119537,"elapsed":1.1e-05,"return_value":{"class":"Reviewable::PerformResult","value":"#<Reviewable::PerformResult:0x00007f81bfab6880>","object_id":70097621595200}},{"id":119539,"event":"return","defined_class":"ReviewableUser","method_id":"perform_approve_user","path":"app/models/reviewable_user.rb","lineno":39,"static":false,"thread_id":70097708498960,"parent_id":119336,"elapsed":0.120251,"return_value":{"class":"Reviewable::PerformResult","value":"#<Reviewable::PerformResult:0x00007f81bfab6880>","object_id":70097621595200}},{"id":119540,"event":"call","defined_class":"Reviewable","method_id":"transition_to","path":"app/models/reviewable.rb","lineno":372,"static":false,"thread_id":70097708498960,"parameters":[{"name":"status_symbol","class":"Symbol","object_id":70097715272740,"value":"approved","kind":"req"},{"name":"performed_by","class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>","kind":"req"}],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119541,"event":"call","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119542,"event":"return","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":119541,"elapsed":1.6e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119543,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"statuses","path":"app/models/reviewable.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119544,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"statuses","path":"app/models/reviewable.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":119543,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:pending=>0, :approved=>1, :rejected=>2, :ignored=>3, :deleted=>4}","object_id":70097796937940}},{"id":119545,"event":"call","defined_class":"Reviewable","method_id":"apply_review_group","path":"app/models/reviewable.rb","lineno":283,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119546,"event":"return","defined_class":"Reviewable","method_id":"apply_review_group","path":"app/models/reviewable.rb","lineno":283,"static":false,"thread_id":70097708498960,"parent_id":119545,"elapsed":1.0e-05},{"id":119547,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"reviewables\" SET \"status\" = 1, \"version\" = 1, \"updated_at\" = '2020-05-28 18:50:45.303041' WHERE \"reviewables\".\"id\" = 46","database_type":"postgres","server_version":110006}},{"id":119548,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119547,"elapsed":0.002223},{"id":119549,"event":"call","defined_class":"Reviewable","method_id":"log_history","path":"app/models/reviewable.rb","lineno":274,"static":false,"thread_id":70097708498960,"parameters":[{"name":"reviewable_history_type","class":"Symbol","object_id":17533468,"value":"transitioned","kind":"req"},{"name":"performed_by","class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>","kind":"req"},{"name":"edited","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119550,"event":"call","defined_class":"ReviewableHistory(id: integer, reviewable_id: integer, reviewable_history_type: integer, status: integer, created_by_id: integer, edited: json, created_at: datetime, updated_at: datetime)","method_id":"types","path":"app/models/reviewable_history.rb","lineno":7,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097814904680,"value":"ReviewableHistory"}},{"id":119551,"event":"return","defined_class":"ReviewableHistory(id: integer, reviewable_id: integer, reviewable_history_type: integer, status: integer, created_by_id: integer, edited: json, created_at: datetime, updated_at: datetime)","method_id":"types","path":"app/models/reviewable_history.rb","lineno":7,"static":true,"thread_id":70097708498960,"parent_id":119550,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:created=>0, :transitioned=>1, :edited=>2, :claimed=>3, :unclaimed=>4}","object_id":70097814734640}},{"id":119552,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"reviewable_histories\" (\"reviewable_id\", \"reviewable_history_type\", \"status\", \"created_by_id\", \"created_at\", \"updated_at\") VALUES (46, 1, 1, 140, '2020-05-28 18:50:45.311206', '2020-05-28 18:50:45.311206') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":119553,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119552,"elapsed":0.001224},{"id":119554,"event":"return","defined_class":"Reviewable","method_id":"log_history","path":"app/models/reviewable.rb","lineno":274,"static":false,"thread_id":70097708498960,"parent_id":119549,"elapsed":0.006999,"return_value":{"class":"ReviewableHistory","value":"#<ReviewableHistory:0x00007f81d4048a00>","object_id":70097792288000}},{"id":119555,"event":"call","defined_class":"Reviewable","method_id":"serializer","path":"app/models/reviewable.rb","lineno":511,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119556,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"serializer_for","path":"app/models/reviewable.rb","lineno":521,"static":true,"thread_id":70097708498960,"parameters":[{"name":"reviewable","class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>","kind":"req"}],"receiver":{"class":"Class","object_id":70097586690280,"value":"ReviewableUser"}},{"id":119557,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"serializer_for","path":"app/models/reviewable.rb","lineno":521,"static":true,"thread_id":70097708498960,"parent_id":119556,"elapsed":2.0e-05,"return_value":{"class":"Class","value":"ReviewableUserSerializer","object_id":70097816935560}},{"id":119558,"event":"return","defined_class":"Reviewable","method_id":"serializer","path":"app/models/reviewable.rb","lineno":511,"static":false,"thread_id":70097708498960,"parent_id":119555,"elapsed":0.000151,"return_value":{"class":"Class","value":"ReviewableUserSerializer","object_id":70097816935560}},{"id":119559,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":12225948,"value":"reviewable","kind":"req"},{"name":"object","class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>","kind":"req"},{"name":"event","class":"Symbol","object_id":12688988,"value":"reviewable_transitioned_to","kind":"req"},{"name":"serializer","class":"Class","object_id":70097816935560,"value":"ReviewableUserSerializer","kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":119560,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":12225948,"value":"reviewable","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":119561,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":119560,"elapsed":0.00022,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81d448e3f8>","object_id":70097794527740}},{"id":119562,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'reviewable') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119563,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119562,"elapsed":0.001435},{"id":119564,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":119559,"elapsed":0.006339},{"id":119565,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"score_transitions","path":"app/models/reviewable_score.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":119566,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":119567,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parent_id":119566,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:pending=>0, :agreed=>1, :disagreed=>2, :ignored=>3}","object_id":70097732890840}},{"id":119568,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":119569,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parent_id":119568,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:pending=>0, :agreed=>1, :disagreed=>2, :ignored=>3}","object_id":70097732890840}},{"id":119570,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":119571,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parent_id":119570,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:pending=>0, :agreed=>1, :disagreed=>2, :ignored=>3}","object_id":70097732890840}},{"id":119572,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"score_transitions","path":"app/models/reviewable_score.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":119565,"elapsed":0.000362,"return_value":{"class":"Hash","value":"{:approved=>1, :rejected=>2, :ignored=>3}","object_id":70097802664040}},{"id":119573,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"reviewable_scores\" SET \"status\" = 1, \"reviewed_by_id\" = 140, \"reviewed_at\" = '2020-05-28 18:50:45.325202' WHERE \"reviewable_scores\".\"id\" IN (SELECT \"reviewable_scores\".\"id\" FROM \"reviewable_scores\" WHERE \"reviewable_scores\".\"reviewable_id\" = 46 AND \"reviewable_scores\".\"status\" = 0 ORDER BY \"reviewable_scores\".\"created_at\" DESC)","database_type":"postgres","server_version":110006}},{"id":119574,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119573,"elapsed":0.001223},{"id":119575,"event":"return","defined_class":"Reviewable","method_id":"transition_to","path":"app/models/reviewable.rb","lineno":372,"static":false,"thread_id":70097708498960,"parent_id":119540,"elapsed":0.072337,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119576,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":119577,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119576,"elapsed":0.000944},{"id":119578,"event":"call","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableUser","object_id":70097587722660,"value":"#<ReviewableUser:0x00007f81bba1b348>"}},{"id":119579,"event":"return","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":119578,"elapsed":8.0e-06},{"id":119580,"event":"call","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parameters":[{"name":"job","class":"Symbol","object_id":17527068,"value":"notify_reviewable","kind":"req"},{"name":"opts","class":"Hash","object_id":70097813849680,"value":"{:reviewable_id=>46}","kind":"opt"}],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119581,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119582,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119581,"elapsed":4.0e-06},{"id":119583,"event":"call","defined_class":"Jobs::Base","method_id":"perform","path":"app/jobs/base.rb","lineno":187,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"Hash","object_id":70097813849680,"value":"{:reviewable_id=>46, :current_site_id=>\"default\", :sync_exec=>true}","kind":"rest"}],"receiver":{"class":"Jobs::NotifyReviewable","object_id":70097813883980,"value":"#<Jobs::NotifyReviewable:0x00007f81d6979898>"}},{"id":119584,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":119585,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":119584,"elapsed":4.0e-06},{"id":119586,"event":"call","defined_class":"Jobs::NotifyReviewable","method_id":"execute","path":"app/jobs/regular/notify_reviewable.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"args","class":"ActiveSupport::HashWithIndifferentAccess","object_id":70097813881100,"value":"{\"reviewable_id\"=>46, \"current_site_id\"=>\"default\"}","kind":"req"}],"receiver":{"class":"Jobs::NotifyReviewable","object_id":70097813883980,"value":"#<Jobs::NotifyReviewable:0x00007f81d6979898>"}},{"id":119587,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"reviewables\".* FROM \"reviewables\" WHERE \"reviewables\".\"id\" = 46 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119588,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119587,"elapsed":0.001088},{"id":119589,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119590,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parameters":[{"name":"priority","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119591,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119592,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parent_id":119591,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:low=>0, :medium=>5, :high=>10}","object_id":70097794689200}},{"id":119593,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"plugin_store_rows\".* FROM \"plugin_store_rows\" WHERE \"plugin_store_rows\".\"plugin_name\" = 'reviewables' AND \"plugin_store_rows\".\"key\" = 'priority_0' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119594,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119593,"elapsed":0.001009},{"id":119595,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parent_id":119590,"elapsed":0.004335,"return_value":{"class":"Float","value":"0.0","object_id":-9223372036854775806}},{"id":119596,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parent_id":119589,"elapsed":0.004558,"return_value":{"class":"ActiveRecord::Relation","value":"#<Reviewable::ActiveRecord_Relation:0x00007f81cca21f48>","object_id":70097730342820}},{"id":119597,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"reviewables\" WHERE (score >= 0.0) AND \"reviewables\".\"status\" = 0","database_type":"postgres","server_version":110006}},{"id":119598,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119597,"elapsed":0.001027},{"id":119599,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".\"id\" FROM \"users\" WHERE \"users\".\"admin\" = TRUE","database_type":"postgres","server_version":110006}},{"id":119600,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119599,"elapsed":0.000943},{"id":119601,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".\"id\" FROM \"users\" WHERE (id NOT IN (-1,140)) AND \"users\".\"moderator\" = TRUE","database_type":"postgres","server_version":110006}},{"id":119602,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119601,"elapsed":0.000832},{"id":119603,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119604,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parameters":[{"name":"priority","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119605,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":119606,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"priorities","path":"app/models/reviewable.rb","lineno":46,"static":true,"thread_id":70097708498960,"parent_id":119605,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:low=>0, :medium=>5, :high=>10}","object_id":70097794689200}},{"id":119607,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"plugin_store_rows\".* FROM \"plugin_store_rows\" WHERE \"plugin_store_rows\".\"plugin_name\" = 'reviewables' AND \"plugin_store_rows\".\"key\" = 'priority_0' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119608,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119607,"elapsed":1.6e-05},{"id":119609,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"min_score_for_priority","path":"app/models/reviewable.rb","lineno":263,"static":true,"thread_id":70097708498960,"parent_id":119604,"elapsed":0.002834,"return_value":{"class":"Float","value":"0.0","object_id":-9223372036854775806}},{"id":119610,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"default_visible","path":"app/models/reviewable.rb","lineno":86,"static":true,"thread_id":70097708498960,"parent_id":119603,"elapsed":0.003003,"return_value":{"class":"ActiveRecord::Relation","value":"#<Reviewable::ActiveRecord_Relation:0x00007f81d6e23e20>","object_id":70097816330000}},{"id":119611,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"reviewables\" WHERE (score >= 0.0) AND \"reviewables\".\"status\" = 0 AND \"reviewables\".\"reviewable_by_moderator\" = TRUE","database_type":"postgres","server_version":110006}},{"id":119612,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119611,"elapsed":0.000964},{"id":119613,"event":"return","defined_class":"Jobs::NotifyReviewable","method_id":"execute","path":"app/jobs/regular/notify_reviewable.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":119586,"elapsed":0.027625},{"id":119614,"event":"return","defined_class":"Jobs::Base","method_id":"perform","path":"app/jobs/base.rb","lineno":187,"static":false,"thread_id":70097708498960,"parent_id":119583,"elapsed":0.027924},{"id":119615,"event":"return","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parent_id":119580,"elapsed":0.028181},{"id":119616,"event":"return","defined_class":"Reviewable","method_id":"perform","path":"app/models/reviewable.rb","lineno":337,"static":false,"thread_id":70097708498960,"parent_id":119317,"elapsed":0.236337,"return_value":{"class":"Reviewable::PerformResult","value":"#<Reviewable::PerformResult:0x00007f81bfab6880>","object_id":70097621595200}},{"id":119617,"event":"return","defined_class":"Admin::UsersController","method_id":"approve","path":"app/controllers/admin/users_controller.rb","lineno":280,"static":false,"thread_id":70097708498960,"parent_id":119302,"elapsed":0.241882,"return_value":{"class":"String","value":"","object_id":70097591048140}},{"id":119618,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119619,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":119618,"elapsed":5.0e-06},{"id":119620,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119621,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":119620,"elapsed":6.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097591065240}},{"id":119622,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::UsersController","object_id":70097827513180,"value":"#<Admin::UsersController:0x00007f81d83786b8>"}},{"id":119623,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119624,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119623,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119625,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097799244840,"value":"#<User:0x00007f81d4d8d850>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097567502880,"value":"#<ActionDispatch::Request::Session:0x00007f81b938a440>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097612390940,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81be928438>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119626,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119627,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119628,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119627,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119629,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":119626,"elapsed":9.1e-05},{"id":119630,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119631,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827545620,"value":"#<TestCurrentUserProvider:0x00007f81d8388428>"}},{"id":119632,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":119631,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4d8d850>","object_id":70097799244840}},{"id":119633,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":119630,"elapsed":0.0001},{"id":119634,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":119625,"elapsed":0.000352},{"id":119635,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":119622,"elapsed":0.000557},{"id":119636,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":119223,"elapsed":0.257661,"http_server_response":{"status":200}},{"id":119637,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591092200,"value":"#<TestCurrentUserProvider:0x00007f81bc0887d0>"}},{"id":119638,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":119637,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":119639,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":119640,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":119639,"elapsed":5.0e-06},{"id":119641,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":119642,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":119641,"elapsed":4.0e-06},{"id":119643,"event":"call","defined_class":"User","method_id":"reload","path":"app/models/user.rb","lineno":444,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":119644,"event":"call","defined_class":"HasCustomFields","method_id":"reload","path":"app/models/concerns/has_custom_fields.rb","lineno":140,"static":false,"thread_id":70097708498960,"parameters":[{"name":"options","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":119645,"event":"call","defined_class":"HasCustomFields","method_id":"clear_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":153,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097592029100,"value":"#<User:0x00007f81bc251f58>"}},{"id":119646,"event":"return","defined_class":"HasCustomFields","method_id":"clear_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":153,"static":false,"thread_id":70097708498960,"parent_id":119645,"elapsed":3.0e-06},{"id":119647,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 165 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":119648,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119647,"elapsed":0.000831},{"id":119649,"event":"return","defined_class":"HasCustomFields","method_id":"reload","path":"app/models/concerns/has_custom_fields.rb","lineno":140,"static":false,"thread_id":70097708498960,"parent_id":119644,"elapsed":0.003777,"return_value":{"class":"User","value":"#<User:0x00007f81bc251f58>","object_id":70097592029100}},{"id":119650,"event":"return","defined_class":"User","method_id":"reload","path":"app/models/user.rb","lineno":444,"static":false,"thread_id":70097708498960,"parent_id":119643,"elapsed":0.003895,"return_value":{"class":"User","value":"#<User:0x00007f81bc251f58>","object_id":70097592029100}},{"id":119651,"event":"call","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097565682280,"value":"UserHistory"}},{"id":119652,"event":"return","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parent_id":119651,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:delete_user=>1, :change_trust_level=>2, :change_site_setting=>3, :change_theme=>4, :delete_theme=>","object_id":70097826343960}},{"id":119653,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"user_histories\" WHERE \"user_histories\".\"action\" = 69 AND \"user_histories\".\"target_user_id\" = 165","database_type":"postgres","server_version":110006}},{"id":119654,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":119653,"elapsed":0.000842}]}