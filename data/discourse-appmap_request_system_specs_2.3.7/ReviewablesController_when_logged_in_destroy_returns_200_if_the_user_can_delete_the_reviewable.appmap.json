{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"ReviewablesController when logged in #destroy returns 200 if the user can delete the reviewable","app":"Discourse","feature":"ReviewablesController when logged in","feature_group":"Reviewables","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"User","type":"class","children":[{"name":"password=","type":"function","location":"app/models/user.rb:618","static":false},{"name":"email=","type":"function","location":"app/models/user.rb:1198","static":false},{"name":"should_validate_email_address?","type":"function","location":"app/models/user.rb:432","static":false},{"name":"username_format_validator","type":"function","location":"app/models/user.rb:924","static":false},{"name":"confirm_password?","type":"function","location":"app/models/user.rb:650","static":false},{"name":"password_validator","type":"function","location":"app/models/user.rb:646","static":false},{"name":"password_validation_required?","type":"function","location":"app/models/user.rb:638","static":false},{"name":"password_required?","type":"function","location":"app/models/user.rb:634","static":false},{"name":"email","type":"function","location":"app/models/user.rb:1194","static":false},{"name":"create_user_profile","type":"function","location":"app/models/user.rb:1139","static":false},{"name":"set_random_avatar","type":"function","location":"app/models/user.rb:1143","static":false},{"name":"refresh_avatar","type":"function","location":"app/models/user.rb:1053","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"new_user?","type":"function","location":"app/models/user.rb:661","static":false},{"name":"new_user_posting_on_first_day?","type":"function","location":"app/models/user.rb:655","static":false},{"name":"first_post_created_at","type":"function","location":"app/models/user.rb:1067","static":false},{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"UsernameValidator","type":"class","children":[{"name":"perform_validation","type":"function","location":"app/models/username_validator.rb:11","static":true},{"name":"valid_format?","type":"function","location":"app/models/username_validator.rb:30","static":false},{"name":"invalid_char_pattern","type":"function","location":"app/models/username_validator.rb:132","static":true},{"name":"char_whitelist_exists?","type":"function","location":"app/models/username_validator.rb:136","static":true}]},{"name":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","type":"class","children":[{"name":"username_length","type":"function","location":"app/models/user.rb:241","static":true},{"name":"normalize_username","type":"function","location":"app/models/user.rb:245","static":true},{"name":"max_password_length","type":"function","location":"app/models/user.rb:237","static":true},{"name":"human_user_id?","type":"function","location":"app/models/user.rb:309","static":true}]},{"name":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"should_block?","type":"function","location":"app/models/screened_ip_address.rb:74","static":true},{"name":"exists_for_ip_address_and_action?","type":"function","location":"app/models/screened_ip_address.rb:82","static":true},{"name":"match_for_ip_address","type":"function","location":"app/models/screened_ip_address.rb:64","static":true}]},{"name":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","type":"class","children":[{"name":"should_block?","type":"function","location":"app/models/screened_email.rb:35","static":true},{"name":"canonical","type":"function","location":"app/models/screened_email.rb:21","static":true}]},{"name":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"generate_token","type":"function","location":"app/models/email_token.rb:36","static":true},{"name":"token_length","type":"function","location":"app/models/email_token.rb:20","static":true}]},{"name":"UserOption","type":"class","children":[{"name":"set_defaults","type":"function","location":"app/models/user_option.rb:47","static":false},{"name":"text_size=","type":"function","location":"app/models/user_option.rb:172","static":false},{"name":"title_count_mode=","type":"function","location":"app/models/user_option.rb:180","static":false}]},{"name":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","type":"class","children":[{"name":"text_sizes","type":"function","location":"app/models/user_option.rb:30","static":true},{"name":"title_count_modes","type":"function","location":"app/models/user_option.rb:34","static":true}]},{"name":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","type":"class","children":[{"name":"notification_levels","type":"function","location":"app/models/topic_user.rb:29","static":true}]},{"name":"HasCustomFields","type":"class","children":[{"name":"save_custom_fields","type":"function","location":"app/models/concerns/has_custom_fields.rb:204","static":false},{"name":"custom_fields_clean?","type":"function","location":"app/models/concerns/has_custom_fields.rb:185","static":false}]},{"name":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"enqueue_object_hooks","type":"function","location":"app/models/web_hook.rb:60","static":true},{"name":"active_web_hooks","type":"function","location":"app/models/web_hook.rb:45","static":true}]},{"name":"Trashable","type":"class","children":[{"name":"ClassMethods","type":"class","children":[{"name":"with_deleted_scope_sql","type":"function","location":"app/models/concerns/trashable.rb:27","static":false}]}]},{"name":"Topic","type":"class","children":[{"name":"title=","type":"function","location":"app/models/topic.rb:1124","static":false},{"name":"private_message?","type":"function","location":"app/models/topic.rb:551","static":false},{"name":"ensure_topic_has_a_category","type":"function","location":"app/models/topic.rb:375","static":false},{"name":"inherit_auto_close_from_category","type":"function","location":"app/models/topic.rb:348","static":false},{"name":"initialize_default_values","type":"function","location":"app/models/topic.rb:343","static":false},{"name":"limit_topics_per_day","type":"function","location":"app/models/topic.rb:419","static":false},{"name":"limit_private_messages_per_day","type":"function","location":"app/models/topic.rb:427","static":false},{"name":"changed_to_category","type":"function","location":"app/models/topic.rb:784","static":false},{"name":"advance_draft_sequence","type":"function","location":"app/models/topic.rb:367","static":false}]},{"name":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","type":"class","children":[{"name":"topic_title_length","type":"function","location":"app/models/site_setting.rb:36","static":true},{"name":"Upload","type":"function","location":"app/models/site_setting.rb:172","static":true}]},{"name":"WatchedWord(id: integer, word: string, action: integer, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"actions","type":"function","location":"app/models/watched_word.rb:5","static":true}]},{"name":"Emoji","type":"class","children":[{"name":"unicode_unescape","type":"function","location":"app/models/emoji.rb:185","static":true},{"name":"custom","type":"function","location":"app/models/emoji.rb:35","static":true},{"name":"cache_key","type":"function","location":"app/models/emoji.rb:79","static":true}]},{"name":"SiteSetting","type":"class","children":[{"name":"Upload","type":"class","children":[{"name":"enable_s3_uploads","type":"function","location":"app/models/site_setting.rb:146","static":true}]}]},{"name":"GlobalSetting","type":"class","children":[{"name":"use_s3?","type":"function","location":"app/models/global_setting.rb:96","static":true},{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true}]},{"name":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","type":"class","children":[{"name":"max_fancy_title_length","type":"function","location":"app/models/topic.rb:27","static":true}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"DraftSequence(id: integer, user_id: integer, draft_key: string, sequence: integer)","type":"class","children":[{"name":"next!","type":"function","location":"app/models/draft_sequence.rb:4","static":true}]},{"name":"Post(id: integer, user_id: integer, topic_id: integer, post_number: integer, raw: text, cooked: text, created_at: datetime, updated_at: datetime, reply_to_post_number: integer, reply_count: integer, quote_count: integer, deleted_at: datetime, off_topic_count: integer, like_count: integer, incoming_link_count: integer, bookmark_count: integer, score: float, reads: integer, post_type: integer, sort_order: integer, last_editor_id: integer, hidden: boolean, hidden_reason_id: integer, notify_moderators_count: integer, spam_count: integer, illegal_count: integer, inappropriate_count: integer, last_version_at: datetime, user_deleted: boolean, reply_to_user_id: integer, percent_rank: float, notify_user_count: integer, like_score: integer, deleted_by_id: integer, edit_reason: string, word_count: integer, version: integer, cook_method: integer, wiki: boolean, baked_at: datetime, baked_version: integer, hidden_at: datetime, self_edits: integer, reply_quoted: boolean, via_email: boolean, raw_email: text, public_version: integer, action_code: string, image_url: string, locked_by_id: integer, image_upload_id: integer)","type":"class","children":[{"name":"cook_methods","type":"function","location":"app/models/post.rb:146","static":true}]},{"name":"Reviewable","type":"class","children":[{"name":"apply_review_group","type":"function","location":"app/models/reviewable.rb:283","static":false},{"name":"log_history","type":"function","location":"app/models/reviewable.rb:274","static":false},{"name":"pending?","type":"function","location":"app/models/reviewable.rb:82","static":false},{"name":"serializer","type":"function","location":"app/models/reviewable.rb:511","static":false},{"name":"perform","type":"function","location":"app/models/reviewable.rb:337","static":false},{"name":"actions_for","type":"function","location":"app/models/reviewable.rb:291","static":false},{"name":"approved?","type":"function","location":"app/models/reviewable.rb:82","static":false},{"name":"rejected?","type":"function","location":"app/models/reviewable.rb:82","static":false},{"name":"create_result","type":"function","location":"app/models/reviewable.rb:527","static":false},{"name":"transition_to","type":"function","location":"app/models/reviewable.rb:372","static":false},{"name":"deleted?","type":"function","location":"app/models/reviewable.rb:82","static":false}]},{"name":"ReviewableHistory(id: integer, reviewable_id: integer, reviewable_history_type: integer, status: integer, created_by_id: integer, edited: json, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"types","type":"function","location":"app/models/reviewable_history.rb:7","static":true}]},{"name":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"serializer_for","type":"function","location":"app/models/reviewable.rb:521","static":true},{"name":"action_aliases","type":"function","location":"app/models/reviewable.rb:41","static":true},{"name":"statuses","type":"function","location":"app/models/reviewable.rb:64","static":true}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"ReviewableQueuedPost","type":"class","children":[{"name":"build_actions","type":"function","location":"app/models/reviewable_queued_post.rb:10","static":false},{"name":"perform_delete","type":"function","location":"app/models/reviewable_queued_post.rb:129","static":false}]},{"name":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","type":"class","children":[{"name":"score_transitions","type":"function","location":"app/models/reviewable_score.rb:33","static":true},{"name":"statuses","type":"function","location":"app/models/reviewable_score.rb:24","static":true}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/validators","type":"package","children":[{"name":"PasswordValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/password_validator.rb:5","static":false}]},{"name":"UserFullNameValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/user_full_name_validator.rb:5","static":false}]},{"name":"AllowedIpAddressValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/allowed_ip_address_validator.rb:5","static":false}]},{"name":"EmailValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/email_validator.rb:5","static":false},{"name":"allowed?","type":"function","location":"lib/validators/email_validator.rb:15","static":true},{"name":"email_in_restriction_setting?","type":"function","location":"lib/validators/email_validator.rb:33","static":true}]},{"name":"TimezoneValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/timezone_validator.rb:14","static":false}]},{"name":"TopicTitleLengthValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/topic_title_length_validator.rb:5","static":false}]},{"name":"CensoredWordsValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/censored_words_validator.rb:4","static":false}]},{"name":"WatchedWordsValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/watched_words_validator.rb:4","static":false}]},{"name":"QualityTitleValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/quality_title_validator.rb:7","static":false}]},{"name":"MaxEmojisValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/max_emojis_validator.rb:5","static":false}]},{"name":"UniqueAmongValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/unique_among_validator.rb:4","static":false}]}]},{"name":"app/services","type":"package","children":[{"name":"BadgeGranter","type":"class","children":[{"name":"queue_badge_grant","type":"function","location":"app/services/badge_granter.rb:126","static":true}]},{"name":"TrackedTopicsUpdater","type":"class","children":[{"name":"call","type":"function","location":"app/services/tracked_topics_updater.rb:10","static":false}]},{"name":"SearchIndexer","type":"class","children":[{"name":"index","type":"function","location":"app/services/search_indexer.rb:126","static":true},{"name":"queue_post_reindex","type":"function","location":"app/services/search_indexer.rb:114","static":true}]},{"name":"WordWatcher","type":"class","children":[{"name":"word_matcher_regexp","type":"function","location":"app/services/word_watcher.rb:26","static":true},{"name":"get_cached_words","type":"function","location":"app/services/word_watcher.rb:17","static":true},{"name":"word_matcher_regexp_key","type":"function","location":"app/services/word_watcher.rb:55","static":true},{"name":"words_for_action","type":"function","location":"app/services/word_watcher.rb:9","static":true},{"name":"should_block?","type":"function","location":"app/services/word_watcher.rb:73","static":false},{"name":"word_matches_for_action?","type":"function","location":"app/services/word_watcher.rb:77","static":false}]}]},{"name":"app/jobs","type":"package","children":[{"name":"Jobs","type":"class","children":[{"name":"enqueue","type":"function","location":"app/jobs/base.rb:284","static":true},{"name":"run_later?","type":"function","location":"app/jobs/base.rb:9","static":true}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"ReviewablesController","type":"class","children":[{"name":"destroy","type":"function","location":"app/controllers/reviewables_controller.rb:135","static":false}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false},{"name":"is_staff?","type":"function","location":"lib/guardian.rb:88","static":false},{"name":"can_delete?","type":"function","location":"lib/guardian.rb:159","static":false},{"name":"authenticated?","type":"function","location":"lib/guardian.rb:80","static":false},{"name":"can_delete_reviewable_queued_post?","type":"function","location":"lib/guardian.rb:188","static":false}]},{"name":"EnsureMagic","type":"class","children":[{"name":"method_missing","type":"function","location":"lib/guardian/ensure_magic.rb:6","static":false}]},{"name":"UserGuardian","type":"class","children":[{"name":"can_see_review_queue?","type":"function","location":"lib/guardian/user_guardian.rb:148","static":false},{"name":"can_delete_user?","type":"function","location":"lib/guardian/user_guardian.rb:61","static":false}]}]}],"events":[{"id":34697,"event":"call","defined_class":"User","method_id":"password=","path":"app/models/user.rb","lineno":618,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097783082600,"value":"myawesomepassword","kind":"req"}],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34698,"event":"return","defined_class":"User","method_id":"password=","path":"app/models/user.rb","lineno":618,"static":false,"thread_id":70097708498960,"parent_id":34697,"elapsed":6.0e-06,"return_value":{"class":"String","value":"myawesomepassword","object_id":70097783082600}},{"id":34699,"event":"call","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_email","class":"String","object_id":70097816556280,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34700,"event":"return","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parent_id":34699,"elapsed":0.000141,"return_value":{"class":"UserEmail","value":"#<UserEmail:0x00007f81d6ea3350>","object_id":70097816590760}},{"id":34701,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":34702,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34701,"elapsed":0.000706},{"id":34703,"event":"call","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34704,"event":"return","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parent_id":34703,"elapsed":1.2e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34705,"event":"call","defined_class":"User","method_id":"username_format_validator","path":"app/models/user.rb","lineno":924,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34706,"event":"call","defined_class":"UsernameValidator","method_id":"perform_validation","path":"app/models/username_validator.rb","lineno":11,"static":true,"thread_id":70097708498960,"parameters":[{"name":"object","class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>","kind":"req"},{"name":"field_name","class":"String","object_id":70097713120640,"value":"username","kind":"req"}],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":34707,"event":"call","defined_class":"UsernameValidator","method_id":"valid_format?","path":"app/models/username_validator.rb","lineno":30,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UsernameValidator","object_id":70097591143400,"value":"#<UsernameValidator:0x00007f81bc0a17d0>"}},{"id":34708,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":34709,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parent_id":34708,"elapsed":1.0e-05,"return_value":{"class":"Range","value":"3..20","object_id":70097591164120}},{"id":34710,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":34711,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"username_length","path":"app/models/user.rb","lineno":241,"static":true,"thread_id":70097708498960,"parent_id":34710,"elapsed":5.0e-06,"return_value":{"class":"Range","value":"3..20","object_id":70097591161460}},{"id":34712,"event":"call","defined_class":"UsernameValidator","method_id":"invalid_char_pattern","path":"app/models/username_validator.rb","lineno":132,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":34713,"event":"return","defined_class":"UsernameValidator","method_id":"invalid_char_pattern","path":"app/models/username_validator.rb","lineno":132,"static":true,"thread_id":70097708498960,"parent_id":34712,"elapsed":9.0e-06,"return_value":{"class":"Regexp","value":"(?-mix:[^\\w.-])","object_id":70097569557580}},{"id":34714,"event":"call","defined_class":"UsernameValidator","method_id":"char_whitelist_exists?","path":"app/models/username_validator.rb","lineno":136,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097569555240,"value":"UsernameValidator"}},{"id":34715,"event":"return","defined_class":"UsernameValidator","method_id":"char_whitelist_exists?","path":"app/models/username_validator.rb","lineno":136,"static":true,"thread_id":70097708498960,"parent_id":34714,"elapsed":4.0e-06},{"id":34716,"event":"return","defined_class":"UsernameValidator","method_id":"valid_format?","path":"app/models/username_validator.rb","lineno":30,"static":false,"thread_id":70097708498960,"parent_id":34707,"elapsed":0.000415,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34717,"event":"return","defined_class":"UsernameValidator","method_id":"perform_validation","path":"app/models/username_validator.rb","lineno":11,"static":true,"thread_id":70097708498960,"parent_id":34706,"elapsed":0.000516},{"id":34718,"event":"return","defined_class":"User","method_id":"username_format_validator","path":"app/models/user.rb","lineno":924,"static":false,"thread_id":70097708498960,"parent_id":34705,"elapsed":0.000616},{"id":34719,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"normalize_username","path":"app/models/user.rb","lineno":245,"static":true,"thread_id":70097708498960,"parameters":[{"name":"username","class":"String","object_id":70097591123980,"value":"bruce82","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":34720,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"normalize_username","path":"app/models/user.rb","lineno":245,"static":true,"thread_id":70097708498960,"parent_id":34719,"elapsed":8.0e-06,"return_value":{"class":"String","value":"bruce82","object_id":70097591175080}},{"id":34721,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097591123980,"value":"bruce82","kind":"req"}],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34722,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":34721,"elapsed":9.0e-06},{"id":34723,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097591193600,"value":"bruce82","kind":"req"}],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34724,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":34723,"elapsed":5.0e-06},{"id":34725,"event":"call","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34726,"event":"call","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":727708,"value":"password","kind":"req"},{"name":"value","class":"String","object_id":70097783082600,"value":"myawesomepassword","kind":"req"}],"receiver":{"class":"PasswordValidator","object_id":70097591211340,"value":"#<PasswordValidator:0x00007f81bc0c2a98>"}},{"id":34727,"event":"call","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34728,"event":"call","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34729,"event":"return","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parent_id":34728,"elapsed":3.0e-06},{"id":34730,"event":"return","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parent_id":34727,"elapsed":8.6e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34731,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34732,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":34731,"elapsed":8.0e-06,"return_value":{"class":"String","value":"bruce82@wayne.com","object_id":70097591224080}},{"id":34733,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34734,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":34733,"elapsed":5.0e-06,"return_value":{"class":"String","value":"bruce82@wayne.com","object_id":70097591224080}},{"id":34735,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097783082600,"value":"myawesomepassword","kind":"req"}],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34736,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":34735,"elapsed":5.0e-06},{"id":34737,"event":"return","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":34726,"elapsed":0.001856},{"id":34738,"event":"return","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parent_id":34725,"elapsed":0.001984},{"id":34739,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":34740,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parent_id":34739,"elapsed":4.0e-06,"return_value":{"class":"Integer","value":"200","object_id":401}},{"id":34741,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097591257340,"value":"Bruce Wayne","kind":"req"}],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34742,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":34741,"elapsed":5.0e-06},{"id":34743,"event":"call","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parameters":[{"name":"password","class":"String","object_id":70097591279160,"value":"bruce wayne","kind":"req"}],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34744,"event":"return","defined_class":"User","method_id":"confirm_password?","path":"app/models/user.rb","lineno":650,"static":false,"thread_id":70097708498960,"parent_id":34743,"elapsed":5.0e-06},{"id":34745,"event":"call","defined_class":"UserFullNameValidator","method_id":"validate_each","path":"lib/validators/user_full_name_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":88028,"value":"name","kind":"req"},{"name":"value","class":"String","object_id":70097591225640,"value":"Bruce Wayne","kind":"req"}],"receiver":{"class":"UserFullNameValidator","object_id":70097719440680,"value":"#<UserFullNameValidator:0x00007f81cb556a50>"}},{"id":34746,"event":"return","defined_class":"UserFullNameValidator","method_id":"validate_each","path":"lib/validators/user_full_name_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":34745,"elapsed":5.0e-06},{"id":34747,"event":"call","defined_class":"AllowedIpAddressValidator","method_id":"validate_each","path":"lib/validators/allowed_ip_address_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097591288060,"value":"99.232.23.82","kind":"req"}],"receiver":{"class":"AllowedIpAddressValidator","object_id":70097719544680,"value":"#<AllowedIpAddressValidator:0x00007f81cb5896d0>"}},{"id":34748,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"should_block?","path":"app/models/screened_ip_address.rb","lineno":74,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097591288060,"value":"99.232.23.82","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":34749,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"exists_for_ip_address_and_action?","path":"app/models/screened_ip_address.rb","lineno":82,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097591288060,"value":"99.232.23.82","kind":"req"},{"name":"action_type","class":"Integer","object_id":3,"value":"1","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":34750,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097591288060,"value":"99.232.23.82","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":34751,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('99.232.23.82' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34752,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34751,"elapsed":0.000784},{"id":34753,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":34750,"elapsed":0.003823},{"id":34754,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"exists_for_ip_address_and_action?","path":"app/models/screened_ip_address.rb","lineno":82,"static":true,"thread_id":70097708498960,"parent_id":34749,"elapsed":0.003936},{"id":34755,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"should_block?","path":"app/models/screened_ip_address.rb","lineno":74,"static":true,"thread_id":70097708498960,"parent_id":34748,"elapsed":0.004039},{"id":34756,"event":"return","defined_class":"AllowedIpAddressValidator","method_id":"validate_each","path":"lib/validators/allowed_ip_address_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":34747,"elapsed":0.004147},{"id":34757,"event":"call","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserEmail","object_id":70097816590760,"value":"#<UserEmail:0x00007f81d6ea3350>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":735708,"value":"email","kind":"req"},{"name":"value","class":"String","object_id":70097592713280,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"EmailValidator","object_id":70097803750180,"value":"#<EmailValidator:0x00007f81d5625648>"}},{"id":34758,"event":"call","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097592713280,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":34759,"event":"call","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[{"name":"setting","class":"String","object_id":70097723515680,"value":"mailinator.com","kind":"req"},{"name":"value","class":"String","object_id":70097592713280,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":34760,"event":"return","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":34759,"elapsed":2.4e-05},{"id":34761,"event":"return","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parent_id":34758,"elapsed":0.000119,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34762,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097592713280,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":34763,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097592713280,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":34764,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parent_id":34763,"elapsed":8.0e-06,"return_value":{"class":"String","value":"bruce82@wayne.com","object_id":70097592762880}},{"id":34765,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_emails\".* FROM \"screened_emails\" ORDER BY \"screened_emails\".\"created_at\" DESC LIMIT 100","database_type":"postgres","server_version":110006}},{"id":34766,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34765,"elapsed":0.0008},{"id":34767,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":34762,"elapsed":0.004229},{"id":34768,"event":"return","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":34757,"elapsed":0.004553},{"id":34769,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE (lower(email) = 'bruce82@wayne.com') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34770,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34769,"elapsed":0.000752},{"id":34771,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":34772,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"max_password_length","path":"app/models/user.rb","lineno":237,"static":true,"thread_id":70097708498960,"parent_id":34771,"elapsed":4.0e-06,"return_value":{"class":"Integer","value":"200","object_id":401}},{"id":34773,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"users\" (\"username\", \"created_at\", \"updated_at\", \"name\", \"password_hash\", \"salt\", \"active\", \"username_lower\", \"trust_level\", \"ip_address\") VALUES ('bruce82', '2020-05-28 18:50:03.480755', '2020-05-28 18:50:03.480755', 'Bruce Wayne', '2a4dd455eea2be10abbf8f2172e7749b93b6522f11e7aa6260341934e71aed83', '5f99f85fd545ce831a5214178abca383', TRUE, 'bruce82', 1, '99.232.23.82/32') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":34774,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34773,"elapsed":0.000881},{"id":34775,"event":"call","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserEmail","object_id":70097816590760,"value":"#<UserEmail:0x00007f81d6ea3350>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":735708,"value":"email","kind":"req"},{"name":"value","class":"String","object_id":70097565791800,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"EmailValidator","object_id":70097803750180,"value":"#<EmailValidator:0x00007f81d5625648>"}},{"id":34776,"event":"call","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097565791800,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":34777,"event":"call","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[{"name":"setting","class":"String","object_id":70097723515680,"value":"mailinator.com","kind":"req"},{"name":"value","class":"String","object_id":70097565791800,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":34778,"event":"return","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":34777,"elapsed":2.5e-05},{"id":34779,"event":"return","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parent_id":34776,"elapsed":0.000124,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34780,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097565791800,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":34781,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097565791800,"value":"bruce82@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":34782,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parent_id":34781,"elapsed":9.0e-06,"return_value":{"class":"String","value":"bruce82@wayne.com","object_id":70097565802820}},{"id":34783,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_emails\".* FROM \"screened_emails\" ORDER BY \"screened_emails\".\"created_at\" DESC LIMIT 100","database_type":"postgres","server_version":110006}},{"id":34784,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34783,"elapsed":0.000775},{"id":34785,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":34780,"elapsed":0.004155},{"id":34786,"event":"return","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":34775,"elapsed":0.004486},{"id":34787,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE \"user_emails\".\"primary\" = TRUE AND \"user_emails\".\"user_id\" = 83 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34788,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34787,"elapsed":0.000802},{"id":34789,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE (lower(email) = 'bruce82@wayne.com') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34790,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34789,"elapsed":0.000762},{"id":34791,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_emails\" (\"user_id\", \"email\", \"primary\", \"created_at\", \"updated_at\") VALUES (83, 'bruce82@wayne.com', TRUE, '2020-05-28 18:50:03.497405', '2020-05-28 18:50:03.497405') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":34792,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34791,"elapsed":0.000887},{"id":34793,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34794,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":34793,"elapsed":1.7e-05,"return_value":{"class":"String","value":"bruce82@wayne.com","object_id":70097611886100}},{"id":34795,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"generate_token","path":"app/models/email_token.rb","lineno":36,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":34796,"event":"call","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"token_length","path":"app/models/email_token.rb","lineno":20,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794362480,"value":"EmailToken"}},{"id":34797,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"token_length","path":"app/models/email_token.rb","lineno":20,"static":true,"thread_id":70097708498960,"parent_id":34796,"elapsed":4.0e-06,"return_value":{"class":"Integer","value":"16","object_id":33}},{"id":34798,"event":"return","defined_class":"EmailToken(id: integer, user_id: integer, email: string, token: string, confirmed: boolean, expired: boolean, created_at: datetime, updated_at: datetime)","method_id":"generate_token","path":"app/models/email_token.rb","lineno":36,"static":true,"thread_id":70097708498960,"parent_id":34795,"elapsed":0.00013,"return_value":{"class":"String","value":"55f35f73ce1a0c32e8c8ef6faef98db8","object_id":70097611902980}},{"id":34799,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"email_tokens\" (\"user_id\", \"email\", \"token\", \"created_at\", \"updated_at\") VALUES (83, 'bruce82@wayne.com', '55f35f73ce1a0c32e8c8ef6faef98db8', '2020-05-28 18:50:03.502547', '2020-05-28 18:50:03.502547') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":34800,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34799,"elapsed":0.001706},{"id":34801,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"email_tokens\" SET \"expired\" = TRUE WHERE \"email_tokens\".\"user_id\" = 83 AND (id != 278)","database_type":"postgres","server_version":110006}},{"id":34802,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34801,"elapsed":0.001073},{"id":34803,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_stats\" (\"user_id\", \"new_since\") VALUES (83, '2020-05-28 18:50:03.512419') RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":34804,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34803,"elapsed":0.000808},{"id":34805,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 83 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34806,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34805,"elapsed":0.00081},{"id":34807,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097587031220,"value":"{:user=>#<User id: 83, username: \"bruce82\", created_at: \"2020-05-28 18:50:03\", updated_at: \"2020-05-","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":34808,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":34807,"elapsed":9.0e-06},{"id":34809,"event":"call","defined_class":"TimezoneValidator","method_id":"validate_each","path":"lib/validators/timezone_validator.rb","lineno":14,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserOption","object_id":70097587101200,"value":"#<UserOption:0x00007f81bb8ebc20>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":5058588,"value":"timezone","kind":"req"},{"name":"value","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"TimezoneValidator","object_id":70097795312080,"value":"#<TimezoneValidator:0x00007f81d460d3a0>"}},{"id":34810,"event":"return","defined_class":"TimezoneValidator","method_id":"validate_each","path":"lib/validators/timezone_validator.rb","lineno":14,"static":false,"thread_id":70097708498960,"parent_id":34809,"elapsed":4.0e-06},{"id":34811,"event":"call","defined_class":"UserOption","method_id":"set_defaults","path":"app/models/user_option.rb","lineno":47,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserOption","object_id":70097587101200,"value":"#<UserOption:0x00007f81bb8ebc20>"}},{"id":34812,"event":"call","defined_class":"UserOption","method_id":"text_size=","path":"app/models/user_option.rb","lineno":172,"static":false,"thread_id":70097708498960,"parameters":[{"name":"value","class":"String","object_id":70097723783240,"value":"normal","kind":"req"}],"receiver":{"class":"UserOption","object_id":70097587101200,"value":"#<UserOption:0x00007f81bb8ebc20>"}},{"id":34813,"event":"call","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"text_sizes","path":"app/models/user_option.rb","lineno":30,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097795215760,"value":"UserOption"}},{"id":34814,"event":"return","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"text_sizes","path":"app/models/user_option.rb","lineno":30,"static":true,"thread_id":70097708498960,"parent_id":34813,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:normal=>0, :larger=>1, :largest=>2, :smaller=>3}","object_id":70097795246760}},{"id":34815,"event":"return","defined_class":"UserOption","method_id":"text_size=","path":"app/models/user_option.rb","lineno":172,"static":false,"thread_id":70097708498960,"parent_id":34812,"elapsed":0.000111,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":34816,"event":"call","defined_class":"UserOption","method_id":"title_count_mode=","path":"app/models/user_option.rb","lineno":180,"static":false,"thread_id":70097708498960,"parameters":[{"name":"value","class":"String","object_id":70097723782760,"value":"notifications","kind":"req"}],"receiver":{"class":"UserOption","object_id":70097587101200,"value":"#<UserOption:0x00007f81bb8ebc20>"}},{"id":34817,"event":"call","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"title_count_modes","path":"app/models/user_option.rb","lineno":34,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097795215760,"value":"UserOption"}},{"id":34818,"event":"return","defined_class":"UserOption(user_id: integer, mailing_list_mode: boolean, email_digests: boolean, external_links_in_new_tab: boolean, enable_quoting: boolean, dynamic_favicon: boolean, disable_jump_reply: boolean, automatically_unpin_topics: boolean, digest_after_minutes: integer, auto_track_topics_after_msecs: integer, new_topic_duration_minutes: integer, last_redirected_to_top_at: datetime, email_previous_replies: integer, email_in_reply_to: boolean, like_notification_frequency: integer, mailing_list_mode_frequency: integer, include_tl0_in_digests: boolean, notification_level_when_replying: integer, theme_key_seq: integer, allow_private_messages: boolean, homepage_id: integer, theme_ids: integer, hide_profile_and_presence: boolean, text_size_key: integer, text_size_seq: integer, email_level: integer, email_messages_level: integer, title_count_mode_key: integer, enable_defer: boolean, timezone: string)","method_id":"title_count_modes","path":"app/models/user_option.rb","lineno":34,"static":true,"thread_id":70097708498960,"parent_id":34817,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:notifications=>0, :contextual=>1}","object_id":70097816997920}},{"id":34819,"event":"return","defined_class":"UserOption","method_id":"title_count_mode=","path":"app/models/user_option.rb","lineno":180,"static":false,"thread_id":70097708498960,"parent_id":34816,"elapsed":0.0001,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":34820,"event":"return","defined_class":"UserOption","method_id":"set_defaults","path":"app/models/user_option.rb","lineno":47,"static":false,"thread_id":70097708498960,"parent_id":34811,"elapsed":0.000464,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34821,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_options\" (\"user_id\", \"email_digests\", \"digest_after_minutes\", \"auto_track_topics_after_msecs\", \"new_topic_duration_minutes\", \"notification_level_when_replying\") VALUES (83, TRUE, 10080, 240000, 2880, 2) RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":34822,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34821,"elapsed":0.000742},{"id":34823,"event":"call","defined_class":"TrackedTopicsUpdater","method_id":"call","path":"app/services/tracked_topics_updater.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TrackedTopicsUpdater","object_id":70097799492720,"value":"#<TrackedTopicsUpdater:0x00007f81d4e068e0>"}},{"id":34824,"event":"call","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755252000,"value":"TopicUser"}},{"id":34825,"event":"return","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parent_id":34824,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:muted=>0, :regular=>1, :tracking=>2, :watching=>3}","object_id":70097795217940}},{"id":34826,"event":"call","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097755252000,"value":"TopicUser"}},{"id":34827,"event":"return","defined_class":"TopicUser(user_id: integer, topic_id: integer, posted: boolean, last_read_post_number: integer, highest_seen_post_number: integer, last_visited_at: datetime, first_visited_at: datetime, notification_level: integer, notifications_changed_at: datetime, notifications_reason_id: integer, total_msecs_viewed: integer, cleared_pinned_at: datetime, id: integer, last_emailed_post_number: integer, liked: boolean, bookmarked: boolean)","method_id":"notification_levels","path":"app/models/topic_user.rb","lineno":29,"static":true,"thread_id":70097708498960,"parent_id":34826,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:muted=>0, :regular=>1, :tracking=>2, :watching=>3}","object_id":70097795217940}},{"id":34828,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"topic_users\" SET notification_level = CASE WHEN total_msecs_viewed < 240000 THEN 1 ELSE 2 END WHERE \"topic_users\".\"notifications_reason_id\" IS NULL AND \"topic_users\".\"user_id\" = 83","database_type":"postgres","server_version":110006}},{"id":34829,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34828,"elapsed":0.000771},{"id":34830,"event":"return","defined_class":"TrackedTopicsUpdater","method_id":"call","path":"app/services/tracked_topics_updater.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":34823,"elapsed":0.003925,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":34831,"event":"call","defined_class":"User","method_id":"create_user_profile","path":"app/models/user.rb","lineno":1139,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34832,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 83 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34833,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34832,"elapsed":0.00086},{"id":34834,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_profiles\" (\"user_id\") VALUES (83) RETURNING \"user_id\"","database_type":"postgres","server_version":110006}},{"id":34835,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34834,"elapsed":0.000716},{"id":34836,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097614095660,"value":"{:user=>#<UserProfile user_id: 83, location: nil, website: nil, bio_raw: nil, bio_cooked: nil, dismi","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":34837,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":34836,"elapsed":8.0e-06},{"id":34838,"event":"return","defined_class":"User","method_id":"create_user_profile","path":"app/models/user.rb","lineno":1139,"static":false,"thread_id":70097708498960,"parent_id":34831,"elapsed":0.008322,"return_value":{"class":"UserProfile","value":"#<UserProfile:0x00007f81d85590b8>","object_id":70097828497500}},{"id":34839,"event":"call","defined_class":"User","method_id":"set_random_avatar","path":"app/models/user.rb","lineno":1143,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34840,"event":"return","defined_class":"User","method_id":"set_random_avatar","path":"app/models/user.rb","lineno":1143,"static":false,"thread_id":70097708498960,"parent_id":34839,"elapsed":8.0e-06},{"id":34841,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":34842,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34841,"elapsed":0.000685},{"id":34843,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":34844,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34843,"elapsed":0.000652},{"id":34845,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":34846,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34845,"elapsed":0.000666},{"id":34847,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"tags\".\"id\" FROM \"tags\" WHERE 1=0","database_type":"postgres","server_version":110006}},{"id":34848,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34847,"elapsed":0.000679},{"id":34849,"event":"call","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parameters":[{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34850,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34851,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":34850,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34852,"event":"return","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parent_id":34849,"elapsed":0.000102},{"id":34853,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE \"user_auth_tokens\".\"user_id\" = 83","database_type":"postgres","server_version":110006}},{"id":34854,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34853,"elapsed":0.000746},{"id":34855,"event":"call","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34856,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_avatars\".* FROM \"user_avatars\" WHERE \"user_avatars\".\"user_id\" = 83 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34857,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34856,"elapsed":0.000741},{"id":34858,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_avatars\" (\"user_id\", \"created_at\", \"updated_at\") VALUES (83, '2020-05-28 18:50:03.558228', '2020-05-28 18:50:03.558228') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":34859,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34858,"elapsed":0.000753},{"id":34860,"event":"return","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parent_id":34855,"elapsed":0.007439},{"id":34861,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097589287180,"value":"{:user=>#<User id: 83, username: \"bruce82\", created_at: \"2020-05-28 18:50:03\", updated_at: \"2020-05-","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":34862,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":34861,"elapsed":7.0e-06},{"id":34863,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":34864,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":34863,"elapsed":4.0e-06},{"id":34865,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":34866,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34865,"elapsed":0.000697},{"id":34867,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"},{"name":"object","class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>","kind":"req"},{"name":"event","class":"Symbol","object_id":12268508,"value":"user_created","kind":"req"},{"name":"serializer","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":34868,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":34869,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":34868,"elapsed":0.000217,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81bedc8e70>","object_id":70097614817080}},{"id":34870,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'user') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34871,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34870,"elapsed":0.000984},{"id":34872,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":34867,"elapsed":0.00416},{"id":34873,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097777826960,"value":"Topic"}},{"id":34874,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":34873,"elapsed":3.7e-05,"return_value":{"class":"String","value":"\"topics\".\"deleted_at\" IS NULL","object_id":70097609146040}},{"id":34875,"event":"call","defined_class":"Topic","method_id":"title=","path":"app/models/topic.rb","lineno":1124,"static":false,"thread_id":70097708498960,"parameters":[{"name":"t","class":"String","object_id":70097609125780,"value":"This is a test topic 13","kind":"req"}],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34876,"event":"return","defined_class":"Topic","method_id":"title=","path":"app/models/topic.rb","lineno":1124,"static":false,"thread_id":70097708498960,"parent_id":34875,"elapsed":6.9e-05,"return_value":{"class":"String","value":"This is a test topic 13","object_id":70097609125780}},{"id":34877,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":34878,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34877,"elapsed":0.000772},{"id":34879,"event":"call","defined_class":"Topic","method_id":"title=","path":"app/models/topic.rb","lineno":1124,"static":false,"thread_id":70097708498960,"parameters":[{"name":"t","class":"String","object_id":70097615613100,"value":"This is a test topic 13","kind":"req"}],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34880,"event":"return","defined_class":"Topic","method_id":"title=","path":"app/models/topic.rb","lineno":1124,"static":false,"thread_id":70097708498960,"parent_id":34879,"elapsed":4.9e-05,"return_value":{"class":"String","value":"This is a test topic 13","object_id":70097615613100}},{"id":34881,"event":"call","defined_class":"TopicTitleLengthValidator","method_id":"validate_each","path":"lib/validators/topic_title_length_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097615628920,"value":"This is a test topic 13","kind":"req"}],"receiver":{"class":"TopicTitleLengthValidator","object_id":70097778412020,"value":"#<TopicTitleLengthValidator:0x00007f81d25d13e8>"}},{"id":34882,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34883,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":34882,"elapsed":5.0e-06},{"id":34884,"event":"call","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34885,"event":"return","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parent_id":34884,"elapsed":1.0e-05},{"id":34886,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"topic_title_length","path":"app/models/site_setting.rb","lineno":36,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":34887,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"topic_title_length","path":"app/models/site_setting.rb","lineno":36,"static":true,"thread_id":70097708498960,"parent_id":34886,"elapsed":5.0e-06,"return_value":{"class":"Range","value":"15..255","object_id":70097615643400}},{"id":34888,"event":"return","defined_class":"TopicTitleLengthValidator","method_id":"validate_each","path":"lib/validators/topic_title_length_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":34881,"elapsed":0.000319,"return_value":{"class":"Hash","value":"{:is=>:==, :minimum=>:>=, :maximum=>:<=}","object_id":70097718258080}},{"id":34889,"event":"call","defined_class":"CensoredWordsValidator","method_id":"validate_each","path":"lib/validators/censored_words_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097615628920,"value":"This is a test topic 13","kind":"req"}],"receiver":{"class":"CensoredWordsValidator","object_id":70097778515220,"value":"#<CensoredWordsValidator:0x00007f81d2603a28>"}},{"id":34890,"event":"call","defined_class":"WordWatcher","method_id":"word_matcher_regexp","path":"app/services/word_watcher.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"},{"name":"raise_errors","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":34891,"event":"call","defined_class":"WordWatcher","method_id":"get_cached_words","path":"app/services/word_watcher.rb","lineno":17,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":34892,"event":"call","defined_class":"WordWatcher","method_id":"word_matcher_regexp_key","path":"app/services/word_watcher.rb","lineno":55,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":34893,"event":"return","defined_class":"WordWatcher","method_id":"word_matcher_regexp_key","path":"app/services/word_watcher.rb","lineno":55,"static":true,"thread_id":70097708498960,"parent_id":34892,"elapsed":4.0e-06,"return_value":{"class":"String","value":"watched-words-list:censor","object_id":70097615681960}},{"id":34894,"event":"return","defined_class":"WordWatcher","method_id":"get_cached_words","path":"app/services/word_watcher.rb","lineno":17,"static":true,"thread_id":70097708498960,"parent_id":34891,"elapsed":0.000727},{"id":34895,"event":"return","defined_class":"WordWatcher","method_id":"word_matcher_regexp","path":"app/services/word_watcher.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":34890,"elapsed":0.00084},{"id":34896,"event":"call","defined_class":"WordWatcher","method_id":"words_for_action","path":"app/services/word_watcher.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":13721628,"value":"censor","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":34897,"event":"call","defined_class":"WatchedWord(id: integer, word: string, action: integer, created_at: datetime, updated_at: datetime)","method_id":"actions","path":"app/models/watched_word.rb","lineno":5,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587074820,"value":"WatchedWord"}},{"id":34898,"event":"return","defined_class":"WatchedWord(id: integer, word: string, action: integer, created_at: datetime, updated_at: datetime)","method_id":"actions","path":"app/models/watched_word.rb","lineno":5,"static":true,"thread_id":70097708498960,"parent_id":34897,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:block=>1, :censor=>2, :require_approval=>3, :flag=>4}","object_id":70097568148260}},{"id":34899,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"watched_words\".\"word\" FROM \"watched_words\" WHERE \"watched_words\".\"action\" = 2 LIMIT 1000","database_type":"postgres","server_version":110006}},{"id":34900,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34899,"elapsed":0.000819},{"id":34901,"event":"return","defined_class":"WordWatcher","method_id":"words_for_action","path":"app/services/word_watcher.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":34896,"elapsed":0.003339,"return_value":{"class":"Array","value":"[]","object_id":70097590008660}},{"id":34902,"event":"return","defined_class":"CensoredWordsValidator","method_id":"validate_each","path":"lib/validators/censored_words_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":34889,"elapsed":0.004381},{"id":34903,"event":"call","defined_class":"WatchedWordsValidator","method_id":"validate_each","path":"lib/validators/watched_words_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097615628920,"value":"This is a test topic 13","kind":"req"}],"receiver":{"class":"WatchedWordsValidator","object_id":70097778596560,"value":"#<WatchedWordsValidator:0x00007f81d262b5a0>"}},{"id":34904,"event":"call","defined_class":"WordWatcher","method_id":"should_block?","path":"app/services/word_watcher.rb","lineno":73,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"WordWatcher","object_id":70097590005880,"value":"#<WordWatcher:0x00007f81bbe760f0>"}},{"id":34905,"event":"call","defined_class":"WordWatcher","method_id":"word_matches_for_action?","path":"app/services/word_watcher.rb","lineno":77,"static":false,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":613788,"value":"block","kind":"req"},{"name":"all_matches","class":"Hash","object_id":70097590005000,"value":"{:all_matches=>true}","kind":"key"}],"receiver":{"class":"WordWatcher","object_id":70097590005880,"value":"#<WordWatcher:0x00007f81bbe760f0>"}},{"id":34906,"event":"call","defined_class":"WordWatcher","method_id":"word_matcher_regexp","path":"app/services/word_watcher.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":613788,"value":"block","kind":"req"},{"name":"raise_errors","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":34907,"event":"call","defined_class":"WordWatcher","method_id":"get_cached_words","path":"app/services/word_watcher.rb","lineno":17,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":613788,"value":"block","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":34908,"event":"call","defined_class":"WordWatcher","method_id":"word_matcher_regexp_key","path":"app/services/word_watcher.rb","lineno":55,"static":true,"thread_id":70097708498960,"parameters":[{"name":"action","class":"Symbol","object_id":613788,"value":"block","kind":"req"}],"receiver":{"class":"Class","object_id":70097568127420,"value":"WordWatcher"}},{"id":34909,"event":"return","defined_class":"WordWatcher","method_id":"word_matcher_regexp_key","path":"app/services/word_watcher.rb","lineno":55,"static":true,"thread_id":70097708498960,"parent_id":34908,"elapsed":3.0e-06,"return_value":{"class":"String","value":"watched-words-list:block","object_id":70097590023900}},{"id":34910,"event":"return","defined_class":"WordWatcher","method_id":"get_cached_words","path":"app/services/word_watcher.rb","lineno":17,"static":true,"thread_id":70097708498960,"parent_id":34907,"elapsed":0.000671},{"id":34911,"event":"return","defined_class":"WordWatcher","method_id":"word_matcher_regexp","path":"app/services/word_watcher.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":34906,"elapsed":0.000771},{"id":34912,"event":"return","defined_class":"WordWatcher","method_id":"word_matches_for_action?","path":"app/services/word_watcher.rb","lineno":77,"static":false,"thread_id":70097708498960,"parent_id":34905,"elapsed":0.000859},{"id":34913,"event":"return","defined_class":"WordWatcher","method_id":"should_block?","path":"app/services/word_watcher.rb","lineno":73,"static":false,"thread_id":70097708498960,"parent_id":34904,"elapsed":0.000949},{"id":34914,"event":"return","defined_class":"WatchedWordsValidator","method_id":"validate_each","path":"lib/validators/watched_words_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":34903,"elapsed":0.001037},{"id":34915,"event":"call","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34916,"event":"return","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parent_id":34915,"elapsed":6.0e-06},{"id":34917,"event":"call","defined_class":"QualityTitleValidator","method_id":"validate_each","path":"lib/validators/quality_title_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097615628920,"value":"This is a test topic 13","kind":"req"}],"receiver":{"class":"QualityTitleValidator","object_id":70097778757840,"value":"#<QualityTitleValidator:0x00007f81d267a1a0>"}},{"id":34918,"event":"return","defined_class":"QualityTitleValidator","method_id":"validate_each","path":"lib/validators/quality_title_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":34917,"elapsed":5.9e-05},{"id":34919,"event":"call","defined_class":"MaxEmojisValidator","method_id":"validate_each","path":"lib/validators/max_emojis_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097615628920,"value":"This is a test topic 13","kind":"req"}],"receiver":{"class":"MaxEmojisValidator","object_id":70097778857220,"value":"#<MaxEmojisValidator:0x00007f81d26aaa08>"}},{"id":34920,"event":"call","defined_class":"Emoji","method_id":"unicode_unescape","path":"app/models/emoji.rb","lineno":185,"static":true,"thread_id":70097708498960,"parameters":[{"name":"string","class":"String","object_id":70097590058680,"value":"This is a test topic 13","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":34921,"event":"return","defined_class":"Emoji","method_id":"unicode_unescape","path":"app/models/emoji.rb","lineno":185,"static":true,"thread_id":70097708498960,"parent_id":34920,"elapsed":0.000178,"return_value":{"class":"String","value":"This is a test topic 13","object_id":70097590056780}},{"id":34922,"event":"call","defined_class":"Emoji","method_id":"custom","path":"app/models/emoji.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":34923,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097715190900,"value":"custom_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":34924,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":34923,"elapsed":5.0e-06,"return_value":{"class":"String","value":"custom_emojis:v9:plugin-emoji","object_id":70097590053420}},{"id":34925,"event":"return","defined_class":"Emoji","method_id":"custom","path":"app/models/emoji.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":34922,"elapsed":0.000772,"return_value":{"class":"Array","value":"[]","object_id":70097590051880}},{"id":34926,"event":"call","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723125960,"value":"SiteSetting"}},{"id":34927,"event":"return","defined_class":"SiteSetting (call 'SiteSetting.connection' to establish a connection)","method_id":"Upload","path":"app/models/site_setting.rb","lineno":172,"static":true,"thread_id":70097708498960,"parent_id":34926,"elapsed":3.0e-06,"return_value":{"class":"Class","value":"SiteSetting::Upload","object_id":70097718794280}},{"id":34928,"event":"call","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097718794280,"value":"SiteSetting::Upload"}},{"id":34929,"event":"call","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":34930,"event":"return","defined_class":"GlobalSetting","method_id":"use_s3?","path":"app/models/global_setting.rb","lineno":96,"static":true,"thread_id":70097708498960,"parent_id":34929,"elapsed":3.0e-06},{"id":34931,"event":"return","defined_class":"SiteSetting::Upload","method_id":"enable_s3_uploads","path":"app/models/site_setting.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":34928,"elapsed":9.0e-05},{"id":34932,"event":"return","defined_class":"MaxEmojisValidator","method_id":"validate_each","path":"lib/validators/max_emojis_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":34919,"elapsed":0.001605},{"id":34933,"event":"call","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34934,"event":"return","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parent_id":34933,"elapsed":6.0e-06},{"id":34935,"event":"call","defined_class":"UniqueAmongValidator","method_id":"validate_each","path":"lib/validators/unique_among_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":6444188,"value":"title","kind":"req"},{"name":"value","class":"String","object_id":70097615628920,"value":"This is a test topic 13","kind":"req"}],"receiver":{"class":"UniqueAmongValidator","object_id":70097778966840,"value":"#<UniqueAmongValidator:0x00007f81d26e0270>"}},{"id":34936,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"topics\" WHERE LOWER(\"topics\".\"title\") = LOWER('This is a test topic 13') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34937,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34936,"elapsed":0.00083},{"id":34938,"event":"return","defined_class":"UniqueAmongValidator","method_id":"validate_each","path":"lib/validators/unique_among_validator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":34935,"elapsed":0.00335},{"id":34939,"event":"call","defined_class":"Topic","method_id":"ensure_topic_has_a_category","path":"app/models/topic.rb","lineno":375,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34940,"event":"return","defined_class":"Topic","method_id":"ensure_topic_has_a_category","path":"app/models/topic.rb","lineno":375,"static":false,"thread_id":70097708498960,"parent_id":34939,"elapsed":8.0e-06},{"id":34941,"event":"call","defined_class":"Emoji","method_id":"unicode_unescape","path":"app/models/emoji.rb","lineno":185,"static":true,"thread_id":70097708498960,"parameters":[{"name":"string","class":"String","object_id":70097621145600,"value":"This is a test topic 13","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":34942,"event":"return","defined_class":"Emoji","method_id":"unicode_unescape","path":"app/models/emoji.rb","lineno":185,"static":true,"thread_id":70097708498960,"parent_id":34941,"elapsed":0.000129,"return_value":{"class":"String","value":"This is a test topic 13","object_id":70097621142160}},{"id":34943,"event":"call","defined_class":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","method_id":"max_fancy_title_length","path":"app/models/topic.rb","lineno":27,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097777826960,"value":"Topic"}},{"id":34944,"event":"return","defined_class":"Topic(id: integer, title: string, last_posted_at: datetime, created_at: datetime, updated_at: datetime, views: integer, posts_count: integer, user_id: integer, last_post_user_id: integer, reply_count: integer, featured_user1_id: integer, featured_user2_id: integer, featured_user3_id: integer, deleted_at: datetime, highest_post_number: integer, image_url: string, like_count: integer, incoming_link_count: integer, category_id: integer, visible: boolean, moderator_posts_count: integer, closed: boolean, archived: boolean, bumped_at: datetime, has_summary: boolean, archetype: string, featured_user4_id: integer, notify_moderators_count: integer, spam_count: integer, pinned_at: datetime, score: float, percent_rank: float, subtype: string, slug: string, deleted_by_id: integer, participant_count: integer, word_count: integer, excerpt: string, pinned_globally: boolean, pinned_until: datetime, fancy_title: string, highest_staff_post_number: integer, featured_link: string, reviewable_score: float, image_upload_id: integer)","method_id":"max_fancy_title_length","path":"app/models/topic.rb","lineno":27,"static":true,"thread_id":70097708498960,"parent_id":34943,"elapsed":3.0e-06,"return_value":{"class":"Integer","value":"400","object_id":801}},{"id":34945,"event":"call","defined_class":"Topic","method_id":"inherit_auto_close_from_category","path":"app/models/topic.rb","lineno":348,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34946,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"categories\".\"id\", \"categories\".\"name\", \"categories\".\"color\", \"categories\".\"topic_id\", \"categories\".\"topic_count\", \"categories\".\"created_at\", \"categories\".\"updated_at\", \"categories\".\"user_id\", \"categories\".\"topics_year\", \"categories\".\"topics_month\", \"categories\".\"topics_week\", \"categories\".\"slug\", \"categories\".\"description\", \"categories\".\"text_color\", \"categories\".\"read_restricted\", \"categories\".\"auto_close_hours\", \"categories\".\"post_count\", \"categories\".\"latest_post_id\", \"categories\".\"latest_topic_id\", \"categories\".\"position\", \"categories\".\"parent_category_id\", \"categories\".\"posts_year\", \"categories\".\"posts_month\", \"categories\".\"posts_week\", \"categories\".\"email_in\", \"categories\".\"email_in_allow_strangers\", \"categories\".\"topics_day\", \"categories\".\"posts_day\", \"categories\".\"allow_badges\", \"categories\".\"name_lower\", \"categories\".\"auto_close_based_on_last_post\", \"categories\".\"topic_template\", \"categories\".\"contains_messages\", \"categories\".\"sort_order\", \"categories\".\"sort_ascending\", \"categories\".\"uploaded_logo_id\", \"categories\".\"uploaded_background_id\", \"categories\".\"topic_featured_link_allowed\", \"categories\".\"all_topics_wiki\", \"categories\".\"show_subcategory_list\", \"categories\".\"num_featured_topics\", \"categories\".\"default_view\", \"categories\".\"subcategory_list_style\", \"categories\".\"default_top_period\", \"categories\".\"mailinglist_mirror\", \"categories\".\"minimum_required_tags\", \"categories\".\"navigate_to_first_post_after_read\", \"categories\".\"search_priority\", \"categories\".\"allow_global_tags\", \"categories\".\"reviewable_by_group_id\", \"categories\".\"required_tag_group_id\", \"categories\".\"min_tags_from_required_group\", \"categories\".\"read_only_banner\", \"categories\".\"default_list_filter\" FROM \"categories\" WHERE \"categories\".\"id\" = 1 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34947,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34946,"elapsed":0.001029},{"id":34948,"event":"return","defined_class":"Topic","method_id":"inherit_auto_close_from_category","path":"app/models/topic.rb","lineno":348,"static":false,"thread_id":70097708498960,"parent_id":34945,"elapsed":0.041317},{"id":34949,"event":"call","defined_class":"Topic","method_id":"initialize_default_values","path":"app/models/topic.rb","lineno":343,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34950,"event":"return","defined_class":"Topic","method_id":"initialize_default_values","path":"app/models/topic.rb","lineno":343,"static":false,"thread_id":70097708498960,"parent_id":34949,"elapsed":2.7e-05,"return_value":{"class":"Integer","value":"83","object_id":167}},{"id":34951,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"topics\" (\"title\", \"created_at\", \"updated_at\", \"user_id\", \"last_post_user_id\", \"category_id\", \"bumped_at\", \"slug\", \"fancy_title\") VALUES ('This is a test topic 13', '2020-05-28 18:50:03.626999', '2020-05-28 18:50:03.626999', 83, 83, 1, '2020-05-28 18:50:03.627148', 'this-is-a-test-topic-13', 'This is a test topic 13') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":34952,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34951,"elapsed":0.001878},{"id":34953,"event":"call","defined_class":"User","method_id":"new_user?","path":"app/models/user.rb","lineno":661,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34954,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34955,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":34954,"elapsed":9.0e-06},{"id":34956,"event":"return","defined_class":"User","method_id":"new_user?","path":"app/models/user.rb","lineno":661,"static":false,"thread_id":70097708498960,"parent_id":34953,"elapsed":0.000182,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34957,"event":"call","defined_class":"Topic","method_id":"limit_topics_per_day","path":"app/models/topic.rb","lineno":419,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34958,"event":"call","defined_class":"User","method_id":"new_user_posting_on_first_day?","path":"app/models/user.rb","lineno":655,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34959,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34960,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":34959,"elapsed":7.0e-06},{"id":34961,"event":"call","defined_class":"User","method_id":"first_post_created_at","path":"app/models/user.rb","lineno":1067,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>"}},{"id":34962,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_stats\".\"user_id\", \"user_stats\".\"topics_entered\", \"user_stats\".\"time_read\", \"user_stats\".\"days_visited\", \"user_stats\".\"posts_read_count\", \"user_stats\".\"likes_given\", \"user_stats\".\"likes_received\", \"user_stats\".\"new_since\", \"user_stats\".\"read_faq\", \"user_stats\".\"first_post_created_at\", \"user_stats\".\"post_count\", \"user_stats\".\"topic_count\", \"user_stats\".\"bounce_score\", \"user_stats\".\"reset_bounce_score_after\", \"user_stats\".\"flags_agreed\", \"user_stats\".\"flags_disagreed\", \"user_stats\".\"flags_ignored\", \"user_stats\".\"first_unread_at\", \"user_stats\".\"distinct_badge_count\" FROM \"user_stats\" WHERE \"user_stats\".\"user_id\" = 83 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34963,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34962,"elapsed":0.001407},{"id":34964,"event":"return","defined_class":"User","method_id":"first_post_created_at","path":"app/models/user.rb","lineno":1067,"static":false,"thread_id":70097708498960,"parent_id":34961,"elapsed":0.005303},{"id":34965,"event":"return","defined_class":"User","method_id":"new_user_posting_on_first_day?","path":"app/models/user.rb","lineno":655,"static":false,"thread_id":70097708498960,"parent_id":34958,"elapsed":0.00556,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34966,"event":"return","defined_class":"Topic","method_id":"limit_topics_per_day","path":"app/models/topic.rb","lineno":419,"static":false,"thread_id":70097708498960,"parent_id":34957,"elapsed":0.005723,"return_value":{"class":"RateLimiter","value":"#<RateLimiter:0x00007f81d443e4c0>","object_id":70097794364000}},{"id":34967,"event":"call","defined_class":"Topic","method_id":"limit_private_messages_per_day","path":"app/models/topic.rb","lineno":427,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34968,"event":"call","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34969,"event":"return","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parent_id":34968,"elapsed":1.3e-05},{"id":34970,"event":"return","defined_class":"Topic","method_id":"limit_private_messages_per_day","path":"app/models/topic.rb","lineno":427,"static":false,"thread_id":70097708498960,"parent_id":34967,"elapsed":0.000121},{"id":34971,"event":"call","defined_class":"Topic","method_id":"changed_to_category","path":"app/models/topic.rb","lineno":784,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_category","class":"Category","object_id":70097724909480,"value":"#<Category:0x00007f81cbfc4f50>","kind":"req"}],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34972,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"categories\" WHERE \"categories\".\"topic_id\" = 175 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34973,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34972,"elapsed":0.001115},{"id":34974,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"categories\" SET topic_count = topic_count + 1 WHERE \"categories\".\"id\" = 1","database_type":"postgres","server_version":110006}},{"id":34975,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34974,"elapsed":0.001839},{"id":34976,"event":"return","defined_class":"Topic","method_id":"changed_to_category","path":"app/models/topic.rb","lineno":784,"static":false,"thread_id":70097708498960,"parent_id":34971,"elapsed":0.0095,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34977,"event":"call","defined_class":"Topic","method_id":"advance_draft_sequence","path":"app/models/topic.rb","lineno":367,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34978,"event":"call","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34979,"event":"return","defined_class":"Topic","method_id":"private_message?","path":"app/models/topic.rb","lineno":551,"static":false,"thread_id":70097708498960,"parent_id":34978,"elapsed":9.0e-06},{"id":34980,"event":"call","defined_class":"DraftSequence(id: integer, user_id: integer, draft_key: string, sequence: integer)","method_id":"next!","path":"app/models/draft_sequence.rb","lineno":4,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097816554860,"value":"#<User:0x00007f81d6e91ad8>","kind":"req"},{"name":"key","class":"String","object_id":70097796284180,"value":"new_topic","kind":"req"}],"receiver":{"class":"Class","object_id":70097730339440,"value":"DraftSequence"}},{"id":34981,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user_id","class":"Integer","object_id":167,"value":"83","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":34982,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parent_id":34981,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34983,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"draft_sequences\".* FROM \"draft_sequences\" WHERE \"draft_sequences\".\"user_id\" = 83 AND \"draft_sequences\".\"draft_key\" = 'new_topic' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":34984,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34983,"elapsed":0.000809},{"id":34985,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"draft_sequences\" (\"user_id\", \"draft_key\", \"sequence\") VALUES (83, 'new_topic', 1) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":34986,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34985,"elapsed":0.000832},{"id":34987,"event":"return","defined_class":"DraftSequence(id: integer, user_id: integer, draft_key: string, sequence: integer)","method_id":"next!","path":"app/models/draft_sequence.rb","lineno":4,"static":true,"thread_id":70097708498960,"parent_id":34980,"elapsed":0.008879,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":34988,"event":"return","defined_class":"Topic","method_id":"advance_draft_sequence","path":"app/models/topic.rb","lineno":367,"static":false,"thread_id":70097708498960,"parent_id":34977,"elapsed":0.009166,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":34989,"event":"call","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parameters":[{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34990,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>"}},{"id":34991,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":34990,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":34992,"event":"return","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parent_id":34989,"elapsed":0.000108},{"id":34993,"event":"call","defined_class":"SearchIndexer","method_id":"queue_post_reindex","path":"app/services/search_indexer.rb","lineno":114,"static":true,"thread_id":70097708498960,"parameters":[{"name":"topic_id","class":"Integer","object_id":351,"value":"175","kind":"req"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":34994,"event":"return","defined_class":"SearchIndexer","method_id":"queue_post_reindex","path":"app/services/search_indexer.rb","lineno":114,"static":true,"thread_id":70097708498960,"parent_id":34993,"elapsed":4.0e-06},{"id":34995,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Topic","object_id":70097609125500,"value":"#<Topic:0x00007f81be2edcf8>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":34996,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":34995,"elapsed":4.0e-06},{"id":34997,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":34998,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":34997,"elapsed":0.000646},{"id":34999,"event":"call","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parameters":[{"name":"job","class":"Symbol","object_id":13678428,"value":"update_topic_upload_security","kind":"req"},{"name":"opts","class":"Hash","object_id":70097732973120,"value":"{:topic_id=>175}","kind":"opt"}],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":35000,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":35001,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":35000,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35002,"event":"return","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parent_id":34999,"elapsed":0.00022,"return_value":{"class":"String","value":"098b9a7504a21682296c0924","object_id":70097732992020}},{"id":35003,"event":"call","defined_class":"Post(id: integer, user_id: integer, topic_id: integer, post_number: integer, raw: text, cooked: text, created_at: datetime, updated_at: datetime, reply_to_post_number: integer, reply_count: integer, quote_count: integer, deleted_at: datetime, off_topic_count: integer, like_count: integer, incoming_link_count: integer, bookmark_count: integer, score: float, reads: integer, post_type: integer, sort_order: integer, last_editor_id: integer, hidden: boolean, hidden_reason_id: integer, notify_moderators_count: integer, spam_count: integer, illegal_count: integer, inappropriate_count: integer, last_version_at: datetime, user_deleted: boolean, reply_to_user_id: integer, percent_rank: float, notify_user_count: integer, like_score: integer, deleted_by_id: integer, edit_reason: string, word_count: integer, version: integer, cook_method: integer, wiki: boolean, baked_at: datetime, baked_version: integer, hidden_at: datetime, self_edits: integer, reply_quoted: boolean, via_email: boolean, raw_email: text, public_version: integer, action_code: string, image_url: string, locked_by_id: integer, image_upload_id: integer)","method_id":"cook_methods","path":"app/models/post.rb","lineno":146,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097792338860,"value":"Post"}},{"id":35004,"event":"return","defined_class":"Post(id: integer, user_id: integer, topic_id: integer, post_number: integer, raw: text, cooked: text, created_at: datetime, updated_at: datetime, reply_to_post_number: integer, reply_count: integer, quote_count: integer, deleted_at: datetime, off_topic_count: integer, like_count: integer, incoming_link_count: integer, bookmark_count: integer, score: float, reads: integer, post_type: integer, sort_order: integer, last_editor_id: integer, hidden: boolean, hidden_reason_id: integer, notify_moderators_count: integer, spam_count: integer, illegal_count: integer, inappropriate_count: integer, last_version_at: datetime, user_deleted: boolean, reply_to_user_id: integer, percent_rank: float, notify_user_count: integer, like_score: integer, deleted_by_id: integer, edit_reason: string, word_count: integer, version: integer, cook_method: integer, wiki: boolean, baked_at: datetime, baked_version: integer, hidden_at: datetime, self_edits: integer, reply_quoted: boolean, via_email: boolean, raw_email: text, public_version: integer, action_code: string, image_url: string, locked_by_id: integer, image_upload_id: integer)","method_id":"cook_methods","path":"app/models/post.rb","lineno":146,"static":true,"thread_id":70097708498960,"parent_id":35003,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:regular=>1, :raw_html=>2, :email=>3}","object_id":70097567897660}},{"id":35005,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":35006,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35005,"elapsed":0.000715},{"id":35007,"event":"call","defined_class":"Reviewable","method_id":"apply_review_group","path":"app/models/reviewable.rb","lineno":283,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097732986920,"value":"#<ReviewableQueuedPost:0x00007f81ccf2d050>"}},{"id":35008,"event":"return","defined_class":"Reviewable","method_id":"apply_review_group","path":"app/models/reviewable.rb","lineno":283,"static":false,"thread_id":70097708498960,"parent_id":35007,"elapsed":1.1e-05},{"id":35009,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"reviewables\" (\"type\", \"created_by_id\", \"reviewable_by_moderator\", \"topic_id\", \"payload\", \"created_at\", \"updated_at\") VALUES ('ReviewableQueuedPost', 80, TRUE, 175, '{\"raw\":\"hello world post contents.\",\"reply_to_post_number\":1,\"via_email\":true,\"raw_email\":\"store_me\",\"auto_track\":true,\"custom_fields\":{\"hello\":\"world\"},\"cooking_options\":{\"cat\":\"hat\"},\"cook_method\":2,\"image_sizes\":{\"http://foo.bar/image.png\":{\"width\":0,\"height\":222}}}', '2020-05-28 18:50:03.665079', '2020-05-28 18:50:03.665079') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":35010,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35009,"elapsed":0.000965},{"id":35011,"event":"call","defined_class":"Reviewable","method_id":"log_history","path":"app/models/reviewable.rb","lineno":274,"static":false,"thread_id":70097708498960,"parameters":[{"name":"reviewable_history_type","class":"Symbol","object_id":1352988,"value":"created","kind":"req"},{"name":"performed_by","class":"User","object_id":70097826856360,"value":"#<User:0x00007f81d8237b50>","kind":"req"},{"name":"edited","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"ReviewableQueuedPost","object_id":70097732986920,"value":"#<ReviewableQueuedPost:0x00007f81ccf2d050>"}},{"id":35012,"event":"call","defined_class":"ReviewableHistory(id: integer, reviewable_id: integer, reviewable_history_type: integer, status: integer, created_by_id: integer, edited: json, created_at: datetime, updated_at: datetime)","method_id":"types","path":"app/models/reviewable_history.rb","lineno":7,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097814904680,"value":"ReviewableHistory"}},{"id":35013,"event":"return","defined_class":"ReviewableHistory(id: integer, reviewable_id: integer, reviewable_history_type: integer, status: integer, created_by_id: integer, edited: json, created_at: datetime, updated_at: datetime)","method_id":"types","path":"app/models/reviewable_history.rb","lineno":7,"static":true,"thread_id":70097708498960,"parent_id":35012,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:created=>0, :transitioned=>1, :edited=>2, :claimed=>3, :unclaimed=>4}","object_id":70097814734640}},{"id":35014,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"reviewable_histories\" (\"reviewable_id\", \"reviewable_history_type\", \"status\", \"created_by_id\", \"created_at\", \"updated_at\") VALUES (31, 0, 0, 80, '2020-05-28 18:50:03.669163', '2020-05-28 18:50:03.669163') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":35015,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35014,"elapsed":0.001},{"id":35016,"event":"return","defined_class":"Reviewable","method_id":"log_history","path":"app/models/reviewable.rb","lineno":274,"static":false,"thread_id":70097708498960,"parent_id":35011,"elapsed":0.004671,"return_value":{"class":"ReviewableHistory","value":"#<ReviewableHistory:0x00007f81ca7dc870>","object_id":70097712374840}},{"id":35017,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":35018,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35017,"elapsed":0.000773},{"id":35019,"event":"call","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097732986920,"value":"#<ReviewableQueuedPost:0x00007f81ccf2d050>"}},{"id":35020,"event":"return","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":35019,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35021,"event":"call","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parameters":[{"name":"job","class":"Symbol","object_id":17527068,"value":"notify_reviewable","kind":"req"},{"name":"opts","class":"Hash","object_id":70097816404340,"value":"{:reviewable_id=>31}","kind":"opt"}],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":35022,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":35023,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":35022,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35024,"event":"return","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parent_id":35021,"elapsed":0.000202,"return_value":{"class":"String","value":"c16ff7e882a2040e2463d244","object_id":70097816438300}},{"id":35025,"event":"call","defined_class":"Reviewable","method_id":"serializer","path":"app/models/reviewable.rb","lineno":511,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097732986920,"value":"#<ReviewableQueuedPost:0x00007f81ccf2d050>"}},{"id":35026,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"serializer_for","path":"app/models/reviewable.rb","lineno":521,"static":true,"thread_id":70097708498960,"parameters":[{"name":"reviewable","class":"ReviewableQueuedPost","object_id":70097732986920,"value":"#<ReviewableQueuedPost:0x00007f81ccf2d050>","kind":"req"}],"receiver":{"class":"Class","object_id":70097817048600,"value":"ReviewableQueuedPost"}},{"id":35027,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"serializer_for","path":"app/models/reviewable.rb","lineno":521,"static":true,"thread_id":70097708498960,"parent_id":35026,"elapsed":1.5e-05,"return_value":{"class":"Class","value":"ReviewableQueuedPostSerializer","object_id":70097593732740}},{"id":35028,"event":"return","defined_class":"Reviewable","method_id":"serializer","path":"app/models/reviewable.rb","lineno":511,"static":false,"thread_id":70097708498960,"parent_id":35025,"elapsed":0.000114,"return_value":{"class":"Class","value":"ReviewableQueuedPostSerializer","object_id":70097593732740}},{"id":35029,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":12225948,"value":"reviewable","kind":"req"},{"name":"object","class":"ReviewableQueuedPost","object_id":70097732986920,"value":"#<ReviewableQueuedPost:0x00007f81ccf2d050>","kind":"req"},{"name":"event","class":"Symbol","object_id":12688668,"value":"reviewable_created","kind":"req"},{"name":"serializer","class":"Class","object_id":70097593732740,"value":"ReviewableQueuedPostSerializer","kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":35030,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":12225948,"value":"reviewable","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":35031,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":35030,"elapsed":0.00018,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81d6e787e0>","object_id":70097816503280}},{"id":35032,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'reviewable') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":35033,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35032,"elapsed":0.001055},{"id":35034,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":35029,"elapsed":0.003849},{"id":35035,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":35036,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":35035,"elapsed":5.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":35037,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":35038,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":35037,"elapsed":1.0e-05},{"id":35039,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"DELETE","path_info":"/review/31.json"},"message":[{"name":"controller","class":"String","value":"reviewables","object_id":70097756695420},{"name":"action","class":"String","value":"destroy","object_id":70097756695400},{"name":"reviewable_id","class":"String","value":"31","object_id":70097591226880},{"name":"format","class":"String","value":"json","object_id":70097591226840}]},{"id":35040,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35041,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35042,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35043,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35044,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097591310200,"value":"f7671be807d8dd3e0dc2c974de3cf0ee","kind":"req"},{"name":"opts","class":"Hash","object_id":70097591309000,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":35045,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097591310200,"value":"f7671be807d8dd3e0dc2c974de3cf0ee","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":35046,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":35047,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":35046,"elapsed":7.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":35048,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":35045,"elapsed":0.000107,"return_value":{"class":"String","value":"rXede4BLEkBeSpAvzBDftKMqTBc=","object_id":70097591343380}},{"id":35049,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'rXede4BLEkBeSpAvzBDftKMqTBc=' OR\n                          prev_auth_token = 'rXede4BLEkBeSpAvzBDftKMqTBc=') AND rotated_at > '2020-03-29 18:50:03.683995') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":35050,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35049,"elapsed":0.001043},{"id":35051,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 18:50:03.688782' WHERE \"user_auth_tokens\".\"id\" = 313 AND \"user_auth_tokens\".\"auth_token\" = 'rXede4BLEkBeSpAvzBDftKMqTBc='","database_type":"postgres","server_version":110006}},{"id":35052,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35051,"elapsed":0.00114},{"id":35053,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097594208760,"value":"{:action=>\"seen token\", :user_auth_token_id=>313, :user_id=>80, :auth_token=>\"rXede4BLEkBeSpAvzBDftK","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":35054,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":35055,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35054,"elapsed":0.000794},{"id":35056,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 313, 80, '127.0.0.1/32', 'rXede4BLEkBeSpAvzBDftKMqTBc=', '2020-05-28 18:50:03.696994') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":35057,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35056,"elapsed":0.000864},{"id":35058,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":35059,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35058,"elapsed":0.000792},{"id":35060,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":35053,"elapsed":0.011848,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81bc678708>","object_id":70097594205060}},{"id":35061,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":35044,"elapsed":0.021177,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81bc3ab2a0>","object_id":70097592736080}},{"id":35062,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 80 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":35063,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35062,"elapsed":0.001144},{"id":35064,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097568060620,"value":"#<User:0x00007f81b949a998>"}},{"id":35065,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":35064,"elapsed":1.6e-05},{"id":35066,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35067,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":35066,"elapsed":0.00082,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35068,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097568060620,"value":"#<User:0x00007f81b949a998>"}},{"id":35069,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":35068,"elapsed":0.000778},{"id":35070,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097568079620,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097568060620,"value":"#<User:0x00007f81b949a998>"}},{"id":35071,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 80","database_type":"postgres","server_version":110006}},{"id":35072,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35071,"elapsed":0.000949},{"id":35073,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":35070,"elapsed":0.003662,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35074,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35043,"elapsed":0.031703,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35075,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":35042,"elapsed":0.031814,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4bed068>","object_id":70097798391860}},{"id":35076,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097798391860,"value":"#<Guardian:0x00007f81d4bed068>"}},{"id":35077,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":35076,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35078,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":35041,"elapsed":0.032035},{"id":35079,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35080,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35079,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35081,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 80 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":35082,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35081,"elapsed":0.000968},{"id":35083,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35084,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":35083,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4bed068>","object_id":70097798391860}},{"id":35085,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097733232940,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097798391860,"value":"#<Guardian:0x00007f81d4bed068>"}},{"id":35086,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":35085,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35087,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":35040,"elapsed":0.036461,"return_value":{"class":"Array","value":"[2]","object_id":70097733232940}},{"id":35088,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35089,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35090,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35089,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35091,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35092,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35091,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35093,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35094,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35093,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35095,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":35088,"elapsed":0.000315,"return_value":{"class":"String","value":"reviewables/destroy","object_id":70097733268360}},{"id":35096,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35097,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35098,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35097,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35099,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":35096,"elapsed":0.000102},{"id":35100,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35101,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35102,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35101,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35103,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35104,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35103,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35105,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097568060620,"value":"#<User:0x00007f81b949a998>"}},{"id":35106,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":35105,"elapsed":6.0e-06,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":35107,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":35108,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":35107,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":35109,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":35110,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":35109,"elapsed":8.0e-06},{"id":35111,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":35112,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":35111,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":35113,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":35114,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":35113,"elapsed":6.0e-06},{"id":35115,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":35100,"elapsed":0.00066,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097733317460}},{"id":35116,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35117,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":35116,"elapsed":6.0e-06},{"id":35118,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35119,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35120,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35119,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35121,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":35118,"elapsed":9.1e-05},{"id":35122,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35123,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35122,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35124,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35125,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35124,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35126,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35127,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35126,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35128,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097797000500,"value":"ReviewablesController"}},{"id":35129,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":35128,"elapsed":3.0e-06,"return_value":{"class":"Hash","value":"{}","object_id":70097797032140}},{"id":35130,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35131,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35130,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35132,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35133,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":35132,"elapsed":6.0e-06},{"id":35134,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35135,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35136,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35135,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35137,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":35134,"elapsed":9.0e-05},{"id":35138,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35139,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35140,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35139,"elapsed":2.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35141,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":35138,"elapsed":8.7e-05},{"id":35142,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35143,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35142,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35144,"event":"call","defined_class":"EnsureMagic","method_id":"method_missing","path":"lib/guardian/ensure_magic.rb","lineno":6,"static":false,"thread_id":70097708498960,"parameters":[{"name":"method","class":"Symbol","object_id":17086388,"value":"ensure_can_see_review_queue!","kind":"req"},{"name":"args","class":"NilClass","object_id":8,"value":null,"kind":"rest"},{"name":"block","class":"NilClass","object_id":8,"value":null,"kind":"block"}],"receiver":{"class":"Guardian","object_id":70097733385360,"value":"#<Guardian:0x00007f81ccfef920>"}},{"id":35145,"event":"call","defined_class":"UserGuardian","method_id":"can_see_review_queue?","path":"lib/guardian/user_guardian.rb","lineno":148,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097733385360,"value":"#<Guardian:0x00007f81ccfef920>"}},{"id":35146,"event":"call","defined_class":"Guardian","method_id":"is_staff?","path":"lib/guardian.rb","lineno":88,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097733385360,"value":"#<Guardian:0x00007f81ccfef920>"}},{"id":35147,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097568060620,"value":"#<User:0x00007f81b949a998>"}},{"id":35148,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":35147,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35149,"event":"return","defined_class":"Guardian","method_id":"is_staff?","path":"lib/guardian.rb","lineno":88,"static":false,"thread_id":70097708498960,"parent_id":35146,"elapsed":9.7e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35150,"event":"return","defined_class":"UserGuardian","method_id":"can_see_review_queue?","path":"lib/guardian/user_guardian.rb","lineno":148,"static":false,"thread_id":70097708498960,"parent_id":35145,"elapsed":0.000179,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35151,"event":"return","defined_class":"EnsureMagic","method_id":"method_missing","path":"lib/guardian/ensure_magic.rb","lineno":6,"static":false,"thread_id":70097708498960,"parent_id":35144,"elapsed":0.00027},{"id":35152,"event":"call","defined_class":"ReviewablesController","method_id":"destroy","path":"app/controllers/reviewables_controller.rb","lineno":135,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35153,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35154,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35153,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35155,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"reviewables\".* FROM \"reviewables\" WHERE \"reviewables\".\"id\" = 31 AND \"reviewables\".\"created_by_id\" = 80 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":35156,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35155,"elapsed":0.000951},{"id":35157,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35158,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35157,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35159,"event":"call","defined_class":"Reviewable","method_id":"perform","path":"app/models/reviewable.rb","lineno":337,"static":false,"thread_id":70097708498960,"parameters":[{"name":"performed_by","class":"User","object_id":70097568060620,"value":"#<User:0x00007f81b949a998>","kind":"req"},{"name":"action_id","class":"Symbol","object_id":145628,"value":"delete","kind":"req"},{"name":"args","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35160,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"action_aliases","path":"app/models/reviewable.rb","lineno":41,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097817048600,"value":"ReviewableQueuedPost"}},{"id":35161,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"action_aliases","path":"app/models/reviewable.rb","lineno":41,"static":true,"thread_id":70097708498960,"parent_id":35160,"elapsed":3.0e-06,"return_value":{"class":"Hash","value":"{}","object_id":70097798888700}},{"id":35162,"event":"call","defined_class":"Reviewable","method_id":"actions_for","path":"app/models/reviewable.rb","lineno":291,"static":false,"thread_id":70097708498960,"parameters":[{"name":"guardian","class":"Guardian","object_id":70097798887580,"value":"#<Guardian:0x00007f81d4cdf138>","kind":"req"},{"name":"args","class":"Hash","object_id":70097798865720,"value":"{}","kind":"opt"}],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35163,"event":"call","defined_class":"ReviewableQueuedPost","method_id":"build_actions","path":"app/models/reviewable_queued_post.rb","lineno":10,"static":false,"thread_id":70097708498960,"parameters":[{"name":"actions","class":"Reviewable::Actions","object_id":70097798885440,"value":"#<Reviewable::Actions:0x00007f81d4cde080>","kind":"req"},{"name":"guardian","class":"Guardian","object_id":70097798887580,"value":"#<Guardian:0x00007f81d4cdf138>","kind":"req"},{"name":"args","class":"Hash","object_id":70097798865720,"value":"{}","kind":"req"}],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35164,"event":"call","defined_class":"Reviewable","method_id":"approved?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35165,"event":"return","defined_class":"Reviewable","method_id":"approved?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":35164,"elapsed":1.0e-05},{"id":35166,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097777826960,"value":"Topic"}},{"id":35167,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":35166,"elapsed":3.8e-05,"return_value":{"class":"String","value":"\"topics\".\"deleted_at\" IS NULL","object_id":70097798903760}},{"id":35168,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"topics\".\"id\", \"topics\".\"title\", \"topics\".\"last_posted_at\", \"topics\".\"created_at\", \"topics\".\"updated_at\", \"topics\".\"views\", \"topics\".\"posts_count\", \"topics\".\"user_id\", \"topics\".\"last_post_user_id\", \"topics\".\"reply_count\", \"topics\".\"featured_user1_id\", \"topics\".\"featured_user2_id\", \"topics\".\"featured_user3_id\", \"topics\".\"deleted_at\", \"topics\".\"highest_post_number\", \"topics\".\"image_url\", \"topics\".\"like_count\", \"topics\".\"incoming_link_count\", \"topics\".\"category_id\", \"topics\".\"visible\", \"topics\".\"moderator_posts_count\", \"topics\".\"closed\", \"topics\".\"archived\", \"topics\".\"bumped_at\", \"topics\".\"has_summary\", \"topics\".\"archetype\", \"topics\".\"featured_user4_id\", \"topics\".\"notify_moderators_count\", \"topics\".\"spam_count\", \"topics\".\"pinned_at\", \"topics\".\"score\", \"topics\".\"percent_rank\", \"topics\".\"subtype\", \"topics\".\"slug\", \"topics\".\"deleted_by_id\", \"topics\".\"participant_count\", \"topics\".\"word_count\", \"topics\".\"excerpt\", \"topics\".\"pinned_globally\", \"topics\".\"pinned_until\", \"topics\".\"fancy_title\", \"topics\".\"highest_staff_post_number\", \"topics\".\"featured_link\", \"topics\".\"reviewable_score\", \"topics\".\"image_upload_id\" FROM \"topics\" WHERE (\"topics\".\"deleted_at\" IS NULL) AND \"topics\".\"id\" = 175 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":35169,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35168,"elapsed":0.001129},{"id":35170,"event":"call","defined_class":"Reviewable","method_id":"rejected?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35171,"event":"return","defined_class":"Reviewable","method_id":"rejected?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":35170,"elapsed":6.0e-06},{"id":35172,"event":"call","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35173,"event":"return","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":35172,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35174,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 80 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":35175,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35174,"elapsed":0.00097},{"id":35176,"event":"call","defined_class":"UserGuardian","method_id":"can_delete_user?","path":"lib/guardian/user_guardian.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097612480360,"value":"#<User:0x00007f81be953ed0>","kind":"req"}],"receiver":{"class":"Guardian","object_id":70097798887580,"value":"#<Guardian:0x00007f81d4cdf138>"}},{"id":35177,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612480360,"value":"#<User:0x00007f81be953ed0>"}},{"id":35178,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":35177,"elapsed":1.1e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35179,"event":"return","defined_class":"UserGuardian","method_id":"can_delete_user?","path":"lib/guardian/user_guardian.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35176,"elapsed":0.000114},{"id":35180,"event":"call","defined_class":"Guardian","method_id":"can_delete?","path":"lib/guardian.rb","lineno":159,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>","kind":"req"}],"receiver":{"class":"Guardian","object_id":70097798887580,"value":"#<Guardian:0x00007f81d4cdf138>"}},{"id":35181,"event":"call","defined_class":"Guardian","method_id":"authenticated?","path":"lib/guardian.rb","lineno":80,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097798887580,"value":"#<Guardian:0x00007f81d4cdf138>"}},{"id":35182,"event":"return","defined_class":"Guardian","method_id":"authenticated?","path":"lib/guardian.rb","lineno":80,"static":false,"thread_id":70097708498960,"parent_id":35181,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35183,"event":"call","defined_class":"Guardian","method_id":"can_delete_reviewable_queued_post?","path":"lib/guardian.rb","lineno":188,"static":false,"thread_id":70097708498960,"parameters":[{"name":"reviewable","class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>","kind":"req"}],"receiver":{"class":"Guardian","object_id":70097798887580,"value":"#<Guardian:0x00007f81d4cdf138>"}},{"id":35184,"event":"call","defined_class":"Guardian","method_id":"authenticated?","path":"lib/guardian.rb","lineno":80,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097798887580,"value":"#<Guardian:0x00007f81d4cdf138>"}},{"id":35185,"event":"return","defined_class":"Guardian","method_id":"authenticated?","path":"lib/guardian.rb","lineno":80,"static":false,"thread_id":70097708498960,"parent_id":35184,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35186,"event":"return","defined_class":"Guardian","method_id":"can_delete_reviewable_queued_post?","path":"lib/guardian.rb","lineno":188,"static":false,"thread_id":70097708498960,"parent_id":35183,"elapsed":9.4e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35187,"event":"return","defined_class":"Guardian","method_id":"can_delete?","path":"lib/guardian.rb","lineno":159,"static":false,"thread_id":70097708498960,"parent_id":35180,"elapsed":0.00029,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35188,"event":"return","defined_class":"ReviewableQueuedPost","method_id":"build_actions","path":"app/models/reviewable_queued_post.rb","lineno":10,"static":false,"thread_id":70097708498960,"parent_id":35163,"elapsed":0.01,"return_value":{"class":"Array","value":"[#<Reviewable::Actions::Action:0x00007f81be958d40 @id=:delete, @icon=\"trash-alt\", @button_class=\"rev","object_id":70097612490200}},{"id":35189,"event":"return","defined_class":"Reviewable","method_id":"actions_for","path":"app/models/reviewable.rb","lineno":291,"static":false,"thread_id":70097708498960,"parent_id":35162,"elapsed":0.010122,"return_value":{"class":"Reviewable::Actions","value":"#<Reviewable::Actions:0x00007f81d4cde080>","object_id":70097798885440}},{"id":35190,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":35191,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35190,"elapsed":0.001177},{"id":35192,"event":"call","defined_class":"ReviewableQueuedPost","method_id":"perform_delete","path":"app/models/reviewable_queued_post.rb","lineno":129,"static":false,"thread_id":70097708498960,"parameters":[{"name":"performed_by","class":"User","object_id":70097568060620,"value":"#<User:0x00007f81b949a998>","kind":"req"},{"name":"args","class":"Hash","object_id":70097798865720,"value":"{}","kind":"req"}],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35193,"event":"call","defined_class":"Reviewable","method_id":"create_result","path":"app/models/reviewable.rb","lineno":527,"static":false,"thread_id":70097708498960,"parameters":[{"name":"status","class":"Symbol","object_id":1272668,"value":"success","kind":"req"},{"name":"transition_to","class":"Symbol","object_id":1824988,"value":"deleted","kind":"opt"}],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35194,"event":"return","defined_class":"Reviewable","method_id":"create_result","path":"app/models/reviewable.rb","lineno":527,"static":false,"thread_id":70097708498960,"parent_id":35193,"elapsed":1.0e-05,"return_value":{"class":"Reviewable::PerformResult","value":"#<Reviewable::PerformResult:0x00007f81be13ab40>","object_id":70097608234400}},{"id":35195,"event":"return","defined_class":"ReviewableQueuedPost","method_id":"perform_delete","path":"app/models/reviewable_queued_post.rb","lineno":129,"static":false,"thread_id":70097708498960,"parent_id":35192,"elapsed":0.000118,"return_value":{"class":"Reviewable::PerformResult","value":"#<Reviewable::PerformResult:0x00007f81be13ab40>","object_id":70097608234400}},{"id":35196,"event":"call","defined_class":"Reviewable","method_id":"transition_to","path":"app/models/reviewable.rb","lineno":372,"static":false,"thread_id":70097708498960,"parameters":[{"name":"status_symbol","class":"Symbol","object_id":1824988,"value":"deleted","kind":"req"},{"name":"performed_by","class":"User","object_id":70097568060620,"value":"#<User:0x00007f81b949a998>","kind":"req"}],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35197,"event":"call","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35198,"event":"return","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":35197,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35199,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"statuses","path":"app/models/reviewable.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097796486220,"value":"Reviewable"}},{"id":35200,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"statuses","path":"app/models/reviewable.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":35199,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:pending=>0, :approved=>1, :rejected=>2, :ignored=>3, :deleted=>4}","object_id":70097796937940}},{"id":35201,"event":"call","defined_class":"Reviewable","method_id":"apply_review_group","path":"app/models/reviewable.rb","lineno":283,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35202,"event":"return","defined_class":"Reviewable","method_id":"apply_review_group","path":"app/models/reviewable.rb","lineno":283,"static":false,"thread_id":70097708498960,"parent_id":35201,"elapsed":8.0e-06},{"id":35203,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"reviewables\" SET \"status\" = 4, \"version\" = 1, \"updated_at\" = '2020-05-28 18:50:03.743145' WHERE \"reviewables\".\"id\" = 31","database_type":"postgres","server_version":110006}},{"id":35204,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35203,"elapsed":0.001097},{"id":35205,"event":"call","defined_class":"Reviewable","method_id":"log_history","path":"app/models/reviewable.rb","lineno":274,"static":false,"thread_id":70097708498960,"parameters":[{"name":"reviewable_history_type","class":"Symbol","object_id":17533468,"value":"transitioned","kind":"req"},{"name":"performed_by","class":"User","object_id":70097568060620,"value":"#<User:0x00007f81b949a998>","kind":"req"},{"name":"edited","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35206,"event":"call","defined_class":"ReviewableHistory(id: integer, reviewable_id: integer, reviewable_history_type: integer, status: integer, created_by_id: integer, edited: json, created_at: datetime, updated_at: datetime)","method_id":"types","path":"app/models/reviewable_history.rb","lineno":7,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097814904680,"value":"ReviewableHistory"}},{"id":35207,"event":"return","defined_class":"ReviewableHistory(id: integer, reviewable_id: integer, reviewable_history_type: integer, status: integer, created_by_id: integer, edited: json, created_at: datetime, updated_at: datetime)","method_id":"types","path":"app/models/reviewable_history.rb","lineno":7,"static":true,"thread_id":70097708498960,"parent_id":35206,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:created=>0, :transitioned=>1, :edited=>2, :claimed=>3, :unclaimed=>4}","object_id":70097814734640}},{"id":35208,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"reviewable_histories\" (\"reviewable_id\", \"reviewable_history_type\", \"status\", \"created_by_id\", \"created_at\", \"updated_at\") VALUES (31, 1, 4, 80, '2020-05-28 18:50:03.748229', '2020-05-28 18:50:03.748229') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":35209,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35208,"elapsed":0.001056},{"id":35210,"event":"return","defined_class":"Reviewable","method_id":"log_history","path":"app/models/reviewable.rb","lineno":274,"static":false,"thread_id":70097708498960,"parent_id":35205,"elapsed":0.005197,"return_value":{"class":"ReviewableHistory","value":"#<ReviewableHistory:0x00007f81be1ab7a0>","object_id":70097608465360}},{"id":35211,"event":"call","defined_class":"Reviewable","method_id":"serializer","path":"app/models/reviewable.rb","lineno":511,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35212,"event":"call","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"serializer_for","path":"app/models/reviewable.rb","lineno":521,"static":true,"thread_id":70097708498960,"parameters":[{"name":"reviewable","class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>","kind":"req"}],"receiver":{"class":"Class","object_id":70097817048600,"value":"ReviewableQueuedPost"}},{"id":35213,"event":"return","defined_class":"Reviewable(id: integer, type: string, status: integer, created_by_id: integer, reviewable_by_moderator: boolean, reviewable_by_group_id: integer, category_id: integer, topic_id: integer, score: float, potential_spam: boolean, target_id: integer, target_type: string, target_created_by_id: integer, payload: json, version: integer, latest_score: datetime, created_at: datetime, updated_at: datetime)","method_id":"serializer_for","path":"app/models/reviewable.rb","lineno":521,"static":true,"thread_id":70097708498960,"parent_id":35212,"elapsed":1.5e-05,"return_value":{"class":"Class","value":"ReviewableQueuedPostSerializer","object_id":70097593732740}},{"id":35214,"event":"return","defined_class":"Reviewable","method_id":"serializer","path":"app/models/reviewable.rb","lineno":511,"static":false,"thread_id":70097708498960,"parent_id":35211,"elapsed":0.000119,"return_value":{"class":"Class","value":"ReviewableQueuedPostSerializer","object_id":70097593732740}},{"id":35215,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":12225948,"value":"reviewable","kind":"req"},{"name":"object","class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>","kind":"req"},{"name":"event","class":"Symbol","object_id":12688988,"value":"reviewable_transitioned_to","kind":"req"},{"name":"serializer","class":"Class","object_id":70097593732740,"value":"ReviewableQueuedPostSerializer","kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":35216,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":12225948,"value":"reviewable","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":35217,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":35216,"elapsed":0.00017,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81d4e5c998>","object_id":70097799668940}},{"id":35218,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'reviewable') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":35219,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35218,"elapsed":0.001041},{"id":35220,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":35215,"elapsed":0.004518},{"id":35221,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"score_transitions","path":"app/models/reviewable_score.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":35222,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":35223,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parent_id":35222,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:pending=>0, :agreed=>1, :disagreed=>2, :ignored=>3}","object_id":70097732890840}},{"id":35224,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":35225,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parent_id":35224,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:pending=>0, :agreed=>1, :disagreed=>2, :ignored=>3}","object_id":70097732890840}},{"id":35226,"event":"call","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097731740320,"value":"ReviewableScore"}},{"id":35227,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"statuses","path":"app/models/reviewable_score.rb","lineno":24,"static":true,"thread_id":70097708498960,"parent_id":35226,"elapsed":3.0e-06,"return_value":{"class":"Enum","value":"{:pending=>0, :agreed=>1, :disagreed=>2, :ignored=>3}","object_id":70097732890840}},{"id":35228,"event":"return","defined_class":"ReviewableScore(id: integer, reviewable_id: integer, user_id: integer, reviewable_score_type: integer, status: integer, score: float, take_action_bonus: float, reviewed_by_id: integer, reviewed_at: datetime, meta_topic_id: integer, created_at: datetime, updated_at: datetime, reason: string, user_accuracy_bonus: float)","method_id":"score_transitions","path":"app/models/reviewable_score.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":35221,"elapsed":0.000282,"return_value":{"class":"Hash","value":"{:approved=>1, :rejected=>2, :ignored=>3}","object_id":70097613065160}},{"id":35229,"event":"return","defined_class":"Reviewable","method_id":"transition_to","path":"app/models/reviewable.rb","lineno":372,"static":false,"thread_id":70097708498960,"parent_id":35196,"elapsed":0.015504,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35230,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":35231,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35230,"elapsed":0.000848},{"id":35232,"event":"call","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097798869620,"value":"#<ReviewableQueuedPost:0x00007f81d4cd64e8>"}},{"id":35233,"event":"return","defined_class":"Reviewable","method_id":"pending?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":35232,"elapsed":6.0e-06},{"id":35234,"event":"call","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parameters":[{"name":"job","class":"Symbol","object_id":17527068,"value":"notify_reviewable","kind":"req"},{"name":"opts","class":"Hash","object_id":70097613819320,"value":"{:reviewable_id=>31}","kind":"opt"}],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":35235,"event":"call","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Module","object_id":70097757303740,"value":"Jobs"}},{"id":35236,"event":"return","defined_class":"Jobs","method_id":"run_later?","path":"app/jobs/base.rb","lineno":9,"static":true,"thread_id":70097708498960,"parent_id":35235,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35237,"event":"return","defined_class":"Jobs","method_id":"enqueue","path":"app/jobs/base.rb","lineno":284,"static":true,"thread_id":70097708498960,"parent_id":35234,"elapsed":0.000211,"return_value":{"class":"String","value":"439dd3d35dde6db8a5874bbc","object_id":70097613839040}},{"id":35238,"event":"return","defined_class":"Reviewable","method_id":"perform","path":"app/models/reviewable.rb","lineno":337,"static":false,"thread_id":70097708498960,"parent_id":35159,"elapsed":0.034715,"return_value":{"class":"Reviewable::PerformResult","value":"#<Reviewable::PerformResult:0x00007f81be13ab40>","object_id":70097608234400}},{"id":35239,"event":"return","defined_class":"ReviewablesController","method_id":"destroy","path":"app/controllers/reviewables_controller.rb","lineno":135,"static":false,"thread_id":70097708498960,"parent_id":35152,"elapsed":0.039051,"return_value":{"class":"String","value":"{\"success\":\"OK\"}","object_id":70097613835240}},{"id":35240,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35241,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":35240,"elapsed":7.0e-06},{"id":35242,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35243,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":35242,"elapsed":6.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097613854480}},{"id":35244,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewablesController","object_id":70097591225040,"value":"#<ReviewablesController:0x00007f81bc0c95a0>"}},{"id":35245,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35246,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35245,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35247,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097568060620,"value":"#<User:0x00007f81b949a998>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097591112920,"value":"#<ActionDispatch::Request::Session:0x00007f81bc0929b0>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097733233120,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81ccfa53c0>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35248,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35249,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35250,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35249,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35251,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":35248,"elapsed":9.0e-05},{"id":35252,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35253,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591295660,"value":"#<TestCurrentUserProvider:0x00007f81bc0ebd58>"}},{"id":35254,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":35253,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81b949a998>","object_id":70097568060620}},{"id":35255,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":35252,"elapsed":8.7e-05},{"id":35256,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":35247,"elapsed":0.000395},{"id":35257,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":35244,"elapsed":0.000596},{"id":35258,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":35039,"elapsed":0.080519,"http_server_response":{"status":200}},{"id":35259,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613881660,"value":"#<TestCurrentUserProvider:0x00007f81bec00278>"}},{"id":35260,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":35259,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":35261,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":35262,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":35261,"elapsed":4.0e-06},{"id":35263,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":35264,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":35263,"elapsed":4.0e-06},{"id":35265,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"reviewables\".* FROM \"reviewables\" WHERE \"reviewables\".\"type\" = 'ReviewableQueuedPost' AND \"reviewables\".\"id\" = 31 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":35266,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":35265,"elapsed":0.000906},{"id":35267,"event":"call","defined_class":"Reviewable","method_id":"deleted?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ReviewableQueuedPost","object_id":70097732986920,"value":"#<ReviewableQueuedPost:0x00007f81ccf2d050>"}},{"id":35268,"event":"return","defined_class":"Reviewable","method_id":"deleted?","path":"app/models/reviewable.rb","lineno":82,"static":false,"thread_id":70097708498960,"parent_id":35267,"elapsed":1.2e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}}]}