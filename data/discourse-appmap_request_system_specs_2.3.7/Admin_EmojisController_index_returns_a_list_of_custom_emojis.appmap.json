{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::EmojisController #index returns a list of custom emojis","app":"Discourse","feature":"Admin::EmojisController #index","feature_group":"Admin emojis","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"Emoji","type":"class","children":[{"name":"clear_cache","type":"function","location":"app/models/emoji.rb:83","static":true},{"name":"cache_key","type":"function","location":"app/models/emoji.rb:79","static":true},{"name":"custom","type":"function","location":"app/models/emoji.rb:35","static":true},{"name":"load_custom","type":"function","location":"app/models/emoji.rb:101","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true},{"name":"skip_db?","type":"function","location":"app/models/global_setting.rb:84","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_visit_record!","type":"function","location":"app/models/user.rb:680","static":false},{"name":"visit_record_for","type":"function","location":"app/models/user.rb:676","static":false},{"name":"create_visit_record!","type":"function","location":"app/models/user.rb:671","static":false},{"name":"seen_before?","type":"function","location":"app/models/user.rb:667","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_serialized","type":"function","location":"app/controllers/application_controller.rb:446","static":false},{"name":"serialize_data","type":"function","location":"app/controllers/application_controller.rb:431","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"EmojisController","type":"class","children":[{"name":"index","type":"function","location":"app/controllers/admin/emojis_controller.rb:5","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]}],"events":[{"id":632957,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"uploads\".* FROM \"uploads\" WHERE \"uploads\".\"id\" = 5 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":632958,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":632957,"elapsed":0.000789},{"id":632959,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":632960,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":632959,"elapsed":0.000867},{"id":632961,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"custom_emojis\" WHERE \"custom_emojis\".\"name\" = 'osama-test-emoji' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":632962,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":632961,"elapsed":0.000953},{"id":632963,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"custom_emojis\" (\"name\", \"upload_id\", \"created_at\", \"updated_at\") VALUES ('osama-test-emoji', 5, '2020-05-28 18:56:43.571337', '2020-05-28 18:56:43.571337') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":632964,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":632963,"elapsed":0.001427},{"id":632965,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":632966,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":632965,"elapsed":0.000999},{"id":632967,"event":"call","defined_class":"Emoji","method_id":"clear_cache","path":"app/models/emoji.rb","lineno":83,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":632968,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097782103860,"value":"custom_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":632969,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":632968,"elapsed":8.0e-06,"return_value":{"class":"String","value":"custom_emojis:v9:plugin-emoji","object_id":70097782114820}},{"id":632970,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097782164600,"value":"standard_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":632971,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":632970,"elapsed":7.0e-06,"return_value":{"class":"String","value":"standard_emojis:v9:plugin-emoji","object_id":70097782195940}},{"id":632972,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097782227700,"value":"aliases_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":632973,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":632972,"elapsed":8.0e-06,"return_value":{"class":"String","value":"aliases_emojis:v9:plugin-emoji","object_id":70097782265160}},{"id":632974,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097782297340,"value":"search_aliases_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":632975,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":632974,"elapsed":8.0e-06,"return_value":{"class":"String","value":"search_aliases_emojis:v9:plugin-emoji","object_id":70097782327000}},{"id":632976,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097782361760,"value":"translations_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":632977,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":632976,"elapsed":8.0e-06,"return_value":{"class":"String","value":"translations_emojis:v9:plugin-emoji","object_id":70097782398600}},{"id":632978,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097782410220,"value":"all_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":632979,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":632978,"elapsed":7.0e-06,"return_value":{"class":"String","value":"all_emojis:v9:plugin-emoji","object_id":70097782444100}},{"id":632980,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097782496680,"value":"tonable_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":632981,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":632980,"elapsed":1.7e-05,"return_value":{"class":"String","value":"tonable_emojis:v9:plugin-emoji","object_id":70097782530000}},{"id":632982,"event":"return","defined_class":"Emoji","method_id":"clear_cache","path":"app/models/emoji.rb","lineno":83,"static":true,"thread_id":70097708498960,"parent_id":632967,"elapsed":0.007598,"return_value":{"class":"Array","value":"[\"custom\", \"standard\", \"aliases\", \"search_aliases\", \"translations\", \"all\", \"tonable\"]","object_id":70097782079720}},{"id":632983,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097783177660,"value":"#<TestCurrentUserProvider:0x00007f81d2ee8378>"}},{"id":632984,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097783217380,"value":"9f15fe6868c3db1243fcde158c26fd26","kind":"req"},{"name":"opts","class":"Hash","object_id":70097783214900,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":632985,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097783217380,"value":"9f15fe6868c3db1243fcde158c26fd26","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":632986,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":632987,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":632986,"elapsed":1.0e-05,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":632988,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":632985,"elapsed":0.000158,"return_value":{"class":"String","value":"JRTp02N/Kvjf5qJ4UsSQkiT8oPY=","object_id":70097703796600}},{"id":632989,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'JRTp02N/Kvjf5qJ4UsSQkiT8oPY=' OR\n                          prev_auth_token = 'JRTp02N/Kvjf5qJ4UsSQkiT8oPY=') AND rotated_at > '2020-03-29 18:56:43.633353') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":632990,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":632989,"elapsed":0.001251},{"id":632991,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 18:56:43.638717' WHERE \"user_auth_tokens\".\"id\" = 772 AND \"user_auth_tokens\".\"auth_token\" = 'JRTp02N/Kvjf5qJ4UsSQkiT8oPY='","database_type":"postgres","server_version":110006}},{"id":632992,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":632991,"elapsed":0.001697},{"id":632993,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097756190260,"value":"{:action=>\"seen token\", :user_auth_token_id=>772, :user_id=>839, :auth_token=>\"JRTp02N/Kvjf5qJ4UsSQk","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":632994,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":632995,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":632994,"elapsed":0.001174},{"id":632996,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 772, 839, '127.0.0.1/32', 'JRTp02N/Kvjf5qJ4UsSQkiT8oPY=', '2020-05-28 18:56:43.649300') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":632997,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":632996,"elapsed":0.001384},{"id":632998,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":632999,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":632998,"elapsed":0.001108},{"id":633000,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":632993,"elapsed":0.015136,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81cfb7ca20>","object_id":70097756218640}},{"id":633001,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":632984,"elapsed":0.026443,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81d483fc68>","object_id":70097796464180}},{"id":633002,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 839 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":633003,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633002,"elapsed":0.001431},{"id":633004,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633005,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":633004,"elapsed":1.9e-05},{"id":633006,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097783177660,"value":"#<TestCurrentUserProvider:0x00007f81d2ee8378>"}},{"id":633007,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":633006,"elapsed":0.000986,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":633008,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633009,"event":"call","defined_class":"User","method_id":"update_visit_record!","path":"app/models/user.rb","lineno":680,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097826360820,"value":"2020-05-28","kind":"req"}],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633010,"event":"call","defined_class":"User","method_id":"visit_record_for","path":"app/models/user.rb","lineno":676,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097826360820,"value":"2020-05-28","kind":"req"}],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633011,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_visits\".* FROM \"user_visits\" WHERE \"user_visits\".\"user_id\" = 839 AND \"user_visits\".\"visited_at\" = '2020-05-28' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":633012,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633011,"elapsed":0.001144},{"id":633013,"event":"return","defined_class":"User","method_id":"visit_record_for","path":"app/models/user.rb","lineno":676,"static":false,"thread_id":70097708498960,"parent_id":633010,"elapsed":0.005021},{"id":633014,"event":"call","defined_class":"User","method_id":"create_visit_record!","path":"app/models/user.rb","lineno":671,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097826360820,"value":"2020-05-28","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633015,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_stats\".\"user_id\", \"user_stats\".\"topics_entered\", \"user_stats\".\"time_read\", \"user_stats\".\"days_visited\", \"user_stats\".\"posts_read_count\", \"user_stats\".\"likes_given\", \"user_stats\".\"likes_received\", \"user_stats\".\"new_since\", \"user_stats\".\"read_faq\", \"user_stats\".\"first_post_created_at\", \"user_stats\".\"post_count\", \"user_stats\".\"topic_count\", \"user_stats\".\"bounce_score\", \"user_stats\".\"reset_bounce_score_after\", \"user_stats\".\"flags_agreed\", \"user_stats\".\"flags_disagreed\", \"user_stats\".\"flags_ignored\", \"user_stats\".\"first_unread_at\", \"user_stats\".\"distinct_badge_count\" FROM \"user_stats\" WHERE \"user_stats\".\"user_id\" = 839 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":633016,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633015,"elapsed":0.001328},{"id":633017,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_stats\" SET \"days_visited\" = 1 WHERE \"user_stats\".\"user_id\" = 839","database_type":"postgres","server_version":110006}},{"id":633018,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633017,"elapsed":0.001311},{"id":633019,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":633020,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633019,"elapsed":0.001541},{"id":633021,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_visits\" (\"user_id\", \"visited_at\") VALUES (839, '2020-05-28') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":633022,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633021,"elapsed":0.001375},{"id":633023,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":633024,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633023,"elapsed":0.001025},{"id":633025,"event":"return","defined_class":"User","method_id":"create_visit_record!","path":"app/models/user.rb","lineno":671,"static":false,"thread_id":70097708498960,"parent_id":633014,"elapsed":0.026382,"return_value":{"class":"UserVisit","value":"#<UserVisit:0x00007f81d825c478>","object_id":70097826931260}},{"id":633026,"event":"return","defined_class":"User","method_id":"update_visit_record!","path":"app/models/user.rb","lineno":680,"static":false,"thread_id":70097708498960,"parent_id":633009,"elapsed":0.031767,"return_value":{"class":"UserVisit","value":"#<UserVisit:0x00007f81d825c478>","object_id":70097826931260}},{"id":633027,"event":"call","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633028,"event":"return","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parent_id":633027,"elapsed":2.5e-05},{"id":633029,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"last_seen_at\" = '2020-05-28 18:56:43.666339' WHERE \"users\".\"id\" = 839","database_type":"postgres","server_version":110006}},{"id":633030,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633029,"elapsed":0.001295},{"id":633031,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"first_seen_at\" = '2020-05-28 18:56:43.666339' WHERE \"users\".\"id\" = 839","database_type":"postgres","server_version":110006}},{"id":633032,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633031,"elapsed":0.001403},{"id":633033,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":633008,"elapsed":0.042729},{"id":633034,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097826356700,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633035,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 839","database_type":"postgres","server_version":110006}},{"id":633036,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633035,"elapsed":0.001349},{"id":633037,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":633034,"elapsed":0.004213,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":633038,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":632983,"elapsed":0.080706,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633039,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097783177660,"value":"#<TestCurrentUserProvider:0x00007f81d2ee8378>"}},{"id":633040,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633039,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633041,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633042,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":633041,"elapsed":7.9e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":633043,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097587476900,"value":"#<TestCurrentUserProvider:0x00007f81bb9a3348>"}},{"id":633044,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633043,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633045,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097587476900,"value":"#<TestCurrentUserProvider:0x00007f81bb9a3348>"}},{"id":633046,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633045,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633047,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633048,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":633047,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":633049,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097587493600,"value":"#<TestCurrentUserProvider:0x00007f81bb9ab5c0>"}},{"id":633050,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633049,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633051,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097587493600,"value":"#<TestCurrentUserProvider:0x00007f81bb9ab5c0>"}},{"id":633052,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633051,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633053,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633054,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":633053,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":633055,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":633056,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":633055,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":633057,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":633058,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":633057,"elapsed":1.0e-05},{"id":633059,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/customize/emojis.json"},"message":[{"name":"controller","class":"String","value":"admin/emojis","object_id":70097795232740},{"name":"action","class":"String","value":"index","object_id":70097708669400},{"name":"format","class":"String","value":"json","object_id":70097783183360}]},{"id":633060,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633061,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633062,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633063,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633064,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633063,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633065,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":633062,"elapsed":0.000139,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4a809f0>","object_id":70097797645560}},{"id":633066,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097797645560,"value":"#<Guardian:0x00007f81d4a809f0>"}},{"id":633067,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":633066,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":633068,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":633061,"elapsed":0.000387},{"id":633069,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633070,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633069,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633071,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 839 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":633072,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633071,"elapsed":0.001096},{"id":633073,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633074,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":633073,"elapsed":7.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4a809f0>","object_id":70097797645560}},{"id":633075,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097567023440,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097797645560,"value":"#<Guardian:0x00007f81d4a809f0>"}},{"id":633076,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":633075,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":633077,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":633060,"elapsed":0.005847,"return_value":{"class":"Array","value":"[2]","object_id":70097567023440}},{"id":633078,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633079,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633080,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633079,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633081,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633082,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633081,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633083,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633084,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633083,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633085,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":633078,"elapsed":0.000575,"return_value":{"class":"String","value":"emojis/index","object_id":70097567074280}},{"id":633086,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633087,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633088,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633087,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633089,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":633086,"elapsed":0.000128},{"id":633090,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633091,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633092,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633091,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633093,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633094,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633093,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633095,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633096,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":633095,"elapsed":1.3e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":633097,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":633098,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":633097,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":633099,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":633100,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":633099,"elapsed":1.1e-05},{"id":633101,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":633102,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":633101,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":633103,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":633104,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":633103,"elapsed":7.0e-06},{"id":633105,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":633090,"elapsed":0.000878,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097567155940}},{"id":633106,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633107,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":633106,"elapsed":1.0e-05},{"id":633108,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633109,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633110,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633109,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633111,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":633108,"elapsed":0.000121},{"id":633112,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633113,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633112,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633114,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633115,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633114,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633116,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633117,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633116,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633118,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097756125540,"value":"Admin::EmojisController"}},{"id":633119,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":633118,"elapsed":3.0e-06},{"id":633120,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633121,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":633120,"elapsed":9.0e-06},{"id":633122,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633123,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633122,"elapsed":6.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633124,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633125,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633124,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633126,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>"}},{"id":633127,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":633126,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":633128,"event":"call","defined_class":"Admin::EmojisController","method_id":"index","path":"app/controllers/admin/emojis_controller.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633129,"event":"call","defined_class":"Emoji","method_id":"custom","path":"app/models/emoji.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":633130,"event":"call","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097715190900,"value":"custom_emojis","kind":"req"}],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":633131,"event":"return","defined_class":"Emoji","method_id":"cache_key","path":"app/models/emoji.rb","lineno":79,"static":true,"thread_id":70097708498960,"parent_id":633130,"elapsed":8.0e-06,"return_value":{"class":"String","value":"custom_emojis:v9:plugin-emoji","object_id":70097567272900}},{"id":633132,"event":"call","defined_class":"Emoji","method_id":"load_custom","path":"app/models/emoji.rb","lineno":101,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587929440,"value":"Emoji"}},{"id":633133,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":633134,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":633133,"elapsed":4.0e-06},{"id":633135,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"custom_emojis\".* FROM \"custom_emojis\" ORDER BY \"custom_emojis\".\"name\" ASC","database_type":"postgres","server_version":110006}},{"id":633136,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633135,"elapsed":0.00115},{"id":633137,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"uploads\".* FROM \"uploads\" WHERE \"uploads\".\"id\" = 5","database_type":"postgres","server_version":110006}},{"id":633138,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":633137,"elapsed":0.001101},{"id":633139,"event":"return","defined_class":"Emoji","method_id":"load_custom","path":"app/models/emoji.rb","lineno":101,"static":true,"thread_id":70097708498960,"parent_id":633132,"elapsed":0.010397,"return_value":{"class":"Array","value":"[#<Emoji:0x00007f81ccfe55b0 @name=\"osama-test-emoji\", @url=\"/uploads/default/test_0/original/1X/356a","object_id":70097567269920}},{"id":633140,"event":"return","defined_class":"Emoji","method_id":"custom","path":"app/models/emoji.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":633129,"elapsed":0.012711,"return_value":{"class":"Array","value":"[#<Emoji:0x00007f81ccfe55b0 @name=\"osama-test-emoji\", @url=\"/uploads/default/test_0/original/1X/356a","object_id":70097567269920}},{"id":633141,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097567269920,"value":"[#<Emoji:0x00007f81ccfe55b0 @name=\"osama-test-emoji\", @url=\"/uploads/default/test_0/original/1X/356a","kind":"req"},{"name":"serializer","class":"Class","object_id":70097568868280,"value":"EmojiSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097733384960,"value":"{:root=>false}","kind":"opt"}],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633142,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097567269920,"value":"[#<Emoji:0x00007f81ccfe55b0 @name=\"osama-test-emoji\", @url=\"/uploads/default/test_0/original/1X/356a","kind":"req"},{"name":"serializer","class":"Class","object_id":70097568868280,"value":"EmojiSerializer","kind":"req"},{"name":"opts","class":"Hash","object_id":70097733384960,"value":"{:root=>false}","kind":"opt"}],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633143,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633144,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":633143,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4a809f0>","object_id":70097797645560}},{"id":633145,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":633142,"elapsed":0.000259,"return_value":{"class":"Array","value":"[{:name=>\"osama-test-emoji\", :url=>\"/uploads/default/test_0/original/1X/356a192b7913b04c54574d18c28d","object_id":70097607596720}},{"id":633146,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097607596720,"value":"[{:name=>\"osama-test-emoji\", :url=>\"/uploads/default/test_0/original/1X/356a192b7913b04c54574d18c28d","kind":"req"},{"name":"opts","class":"Hash","object_id":70097733384960,"value":"{:root=>false}","kind":"opt"}],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633147,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":633146,"elapsed":0.000164,"return_value":{"class":"String","value":"[{\"name\":\"osama-test-emoji\",\"url\":\"/uploads/default/test_0/original/1X/356a192b7913b04c54574d18c28d4","object_id":70097607590520}},{"id":633148,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":633141,"elapsed":0.000703,"return_value":{"class":"String","value":"[{\"name\":\"osama-test-emoji\",\"url\":\"/uploads/default/test_0/original/1X/356a192b7913b04c54574d18c28d4","object_id":70097607590520}},{"id":633149,"event":"return","defined_class":"Admin::EmojisController","method_id":"index","path":"app/controllers/admin/emojis_controller.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":633128,"elapsed":0.013747,"return_value":{"class":"String","value":"[{\"name\":\"osama-test-emoji\",\"url\":\"/uploads/default/test_0/original/1X/356a192b7913b04c54574d18c28d4","object_id":70097607590520}},{"id":633150,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633151,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":633150,"elapsed":8.0e-06},{"id":633152,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633153,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":633152,"elapsed":7.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097607608300}},{"id":633154,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmojisController","object_id":70097587510100,"value":"#<Admin::EmojisController:0x00007f81bb9b36a8>"}},{"id":633155,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633156,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633155,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633157,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097826339980,"value":"#<User:0x00007f81d813b918>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097782871780,"value":"#<ActionDispatch::Request::Session:0x00007f81d2e52dc8>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097567024060,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81b92a0778>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633158,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633159,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633160,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633159,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633161,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":633158,"elapsed":0.000107},{"id":633162,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633163,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097797648020,"value":"#<TestCurrentUserProvider:0x00007f81d4a81d28>"}},{"id":633164,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":633163,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d813b918>","object_id":70097826339980}},{"id":633165,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":633162,"elapsed":0.000105},{"id":633166,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":633157,"elapsed":0.000402},{"id":633167,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":633154,"elapsed":0.000644},{"id":633168,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":633059,"elapsed":0.025444,"http_server_response":{"status":200}},{"id":633169,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097607661200,"value":"#<TestCurrentUserProvider:0x00007f81be022d20>"}},{"id":633170,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":633169,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":633171,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":633172,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":633171,"elapsed":7.0e-06},{"id":633173,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":633174,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":633173,"elapsed":3.0e-06}]}