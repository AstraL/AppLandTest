{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::ScreenedIpAddressesController #roll_up rolls up 1.2.*.* entries","app":"Discourse","feature":"Admin::ScreenedIpAddressesController #roll_up","feature_group":"Admin screened ip addresses","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"ScreenedIpAddress","type":"class","children":[{"name":"ip_address=","type":"function","location":"app/models/screened_ip_address.rb:33","static":false},{"name":"check_for_match","type":"function","location":"app/models/screened_ip_address.rb:21","static":false}]},{"name":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"match_for_ip_address","type":"function","location":"app/models/screened_ip_address.rb:64","static":true},{"name":"roll_up","type":"function","location":"app/models/screened_ip_address.rb:140","static":true},{"name":"star_subnets","type":"function","location":"app/models/screened_ip_address.rb:130","static":true},{"name":"star_subnets_query","type":"function","location":"app/models/screened_ip_address.rb:98","static":true},{"name":"star_star_subnets","type":"function","location":"app/models/screened_ip_address.rb:135","static":true},{"name":"star_star_subnets_query","type":"function","location":"app/models/screened_ip_address.rb:110","static":true}]},{"name":"Site","type":"class","children":[{"name":"clear_anon_cache!","type":"function","location":"app/models/site.rb:129","static":true}]},{"name":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","type":"class","children":[{"name":"actions","type":"function","location":"app/models/user_history.rb:20","static":true},{"name":"admin_only_action_ids","type":"function","location":"app/models/user_history.rb:198","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"UserHistory","type":"class","children":[{"name":"set_admin_only","type":"function","location":"app/models/user_history.rb:250","static":false}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/validators","type":"package","children":[{"name":"IpAddressFormatValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/ip_address_format_validator.rb:7","static":false}]},{"name":"IntegerSettingValidator","type":"class","children":[{"name":"valid_value?","type":"function","location":"lib/validators/integer_setting_validator.rb:11","static":false}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"ScreenedIpAddressesController","type":"class","children":[{"name":"roll_up","type":"function","location":"app/controllers/admin/screened_ip_addresses_controller.rb:47","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"app/services","type":"package","children":[{"name":"StaffActionLogger","type":"class","children":[{"name":"log_roll_up","type":"function","location":"app/services/staff_action_logger.rb:411","static":false}]}]}],"events":[{"id":1133863,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097801501540,"value":"1.2.3.4","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097614686300,"value":"#<ScreenedIpAddress:0x00007f81bed890b8>"}},{"id":1133864,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1133863,"elapsed":2.1e-05,"return_value":{"class":"String","value":"1.2.3.4","object_id":70097801501540}},{"id":1133865,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097614686300,"value":"#<ScreenedIpAddress:0x00007f81bed890b8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097614706220,"value":"1.2.3.4","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1133866,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133865,"elapsed":7.0e-06},{"id":1133867,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097614686300,"value":"#<ScreenedIpAddress:0x00007f81bed890b8>"}},{"id":1133868,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097614706220,"value":"1.2.3.4","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1133869,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133870,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133869,"elapsed":0.000886},{"id":1133871,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('1.2.3.4' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133872,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133871,"elapsed":0.001323},{"id":1133873,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1133868,"elapsed":0.007741},{"id":1133874,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1133867,"elapsed":0.007933},{"id":1133875,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"match_count\", \"created_at\", \"updated_at\") VALUES ('1.2.3.4/32', 1, 1, '2020-05-28 19:03:31.946843', '2020-05-28 19:03:31.946843') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133876,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133875,"elapsed":0.001334},{"id":1133877,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133878,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133877,"elapsed":0.001268},{"id":1133879,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097801501520,"value":"1.2.3.5","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097590019060,"value":"#<ScreenedIpAddress:0x00007f81bbe7c7e8>"}},{"id":1133880,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1133879,"elapsed":1.8e-05,"return_value":{"class":"String","value":"1.2.3.5","object_id":70097801501520}},{"id":1133881,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097590019060,"value":"#<ScreenedIpAddress:0x00007f81bbe7c7e8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097590039060,"value":"1.2.3.5","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1133882,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133881,"elapsed":6.0e-06},{"id":1133883,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097590019060,"value":"#<ScreenedIpAddress:0x00007f81bbe7c7e8>"}},{"id":1133884,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097590039060,"value":"1.2.3.5","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1133885,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133886,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133885,"elapsed":0.001069},{"id":1133887,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('1.2.3.5' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133888,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133887,"elapsed":0.001177},{"id":1133889,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1133884,"elapsed":0.007788},{"id":1133890,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1133883,"elapsed":0.00797},{"id":1133891,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"match_count\", \"created_at\", \"updated_at\") VALUES ('1.2.3.5/32', 1, 1, '2020-05-28 19:03:31.962923', '2020-05-28 19:03:31.962923') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133892,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133891,"elapsed":0.001612},{"id":1133893,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133894,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133893,"elapsed":0.001545},{"id":1133895,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097801500180,"value":"1.2.4.6","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097792733820,"value":"#<ScreenedIpAddress:0x00007f81d41224f8>"}},{"id":1133896,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1133895,"elapsed":1.9e-05,"return_value":{"class":"String","value":"1.2.4.6","object_id":70097801500180}},{"id":1133897,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097792733820,"value":"#<ScreenedIpAddress:0x00007f81d41224f8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097792709180,"value":"1.2.4.6","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1133898,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133897,"elapsed":7.0e-06},{"id":1133899,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097792733820,"value":"#<ScreenedIpAddress:0x00007f81d41224f8>"}},{"id":1133900,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097792709180,"value":"1.2.4.6","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1133901,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133902,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133901,"elapsed":0.001368},{"id":1133903,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('1.2.4.6' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133904,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133903,"elapsed":0.00151},{"id":1133905,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1133900,"elapsed":0.009638},{"id":1133906,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1133899,"elapsed":0.009834},{"id":1133907,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"match_count\", \"created_at\", \"updated_at\") VALUES ('1.2.4.6/32', 1, 1, '2020-05-28 19:03:32.023811', '2020-05-28 19:03:32.023811') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133908,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133907,"elapsed":0.001264},{"id":1133909,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133910,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133909,"elapsed":0.00096},{"id":1133911,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097801500160,"value":"1.2.7.8","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097731332480,"value":"#<ScreenedIpAddress:0x00007f81ccc05300>"}},{"id":1133912,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1133911,"elapsed":1.8e-05,"return_value":{"class":"String","value":"1.2.7.8","object_id":70097801500160}},{"id":1133913,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097731332480,"value":"#<ScreenedIpAddress:0x00007f81ccc05300>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097731370840,"value":"1.2.7.8","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1133914,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133913,"elapsed":8.0e-06},{"id":1133915,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097731332480,"value":"#<ScreenedIpAddress:0x00007f81ccc05300>"}},{"id":1133916,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097731370840,"value":"1.2.7.8","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1133917,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133918,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133917,"elapsed":0.000992},{"id":1133919,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('1.2.7.8' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133920,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133919,"elapsed":0.001191},{"id":1133921,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1133916,"elapsed":0.008251},{"id":1133922,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1133915,"elapsed":0.00843},{"id":1133923,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"match_count\", \"created_at\", \"updated_at\") VALUES ('1.2.7.8/32', 1, 1, '2020-05-28 19:03:32.040628', '2020-05-28 19:03:32.040628') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133924,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133923,"elapsed":0.001504},{"id":1133925,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133926,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133925,"elapsed":0.00101},{"id":1133927,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097801500140,"value":"1.2.9.1","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097732846540,"value":"#<ScreenedIpAddress:0x00007f81ccee8798>"}},{"id":1133928,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1133927,"elapsed":1.7e-05,"return_value":{"class":"String","value":"1.2.9.1","object_id":70097801500140}},{"id":1133929,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097732846540,"value":"#<ScreenedIpAddress:0x00007f81ccee8798>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097732860960,"value":"1.2.9.1","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1133930,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133929,"elapsed":7.0e-06},{"id":1133931,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097732846540,"value":"#<ScreenedIpAddress:0x00007f81ccee8798>"}},{"id":1133932,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097732860960,"value":"1.2.9.1","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1133933,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133934,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133933,"elapsed":0.001006},{"id":1133935,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('1.2.9.1' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133936,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133935,"elapsed":0.001286},{"id":1133937,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1133932,"elapsed":0.008495},{"id":1133938,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1133931,"elapsed":0.00868},{"id":1133939,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"match_count\", \"created_at\", \"updated_at\") VALUES ('1.2.9.1/32', 1, 1, '2020-05-28 19:03:32.057634', '2020-05-28 19:03:32.057634') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133940,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133939,"elapsed":0.001205},{"id":1133941,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133942,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133941,"elapsed":0.000925},{"id":1133943,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097801500120,"value":"1.2.42.0/24","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097817018240,"value":"#<ScreenedIpAddress:0x00007f81d6f73f00>"}},{"id":1133944,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1133943,"elapsed":2.0e-05,"return_value":{"class":"String","value":"1.2.42.0/24","object_id":70097801500120}},{"id":1133945,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097817018240,"value":"#<ScreenedIpAddress:0x00007f81d6f73f00>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097817032440,"value":"1.2.42.0","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1133946,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133945,"elapsed":6.0e-06},{"id":1133947,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097817018240,"value":"#<ScreenedIpAddress:0x00007f81d6f73f00>"}},{"id":1133948,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097817032440,"value":"1.2.42.0","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1133949,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133950,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133949,"elapsed":0.0011},{"id":1133951,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('1.2.42.0' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133952,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133951,"elapsed":0.001336},{"id":1133953,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1133948,"elapsed":0.008209},{"id":1133954,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1133947,"elapsed":0.008379},{"id":1133955,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"match_count\", \"created_at\", \"updated_at\") VALUES ('1.2.42.0/24', 1, 1, '2020-05-28 19:03:32.074025', '2020-05-28 19:03:32.074025') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133956,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133955,"elapsed":0.001464},{"id":1133957,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133958,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133957,"elapsed":0.000885},{"id":1133959,"event":"call","defined_class":"IntegerSettingValidator","method_id":"valid_value?","path":"lib/validators/integer_setting_validator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"Integer","object_id":11,"value":"5","kind":"req"}],"receiver":{"class":"IntegerSettingValidator","object_id":70097587389620,"value":"#<IntegerSettingValidator:0x00007f81bb978968>"}},{"id":1133960,"event":"return","defined_class":"IntegerSettingValidator","method_id":"valid_value?","path":"lib/validators/integer_setting_validator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1133959,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133961,"event":"call","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097723455600,"value":"Site"}},{"id":1133962,"event":"return","defined_class":"Site","method_id":"clear_anon_cache!","path":"app/models/site.rb","lineno":129,"static":true,"thread_id":70097708498960,"parent_id":1133961,"elapsed":0.000117,"return_value":{"class":"Integer","value":"15136","object_id":30273}},{"id":1133963,"event":"call","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097565682280,"value":"UserHistory"}},{"id":1133964,"event":"return","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parent_id":1133963,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:delete_user=>1, :change_trust_level=>2, :change_site_setting=>3, :change_theme=>4, :delete_theme=>","object_id":70097826343960}},{"id":1133965,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"user_histories\" WHERE \"user_histories\".\"action\" = 20","database_type":"postgres","server_version":110006}},{"id":1133966,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133965,"elapsed":0.001364},{"id":1133967,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097565716560,"value":"#<TestCurrentUserProvider:0x00007f81b90220a0>"}},{"id":1133968,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097565728200,"value":"36874111965fed74be2c517e4665f2a8","kind":"req"},{"name":"opts","class":"Hash","object_id":70097565727300,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1133969,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097565728200,"value":"36874111965fed74be2c517e4665f2a8","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1133970,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1133971,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1133970,"elapsed":9.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1133972,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1133969,"elapsed":0.000141,"return_value":{"class":"String","value":"gah6QSpx/0Y5wJpJyw0Z1xxrvHQ=","object_id":70097565930480}},{"id":1133973,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'gah6QSpx/0Y5wJpJyw0Z1xxrvHQ=' OR\n                          prev_auth_token = 'gah6QSpx/0Y5wJpJyw0Z1xxrvHQ=') AND rotated_at > '2020-03-29 19:03:32.089290') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133974,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133973,"elapsed":0.001438},{"id":1133975,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 19:03:32.094196' WHERE \"user_auth_tokens\".\"id\" = 1263 AND \"user_auth_tokens\".\"auth_token\" = 'gah6QSpx/0Y5wJpJyw0Z1xxrvHQ='","database_type":"postgres","server_version":110006}},{"id":1133976,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133975,"elapsed":0.001318},{"id":1133977,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097568024780,"value":"{:action=>\"seen token\", :user_auth_token_id=>1263, :user_id=>1474, :auth_token=>\"gah6QSpx/0Y5wJpJyw0","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1133978,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133979,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133978,"elapsed":0.001909},{"id":1133980,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 1263, 1474, '127.0.0.1/32', 'gah6QSpx/0Y5wJpJyw0Z1xxrvHQ=', '2020-05-28 19:03:32.098746') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133981,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133980,"elapsed":0.001435},{"id":1133982,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133983,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133982,"elapsed":0.001119},{"id":1133984,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1133977,"elapsed":0.015594,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81b9492e28>","object_id":70097568044820}},{"id":1133985,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1133968,"elapsed":0.025201,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81b92daf40>","object_id":70097567143840}},{"id":1133986,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1474 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133987,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133986,"elapsed":0.001344},{"id":1133988,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612633140,"value":"#<User:0x00007f81be99e868>"}},{"id":1133989,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1133988,"elapsed":1.7e-05},{"id":1133990,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097565716560,"value":"#<TestCurrentUserProvider:0x00007f81b90220a0>"}},{"id":1133991,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1133990,"elapsed":0.000865,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133992,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097612633140,"value":"#<User:0x00007f81be99e868>"}},{"id":1133993,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1133992,"elapsed":0.001751},{"id":1133994,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097612628260,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097612633140,"value":"#<User:0x00007f81be99e868>"}},{"id":1133995,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 1474","database_type":"postgres","server_version":110006}},{"id":1133996,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133995,"elapsed":0.001547},{"id":1133997,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1133994,"elapsed":0.004599,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133998,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133967,"elapsed":0.038281,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1133999,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097565716560,"value":"#<TestCurrentUserProvider:0x00007f81b90220a0>"}},{"id":1134000,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133999,"elapsed":6.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134001,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612633140,"value":"#<User:0x00007f81be99e868>"}},{"id":1134002,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1134001,"elapsed":2.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1134003,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1134004,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1134003,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1134005,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1134006,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1134005,"elapsed":1.6e-05},{"id":1134007,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"POST","path_info":"/admin/logs/screened_ip_addresses/roll_up.json"},"message":[{"name":"controller","class":"String","value":"admin/screened_ip_addresses","object_id":70097794638920},{"name":"action","class":"String","value":"roll_up","object_id":70097783390840},{"name":"format","class":"String","value":"json","object_id":70097565717500}]},{"id":1134008,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134009,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134010,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134011,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134012,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134011,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134013,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1134010,"elapsed":0.000147,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81be1a1fe8>","object_id":70097608445940}},{"id":1134014,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097608445940,"value":"#<Guardian:0x00007f81be1a1fe8>"}},{"id":1134015,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1134014,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1134016,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1134009,"elapsed":0.000396},{"id":1134017,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134018,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134017,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134019,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1474 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1134020,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134019,"elapsed":0.001556},{"id":1134021,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134022,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1134021,"elapsed":6.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81be1a1fe8>","object_id":70097608445940}},{"id":1134023,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097612702860,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097608445940,"value":"#<Guardian:0x00007f81be1a1fe8>"}},{"id":1134024,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1134023,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1134025,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1134008,"elapsed":0.00673,"return_value":{"class":"Array","value":"[2]","object_id":70097612702860}},{"id":1134026,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134027,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134028,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134027,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134029,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134030,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134029,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134031,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134032,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134031,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134033,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1134026,"elapsed":0.000382,"return_value":{"class":"String","value":"screened_ip_addresses/roll_up","object_id":70097612735780}},{"id":1134034,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134035,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134036,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134035,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134037,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1134034,"elapsed":0.000122},{"id":1134038,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134039,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134040,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134039,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134041,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134042,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134041,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134043,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612633140,"value":"#<User:0x00007f81be99e868>"}},{"id":1134044,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1134043,"elapsed":1.3e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":1134045,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1134046,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1134045,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1134047,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1134048,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1134047,"elapsed":1.0e-05},{"id":1134049,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1134050,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1134049,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1134051,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1134052,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1134051,"elapsed":7.0e-06},{"id":1134053,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1134038,"elapsed":0.000784,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097828351100}},{"id":1134054,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134055,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1134054,"elapsed":8.0e-06},{"id":1134056,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134057,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134058,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134057,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134059,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1134056,"elapsed":0.000109},{"id":1134060,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134061,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134060,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134062,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134063,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134062,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134064,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134065,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134064,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134066,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097801466400,"value":"Admin::ScreenedIpAddressesController"}},{"id":1134067,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1134066,"elapsed":3.0e-06},{"id":1134068,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134069,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1134068,"elapsed":8.0e-06},{"id":1134070,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134071,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134072,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134071,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134073,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1134070,"elapsed":0.000106},{"id":1134074,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134075,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134076,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134075,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134077,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1134074,"elapsed":0.000104},{"id":1134078,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134079,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134078,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134080,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134081,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134080,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134082,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097612633140,"value":"#<User:0x00007f81be99e868>"}},{"id":1134083,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1134082,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1134084,"event":"call","defined_class":"Admin::ScreenedIpAddressesController","method_id":"roll_up","path":"app/controllers/admin/screened_ip_addresses_controller.rb","lineno":47,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134085,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134086,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134085,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134087,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"roll_up","path":"app/models/screened_ip_address.rb","lineno":140,"static":true,"thread_id":70097708498960,"parameters":[{"name":"current_user","class":"User","object_id":70097612633140,"value":"#<User:0x00007f81be99e868>","kind":"opt"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1134088,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"star_subnets","path":"app/models/screened_ip_address.rb","lineno":130,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1134089,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"star_subnets_query","path":"app/models/screened_ip_address.rb","lineno":98,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1134090,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"star_subnets_query","path":"app/models/screened_ip_address.rb","lineno":98,"static":true,"thread_id":70097708498960,"parent_id":1134089,"elapsed":4.0e-06,"return_value":{"class":"String","value":"  SELECT network(inet(host(ip_address) || '/24'))::text AS ip_range\n    FROM screened_ip_addresses\n ","object_id":70097827826540}},{"id":1134091,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"star_subnets","path":"app/models/screened_ip_address.rb","lineno":130,"static":true,"thread_id":70097708498960,"parent_id":1134088,"elapsed":0.001493,"return_value":{"class":"Array","value":"[]","object_id":70097587837520}},{"id":1134092,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"star_star_subnets","path":"app/models/screened_ip_address.rb","lineno":135,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1134093,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"star_star_subnets_query","path":"app/models/screened_ip_address.rb","lineno":110,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1134094,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"star_star_subnets_query","path":"app/models/screened_ip_address.rb","lineno":110,"static":true,"thread_id":70097708498960,"parent_id":1134093,"elapsed":3.0e-06,"return_value":{"class":"String","value":"  WITH weighted_subnets AS (\n    SELECT network(inet(host(ip_address) || '/16'))::text AS ip_range,\n","object_id":70097827846020}},{"id":1134095,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"star_star_subnets","path":"app/models/screened_ip_address.rb","lineno":135,"static":true,"thread_id":70097708498960,"parent_id":1134092,"elapsed":0.001395,"return_value":{"class":"Array","value":"[\"1.2.0.0/16\"]","object_id":70097587833260}},{"id":1134096,"event":"call","defined_class":"StaffActionLogger","method_id":"log_roll_up","path":"app/services/staff_action_logger.rb","lineno":411,"static":false,"thread_id":70097708498960,"parameters":[{"name":"subnets","class":"Array","object_id":70097587832300,"value":"[\"1.2.0.0/16\"]","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"StaffActionLogger","object_id":70097587832260,"value":"#<StaffActionLogger:0x00007f81bba50b88>"}},{"id":1134097,"event":"call","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097565682280,"value":"UserHistory"}},{"id":1134098,"event":"return","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parent_id":1134097,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:delete_user=>1, :change_trust_level=>2, :change_site_setting=>3, :change_theme=>4, :delete_theme=>","object_id":70097826343960}},{"id":1134099,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1134100,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134099,"elapsed":0.000936},{"id":1134101,"event":"call","defined_class":"UserHistory","method_id":"set_admin_only","path":"app/models/user_history.rb","lineno":250,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"UserHistory","object_id":70097587848040,"value":"#<UserHistory:0x00007f81bba586d0>"}},{"id":1134102,"event":"call","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"admin_only_action_ids","path":"app/models/user_history.rb","lineno":198,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097565682280,"value":"UserHistory"}},{"id":1134103,"event":"return","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"admin_only_action_ids","path":"app/models/user_history.rb","lineno":198,"static":true,"thread_id":70097708498960,"parent_id":1134102,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[3]","object_id":70097608682780}},{"id":1134104,"event":"return","defined_class":"UserHistory","method_id":"set_admin_only","path":"app/models/user_history.rb","lineno":250,"static":false,"thread_id":70097708498960,"parent_id":1134101,"elapsed":0.000202,"return_value":{"class":"UserHistory","value":"#<UserHistory:0x00007f81bba586d0>","object_id":70097587848040}},{"id":1134105,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_histories\" (\"action\", \"acting_user_id\", \"details\", \"created_at\", \"updated_at\") VALUES (20, 1474, '1.2.0.0/16', '2020-05-28 19:03:32.148026', '2020-05-28 19:03:32.148026') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1134106,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134105,"elapsed":0.001291},{"id":1134107,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1134108,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134107,"elapsed":0.000956},{"id":1134109,"event":"return","defined_class":"StaffActionLogger","method_id":"log_roll_up","path":"app/services/staff_action_logger.rb","lineno":411,"static":false,"thread_id":70097708498960,"parent_id":1134096,"elapsed":0.014278,"return_value":{"class":"UserHistory","value":"#<UserHistory:0x00007f81bba586d0>","object_id":70097587848040}},{"id":1134110,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"screened_ip_addresses\" WHERE ('1.2.0.0/16' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1134111,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134110,"elapsed":0.001101},{"id":1134112,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097587833240,"value":"1.2.0.0/16","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097568379760,"value":"#<ScreenedIpAddress:0x00007f81b95366e0>"}},{"id":1134113,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1134112,"elapsed":1.8e-05,"return_value":{"class":"String","value":"1.2.0.0/16","object_id":70097587833240}},{"id":1134114,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1134115,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134114,"elapsed":0.00089},{"id":1134116,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097568379760,"value":"#<ScreenedIpAddress:0x00007f81b95366e0>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097800261400,"value":"1.2.0.0","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1134117,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1134116,"elapsed":8.0e-06},{"id":1134118,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097568379760,"value":"#<ScreenedIpAddress:0x00007f81b95366e0>"}},{"id":1134119,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097800261400,"value":"1.2.0.0","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1134120,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('1.2.0.0' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1134121,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134120,"elapsed":0.001265},{"id":1134122,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1134119,"elapsed":0.005473},{"id":1134123,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1134118,"elapsed":0.00564},{"id":1134124,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"created_at\", \"updated_at\") VALUES ('1.2.0.0/16', 1, '2020-05-28 19:03:32.172124', '2020-05-28 19:03:32.172124') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1134125,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134124,"elapsed":0.001246},{"id":1134126,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1134127,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134126,"elapsed":0.001047},{"id":1134128,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"DELETE FROM \"screened_ip_addresses\" WHERE \"screened_ip_addresses\".\"action_type\" = 1 AND (family(ip_address) = 4) AND (ip_address << '1.2.0.0/16')","database_type":"postgres","server_version":110006}},{"id":1134129,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134128,"elapsed":0.00129},{"id":1134130,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"roll_up","path":"app/models/screened_ip_address.rb","lineno":140,"static":true,"thread_id":70097708498960,"parent_id":1134087,"elapsed":0.047777,"return_value":{"class":"Array","value":"[\"1.2.0.0/16\"]","object_id":70097587832300}},{"id":1134131,"event":"return","defined_class":"Admin::ScreenedIpAddressesController","method_id":"roll_up","path":"app/controllers/admin/screened_ip_addresses_controller.rb","lineno":47,"static":false,"thread_id":70097708498960,"parent_id":1134084,"elapsed":0.048203,"return_value":{"class":"String","value":"{\"success\":\"OK\",\"subnets\":[\"1.2.0.0/16\"]}","object_id":70097589348960}},{"id":1134132,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134133,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1134132,"elapsed":9.0e-06},{"id":1134134,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134135,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1134134,"elapsed":6.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097589369720}},{"id":1134136,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097608412120,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81be1917b0>"}},{"id":1134137,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134138,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134137,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134139,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097612633140,"value":"#<User:0x00007f81be99e868>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097565890240,"value":"#<ActionDispatch::Request::Session:0x00007f81b9076d80>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097612703020,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81be9c0a58>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134140,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134141,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134142,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134141,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134143,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1134140,"elapsed":0.000101},{"id":1134144,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134145,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097608447580,"value":"#<TestCurrentUserProvider:0x00007f81be1a2cb8>"}},{"id":1134146,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1134145,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81be99e868>","object_id":70097612633140}},{"id":1134147,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1134144,"elapsed":0.000102},{"id":1134148,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1134139,"elapsed":0.000388},{"id":1134149,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1134136,"elapsed":0.000615},{"id":1134150,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1134007,"elapsed":0.060538,"http_server_response":{"status":200}},{"id":1134151,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589401060,"value":"#<TestCurrentUserProvider:0x00007f81bbd4ebc8>"}},{"id":1134152,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1134151,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1134153,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1134154,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1134153,"elapsed":5.0e-06},{"id":1134155,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1134156,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1134155,"elapsed":4.0e-06},{"id":1134157,"event":"call","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097565682280,"value":"UserHistory"}},{"id":1134158,"event":"return","defined_class":"UserHistory(id: integer, action: integer, acting_user_id: integer, target_user_id: integer, details: text, created_at: datetime, updated_at: datetime, context: string, ip_address: string, email: string, subject: text, previous_value: text, new_value: text, topic_id: integer, admin_only: boolean, post_id: integer, custom_type: string, category_id: integer)","method_id":"actions","path":"app/models/user_history.rb","lineno":20,"static":true,"thread_id":70097708498960,"parent_id":1134157,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:delete_user=>1, :change_trust_level=>2, :change_site_setting=>3, :change_theme=>4, :delete_theme=>","object_id":70097826343960}},{"id":1134159,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"user_histories\" WHERE \"user_histories\".\"action\" = 20","database_type":"postgres","server_version":110006}},{"id":1134160,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134159,"elapsed":0.001315},{"id":1134161,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE \"screened_ip_addresses\".\"ip_address\" = '1.2.0.0/16' ORDER BY \"screened_ip_addresses\".\"id\" ASC LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1134162,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1134161,"elapsed":0.001202}]}