{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::EmailController #incoming_from_bounced bounced email log entry exists returns an incoming email sent to the notification_email address","app":"Discourse","feature":"Admin::EmailController #incoming_from_bounced","feature_group":"Admin email","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"EmailLog","type":"class","children":[{"name":"bounce_key","type":"function","location":"app/models/email_log.rb:69","static":false}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true},{"name":"skip_db?","type":"function","location":"app/models/global_setting.rb:84","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"admin?","type":"function","location":"app/models/user.rb:916","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"EmailController","type":"class","children":[{"name":"incoming_from_bounced","type":"function","location":"app/controllers/admin/email_controller.rb:178","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"lib/email","type":"package","children":[{"name":"Email","type":"class","children":[{"name":"Sender","type":"class","children":[{"name":"bounceable_reply_address?","type":"function","location":"lib/email/sender.rb:366","static":true}]}]}]},{"name":"app/serializers","type":"package","children":[{"name":"IncomingEmailDetailsSerializer","type":"class","children":[{"name":"error","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:20","static":false},{"name":"include_error_description?","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:29","static":false},{"name":"error_description","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:24","static":false},{"name":"headers","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:33","static":false},{"name":"subject","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:37","static":false},{"name":"body","type":"function","location":"app/serializers/incoming_email_details_serializer.rb:41","static":false}]}]}],"events":[{"id":1012043,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"email_logs\".* FROM \"email_logs\" WHERE \"email_logs\".\"id\" = 23 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012044,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012043,"elapsed":0.001276},{"id":1012045,"event":"call","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"EmailLog","object_id":70097588348180,"value":"#<EmailLog:0x00007f81bbb4ca28>"}},{"id":1012046,"event":"return","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parent_id":1012045,"elapsed":3.8e-05,"return_value":{"class":"String","value":"ec1f82c299c9740d91307f0093735371","object_id":70097588370840}},{"id":1012047,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1012048,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012047,"elapsed":0.001508},{"id":1012049,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"incoming_emails\" (\"raw\", \"error\", \"message_id\", \"from_address\", \"to_addresses\", \"subject\", \"created_at\", \"updated_at\", \"is_bounce\") VALUES ('Return-Path: <foo@example.com>\nFrom: Foo <foo@example.com>\nTo: someone@else.com\nSubject: Hello world\nDate: Fri, 15 Jan 2016 00:12:43 +0100\nMessage-ID: <12345@example.com>\nMime-Version: 1.0\nContent-Type: text/plain; charset=UTF-8\nContent-Transfer-Encoding: quoted-printable\n\nThe body contains \"Hello world\" too.\n', 'Email::Receiver::BouncedEmailError', '12345@example.com', 'foo@example.com', 'noreply+verp-ec1f82c299c9740d91307f0093735371@test.localhost', 'Hello world', '2020-05-28 19:01:43.845495', '2020-05-28 19:01:43.845495', TRUE) RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1012050,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012049,"elapsed":0.001381},{"id":1012051,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1012052,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012051,"elapsed":0.001272},{"id":1012053,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800437460,"value":"#<TestCurrentUserProvider:0x00007f81d4fd3da8>"}},{"id":1012054,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097800434420,"value":"7b76bafa913b824c27c4353716ded208","kind":"req"},{"name":"opts","class":"Hash","object_id":70097800433780,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1012055,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097800434420,"value":"7b76bafa913b824c27c4353716ded208","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1012056,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1012057,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1012056,"elapsed":1.2e-05,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1012058,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1012055,"elapsed":0.000158,"return_value":{"class":"String","value":"EbDnu+yef1PIjTCM+IAwHNsrAWs=","object_id":70097800450100}},{"id":1012059,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'EbDnu+yef1PIjTCM+IAwHNsrAWs=' OR\n                          prev_auth_token = 'EbDnu+yef1PIjTCM+IAwHNsrAWs=') AND rotated_at > '2020-03-29 19:01:43.861570') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012060,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012059,"elapsed":0.001573},{"id":1012061,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 19:01:43.867108' WHERE \"user_auth_tokens\".\"id\" = 1174 AND \"user_auth_tokens\".\"auth_token\" = 'EbDnu+yef1PIjTCM+IAwHNsrAWs='","database_type":"postgres","server_version":110006}},{"id":1012062,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012061,"elapsed":0.001318},{"id":1012063,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097569164520,"value":"{:action=>\"seen token\", :user_auth_token_id=>1174, :user_id=>1349, :auth_token=>\"EbDnu+yef1PIjTCM+IA","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1012064,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1012065,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012064,"elapsed":0.000965},{"id":1012066,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 1174, 1349, '127.0.0.1/32', 'EbDnu+yef1PIjTCM+IAwHNsrAWs=', '2020-05-28 19:01:43.871999') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1012067,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012066,"elapsed":0.001484},{"id":1012068,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1012069,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012068,"elapsed":0.001641},{"id":1012070,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1012063,"elapsed":0.015263,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81b96b4cd8>","object_id":70097569162860}},{"id":1012071,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1012054,"elapsed":0.025852,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81d86960c0>","object_id":70097829146720}},{"id":1012072,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1349 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012073,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012072,"elapsed":0.001471},{"id":1012074,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589833540,"value":"#<User:0x00007f81bbe21e88>"}},{"id":1012075,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1012074,"elapsed":2.2e-05},{"id":1012076,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800437460,"value":"#<TestCurrentUserProvider:0x00007f81d4fd3da8>"}},{"id":1012077,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1012076,"elapsed":0.001179,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012078,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097589833540,"value":"#<User:0x00007f81bbe21e88>"}},{"id":1012079,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1012078,"elapsed":0.001087},{"id":1012080,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097589853520,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097589833540,"value":"#<User:0x00007f81bbe21e88>"}},{"id":1012081,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 1349","database_type":"postgres","server_version":110006}},{"id":1012082,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012081,"elapsed":0.001656},{"id":1012083,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1012080,"elapsed":0.005039,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012084,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012053,"elapsed":0.039832,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012085,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800437460,"value":"#<TestCurrentUserProvider:0x00007f81d4fd3da8>"}},{"id":1012086,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012085,"elapsed":6.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012087,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589833540,"value":"#<User:0x00007f81bbe21e88>"}},{"id":1012088,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1012087,"elapsed":2.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012089,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097609325060,"value":"#<TestCurrentUserProvider:0x00007f81be34f408>"}},{"id":1012090,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012089,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012091,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097609325060,"value":"#<TestCurrentUserProvider:0x00007f81be34f408>"}},{"id":1012092,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012091,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012093,"event":"call","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589833540,"value":"#<User:0x00007f81bbe21e88>"}},{"id":1012094,"event":"return","defined_class":"User","method_id":"admin?","path":"app/models/user.rb","lineno":916,"static":false,"thread_id":70097708498960,"parent_id":1012093,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012095,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012096,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012095,"elapsed":5.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1012097,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012098,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012097,"elapsed":1.2e-05},{"id":1012099,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/email/incoming_from_bounced/23.json"},"message":[{"name":"controller","class":"String","value":"admin/email","object_id":70097794412560},{"name":"action","class":"String","value":"incoming_from_bounced","object_id":70097794412620},{"name":"id","class":"String","value":"23","object_id":70097800413520},{"name":"format","class":"String","value":"json","object_id":70097800413440}]},{"id":1012100,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012101,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012102,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012103,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012104,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012103,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012105,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1012102,"elapsed":0.000167,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81b9664058>","object_id":70097568997420}},{"id":1012106,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097568997420,"value":"#<Guardian:0x00007f81b9664058>"}},{"id":1012107,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1012106,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012108,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1012101,"elapsed":0.000448},{"id":1012109,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012110,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012109,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012111,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1349 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012112,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012111,"elapsed":0.001587},{"id":1012113,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012114,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1012113,"elapsed":6.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81b9664058>","object_id":70097568997420}},{"id":1012115,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097624396560,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097568997420,"value":"#<Guardian:0x00007f81b9664058>"}},{"id":1012116,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1012115,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012117,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1012100,"elapsed":0.006902,"return_value":{"class":"Array","value":"[2]","object_id":70097624396560}},{"id":1012118,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012119,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012120,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012119,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012121,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012122,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012121,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012123,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012124,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012123,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012125,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1012118,"elapsed":0.000433,"return_value":{"class":"String","value":"email/incoming_from_bounced","object_id":70097624425260}},{"id":1012126,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012127,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012128,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012127,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012129,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1012126,"elapsed":0.000136},{"id":1012130,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012131,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012132,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012131,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012133,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012134,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012133,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012135,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589833540,"value":"#<User:0x00007f81bbe21e88>"}},{"id":1012136,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1012135,"elapsed":1.5e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":1012137,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012138,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012137,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1012139,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012140,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012139,"elapsed":1.5e-05},{"id":1012141,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012142,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012141,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1012143,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012144,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012143,"elapsed":8.0e-06},{"id":1012145,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1012130,"elapsed":0.00091,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097624497900}},{"id":1012146,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012147,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1012146,"elapsed":1.1e-05},{"id":1012148,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012149,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012150,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012149,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012151,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1012148,"elapsed":0.000126},{"id":1012152,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012153,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012152,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012154,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012155,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012154,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012156,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012157,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012156,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012158,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097793560780,"value":"Admin::EmailController"}},{"id":1012159,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1012158,"elapsed":4.0e-06},{"id":1012160,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012161,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1012160,"elapsed":8.0e-06},{"id":1012162,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012163,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012162,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012164,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012165,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012164,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012166,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097589833540,"value":"#<User:0x00007f81bbe21e88>"}},{"id":1012167,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1012166,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012168,"event":"call","defined_class":"Admin::EmailController","method_id":"incoming_from_bounced","path":"app/controllers/admin/email_controller.rb","lineno":178,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012169,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"email_logs\".* FROM \"email_logs\" WHERE \"email_logs\".\"id\" = 23 AND \"email_logs\".\"bounced\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012170,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012169,"elapsed":0.001533},{"id":1012171,"event":"call","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"EmailLog","object_id":70097829695500,"value":"#<EmailLog:0x00007f81d87a2018>"}},{"id":1012172,"event":"return","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parent_id":1012171,"elapsed":2.9e-05,"return_value":{"class":"String","value":"ec1f82c299c9740d91307f0093735371","object_id":70097829694400}},{"id":1012173,"event":"call","defined_class":"Email::Sender","method_id":"bounceable_reply_address?","path":"lib/email/sender.rb","lineno":366,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097587325720,"value":"Email::Sender"}},{"id":1012174,"event":"return","defined_class":"Email::Sender","method_id":"bounceable_reply_address?","path":"lib/email/sender.rb","lineno":366,"static":true,"thread_id":70097708498960,"parent_id":1012173,"elapsed":1.2e-05},{"id":1012175,"event":"call","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"EmailLog","object_id":70097829695500,"value":"#<EmailLog:0x00007f81d87a2018>"}},{"id":1012176,"event":"return","defined_class":"EmailLog","method_id":"bounce_key","path":"app/models/email_log.rb","lineno":69,"static":false,"thread_id":70097708498960,"parent_id":1012175,"elapsed":8.0e-06,"return_value":{"class":"String","value":"ec1f82c299c9740d91307f0093735371","object_id":70097829715740}},{"id":1012177,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"incoming_emails\".* FROM \"incoming_emails\" WHERE \"incoming_emails\".\"to_addresses\" = 'noreply+verp-ec1f82c299c9740d91307f0093735371@test.localhost' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1012178,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1012177,"elapsed":0.001453},{"id":1012179,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"IncomingEmailDetailsSerializer","object_id":70097621329020,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bfa348f8>","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012180,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"error","path":"app/serializers/incoming_email_details_serializer.rb","lineno":20,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097621329020,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bfa348f8>"}},{"id":1012181,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"error","path":"app/serializers/incoming_email_details_serializer.rb","lineno":20,"static":false,"thread_id":70097708498960,"parent_id":1012180,"elapsed":8.0e-06,"return_value":{"class":"String","value":"Email::Receiver::BouncedEmailError","object_id":70097621328980}},{"id":1012182,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"include_error_description?","path":"app/serializers/incoming_email_details_serializer.rb","lineno":29,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097621329020,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bfa348f8>"}},{"id":1012183,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"include_error_description?","path":"app/serializers/incoming_email_details_serializer.rb","lineno":29,"static":false,"thread_id":70097708498960,"parent_id":1012182,"elapsed":6.0e-06,"return_value":{"class":"String","value":"Email::Receiver::","object_id":70097621363760}},{"id":1012184,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"error_description","path":"app/serializers/incoming_email_details_serializer.rb","lineno":24,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097621329020,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bfa348f8>"}},{"id":1012185,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012186,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012185,"elapsed":6.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1012187,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012188,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012187,"elapsed":1.5e-05},{"id":1012189,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1012190,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1012189,"elapsed":4.0e-06},{"id":1012191,"event":"call","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1012192,"event":"return","defined_class":"GlobalSetting","method_id":"skip_db?","path":"app/models/global_setting.rb","lineno":84,"static":true,"thread_id":70097708498960,"parent_id":1012191,"elapsed":4.0e-06},{"id":1012193,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012194,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012193,"elapsed":5.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1012195,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1012196,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1012195,"elapsed":1.0e-05},{"id":1012197,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"error_description","path":"app/serializers/incoming_email_details_serializer.rb","lineno":24,"static":false,"thread_id":70097708498960,"parent_id":1012184,"elapsed":0.000948,"return_value":{"class":"String","value":"Email is a bounced email report.","object_id":70097621398740}},{"id":1012198,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"headers","path":"app/serializers/incoming_email_details_serializer.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097621329020,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bfa348f8>"}},{"id":1012199,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"headers","path":"app/serializers/incoming_email_details_serializer.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1012198,"elapsed":0.000678,"return_value":{"class":"String","value":"Return-Path: <foo@example.com>\r\nDate: Fri, 15 Jan 2016 00:12:43 +0100\r\nFrom: Foo <foo@example.com>\r\n","object_id":70097621397060}},{"id":1012200,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"subject","path":"app/serializers/incoming_email_details_serializer.rb","lineno":37,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097621329020,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bfa348f8>"}},{"id":1012201,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"subject","path":"app/serializers/incoming_email_details_serializer.rb","lineno":37,"static":false,"thread_id":70097708498960,"parent_id":1012200,"elapsed":3.0e-05,"return_value":{"class":"String","value":"Hello world","object_id":70097621411040}},{"id":1012202,"event":"call","defined_class":"IncomingEmailDetailsSerializer","method_id":"body","path":"app/serializers/incoming_email_details_serializer.rb","lineno":41,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"IncomingEmailDetailsSerializer","object_id":70097621329020,"value":"#<IncomingEmailDetailsSerializer:0x00007f81bfa348f8>"}},{"id":1012203,"event":"return","defined_class":"IncomingEmailDetailsSerializer","method_id":"body","path":"app/serializers/incoming_email_details_serializer.rb","lineno":41,"static":false,"thread_id":70097708498960,"parent_id":1012202,"elapsed":0.000156,"return_value":{"class":"String","value":"The body contains \"Hello world\" too.","object_id":70097621450240}},{"id":1012204,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1012179,"elapsed":0.002952,"return_value":{"class":"String","value":"{\"error\":\"Email::Receiver::BouncedEmailError\",\"error_description\":\"Email is a bounced email report.\"","object_id":70097621449320}},{"id":1012205,"event":"return","defined_class":"Admin::EmailController","method_id":"incoming_from_bounced","path":"app/controllers/admin/email_controller.rb","lineno":178,"static":false,"thread_id":70097708498960,"parent_id":1012168,"elapsed":0.014819,"return_value":{"class":"String","value":"{\"error\":\"Email::Receiver::BouncedEmailError\",\"error_description\":\"Email is a bounced email report.\"","object_id":70097621449320}},{"id":1012206,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012207,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1012206,"elapsed":1.1e-05},{"id":1012208,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012209,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1012208,"elapsed":1.1e-05,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097621444600}},{"id":1012210,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::EmailController","object_id":70097569619620,"value":"#<Admin::EmailController:0x00007f81b9793d48>"}},{"id":1012211,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012212,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012211,"elapsed":6.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012213,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097589833540,"value":"#<User:0x00007f81bbe21e88>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097828856720,"value":"#<ActionDispatch::Request::Session:0x00007f81d8608720>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097624396720,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81c000e760>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012214,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012215,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012216,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012215,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012217,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1012214,"elapsed":0.00012},{"id":1012218,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012219,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097568999400,"value":"#<TestCurrentUserProvider:0x00007f81b9664fd0>"}},{"id":1012220,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1012219,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81bbe21e88>","object_id":70097589833540}},{"id":1012221,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1012218,"elapsed":0.00013},{"id":1012222,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1012213,"elapsed":0.000476},{"id":1012223,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1012210,"elapsed":0.000779},{"id":1012224,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1012099,"elapsed":0.028434,"http_server_response":{"status":200}},{"id":1012225,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097621480220,"value":"#<TestCurrentUserProvider:0x00007f81bfa7e638>"}},{"id":1012226,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1012225,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1012227,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1012228,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1012227,"elapsed":7.0e-06},{"id":1012229,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1012230,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1012229,"elapsed":4.0e-06}]}