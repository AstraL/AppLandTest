{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Users::OmniauthCallbacksController Google Oauth2 when user has been verified when user has security key enabled should return the right response","app":"Discourse","feature":"Users::OmniauthCallbacksController Google Oauth2","feature_group":"Users omniauth callbacks","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","type":"class","children":[{"name":"find_by_email","type":"function","location":"app/models/user.rb:367","static":true},{"name":"human_user_id?","type":"function","location":"app/models/user.rb:309","static":true}]},{"name":"User","type":"class","children":[{"name":"email","type":"function","location":"app/models/user.rb:1194","static":false},{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"email=","type":"function","location":"app/models/user.rb:1198","static":false},{"name":"should_validate_email_address?","type":"function","location":"app/models/user.rb:432","static":false},{"name":"password_validator","type":"function","location":"app/models/user.rb:646","static":false},{"name":"password_validation_required?","type":"function","location":"app/models/user.rb:638","static":false},{"name":"password_required?","type":"function","location":"app/models/user.rb:634","static":false},{"name":"human?","type":"function","location":"app/models/user.rb:313","static":false},{"name":"refresh_avatar","type":"function","location":"app/models/user.rb:1053","static":false}]},{"name":"SecondFactorManager","type":"class","children":[{"name":"has_any_second_factor_methods_enabled?","type":"function","location":"app/models/concerns/second_factor_manager.rb:74","static":false},{"name":"totp_enabled?","type":"function","location":"app/models/concerns/second_factor_manager.rb:56","static":false},{"name":"security_keys_enabled?","type":"function","location":"app/models/concerns/second_factor_manager.rb:68","static":false}]},{"name":"UserSecondFactor(id: integer, user_id: integer, method: integer, data: string, enabled: boolean, last_used: datetime, created_at: datetime, updated_at: datetime, name: string)","type":"class","children":[{"name":"methods","type":"function","location":"app/models/user_second_factor.rb:19","static":true}]},{"name":"UserSecurityKey(id: integer, user_id: integer, credential_id: string, public_key: string, factor_type: integer, enabled: boolean, name: string, last_used: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"factor_types","type":"function","location":"app/models/user_security_key.rb:10","static":true}]},{"name":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","type":"class","children":[{"name":"transform_ids","type":"function","location":"app/models/theme.rb:162","static":true},{"name":"get_set_cache","type":"function","location":"app/models/theme.rb:125","static":true}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]},{"name":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","type":"class","children":[{"name":"should_block?","type":"function","location":"app/models/screened_email.rb:35","static":true},{"name":"canonical","type":"function","location":"app/models/screened_email.rb:21","static":true}]},{"name":"HasCustomFields","type":"class","children":[{"name":"save_custom_fields","type":"function","location":"app/models/concerns/has_custom_fields.rb:204","static":false},{"name":"custom_fields_clean?","type":"function","location":"app/models/concerns/has_custom_fields.rb:185","static":false}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Users","type":"class","children":[{"name":"OmniauthCallbacksController","type":"class","children":[{"name":"complete","type":"function","location":"app/controllers/users/omniauth_callbacks_controller.rb:22","static":false},{"name":"find_authenticator","type":"function","location":"app/controllers/users/omniauth_callbacks_controller.rb:91","static":true}]}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]},{"name":"FacebookAuthenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/facebook_authenticator.rb:11","static":false}]},{"name":"GoogleOAuth2Authenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/google_oauth2_authenticator.rb:8","static":false},{"name":"name","type":"function","location":"lib/auth/google_oauth2_authenticator.rb:4","static":false},{"name":"primary_email_verified?","type":"function","location":"lib/auth/google_oauth2_authenticator.rb:12","static":false}]},{"name":"GithubAuthenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/github_authenticator.rb:11","static":false}]},{"name":"TwitterAuthenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/twitter_authenticator.rb:8","static":false}]},{"name":"InstagramAuthenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/instagram_authenticator.rb:8","static":false}]},{"name":"DiscordAuthenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/discord_authenticator.rb:45","static":false}]},{"name":"ManagedAuthenticator","type":"class","children":[{"name":"after_authenticate","type":"function","location":"lib/auth/managed_authenticator.rb:46","static":false},{"name":"can_connect_existing_user?","type":"function","location":"lib/auth/managed_authenticator.rb:31","static":false},{"name":"match_by_email","type":"function","location":"lib/auth/managed_authenticator.rb:17","static":false},{"name":"always_update_user_email?","type":"function","location":"lib/auth/managed_authenticator.rb:35","static":false},{"name":"retrieve_avatar","type":"function","location":"lib/auth/managed_authenticator.rb:121","static":false},{"name":"retrieve_profile","type":"function","location":"lib/auth/managed_authenticator.rb:127","static":false}]},{"name":"Result","type":"class","children":[{"name":"email","type":"function","location":"lib/auth/result.rb:21","static":false},{"name":"failed?","type":"function","location":"lib/auth/result.rb:25","static":false},{"name":"to_client_hash","type":"function","location":"lib/auth/result.rb:40","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"lib/email","type":"package","children":[{"name":"Email","type":"class","children":[{"name":"downcase","type":"function","location":"lib/email.rb:12","static":true},{"name":"is_valid?","type":"function","location":"lib/email.rb:7","static":true}]}]},{"name":"lib/validators","type":"package","children":[{"name":"EmailValidator","type":"class","children":[{"name":"email_regex","type":"function","location":"lib/validators/email_validator.rb:43","static":true},{"name":"validate_each","type":"function","location":"lib/validators/email_validator.rb:5","static":false},{"name":"allowed?","type":"function","location":"lib/validators/email_validator.rb:15","static":true},{"name":"email_in_restriction_setting?","type":"function","location":"lib/validators/email_validator.rb:33","static":true}]},{"name":"PasswordValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/password_validator.rb:5","static":false}]}]},{"name":"app/services","type":"package","children":[{"name":"BadgeGranter","type":"class","children":[{"name":"queue_badge_grant","type":"function","location":"app/services/badge_granter.rb:126","static":true}]},{"name":"SearchIndexer","type":"class","children":[{"name":"index","type":"function","location":"app/services/search_indexer.rb:126","static":true}]}]}],"events":[{"id":1218245,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218246,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218245,"elapsed":8.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1218247,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218248,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218247,"elapsed":1.5e-05},{"id":1218249,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/auth/google_oauth2/callback.json"},"message":[{"name":"controller","class":"String","value":"users/omniauth_callbacks","object_id":70097802876920},{"name":"action","class":"String","value":"complete","object_id":70097802876900},{"name":"provider","class":"String","value":"google_oauth2","object_id":70097591502740},{"name":"format","class":"String","value":"json","object_id":70097591502440}]},{"id":1218250,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218251,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218252,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218253,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218254,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218253,"elapsed":2.8e-05},{"id":1218255,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1218252,"elapsed":0.000171,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bc18a548>","object_id":70097591620260}},{"id":1218256,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097591620260,"value":"#<Guardian:0x00007f81bc18a548>"}},{"id":1218257,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1218256,"elapsed":1.2e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218258,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1218251,"elapsed":0.000438},{"id":1218259,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218260,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218259,"elapsed":4.0e-06},{"id":1218261,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218262,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1218261,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bc18a548>","object_id":70097591620260}},{"id":1218263,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097591634460,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097591620260,"value":"#<Guardian:0x00007f81bc18a548>"}},{"id":1218264,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1218263,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218265,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1218250,"elapsed":0.000933,"return_value":{"class":"Array","value":"[2]","object_id":70097591634460}},{"id":1218266,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218267,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218268,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218267,"elapsed":3.0e-06},{"id":1218269,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1218266,"elapsed":0.000118,"return_value":{"class":"String","value":"omniauth_callbacks/complete","object_id":70097591666500}},{"id":1218270,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218271,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218272,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218271,"elapsed":3.0e-06},{"id":1218273,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1218270,"elapsed":0.000108},{"id":1218274,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218275,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218276,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218275,"elapsed":4.0e-06},{"id":1218277,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218278,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218277,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1218279,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218280,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218279,"elapsed":1.0e-05},{"id":1218281,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218282,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218281,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1218283,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218284,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218283,"elapsed":8.0e-06},{"id":1218285,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1218274,"elapsed":0.000606,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097591786820}},{"id":1218286,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218287,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1218286,"elapsed":7.0e-06},{"id":1218288,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097792157460,"value":"Users::OmniauthCallbacksController"}},{"id":1218289,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1218288,"elapsed":3.0e-06},{"id":1218290,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218291,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1218290,"elapsed":1.1e-05},{"id":1218292,"event":"call","defined_class":"Users::OmniauthCallbacksController","method_id":"complete","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":22,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218293,"event":"call","defined_class":"Users::OmniauthCallbacksController","method_id":"find_authenticator","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":91,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097591502740,"value":"google_oauth2","kind":"req"}],"receiver":{"class":"Class","object_id":70097792157460,"value":"Users::OmniauthCallbacksController"}},{"id":1218294,"event":"call","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::FacebookAuthenticator","object_id":70097718125600,"value":"#<Auth::FacebookAuthenticator:0x00007f81cb2d4840>"}},{"id":1218295,"event":"return","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1218294,"elapsed":6.0e-06},{"id":1218296,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218297,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1218296,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218298,"event":"call","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GithubAuthenticator","object_id":70097718147360,"value":"#<Auth::GithubAuthenticator:0x00007f81cb2df240>"}},{"id":1218299,"event":"return","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1218298,"elapsed":5.0e-06},{"id":1218300,"event":"call","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::TwitterAuthenticator","object_id":70097718147040,"value":"#<Auth::TwitterAuthenticator:0x00007f81cb2defc0>"}},{"id":1218301,"event":"return","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1218300,"elapsed":5.0e-06},{"id":1218302,"event":"call","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::InstagramAuthenticator","object_id":70097718146640,"value":"#<Auth::InstagramAuthenticator:0x00007f81cb2deca0>"}},{"id":1218303,"event":"return","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1218302,"elapsed":5.0e-06},{"id":1218304,"event":"call","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::DiscordAuthenticator","object_id":70097718146280,"value":"#<Auth::DiscordAuthenticator:0x00007f81cb2de9d0>"}},{"id":1218305,"event":"return","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parent_id":1218304,"elapsed":6.0e-06},{"id":1218306,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218307,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1218306,"elapsed":3.0e-06,"return_value":{"class":"String","value":"google_oauth2","object_id":70097717801020}},{"id":1218308,"event":"return","defined_class":"Users::OmniauthCallbacksController","method_id":"find_authenticator","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":91,"static":true,"thread_id":70097708498960,"parent_id":1218293,"elapsed":0.000769,"return_value":{"class":"Auth::GoogleOAuth2Authenticator","value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>","object_id":70097718147680}},{"id":1218309,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"after_authenticate","path":"lib/auth/managed_authenticator.rb","lineno":46,"static":false,"thread_id":70097708498960,"parameters":[{"name":"auth_token","class":"OmniAuth::AuthHash","object_id":70097591159340,"value":"#<OmniAuth::AuthHash extra=#<OmniAuth::AuthHash raw_info=#<OmniAuth::AuthHash email=\"bruce1409@wayne","kind":"req"},{"name":"existing_account","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218310,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_associated_accounts\".* FROM \"user_associated_accounts\" WHERE \"user_associated_accounts\".\"provider_name\" = 'google_oauth2' AND \"user_associated_accounts\".\"provider_uid\" = '123545' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218311,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218310,"elapsed":0.001316},{"id":1218312,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"can_connect_existing_user?","path":"lib/auth/managed_authenticator.rb","lineno":31,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218313,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"can_connect_existing_user?","path":"lib/auth/managed_authenticator.rb","lineno":31,"static":false,"thread_id":70097708498960,"parent_id":1218312,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218314,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[{"name":"auth_token","class":"OmniAuth::AuthHash","object_id":70097591159340,"value":"#<OmniAuth::AuthHash extra=#<OmniAuth::AuthHash raw_info=#<OmniAuth::AuthHash email=\"bruce1409@wayne","kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218315,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":1218314,"elapsed":1.4e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218316,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"match_by_email","path":"lib/auth/managed_authenticator.rb","lineno":17,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218317,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"match_by_email","path":"lib/auth/managed_authenticator.rb","lineno":17,"static":false,"thread_id":70097708498960,"parent_id":1218316,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218318,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"find_by_email","path":"app/models/user.rb","lineno":367,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097591163940,"value":"bruce1409@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1218319,"event":"call","defined_class":"Email","method_id":"downcase","path":"lib/email.rb","lineno":12,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097591163940,"value":"bruce1409@wayne.com","kind":"req"}],"receiver":{"class":"Module","object_id":70097614623220,"value":"Email"}},{"id":1218320,"event":"call","defined_class":"Email","method_id":"is_valid?","path":"lib/email.rb","lineno":7,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097591163940,"value":"bruce1409@wayne.com","kind":"req"}],"receiver":{"class":"Module","object_id":70097614623220,"value":"Email"}},{"id":1218321,"event":"call","defined_class":"EmailValidator","method_id":"email_regex","path":"lib/validators/email_validator.rb","lineno":43,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1218322,"event":"return","defined_class":"EmailValidator","method_id":"email_regex","path":"lib/validators/email_validator.rb","lineno":43,"static":true,"thread_id":70097708498960,"parent_id":1218321,"elapsed":6.0e-06,"return_value":{"class":"Regexp","value":"(?-mix:\\A[a-zA-Z0-9!#\\$%&'*+\\/=?\\^_`{|}~\\-]+(?:\\.[a-zA-Z0-9!#\\$%&'\\*+\\/=?\\^_`{|}~\\-]+)*@(?:[a-zA-Z0-","object_id":70097803665340}},{"id":1218323,"event":"return","defined_class":"Email","method_id":"is_valid?","path":"lib/email.rb","lineno":7,"static":true,"thread_id":70097708498960,"parent_id":1218320,"elapsed":0.000158,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218324,"event":"return","defined_class":"Email","method_id":"downcase","path":"lib/email.rb","lineno":12,"static":true,"thread_id":70097708498960,"parent_id":1218319,"elapsed":0.000269,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097714726760}},{"id":1218325,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" INNER JOIN \"user_emails\" ON \"user_emails\".\"user_id\" = \"users\".\"id\" WHERE (lower(user_emails.email) IN ('bruce1409@wayne.com')) ORDER BY \"users\".\"id\" ASC LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218326,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218325,"elapsed":0.001683},{"id":1218327,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"find_by_email","path":"app/models/user.rb","lineno":367,"static":true,"thread_id":70097708498960,"parent_id":1218318,"elapsed":0.007946,"return_value":{"class":"User","value":"#<User:0x00007f81cb6dda18>","object_id":70097720241420}},{"id":1218328,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_associated_accounts\".* FROM \"user_associated_accounts\" WHERE \"user_associated_accounts\".\"user_id\" = 1581 AND \"user_associated_accounts\".\"provider_name\" = 'google_oauth2'","database_type":"postgres","server_version":110006}},{"id":1218329,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218328,"elapsed":0.0012},{"id":1218330,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1218331,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218330,"elapsed":0.001266},{"id":1218332,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_associated_accounts\" (\"provider_name\", \"provider_uid\", \"user_id\", \"last_used\", \"info\", \"extra\", \"created_at\", \"updated_at\") VALUES ('google_oauth2', '123545', 1581, '2020-05-28 19:04:56.395439', '{\"email\":\"bruce1409@wayne.com\",\"name\":\"Some name\"}', '{\"raw_info\":{\"email_verified\":true,\"email\":\"bruce1409@wayne.com\",\"family_name\":\"Huh\",\"given_name\":\"Bruce Wayne\",\"gender\":\"male\",\"name\":\"Bruce Wayne Huh\"}}', '2020-05-28 19:04:56.395623', '2020-05-28 19:04:56.395623') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1218333,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218332,"elapsed":0.001277},{"id":1218334,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1218335,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218334,"elapsed":0.001094},{"id":1218336,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"always_update_user_email?","path":"lib/auth/managed_authenticator.rb","lineno":35,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218337,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"always_update_user_email?","path":"lib/auth/managed_authenticator.rb","lineno":35,"static":false,"thread_id":70097708498960,"parent_id":1218336,"elapsed":6.0e-06},{"id":1218338,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097720241420,"value":"#<User:0x00007f81cb6dda18>"}},{"id":1218339,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_emails\".\"id\", \"user_emails\".\"user_id\", \"user_emails\".\"email\", \"user_emails\".\"primary\", \"user_emails\".\"created_at\", \"user_emails\".\"updated_at\" FROM \"user_emails\" WHERE \"user_emails\".\"user_id\" = 1581 AND \"user_emails\".\"primary\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218340,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218339,"elapsed":0.001359},{"id":1218341,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1218338,"elapsed":0.006432,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097813605680}},{"id":1218342,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_avatar","path":"lib/auth/managed_authenticator.rb","lineno":121,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097720241420,"value":"#<User:0x00007f81cb6dda18>","kind":"req"},{"name":"url","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218343,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_avatar","path":"lib/auth/managed_authenticator.rb","lineno":121,"static":false,"thread_id":70097708498960,"parent_id":1218342,"elapsed":5.0e-06},{"id":1218344,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_profile","path":"lib/auth/managed_authenticator.rb","lineno":127,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097720241420,"value":"#<User:0x00007f81cb6dda18>","kind":"req"},{"name":"info","class":"Hash","object_id":70097813604600,"value":"{\"email\"=>\"bruce1409@wayne.com\", \"name\"=>\"Some name\"}","kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218345,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_profile","path":"lib/auth/managed_authenticator.rb","lineno":127,"static":false,"thread_id":70097708498960,"parent_id":1218344,"elapsed":5.0e-06},{"id":1218346,"event":"call","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097813621700,"value":"#<Auth::Result:0x00007f81d68f9788>"}},{"id":1218347,"event":"return","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1218346,"elapsed":4.0e-06,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097813619920}},{"id":1218348,"event":"call","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097813621700,"value":"#<Auth::Result:0x00007f81d68f9788>"}},{"id":1218349,"event":"return","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1218348,"elapsed":4.0e-06,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097813640800}},{"id":1218350,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[{"name":"auth_token","class":"OmniAuth::AuthHash","object_id":70097591159340,"value":"#<OmniAuth::AuthHash extra=#<OmniAuth::AuthHash raw_info=#<OmniAuth::AuthHash email=\"bruce1409@wayne","kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218351,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":1218350,"elapsed":1.3e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218352,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"after_authenticate","path":"lib/auth/managed_authenticator.rb","lineno":46,"static":false,"thread_id":70097708498960,"parent_id":1218309,"elapsed":0.177309,"return_value":{"class":"Auth::Result","value":"#<Auth::Result:0x00007f81d68f9788>","object_id":70097813621700}},{"id":1218353,"event":"call","defined_class":"Auth::Result","method_id":"failed?","path":"lib/auth/result.rb","lineno":25,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097813621700,"value":"#<Auth::Result:0x00007f81d68f9788>"}},{"id":1218354,"event":"return","defined_class":"Auth::Result","method_id":"failed?","path":"lib/auth/result.rb","lineno":25,"static":false,"thread_id":70097708498960,"parent_id":1218353,"elapsed":5.0e-06},{"id":1218355,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218356,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1218355,"elapsed":4.0e-06,"return_value":{"class":"String","value":"google_oauth2","object_id":70097717801020}},{"id":1218357,"event":"call","defined_class":"SecondFactorManager","method_id":"has_any_second_factor_methods_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":74,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097720241420,"value":"#<User:0x00007f81cb6dda18>"}},{"id":1218358,"event":"call","defined_class":"SecondFactorManager","method_id":"totp_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":56,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097720241420,"value":"#<User:0x00007f81cb6dda18>"}},{"id":1218359,"event":"call","defined_class":"UserSecondFactor(id: integer, user_id: integer, method: integer, data: string, enabled: boolean, last_used: datetime, created_at: datetime, updated_at: datetime, name: string)","method_id":"methods","path":"app/models/user_second_factor.rb","lineno":19,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097779296820,"value":"UserSecondFactor"}},{"id":1218360,"event":"return","defined_class":"UserSecondFactor(id: integer, user_id: integer, method: integer, data: string, enabled: boolean, last_used: datetime, created_at: datetime, updated_at: datetime, name: string)","method_id":"methods","path":"app/models/user_second_factor.rb","lineno":19,"static":true,"thread_id":70097708498960,"parent_id":1218359,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:totp=>1, :backup_codes=>2, :security_key=>3}","object_id":70097755302300}},{"id":1218361,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_second_factors\" WHERE \"user_second_factors\".\"user_id\" = 1581 AND \"user_second_factors\".\"method\" = 1 AND \"user_second_factors\".\"enabled\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218362,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218361,"elapsed":0.001373},{"id":1218363,"event":"return","defined_class":"SecondFactorManager","method_id":"totp_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":56,"static":false,"thread_id":70097708498960,"parent_id":1218358,"elapsed":0.007122},{"id":1218364,"event":"call","defined_class":"SecondFactorManager","method_id":"security_keys_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":68,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097720241420,"value":"#<User:0x00007f81cb6dda18>"}},{"id":1218365,"event":"call","defined_class":"UserSecurityKey(id: integer, user_id: integer, credential_id: string, public_key: string, factor_type: integer, enabled: boolean, name: string, last_used: datetime, created_at: datetime, updated_at: datetime)","method_id":"factor_types","path":"app/models/user_security_key.rb","lineno":10,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794494860,"value":"UserSecurityKey"}},{"id":1218366,"event":"return","defined_class":"UserSecurityKey(id: integer, user_id: integer, credential_id: string, public_key: string, factor_type: integer, enabled: boolean, name: string, last_used: datetime, created_at: datetime, updated_at: datetime)","method_id":"factor_types","path":"app/models/user_security_key.rb","lineno":10,"static":true,"thread_id":70097708498960,"parent_id":1218365,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:second_factor=>0, :first_factor=>1, :multi_factor=>2}","object_id":70097800806880}},{"id":1218367,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_security_keys\" WHERE \"user_security_keys\".\"user_id\" = 1581 AND \"user_security_keys\".\"enabled\" = TRUE AND \"user_security_keys\".\"factor_type\" = 0 AND \"user_security_keys\".\"enabled\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218368,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218367,"elapsed":0.001295},{"id":1218369,"event":"return","defined_class":"SecondFactorManager","method_id":"security_keys_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":68,"static":false,"thread_id":70097708498960,"parent_id":1218364,"elapsed":0.0068,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218370,"event":"return","defined_class":"SecondFactorManager","method_id":"has_any_second_factor_methods_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":74,"static":false,"thread_id":70097708498960,"parent_id":1218357,"elapsed":0.01427,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218371,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097720241420,"value":"#<User:0x00007f81cb6dda18>"}},{"id":1218372,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1218371,"elapsed":2.3e-05,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097813605680}},{"id":1218373,"event":"call","defined_class":"Auth::Result","method_id":"to_client_hash","path":"lib/auth/result.rb","lineno":40,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097813621700,"value":"#<Auth::Result:0x00007f81d68f9788>"}},{"id":1218374,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097720241420,"value":"#<User:0x00007f81cb6dda18>"}},{"id":1218375,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1218374,"elapsed":2.4e-05},{"id":1218376,"event":"call","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097813621700,"value":"#<Auth::Result:0x00007f81d68f9788>"}},{"id":1218377,"event":"return","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1218376,"elapsed":6.0e-06,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097801040040}},{"id":1218378,"event":"return","defined_class":"Auth::Result","method_id":"to_client_hash","path":"lib/auth/result.rb","lineno":40,"static":false,"thread_id":70097708498960,"parent_id":1218373,"elapsed":0.000254,"return_value":{"class":"Hash","value":"{:omniauth_disallow_totp=>true, :email=>\"bruce1409@wayne.com\"}","object_id":70097801073260}},{"id":1218379,"event":"return","defined_class":"Users::OmniauthCallbacksController","method_id":"complete","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":22,"static":false,"thread_id":70097708498960,"parent_id":1218292,"elapsed":0.26302,"return_value":{"class":"String","value":"<html><body>You are being <a href=\"http://test.localhost/somepath\">redirected</a>.</body></html>","object_id":70097801155880}},{"id":1218380,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218381,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1218380,"elapsed":1.3e-05},{"id":1218382,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218383,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1218382,"elapsed":7.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097801216020}},{"id":1218384,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097591521380,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc15a0c8>"}},{"id":1218385,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218386,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218385,"elapsed":4.0e-06},{"id":1218387,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"NilClass","object_id":8,"value":null,"kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097591260820,"value":"#<ActionDispatch::Request::Session:0x00007f81bc0dad28>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097591370720,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81bc1107c0>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218388,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218389,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218390,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218389,"elapsed":4.0e-06},{"id":1218391,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1218388,"elapsed":0.000113},{"id":1218392,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218393,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591599380,"value":"#<TestCurrentUserProvider:0x00007f81bc180228>"}},{"id":1218394,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218393,"elapsed":3.0e-06},{"id":1218395,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1218392,"elapsed":0.000111},{"id":1218396,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1218387,"elapsed":0.000435},{"id":1218397,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1218384,"elapsed":0.000675},{"id":1218398,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1218249,"elapsed":0.26803,"http_server_response":{"status":302}},{"id":1218399,"event":"call","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"transform_ids","path":"app/models/theme.rb","lineno":162,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ids","class":"Array","object_id":70097591634460,"value":"[2]","kind":"req"},{"name":"extend","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097801647920,"value":"Theme"}},{"id":1218400,"event":"call","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"get_set_cache","path":"app/models/theme.rb","lineno":125,"static":true,"thread_id":70097708498960,"parameters":[{"name":"key","class":"String","object_id":70097801643780,"value":"extended_transformed_ids_2","kind":"req"},{"name":"blk","class":"NilClass","object_id":8,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":70097801647920,"value":"Theme"}},{"id":1218401,"event":"return","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"get_set_cache","path":"app/models/theme.rb","lineno":125,"static":true,"thread_id":70097708498960,"parent_id":1218400,"elapsed":1.4e-05,"return_value":{"class":"Array","value":"[2]","object_id":70097829829100}},{"id":1218402,"event":"return","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"transform_ids","path":"app/models/theme.rb","lineno":162,"static":true,"thread_id":70097708498960,"parent_id":1218399,"elapsed":0.000149,"return_value":{"class":"Array","value":"[2]","object_id":70097829829100}},{"id":1218403,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097801822880,"value":"#<TestCurrentUserProvider:0x00007f81d5278540>"}},{"id":1218404,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1218403,"elapsed":8.0e-06},{"id":1218405,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1218406,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1218405,"elapsed":7.0e-06},{"id":1218407,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041628,"value":"http_3xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1218408,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1218407,"elapsed":4.0e-06},{"id":1218409,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218410,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1218409,"elapsed":1.8e-05,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097591163940}},{"id":1218411,"event":"call","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_email","class":"String","object_id":70097783227020,"value":"different@user.email","kind":"req"}],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218412,"event":"call","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"UserEmail","object_id":70097591164160,"value":"#<UserEmail:0x00007f81bc0aba00>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":735708,"value":"email","kind":"req"},{"name":"value","class":"String","object_id":70097802239720,"value":"different@user.email","kind":"req"}],"receiver":{"class":"EmailValidator","object_id":70097803750180,"value":"#<EmailValidator:0x00007f81d5625648>"}},{"id":1218413,"event":"call","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097802239720,"value":"different@user.email","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1218414,"event":"call","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parameters":[{"name":"setting","class":"String","object_id":70097723515680,"value":"mailinator.com","kind":"req"},{"name":"value","class":"String","object_id":70097802239720,"value":"different@user.email","kind":"req"}],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1218415,"event":"return","defined_class":"EmailValidator","method_id":"email_in_restriction_setting?","path":"lib/validators/email_validator.rb","lineno":33,"static":true,"thread_id":70097708498960,"parent_id":1218414,"elapsed":3.0e-05},{"id":1218416,"event":"return","defined_class":"EmailValidator","method_id":"allowed?","path":"lib/validators/email_validator.rb","lineno":15,"static":true,"thread_id":70097708498960,"parent_id":1218413,"elapsed":0.000172,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218417,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097802239720,"value":"different@user.email","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":1218418,"event":"call","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097802239720,"value":"different@user.email","kind":"req"}],"receiver":{"class":"Class","object_id":70097589134720,"value":"ScreenedEmail"}},{"id":1218419,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"canonical","path":"app/models/screened_email.rb","lineno":21,"static":true,"thread_id":70097708498960,"parent_id":1218418,"elapsed":1.1e-05,"return_value":{"class":"String","value":"different@user.email","object_id":70097802297620}},{"id":1218420,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1218421,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218420,"elapsed":0.001142},{"id":1218422,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_emails\".* FROM \"screened_emails\" ORDER BY \"screened_emails\".\"created_at\" DESC LIMIT 100","database_type":"postgres","server_version":110006}},{"id":1218423,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218422,"elapsed":0.001389},{"id":1218424,"event":"return","defined_class":"ScreenedEmail(id: integer, email: string, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime, ip_address: inet)","method_id":"should_block?","path":"app/models/screened_email.rb","lineno":35,"static":true,"thread_id":70097708498960,"parent_id":1218417,"elapsed":0.010356},{"id":1218425,"event":"return","defined_class":"EmailValidator","method_id":"validate_each","path":"lib/validators/email_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1218412,"elapsed":0.010826},{"id":1218426,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE \"user_emails\".\"primary\" = TRUE AND \"user_emails\".\"id\" != 1582 AND \"user_emails\".\"user_id\" = 1581 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218427,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218426,"elapsed":0.001304},{"id":1218428,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE (lower(email) = 'different@user.email') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218429,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218428,"elapsed":0.001091},{"id":1218430,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_emails\" SET \"email\" = 'different@user.email', \"updated_at\" = '2020-05-28 19:04:56.527875' WHERE \"user_emails\".\"id\" = 1582","database_type":"postgres","server_version":110006}},{"id":1218431,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218430,"elapsed":0.001176},{"id":1218432,"event":"return","defined_class":"User","method_id":"email=","path":"app/models/user.rb","lineno":1198,"static":false,"thread_id":70097708498960,"parent_id":1218411,"elapsed":0.025447,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218433,"event":"call","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218434,"event":"return","defined_class":"User","method_id":"should_validate_email_address?","path":"app/models/user.rb","lineno":432,"static":false,"thread_id":70097708498960,"parent_id":1218433,"elapsed":1.9e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218435,"event":"call","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218436,"event":"call","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":727708,"value":"password","kind":"req"},{"name":"value","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"PasswordValidator","object_id":70097813386480,"value":"#<PasswordValidator:0x00007f81d68869e0>"}},{"id":1218437,"event":"call","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218438,"event":"call","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218439,"event":"return","defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":634,"static":false,"thread_id":70097708498960,"parent_id":1218438,"elapsed":4.0e-06},{"id":1218440,"event":"return","defined_class":"User","method_id":"password_validation_required?","path":"app/models/user.rb","lineno":638,"static":false,"thread_id":70097708498960,"parent_id":1218437,"elapsed":9.3e-05},{"id":1218441,"event":"return","defined_class":"PasswordValidator","method_id":"validate_each","path":"lib/validators/password_validator.rb","lineno":5,"static":false,"thread_id":70097708498960,"parent_id":1218436,"elapsed":0.000181},{"id":1218442,"event":"return","defined_class":"User","method_id":"password_validator","path":"app/models/user.rb","lineno":646,"static":false,"thread_id":70097708498960,"parent_id":1218435,"elapsed":0.000293},{"id":1218443,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_emails\" WHERE \"user_emails\".\"primary\" = TRUE AND \"user_emails\".\"id\" != 1582 AND \"user_emails\".\"user_id\" = 1581 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218444,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218443,"elapsed":0.00118},{"id":1218445,"event":"call","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218446,"event":"call","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user_id","class":"Integer","object_id":3163,"value":"1581","kind":"req"}],"receiver":{"class":"Class","object_id":70097723992360,"value":"User"}},{"id":1218447,"event":"return","defined_class":"User(id: integer, username: string, created_at: datetime, updated_at: datetime, name: string, seen_notification_id: integer, last_posted_at: datetime, password_hash: string, salt: string, active: boolean, username_lower: string, last_seen_at: datetime, admin: boolean, last_emailed_at: datetime, trust_level: integer, approved: boolean, approved_by_id: integer, approved_at: datetime, previous_visit_at: datetime, suspended_at: datetime, suspended_till: datetime, date_of_birth: date, views: integer, flag_level: integer, ip_address: inet, moderator: boolean, title: string, uploaded_avatar_id: integer, locale: string, primary_group_id: integer, registration_ip_address: inet, staged: boolean, first_seen_at: datetime, silenced_till: datetime, group_locked_trust_level: integer, manual_locked_trust_level: integer, secure_identifier: string)","method_id":"human_user_id?","path":"app/models/user.rb","lineno":309,"static":true,"thread_id":70097708498960,"parent_id":1218446,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218448,"event":"return","defined_class":"User","method_id":"human?","path":"app/models/user.rb","lineno":313,"static":false,"thread_id":70097708498960,"parent_id":1218445,"elapsed":0.000152,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218449,"event":"call","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parameters":[{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218450,"event":"call","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218451,"event":"return","defined_class":"HasCustomFields","method_id":"custom_fields_clean?","path":"app/models/concerns/has_custom_fields.rb","lineno":185,"static":false,"thread_id":70097708498960,"parent_id":1218450,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218452,"event":"return","defined_class":"HasCustomFields","method_id":"save_custom_fields","path":"app/models/concerns/has_custom_fields.rb","lineno":204,"static":false,"thread_id":70097708498960,"parent_id":1218449,"elapsed":0.000118},{"id":1218453,"event":"call","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218454,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_avatars\".* FROM \"user_avatars\" WHERE \"user_avatars\".\"user_id\" = 1581 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218455,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218454,"elapsed":0.00114},{"id":1218456,"event":"return","defined_class":"User","method_id":"refresh_avatar","path":"app/models/user.rb","lineno":1053,"static":false,"thread_id":70097708498960,"parent_id":1218453,"elapsed":0.004314},{"id":1218457,"event":"call","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Integer","object_id":17,"value":"8","kind":"req"},{"name":"opt","class":"Hash","object_id":70097817131860,"value":"{:user=>#<User id: 1581, username: \"bruce1447\", created_at: \"2020-05-28 19:04:40\", updated_at: \"2020","kind":"req"}],"receiver":{"class":"Class","object_id":70097792834840,"value":"BadgeGranter"}},{"id":1218458,"event":"return","defined_class":"BadgeGranter","method_id":"queue_badge_grant","path":"app/services/badge_granter.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1218457,"elapsed":9.0e-06},{"id":1218459,"event":"call","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>","kind":"req"},{"name":"force","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097794687700,"value":"SearchIndexer"}},{"id":1218460,"event":"return","defined_class":"SearchIndexer","method_id":"index","path":"app/services/search_indexer.rb","lineno":126,"static":true,"thread_id":70097708498960,"parent_id":1218459,"elapsed":4.0e-06},{"id":1218461,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1218462,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218461,"elapsed":0.001075},{"id":1218463,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218464,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218463,"elapsed":7.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1218465,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218466,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218465,"elapsed":1.3e-05},{"id":1218467,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/auth/google_oauth2/callback.json"},"message":[{"name":"controller","class":"String","value":"users/omniauth_callbacks","object_id":70097802876920},{"name":"action","class":"String","value":"complete","object_id":70097802876900},{"name":"provider","class":"String","value":"google_oauth2","object_id":70097592046500},{"name":"format","class":"String","value":"json","object_id":70097592046340}]},{"id":1218468,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218469,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218470,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218471,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218472,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218471,"elapsed":2.5e-05},{"id":1218473,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1218470,"elapsed":0.000158,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bc283558>","object_id":70097592130220}},{"id":1218474,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097592130220,"value":"#<Guardian:0x00007f81bc283558>"}},{"id":1218475,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1218474,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218476,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1218469,"elapsed":0.000415},{"id":1218477,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218478,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218477,"elapsed":4.0e-06},{"id":1218479,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218480,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1218479,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bc283558>","object_id":70097592130220}},{"id":1218481,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097592142860,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097592130220,"value":"#<Guardian:0x00007f81bc283558>"}},{"id":1218482,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1218481,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218483,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1218468,"elapsed":0.000907,"return_value":{"class":"Array","value":"[2]","object_id":70097592142860}},{"id":1218484,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218485,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218486,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218485,"elapsed":3.0e-06},{"id":1218487,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1218484,"elapsed":0.000114,"return_value":{"class":"String","value":"omniauth_callbacks/complete","object_id":70097592191820}},{"id":1218488,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218489,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218490,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218489,"elapsed":3.0e-06},{"id":1218491,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1218488,"elapsed":0.000104},{"id":1218492,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218493,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218494,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218493,"elapsed":3.0e-06},{"id":1218495,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218496,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218495,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1218497,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218498,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218497,"elapsed":9.0e-06},{"id":1218499,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218500,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218499,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1218501,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1218502,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1218501,"elapsed":7.0e-06},{"id":1218503,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1218492,"elapsed":0.000573,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097592277200}},{"id":1218504,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218505,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1218504,"elapsed":7.0e-06},{"id":1218506,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097792157460,"value":"Users::OmniauthCallbacksController"}},{"id":1218507,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1218506,"elapsed":4.0e-06},{"id":1218508,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218509,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1218508,"elapsed":1.0e-05},{"id":1218510,"event":"call","defined_class":"Users::OmniauthCallbacksController","method_id":"complete","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":22,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218511,"event":"call","defined_class":"Users::OmniauthCallbacksController","method_id":"find_authenticator","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":91,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097592046500,"value":"google_oauth2","kind":"req"}],"receiver":{"class":"Class","object_id":70097792157460,"value":"Users::OmniauthCallbacksController"}},{"id":1218512,"event":"call","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::FacebookAuthenticator","object_id":70097718125600,"value":"#<Auth::FacebookAuthenticator:0x00007f81cb2d4840>"}},{"id":1218513,"event":"return","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1218512,"elapsed":5.0e-06},{"id":1218514,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218515,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1218514,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218516,"event":"call","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GithubAuthenticator","object_id":70097718147360,"value":"#<Auth::GithubAuthenticator:0x00007f81cb2df240>"}},{"id":1218517,"event":"return","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1218516,"elapsed":5.0e-06},{"id":1218518,"event":"call","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::TwitterAuthenticator","object_id":70097718147040,"value":"#<Auth::TwitterAuthenticator:0x00007f81cb2defc0>"}},{"id":1218519,"event":"return","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1218518,"elapsed":5.0e-06},{"id":1218520,"event":"call","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::InstagramAuthenticator","object_id":70097718146640,"value":"#<Auth::InstagramAuthenticator:0x00007f81cb2deca0>"}},{"id":1218521,"event":"return","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1218520,"elapsed":5.0e-06},{"id":1218522,"event":"call","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::DiscordAuthenticator","object_id":70097718146280,"value":"#<Auth::DiscordAuthenticator:0x00007f81cb2de9d0>"}},{"id":1218523,"event":"return","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parent_id":1218522,"elapsed":5.0e-06},{"id":1218524,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218525,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1218524,"elapsed":3.0e-06,"return_value":{"class":"String","value":"google_oauth2","object_id":70097717801020}},{"id":1218526,"event":"return","defined_class":"Users::OmniauthCallbacksController","method_id":"find_authenticator","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":91,"static":true,"thread_id":70097708498960,"parent_id":1218511,"elapsed":0.000737,"return_value":{"class":"Auth::GoogleOAuth2Authenticator","value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>","object_id":70097718147680}},{"id":1218527,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"after_authenticate","path":"lib/auth/managed_authenticator.rb","lineno":46,"static":false,"thread_id":70097708498960,"parameters":[{"name":"auth_token","class":"OmniAuth::AuthHash","object_id":70097591159340,"value":"#<OmniAuth::AuthHash extra=#<OmniAuth::AuthHash raw_info=#<OmniAuth::AuthHash email=\"bruce1409@wayne","kind":"req"},{"name":"existing_account","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218528,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_associated_accounts\".* FROM \"user_associated_accounts\" WHERE \"user_associated_accounts\".\"provider_name\" = 'google_oauth2' AND \"user_associated_accounts\".\"provider_uid\" = '123545' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218529,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218528,"elapsed":0.001523},{"id":1218530,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"can_connect_existing_user?","path":"lib/auth/managed_authenticator.rb","lineno":31,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218531,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"can_connect_existing_user?","path":"lib/auth/managed_authenticator.rb","lineno":31,"static":false,"thread_id":70097708498960,"parent_id":1218530,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218532,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[{"name":"auth_token","class":"OmniAuth::AuthHash","object_id":70097591159340,"value":"#<OmniAuth::AuthHash extra=#<OmniAuth::AuthHash raw_info=#<OmniAuth::AuthHash email=\"bruce1409@wayne","kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218533,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":1218532,"elapsed":1.3e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218534,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"match_by_email","path":"lib/auth/managed_authenticator.rb","lineno":17,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218535,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"match_by_email","path":"lib/auth/managed_authenticator.rb","lineno":17,"static":false,"thread_id":70097708498960,"parent_id":1218534,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218536,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1581 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218537,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218536,"elapsed":0.001564},{"id":1218538,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1218539,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218538,"elapsed":0.001028},{"id":1218540,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_associated_accounts\" SET \"last_used\" = '2020-05-28 19:04:56.674182', \"updated_at\" = '2020-05-28 19:04:56.674517' WHERE \"user_associated_accounts\".\"id\" = 19","database_type":"postgres","server_version":110006}},{"id":1218541,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218540,"elapsed":0.001428},{"id":1218542,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1218543,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218542,"elapsed":0.000958},{"id":1218544,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"always_update_user_email?","path":"lib/auth/managed_authenticator.rb","lineno":35,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218545,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"always_update_user_email?","path":"lib/auth/managed_authenticator.rb","lineno":35,"static":false,"thread_id":70097708498960,"parent_id":1218544,"elapsed":7.0e-06},{"id":1218546,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097729551100,"value":"#<User:0x00007f81cc89f5f8>"}},{"id":1218547,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_emails\".\"id\", \"user_emails\".\"user_id\", \"user_emails\".\"email\", \"user_emails\".\"primary\", \"user_emails\".\"created_at\", \"user_emails\".\"updated_at\" FROM \"user_emails\" WHERE \"user_emails\".\"user_id\" = 1581 AND \"user_emails\".\"primary\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218548,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218547,"elapsed":0.001204},{"id":1218549,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1218546,"elapsed":0.00636,"return_value":{"class":"String","value":"different@user.email","object_id":70097732876800}},{"id":1218550,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_avatar","path":"lib/auth/managed_authenticator.rb","lineno":121,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097729551100,"value":"#<User:0x00007f81cc89f5f8>","kind":"req"},{"name":"url","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218551,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_avatar","path":"lib/auth/managed_authenticator.rb","lineno":121,"static":false,"thread_id":70097708498960,"parent_id":1218550,"elapsed":5.0e-06},{"id":1218552,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_profile","path":"lib/auth/managed_authenticator.rb","lineno":127,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097729551100,"value":"#<User:0x00007f81cc89f5f8>","kind":"req"},{"name":"info","class":"Hash","object_id":70097732875700,"value":"{\"email\"=>\"bruce1409@wayne.com\", \"name\"=>\"Some name\"}","kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218553,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_profile","path":"lib/auth/managed_authenticator.rb","lineno":127,"static":false,"thread_id":70097708498960,"parent_id":1218552,"elapsed":4.0e-06},{"id":1218554,"event":"call","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097732853340,"value":"#<Auth::Result:0x00007f81cceebcb8>"}},{"id":1218555,"event":"return","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1218554,"elapsed":6.0e-06,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097732848080}},{"id":1218556,"event":"call","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097732853340,"value":"#<Auth::Result:0x00007f81cceebcb8>"}},{"id":1218557,"event":"return","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1218556,"elapsed":4.0e-06,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097732893920}},{"id":1218558,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[{"name":"auth_token","class":"OmniAuth::AuthHash","object_id":70097591159340,"value":"#<OmniAuth::AuthHash extra=#<OmniAuth::AuthHash raw_info=#<OmniAuth::AuthHash email=\"bruce1409@wayne","kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218559,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":1218558,"elapsed":1.4e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218560,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"after_authenticate","path":"lib/auth/managed_authenticator.rb","lineno":46,"static":false,"thread_id":70097708498960,"parent_id":1218527,"elapsed":0.174972,"return_value":{"class":"Auth::Result","value":"#<Auth::Result:0x00007f81cceebcb8>","object_id":70097732853340}},{"id":1218561,"event":"call","defined_class":"Auth::Result","method_id":"failed?","path":"lib/auth/result.rb","lineno":25,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097732853340,"value":"#<Auth::Result:0x00007f81cceebcb8>"}},{"id":1218562,"event":"return","defined_class":"Auth::Result","method_id":"failed?","path":"lib/auth/result.rb","lineno":25,"static":false,"thread_id":70097708498960,"parent_id":1218561,"elapsed":4.0e-06},{"id":1218563,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1218564,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1218563,"elapsed":4.0e-06,"return_value":{"class":"String","value":"google_oauth2","object_id":70097717801020}},{"id":1218565,"event":"call","defined_class":"SecondFactorManager","method_id":"has_any_second_factor_methods_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":74,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097729551100,"value":"#<User:0x00007f81cc89f5f8>"}},{"id":1218566,"event":"call","defined_class":"SecondFactorManager","method_id":"totp_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":56,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097729551100,"value":"#<User:0x00007f81cc89f5f8>"}},{"id":1218567,"event":"call","defined_class":"UserSecondFactor(id: integer, user_id: integer, method: integer, data: string, enabled: boolean, last_used: datetime, created_at: datetime, updated_at: datetime, name: string)","method_id":"methods","path":"app/models/user_second_factor.rb","lineno":19,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097779296820,"value":"UserSecondFactor"}},{"id":1218568,"event":"return","defined_class":"UserSecondFactor(id: integer, user_id: integer, method: integer, data: string, enabled: boolean, last_used: datetime, created_at: datetime, updated_at: datetime, name: string)","method_id":"methods","path":"app/models/user_second_factor.rb","lineno":19,"static":true,"thread_id":70097708498960,"parent_id":1218567,"elapsed":4.0e-06,"return_value":{"class":"Enum","value":"{:totp=>1, :backup_codes=>2, :security_key=>3}","object_id":70097755302300}},{"id":1218569,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_second_factors\" WHERE \"user_second_factors\".\"user_id\" = 1581 AND \"user_second_factors\".\"method\" = 1 AND \"user_second_factors\".\"enabled\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218570,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218569,"elapsed":0.001641},{"id":1218571,"event":"return","defined_class":"SecondFactorManager","method_id":"totp_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":56,"static":false,"thread_id":70097708498960,"parent_id":1218566,"elapsed":0.007245},{"id":1218572,"event":"call","defined_class":"SecondFactorManager","method_id":"security_keys_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":68,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097729551100,"value":"#<User:0x00007f81cc89f5f8>"}},{"id":1218573,"event":"call","defined_class":"UserSecurityKey(id: integer, user_id: integer, credential_id: string, public_key: string, factor_type: integer, enabled: boolean, name: string, last_used: datetime, created_at: datetime, updated_at: datetime)","method_id":"factor_types","path":"app/models/user_security_key.rb","lineno":10,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794494860,"value":"UserSecurityKey"}},{"id":1218574,"event":"return","defined_class":"UserSecurityKey(id: integer, user_id: integer, credential_id: string, public_key: string, factor_type: integer, enabled: boolean, name: string, last_used: datetime, created_at: datetime, updated_at: datetime)","method_id":"factor_types","path":"app/models/user_security_key.rb","lineno":10,"static":true,"thread_id":70097708498960,"parent_id":1218573,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:second_factor=>0, :first_factor=>1, :multi_factor=>2}","object_id":70097800806880}},{"id":1218575,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_security_keys\" WHERE \"user_security_keys\".\"user_id\" = 1581 AND \"user_security_keys\".\"enabled\" = TRUE AND \"user_security_keys\".\"factor_type\" = 0 AND \"user_security_keys\".\"enabled\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1218576,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1218575,"elapsed":0.001228},{"id":1218577,"event":"return","defined_class":"SecondFactorManager","method_id":"security_keys_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":68,"static":false,"thread_id":70097708498960,"parent_id":1218572,"elapsed":0.006569,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218578,"event":"return","defined_class":"SecondFactorManager","method_id":"has_any_second_factor_methods_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":74,"static":false,"thread_id":70097708498960,"parent_id":1218565,"elapsed":0.014158,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1218579,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097729551100,"value":"#<User:0x00007f81cc89f5f8>"}},{"id":1218580,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1218579,"elapsed":2.3e-05,"return_value":{"class":"String","value":"different@user.email","object_id":70097732876800}},{"id":1218581,"event":"call","defined_class":"Auth::Result","method_id":"to_client_hash","path":"lib/auth/result.rb","lineno":40,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097732853340,"value":"#<Auth::Result:0x00007f81cceebcb8>"}},{"id":1218582,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097729551100,"value":"#<User:0x00007f81cc89f5f8>"}},{"id":1218583,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1218582,"elapsed":2.7e-05},{"id":1218584,"event":"call","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097732853340,"value":"#<Auth::Result:0x00007f81cceebcb8>"}},{"id":1218585,"event":"return","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1218584,"elapsed":5.0e-06,"return_value":{"class":"String","value":"different@user.email","object_id":70097801840240}},{"id":1218586,"event":"return","defined_class":"Auth::Result","method_id":"to_client_hash","path":"lib/auth/result.rb","lineno":40,"static":false,"thread_id":70097708498960,"parent_id":1218581,"elapsed":0.00029,"return_value":{"class":"Hash","value":"{:omniauth_disallow_totp=>true, :email=>\"different@user.email\"}","object_id":70097801891320}},{"id":1218587,"event":"return","defined_class":"Users::OmniauthCallbacksController","method_id":"complete","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":22,"static":false,"thread_id":70097708498960,"parent_id":1218510,"elapsed":0.226488,"return_value":{"class":"String","value":"<html><body>You are being <a href=\"http://test.localhost/somepath\">redirected</a>.</body></html>","object_id":70097801976880}},{"id":1218588,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218589,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1218588,"elapsed":9.0e-06},{"id":1218590,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218591,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1218590,"elapsed":7.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097802092440}},{"id":1218592,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097592043160,"value":"#<Users::OmniauthCallbacksController:0x00007f81bc258d30>"}},{"id":1218593,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218594,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218593,"elapsed":5.0e-06},{"id":1218595,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"NilClass","object_id":8,"value":null,"kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097591621920,"value":"#<ActionDispatch::Request::Session:0x00007f81bc18b240>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097591803840,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81bc1e3f80>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218596,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218597,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218598,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218597,"elapsed":3.0e-06},{"id":1218599,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1218596,"elapsed":0.000112},{"id":1218600,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218601,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097592109880,"value":"#<TestCurrentUserProvider:0x00007f81bc279670>"}},{"id":1218602,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1218601,"elapsed":4.0e-06},{"id":1218603,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1218600,"elapsed":0.000111},{"id":1218604,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1218595,"elapsed":0.000435},{"id":1218605,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1218592,"elapsed":0.00068},{"id":1218606,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1218467,"elapsed":0.231555,"http_server_response":{"status":302}},{"id":1218607,"event":"call","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"transform_ids","path":"app/models/theme.rb","lineno":162,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ids","class":"Array","object_id":70097592142860,"value":"[2]","kind":"req"},{"name":"extend","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097801647920,"value":"Theme"}},{"id":1218608,"event":"call","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"get_set_cache","path":"app/models/theme.rb","lineno":125,"static":true,"thread_id":70097708498960,"parameters":[{"name":"key","class":"String","object_id":70097802232180,"value":"extended_transformed_ids_2","kind":"req"},{"name":"blk","class":"NilClass","object_id":8,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":70097801647920,"value":"Theme"}},{"id":1218609,"event":"return","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"get_set_cache","path":"app/models/theme.rb","lineno":125,"static":true,"thread_id":70097708498960,"parent_id":1218608,"elapsed":1.3e-05,"return_value":{"class":"Array","value":"[2]","object_id":70097829829100}},{"id":1218610,"event":"return","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"transform_ids","path":"app/models/theme.rb","lineno":162,"static":true,"thread_id":70097708498960,"parent_id":1218607,"elapsed":0.00015,"return_value":{"class":"Array","value":"[2]","object_id":70097829829100}},{"id":1218611,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097802318900,"value":"#<TestCurrentUserProvider:0x00007f81d536a868>"}},{"id":1218612,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1218611,"elapsed":7.0e-06},{"id":1218613,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1218614,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1218613,"elapsed":5.0e-06},{"id":1218615,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041628,"value":"http_3xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1218616,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1218615,"elapsed":4.0e-06},{"id":1218617,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097591110820,"value":"#<User:0x00007f81bc091948>"}},{"id":1218618,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1218617,"elapsed":2.3e-05,"return_value":{"class":"String","value":"different@user.email","object_id":70097712360100}}]}