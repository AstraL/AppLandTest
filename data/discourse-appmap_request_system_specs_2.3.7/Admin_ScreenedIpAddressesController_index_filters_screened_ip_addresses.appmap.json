{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::ScreenedIpAddressesController #index filters screened ip addresses","app":"Discourse","feature":"Admin::ScreenedIpAddressesController #index","feature_group":"Admin screened ip addresses","recorder":{"name":"rspec"}},"classMap":[{"name":"app/models","type":"package","children":[{"name":"ScreenedIpAddress","type":"class","children":[{"name":"ip_address=","type":"function","location":"app/models/screened_ip_address.rb:33","static":false},{"name":"check_for_match","type":"function","location":"app/models/screened_ip_address.rb:21","static":false},{"name":"ip_address_with_mask","type":"function","location":"app/models/screened_ip_address.rb:60","static":false}]},{"name":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"match_for_ip_address","type":"function","location":"app/models/screened_ip_address.rb:64","static":true}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true}]},{"name":"User","type":"class","children":[{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_visit_record!","type":"function","location":"app/models/user.rb:680","static":false},{"name":"visit_record_for","type":"function","location":"app/models/user.rb:676","static":false},{"name":"create_visit_record!","type":"function","location":"app/models/user.rb:671","static":false},{"name":"seen_before?","type":"function","location":"app/models/user.rb:667","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]}]},{"name":"lib/validators","type":"package","children":[{"name":"IpAddressFormatValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"lib/validators/ip_address_format_validator.rb:7","static":false}]}]},{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false}]}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"render_serialized","type":"function","location":"app/controllers/application_controller.rb:446","static":false},{"name":"serialize_data","type":"function","location":"app/controllers/application_controller.rb:431","static":false},{"name":"render_json_dump","type":"function","location":"app/controllers/application_controller.rb:450","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Admin","type":"class","children":[{"name":"ScreenedIpAddressesController","type":"class","children":[{"name":"index","type":"function","location":"app/controllers/admin/screened_ip_addresses_controller.rb:7","static":false}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false}]}]},{"name":"app/serializers","type":"package","children":[{"name":"ScreenedIpAddressSerializer","type":"class","children":[{"name":"ip_address","type":"function","location":"app/serializers/screened_ip_address_serializer.rb:15","static":false},{"name":"action_name","type":"function","location":"app/serializers/screened_ip_address_serializer.rb:11","static":false}]}]}],"events":[{"id":1133183,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097801501540,"value":"1.2.3.4","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097829696360,"value":"#<ScreenedIpAddress:0x00007f81d87a26d0>"}},{"id":1133184,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1133183,"elapsed":3.2e-05,"return_value":{"class":"String","value":"1.2.3.4","object_id":70097801501540}},{"id":1133185,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097829696360,"value":"#<ScreenedIpAddress:0x00007f81d87a26d0>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097829715220,"value":"1.2.3.4","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1133186,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133185,"elapsed":8.0e-06},{"id":1133187,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097829696360,"value":"#<ScreenedIpAddress:0x00007f81d87a26d0>"}},{"id":1133188,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097829715220,"value":"1.2.3.4","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1133189,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133190,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133189,"elapsed":0.001178},{"id":1133191,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('1.2.3.4' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133192,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133191,"elapsed":0.001311},{"id":1133193,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1133188,"elapsed":0.052352},{"id":1133194,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1133187,"elapsed":0.052543},{"id":1133195,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"created_at\", \"updated_at\") VALUES ('1.2.3.4/32', 1, '2020-05-28 19:03:31.361254', '2020-05-28 19:03:31.361254') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133196,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133195,"elapsed":0.001857},{"id":1133197,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133198,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133197,"elapsed":0.001347},{"id":1133199,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097801501520,"value":"1.2.3.5","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097783684980,"value":"#<ScreenedIpAddress:0x00007f81d2fdfee8>"}},{"id":1133200,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1133199,"elapsed":1.8e-05,"return_value":{"class":"String","value":"1.2.3.5","object_id":70097801501520}},{"id":1133201,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097783684980,"value":"#<ScreenedIpAddress:0x00007f81d2fdfee8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097783469880,"value":"1.2.3.5","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1133202,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133201,"elapsed":8.0e-06},{"id":1133203,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097783684980,"value":"#<ScreenedIpAddress:0x00007f81d2fdfee8>"}},{"id":1133204,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097783469880,"value":"1.2.3.5","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1133205,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133206,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133205,"elapsed":0.001144},{"id":1133207,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('1.2.3.5' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133208,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133207,"elapsed":0.001376},{"id":1133209,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1133204,"elapsed":0.0092},{"id":1133210,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1133203,"elapsed":0.009391},{"id":1133211,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"created_at\", \"updated_at\") VALUES ('1.2.3.5/32', 1, '2020-05-28 19:03:31.380604', '2020-05-28 19:03:31.380604') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133212,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133211,"elapsed":0.001235},{"id":1133213,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133214,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133213,"elapsed":0.001177},{"id":1133215,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097801501500,"value":"1.2.3.6","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097732050020,"value":"#<ScreenedIpAddress:0x00007f81ccd638c8>"}},{"id":1133216,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1133215,"elapsed":1.9e-05,"return_value":{"class":"String","value":"1.2.3.6","object_id":70097801501500}},{"id":1133217,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097732050020,"value":"#<ScreenedIpAddress:0x00007f81ccd638c8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097732064240,"value":"1.2.3.6","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1133218,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133217,"elapsed":7.0e-06},{"id":1133219,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097732050020,"value":"#<ScreenedIpAddress:0x00007f81ccd638c8>"}},{"id":1133220,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097732064240,"value":"1.2.3.6","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1133221,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133222,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133221,"elapsed":0.00094},{"id":1133223,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('1.2.3.6' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133224,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133223,"elapsed":0.001075},{"id":1133225,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1133220,"elapsed":0.008259},{"id":1133226,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1133219,"elapsed":0.008436},{"id":1133227,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"created_at\", \"updated_at\") VALUES ('1.2.3.6/32', 1, '2020-05-28 19:03:31.398059', '2020-05-28 19:03:31.398059') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133228,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133227,"elapsed":0.00116},{"id":1133229,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133230,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133229,"elapsed":0.000915},{"id":1133231,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parameters":[{"name":"val","class":"String","object_id":70097801501460,"value":"4.5.6.7","kind":"req"}],"receiver":{"class":"ScreenedIpAddress","object_id":70097586736580,"value":"#<ScreenedIpAddress:0x00007f81bb839b88>"}},{"id":1133232,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address=","path":"app/models/screened_ip_address.rb","lineno":33,"static":false,"thread_id":70097708498960,"parent_id":1133231,"elapsed":1.7e-05,"return_value":{"class":"String","value":"4.5.6.7","object_id":70097801501460}},{"id":1133233,"event":"call","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[{"name":"record","class":"ScreenedIpAddress","object_id":70097586736580,"value":"#<ScreenedIpAddress:0x00007f81bb839b88>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":3062748,"value":"ip_address","kind":"req"},{"name":"value","class":"IPAddr","object_id":70097586754820,"value":"4.5.6.7","kind":"req"}],"receiver":{"class":"IpAddressFormatValidator","object_id":70097794053720,"value":"#<IpAddressFormatValidator:0x00007f81d43a6cb0>"}},{"id":1133234,"event":"return","defined_class":"IpAddressFormatValidator","method_id":"validate_each","path":"lib/validators/ip_address_format_validator.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133233,"elapsed":7.0e-06},{"id":1133235,"event":"call","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097586736580,"value":"#<ScreenedIpAddress:0x00007f81bb839b88>"}},{"id":1133236,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"IPAddr","object_id":70097586754820,"value":"4.5.6.7","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1133237,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133238,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133237,"elapsed":0.001012},{"id":1133239,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('4.5.6.7' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133240,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133239,"elapsed":0.00109},{"id":1133241,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1133236,"elapsed":0.007319},{"id":1133242,"event":"return","defined_class":"ScreenedIpAddress","method_id":"check_for_match","path":"app/models/screened_ip_address.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1133235,"elapsed":0.007478},{"id":1133243,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"screened_ip_addresses\" (\"ip_address\", \"action_type\", \"created_at\", \"updated_at\") VALUES ('4.5.6.7/32', 1, '2020-05-28 19:03:31.413453', '2020-05-28 19:03:31.413453') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133244,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133243,"elapsed":0.001246},{"id":1133245,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133246,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133245,"elapsed":0.001115},{"id":1133247,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591239760,"value":"#<TestCurrentUserProvider:0x00007f81bc0d08a0>"}},{"id":1133248,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097591255220,"value":"1321c7a48da16bc95085b4ac066a4bfb","kind":"req"},{"name":"opts","class":"Hash","object_id":70097591278540,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1133249,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097591255220,"value":"1321c7a48da16bc95085b4ac066a4bfb","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1133250,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1133251,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1133250,"elapsed":8.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1133252,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1133249,"elapsed":0.000121,"return_value":{"class":"String","value":"uNCvzhwwx2CijqPm4j4AK9+BG1k=","object_id":70097591310500}},{"id":1133253,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'uNCvzhwwx2CijqPm4j4AK9+BG1k=' OR\n                          prev_auth_token = 'uNCvzhwwx2CijqPm4j4AK9+BG1k=') AND rotated_at > '2020-03-29 19:03:31.423242') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133254,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133253,"elapsed":0.001452},{"id":1133255,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 19:03:31.428088' WHERE \"user_auth_tokens\".\"id\" = 1261 AND \"user_auth_tokens\".\"auth_token\" = 'uNCvzhwwx2CijqPm4j4AK9+BG1k='","database_type":"postgres","server_version":110006}},{"id":1133256,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133255,"elapsed":0.001226},{"id":1133257,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097593894720,"value":"{:action=>\"seen token\", :user_auth_token_id=>1261, :user_id=>1474, :auth_token=>\"uNCvzhwwx2CijqPm4j4","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1133258,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133259,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133258,"elapsed":0.001176},{"id":1133260,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 1261, 1474, '127.0.0.1/32', 'uNCvzhwwx2CijqPm4j4AK9+BG1k=', '2020-05-28 19:03:31.432887') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133261,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133260,"elapsed":0.001299},{"id":1133262,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133263,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133262,"elapsed":0.001056},{"id":1133264,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1133257,"elapsed":0.014239,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81bc5eae08>","object_id":70097593915140}},{"id":1133265,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1133248,"elapsed":0.023955,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81bc361f10>","object_id":70097592586120}},{"id":1133266,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1474 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133267,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133266,"elapsed":0.001353},{"id":1133268,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>"}},{"id":1133269,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1133268,"elapsed":1.8e-05},{"id":1133270,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591239760,"value":"#<TestCurrentUserProvider:0x00007f81bc0d08a0>"}},{"id":1133271,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1133270,"elapsed":0.001057,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133272,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>"}},{"id":1133273,"event":"call","defined_class":"User","method_id":"update_visit_record!","path":"app/models/user.rb","lineno":680,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097798476020,"value":"2020-05-28","kind":"req"}],"receiver":{"class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>"}},{"id":1133274,"event":"call","defined_class":"User","method_id":"visit_record_for","path":"app/models/user.rb","lineno":676,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097798476020,"value":"2020-05-28","kind":"req"}],"receiver":{"class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>"}},{"id":1133275,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_visits\".* FROM \"user_visits\" WHERE \"user_visits\".\"user_id\" = 1474 AND \"user_visits\".\"visited_at\" = '2020-05-28' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133276,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133275,"elapsed":0.001255},{"id":1133277,"event":"return","defined_class":"User","method_id":"visit_record_for","path":"app/models/user.rb","lineno":676,"static":false,"thread_id":70097708498960,"parent_id":1133274,"elapsed":0.005038},{"id":1133278,"event":"call","defined_class":"User","method_id":"create_visit_record!","path":"app/models/user.rb","lineno":671,"static":false,"thread_id":70097708498960,"parameters":[{"name":"date","class":"Date","object_id":70097798476020,"value":"2020-05-28","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>"}},{"id":1133279,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_stats\".\"user_id\", \"user_stats\".\"topics_entered\", \"user_stats\".\"time_read\", \"user_stats\".\"days_visited\", \"user_stats\".\"posts_read_count\", \"user_stats\".\"likes_given\", \"user_stats\".\"likes_received\", \"user_stats\".\"new_since\", \"user_stats\".\"read_faq\", \"user_stats\".\"first_post_created_at\", \"user_stats\".\"post_count\", \"user_stats\".\"topic_count\", \"user_stats\".\"bounce_score\", \"user_stats\".\"reset_bounce_score_after\", \"user_stats\".\"flags_agreed\", \"user_stats\".\"flags_disagreed\", \"user_stats\".\"flags_ignored\", \"user_stats\".\"first_unread_at\", \"user_stats\".\"distinct_badge_count\" FROM \"user_stats\" WHERE \"user_stats\".\"user_id\" = 1474 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133280,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133279,"elapsed":0.001676},{"id":1133281,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_stats\" SET \"days_visited\" = 1 WHERE \"user_stats\".\"user_id\" = 1474","database_type":"postgres","server_version":110006}},{"id":1133282,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133281,"elapsed":0.001399},{"id":1133283,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133284,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133283,"elapsed":0.001482},{"id":1133285,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_visits\" (\"user_id\", \"visited_at\") VALUES (1474, '2020-05-28') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1133286,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133285,"elapsed":0.001109},{"id":1133287,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_2","database_type":"postgres","server_version":110006}},{"id":1133288,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133287,"elapsed":0.001066},{"id":1133289,"event":"return","defined_class":"User","method_id":"create_visit_record!","path":"app/models/user.rb","lineno":671,"static":false,"thread_id":70097708498960,"parent_id":1133278,"elapsed":0.024833,"return_value":{"class":"UserVisit","value":"#<UserVisit:0x00007f81be07c438>","object_id":70097607844380}},{"id":1133290,"event":"return","defined_class":"User","method_id":"update_visit_record!","path":"app/models/user.rb","lineno":680,"static":false,"thread_id":70097708498960,"parent_id":1133273,"elapsed":0.030221,"return_value":{"class":"UserVisit","value":"#<UserVisit:0x00007f81be07c438>","object_id":70097607844380}},{"id":1133291,"event":"call","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>"}},{"id":1133292,"event":"return","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parent_id":1133291,"elapsed":2.6e-05},{"id":1133293,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"last_seen_at\" = '2020-05-28 19:03:31.453457' WHERE \"users\".\"id\" = 1474","database_type":"postgres","server_version":110006}},{"id":1133294,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133293,"elapsed":0.001514},{"id":1133295,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"first_seen_at\" = '2020-05-28 19:03:31.453457' WHERE \"users\".\"id\" = 1474","database_type":"postgres","server_version":110006}},{"id":1133296,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133295,"elapsed":0.001299},{"id":1133297,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1133272,"elapsed":0.040505},{"id":1133298,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097798508180,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>"}},{"id":1133299,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 1474","database_type":"postgres","server_version":110006}},{"id":1133300,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133299,"elapsed":0.001348},{"id":1133301,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1133298,"elapsed":0.004035,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133302,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133247,"elapsed":0.075428,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133303,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097591239760,"value":"#<TestCurrentUserProvider:0x00007f81bc0d08a0>"}},{"id":1133304,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133303,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133305,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>"}},{"id":1133306,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1133305,"elapsed":1.8e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133307,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133308,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133307,"elapsed":5.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1133309,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133310,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133309,"elapsed":1.1e-05},{"id":1133311,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/logs/screened_ip_addresses.json?filter=1.2.*"},"message":[{"name":"filter","class":"String","value":"1.2.*","object_id":70097591259900},{"name":"controller","class":"String","value":"admin/screened_ip_addresses","object_id":70097794657120},{"name":"action","class":"String","value":"index","object_id":70097708669400},{"name":"format","class":"String","value":"json","object_id":70097591242900}]},{"id":1133312,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133313,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133314,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133315,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133316,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133315,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133317,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1133314,"elapsed":0.000143,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bebd0258>","object_id":70097613783340}},{"id":1133318,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097613783340,"value":"#<Guardian:0x00007f81bebd0258>"}},{"id":1133319,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1133318,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133320,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1133313,"elapsed":0.000383},{"id":1133321,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133322,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133321,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133323,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1474 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133324,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133323,"elapsed":0.001239},{"id":1133325,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133326,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1133325,"elapsed":6.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bebd0258>","object_id":70097613783340}},{"id":1133327,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097608523520,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097613783340,"value":"#<Guardian:0x00007f81bebd0258>"}},{"id":1133328,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1133327,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133329,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1133312,"elapsed":0.006024,"return_value":{"class":"Array","value":"[2]","object_id":70097608523520}},{"id":1133330,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133331,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133332,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133331,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133333,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133334,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133333,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133335,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133336,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133335,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133337,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1133330,"elapsed":0.000432,"return_value":{"class":"String","value":"screened_ip_addresses/index","object_id":70097608553120}},{"id":1133338,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133339,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133340,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133339,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133341,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1133338,"elapsed":0.000118},{"id":1133342,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133343,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133344,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133343,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133345,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133346,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133345,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133347,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>"}},{"id":1133348,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1133347,"elapsed":1.3e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":1133349,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133350,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133349,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1133351,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133352,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133351,"elapsed":1.0e-05},{"id":1133353,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133354,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133353,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1133355,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133356,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133355,"elapsed":6.0e-06},{"id":1133357,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1133342,"elapsed":0.000762,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097608619300}},{"id":1133358,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133359,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1133358,"elapsed":8.0e-06},{"id":1133360,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133361,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133362,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133361,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133363,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1133360,"elapsed":0.000102},{"id":1133364,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133365,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133364,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133366,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133367,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133366,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133368,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133369,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133368,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133370,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097801466400,"value":"Admin::ScreenedIpAddressesController"}},{"id":1133371,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1133370,"elapsed":3.0e-06},{"id":1133372,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133373,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1133372,"elapsed":7.0e-06},{"id":1133374,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133375,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133374,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133376,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133377,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133376,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133378,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>"}},{"id":1133379,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1133378,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133380,"event":"call","defined_class":"Admin::ScreenedIpAddressesController","method_id":"index","path":"app/controllers/admin/screened_ip_addresses_controller.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133381,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE (cidr '1.2.0.0/16' >>= ip_address) ORDER BY match_count desc LIMIT 200","database_type":"postgres","server_version":110006}},{"id":1133382,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133381,"elapsed":0.001376},{"id":1133383,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097800019700,"value":"[#<ScreenedIpAddress id: 7, ip_address: #<IPAddr: IPv4:1.2.3.4/255.255.255.255>, action_type: 1, mat","kind":"req"},{"name":"serializer","class":"Class","object_id":70097800013560,"value":"ScreenedIpAddressSerializer","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133384,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097800019700,"value":"[#<ScreenedIpAddress id: 7, ip_address: #<IPAddr: IPv4:1.2.3.4/255.255.255.255>, action_type: 1, mat","kind":"req"},{"name":"serializer","class":"Class","object_id":70097800013560,"value":"ScreenedIpAddressSerializer","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133385,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133386,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1133385,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81bebd0258>","object_id":70097613783340}},{"id":1133387,"event":"call","defined_class":"ScreenedIpAddressSerializer","method_id":"ip_address","path":"app/serializers/screened_ip_address_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddressSerializer","object_id":70097800111840,"value":"#<ScreenedIpAddressSerializer:0x00007f81d4f34dc0>"}},{"id":1133388,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address_with_mask","path":"app/models/screened_ip_address.rb","lineno":60,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097799996840,"value":"#<ScreenedIpAddress:0x00007f81d4efcb50>"}},{"id":1133389,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address_with_mask","path":"app/models/screened_ip_address.rb","lineno":60,"static":false,"thread_id":70097708498960,"parent_id":1133388,"elapsed":2.8e-05,"return_value":{"class":"String","value":"1.2.3.4","object_id":70097800130440}},{"id":1133390,"event":"return","defined_class":"ScreenedIpAddressSerializer","method_id":"ip_address","path":"app/serializers/screened_ip_address_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parent_id":1133387,"elapsed":0.000139,"return_value":{"class":"String","value":"1.2.3.4","object_id":70097800130440}},{"id":1133391,"event":"call","defined_class":"ScreenedIpAddressSerializer","method_id":"action_name","path":"app/serializers/screened_ip_address_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddressSerializer","object_id":70097800111840,"value":"#<ScreenedIpAddressSerializer:0x00007f81d4f34dc0>"}},{"id":1133392,"event":"return","defined_class":"ScreenedIpAddressSerializer","method_id":"action_name","path":"app/serializers/screened_ip_address_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1133391,"elapsed":1.0e-05,"return_value":{"class":"String","value":"block","object_id":70097800126980}},{"id":1133393,"event":"call","defined_class":"ScreenedIpAddressSerializer","method_id":"ip_address","path":"app/serializers/screened_ip_address_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddressSerializer","object_id":70097800150760,"value":"#<ScreenedIpAddressSerializer:0x00007f81d4f47dd0>"}},{"id":1133394,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address_with_mask","path":"app/models/screened_ip_address.rb","lineno":60,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097799996220,"value":"#<ScreenedIpAddress:0x00007f81d4efc678>"}},{"id":1133395,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address_with_mask","path":"app/models/screened_ip_address.rb","lineno":60,"static":false,"thread_id":70097708498960,"parent_id":1133394,"elapsed":1.6e-05,"return_value":{"class":"String","value":"1.2.3.5","object_id":70097800146380}},{"id":1133396,"event":"return","defined_class":"ScreenedIpAddressSerializer","method_id":"ip_address","path":"app/serializers/screened_ip_address_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parent_id":1133393,"elapsed":0.000117,"return_value":{"class":"String","value":"1.2.3.5","object_id":70097800146380}},{"id":1133397,"event":"call","defined_class":"ScreenedIpAddressSerializer","method_id":"action_name","path":"app/serializers/screened_ip_address_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddressSerializer","object_id":70097800150760,"value":"#<ScreenedIpAddressSerializer:0x00007f81d4f47dd0>"}},{"id":1133398,"event":"return","defined_class":"ScreenedIpAddressSerializer","method_id":"action_name","path":"app/serializers/screened_ip_address_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1133397,"elapsed":6.0e-06,"return_value":{"class":"String","value":"block","object_id":70097800165700}},{"id":1133399,"event":"call","defined_class":"ScreenedIpAddressSerializer","method_id":"ip_address","path":"app/serializers/screened_ip_address_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddressSerializer","object_id":70097800164580,"value":"#<ScreenedIpAddressSerializer:0x00007f81d4f4e9c8>"}},{"id":1133400,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address_with_mask","path":"app/models/screened_ip_address.rb","lineno":60,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097800019800,"value":"#<ScreenedIpAddress:0x00007f81d4f07eb0>"}},{"id":1133401,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address_with_mask","path":"app/models/screened_ip_address.rb","lineno":60,"static":false,"thread_id":70097708498960,"parent_id":1133400,"elapsed":1.4e-05,"return_value":{"class":"String","value":"1.2.3.6","object_id":70097800161160}},{"id":1133402,"event":"return","defined_class":"ScreenedIpAddressSerializer","method_id":"ip_address","path":"app/serializers/screened_ip_address_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parent_id":1133399,"elapsed":0.000112,"return_value":{"class":"String","value":"1.2.3.6","object_id":70097800161160}},{"id":1133403,"event":"call","defined_class":"ScreenedIpAddressSerializer","method_id":"action_name","path":"app/serializers/screened_ip_address_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddressSerializer","object_id":70097800164580,"value":"#<ScreenedIpAddressSerializer:0x00007f81d4f4e9c8>"}},{"id":1133404,"event":"return","defined_class":"ScreenedIpAddressSerializer","method_id":"action_name","path":"app/serializers/screened_ip_address_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1133403,"elapsed":6.0e-06,"return_value":{"class":"String","value":"block","object_id":70097800182120}},{"id":1133405,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":1133384,"elapsed":0.0013,"return_value":{"class":"Array","value":"[{:id=>7, :ip_address=>\"1.2.3.4\", :action_name=>\"block\", :match_count=>0, :last_match_at=>nil, :crea","object_id":70097800111860}},{"id":1133406,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097800111860,"value":"[{:id=>7, :ip_address=>\"1.2.3.4\", :action_name=>\"block\", :match_count=>0, :last_match_at=>nil, :crea","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133407,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1133406,"elapsed":0.000196,"return_value":{"class":"String","value":"[{\"id\":7,\"ip_address\":\"1.2.3.4\",\"action_name\":\"block\",\"match_count\":0,\"last_match_at\":null,\"created_","object_id":70097800197260}},{"id":1133408,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":1133383,"elapsed":0.001949,"return_value":{"class":"String","value":"[{\"id\":7,\"ip_address\":\"1.2.3.4\",\"action_name\":\"block\",\"match_count\":0,\"last_match_at\":null,\"created_","object_id":70097800197260}},{"id":1133409,"event":"return","defined_class":"Admin::ScreenedIpAddressesController","method_id":"index","path":"app/controllers/admin/screened_ip_addresses_controller.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133380,"elapsed":0.009502,"return_value":{"class":"String","value":"[{\"id\":7,\"ip_address\":\"1.2.3.4\",\"action_name\":\"block\",\"match_count\":0,\"last_match_at\":null,\"created_","object_id":70097800197260}},{"id":1133410,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133411,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1133410,"elapsed":1.0e-05},{"id":1133412,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133413,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1133412,"elapsed":7.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097800215140}},{"id":1133414,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097613606420,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81beb79c28>"}},{"id":1133415,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133416,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133415,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133417,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097798467460,"value":"#<User:0x00007f81d4c11f08>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097591109240,"value":"#<ActionDispatch::Request::Session:0x00007f81bc090cf0>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097608499340,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81be1bc118>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133418,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133419,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133420,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133419,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133421,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1133418,"elapsed":0.000101},{"id":1133422,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133423,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097613785220,"value":"#<TestCurrentUserProvider:0x00007f81bebd1108>"}},{"id":1133424,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133423,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4c11f08>","object_id":70097798467460}},{"id":1133425,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1133422,"elapsed":0.000103},{"id":1133426,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1133417,"elapsed":0.000536},{"id":1133427,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1133414,"elapsed":0.000758},{"id":1133428,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1133311,"elapsed":0.020961,"http_server_response":{"status":200}},{"id":1133429,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800247060,"value":"#<TestCurrentUserProvider:0x00007f81d4f76e28>"}},{"id":1133430,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1133429,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133431,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1133432,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1133431,"elapsed":5.0e-06},{"id":1133433,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1133434,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1133433,"elapsed":4.0e-06},{"id":1133435,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800359600,"value":"#<TestCurrentUserProvider:0x00007f81d4fadd60>"}},{"id":1133436,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097800356620,"value":"1321c7a48da16bc95085b4ac066a4bfb","kind":"req"},{"name":"opts","class":"Hash","object_id":70097800356080,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1133437,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097800356620,"value":"1321c7a48da16bc95085b4ac066a4bfb","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1133438,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1133439,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1133438,"elapsed":9.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1133440,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1133437,"elapsed":0.000135,"return_value":{"class":"String","value":"uNCvzhwwx2CijqPm4j4AK9+BG1k=","object_id":70097828809400}},{"id":1133441,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'uNCvzhwwx2CijqPm4j4AK9+BG1k=' OR\n                          prev_auth_token = 'uNCvzhwwx2CijqPm4j4AK9+BG1k=') AND rotated_at > '2020-03-29 19:03:31.526119') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133442,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133441,"elapsed":0.001295},{"id":1133443,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1133436,"elapsed":0.004799,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81d8647ce0>","object_id":70097828986480}},{"id":1133444,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1474 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133445,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133444,"elapsed":0.001296},{"id":1133446,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800382140,"value":"#<User:0x00007f81d4fb8d78>"}},{"id":1133447,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1133446,"elapsed":1.9e-05},{"id":1133448,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800359600,"value":"#<TestCurrentUserProvider:0x00007f81d4fadd60>"}},{"id":1133449,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1133448,"elapsed":0.001079,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133450,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097800382140,"value":"#<User:0x00007f81d4fb8d78>"}},{"id":1133451,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1133450,"elapsed":0.001037},{"id":1133452,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097800393760,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097800382140,"value":"#<User:0x00007f81d4fb8d78>"}},{"id":1133453,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1133452,"elapsed":3.7e-05},{"id":1133454,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133435,"elapsed":0.012594,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133455,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097800359600,"value":"#<TestCurrentUserProvider:0x00007f81d4fadd60>"}},{"id":1133456,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133455,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133457,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800382140,"value":"#<User:0x00007f81d4fb8d78>"}},{"id":1133458,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1133457,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133459,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133460,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133459,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1133461,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133462,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133461,"elapsed":1.2e-05},{"id":1133463,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/admin/logs/screened_ip_addresses.json?filter=4.5.6.7"},"message":[{"name":"filter","class":"String","value":"4.5.6.7","object_id":70097800358020},{"name":"controller","class":"String","value":"admin/screened_ip_addresses","object_id":70097794657120},{"name":"action","class":"String","value":"index","object_id":70097708669400},{"name":"format","class":"String","value":"json","object_id":70097800359860}]},{"id":1133464,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133465,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133466,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133467,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133468,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133467,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133469,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1133466,"elapsed":0.000132,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81b96a50d0>","object_id":70097569130600}},{"id":1133470,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097569130600,"value":"#<Guardian:0x00007f81b96a50d0>"}},{"id":1133471,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1133470,"elapsed":1.1e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133472,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1133465,"elapsed":0.000376},{"id":1133473,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133474,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133473,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133475,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1474 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1133476,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133475,"elapsed":0.001176},{"id":1133477,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133478,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1133477,"elapsed":5.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81b96a50d0>","object_id":70097569130600}},{"id":1133479,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097829444600,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097569130600,"value":"#<Guardian:0x00007f81b96a50d0>"}},{"id":1133480,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1133479,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133481,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1133464,"elapsed":0.005664,"return_value":{"class":"Array","value":"[2]","object_id":70097829444600}},{"id":1133482,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133483,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133484,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133483,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133485,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133486,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133485,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133487,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133488,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133487,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133489,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1133482,"elapsed":0.000374,"return_value":{"class":"String","value":"screened_ip_addresses/index","object_id":70097829476040}},{"id":1133490,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133491,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133492,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133491,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133493,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1133490,"elapsed":0.000116},{"id":1133494,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133495,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133496,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133495,"elapsed":5.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133497,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133498,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133497,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133499,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800382140,"value":"#<User:0x00007f81d4fb8d78>"}},{"id":1133500,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1133499,"elapsed":2.0e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":1133501,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133502,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133501,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1133503,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133504,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133503,"elapsed":1.3e-05},{"id":1133505,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133506,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133505,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1133507,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1133508,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1133507,"elapsed":8.0e-06},{"id":1133509,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1133494,"elapsed":0.000907,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097829506240}},{"id":1133510,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133511,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1133510,"elapsed":8.0e-06},{"id":1133512,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133513,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133514,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133513,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133515,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1133512,"elapsed":0.000111},{"id":1133516,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133517,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133516,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133518,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133519,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133518,"elapsed":1.0e-05,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133520,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133521,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133520,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133522,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097801466400,"value":"Admin::ScreenedIpAddressesController"}},{"id":1133523,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1133522,"elapsed":4.0e-06},{"id":1133524,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133525,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1133524,"elapsed":1.0e-05},{"id":1133526,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133527,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133526,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133528,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133529,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133528,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133530,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800382140,"value":"#<User:0x00007f81d4fb8d78>"}},{"id":1133531,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1133530,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133532,"event":"call","defined_class":"Admin::ScreenedIpAddressesController","method_id":"index","path":"app/controllers/admin/screened_ip_addresses_controller.rb","lineno":7,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133533,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE (cidr '4.5.6.7' >>= ip_address) ORDER BY match_count desc LIMIT 200","database_type":"postgres","server_version":110006}},{"id":1133534,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1133533,"elapsed":0.001335},{"id":1133535,"event":"call","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097589202880,"value":"[#<ScreenedIpAddress id: 10, ip_address: #<IPAddr: IPv4:4.5.6.7/255.255.255.255>, action_type: 1, ma","kind":"req"},{"name":"serializer","class":"Class","object_id":70097800013560,"value":"ScreenedIpAddressSerializer","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133536,"event":"call","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097589202880,"value":"[#<ScreenedIpAddress id: 10, ip_address: #<IPAddr: IPv4:4.5.6.7/255.255.255.255>, action_type: 1, ma","kind":"req"},{"name":"serializer","class":"Class","object_id":70097800013560,"value":"ScreenedIpAddressSerializer","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133537,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133538,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1133537,"elapsed":4.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81b96a50d0>","object_id":70097569130600}},{"id":1133539,"event":"call","defined_class":"ScreenedIpAddressSerializer","method_id":"ip_address","path":"app/serializers/screened_ip_address_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddressSerializer","object_id":70097589215320,"value":"#<ScreenedIpAddressSerializer:0x00007f81bbcf40b0>"}},{"id":1133540,"event":"call","defined_class":"ScreenedIpAddress","method_id":"ip_address_with_mask","path":"app/models/screened_ip_address.rb","lineno":60,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddress","object_id":70097589203080,"value":"#<ScreenedIpAddress:0x00007f81bbcee110>"}},{"id":1133541,"event":"return","defined_class":"ScreenedIpAddress","method_id":"ip_address_with_mask","path":"app/models/screened_ip_address.rb","lineno":60,"static":false,"thread_id":70097708498960,"parent_id":1133540,"elapsed":1.9e-05,"return_value":{"class":"String","value":"4.5.6.7","object_id":70097589237480}},{"id":1133542,"event":"return","defined_class":"ScreenedIpAddressSerializer","method_id":"ip_address","path":"app/serializers/screened_ip_address_serializer.rb","lineno":15,"static":false,"thread_id":70097708498960,"parent_id":1133539,"elapsed":0.000125,"return_value":{"class":"String","value":"4.5.6.7","object_id":70097589237480}},{"id":1133543,"event":"call","defined_class":"ScreenedIpAddressSerializer","method_id":"action_name","path":"app/serializers/screened_ip_address_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"ScreenedIpAddressSerializer","object_id":70097589215320,"value":"#<ScreenedIpAddressSerializer:0x00007f81bbcf40b0>"}},{"id":1133544,"event":"return","defined_class":"ScreenedIpAddressSerializer","method_id":"action_name","path":"app/serializers/screened_ip_address_serializer.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1133543,"elapsed":8.0e-06,"return_value":{"class":"String","value":"block","object_id":70097589234800}},{"id":1133545,"event":"return","defined_class":"ApplicationController","method_id":"serialize_data","path":"app/controllers/application_controller.rb","lineno":431,"static":false,"thread_id":70097708498960,"parent_id":1133536,"elapsed":0.000484,"return_value":{"class":"Array","value":"[{:id=>10, :ip_address=>\"4.5.6.7\", :action_name=>\"block\", :match_count=>0, :last_match_at=>nil, :cre","object_id":70097589215340}},{"id":1133546,"event":"call","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parameters":[{"name":"obj","class":"Array","object_id":70097589215340,"value":"[{:id=>10, :ip_address=>\"4.5.6.7\", :action_name=>\"block\", :match_count=>0, :last_match_at=>nil, :cre","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133547,"event":"return","defined_class":"ApplicationController","method_id":"render_json_dump","path":"app/controllers/application_controller.rb","lineno":450,"static":false,"thread_id":70097708498960,"parent_id":1133546,"elapsed":0.000145,"return_value":{"class":"String","value":"[{\"id\":10,\"ip_address\":\"4.5.6.7\",\"action_name\":\"block\",\"match_count\":0,\"last_match_at\":null,\"created","object_id":70097589254360}},{"id":1133548,"event":"return","defined_class":"ApplicationController","method_id":"render_serialized","path":"app/controllers/application_controller.rb","lineno":446,"static":false,"thread_id":70097708498960,"parent_id":1133535,"elapsed":0.000965,"return_value":{"class":"String","value":"[{\"id\":10,\"ip_address\":\"4.5.6.7\",\"action_name\":\"block\",\"match_count\":0,\"last_match_at\":null,\"created","object_id":70097589254360}},{"id":1133549,"event":"return","defined_class":"Admin::ScreenedIpAddressesController","method_id":"index","path":"app/controllers/admin/screened_ip_addresses_controller.rb","lineno":7,"static":false,"thread_id":70097708498960,"parent_id":1133532,"elapsed":0.005942,"return_value":{"class":"String","value":"[{\"id\":10,\"ip_address\":\"4.5.6.7\",\"action_name\":\"block\",\"match_count\":0,\"last_match_at\":null,\"created","object_id":70097589254360}},{"id":1133550,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133551,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1133550,"elapsed":8.0e-06},{"id":1133552,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133553,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1133552,"elapsed":5.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097589271780}},{"id":1133554,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Admin::ScreenedIpAddressesController","object_id":70097569114720,"value":"#<Admin::ScreenedIpAddressesController:0x00007f81b969d4c0>"}},{"id":1133555,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133556,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133555,"elapsed":2.5e-05,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133557,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097800382140,"value":"#<User:0x00007f81d4fb8d78>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097800293840,"value":"#<ActionDispatch::Request::Session:0x00007f81d4f8dba0>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097829444880,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81d8727a20>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133558,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133559,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133560,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133559,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133561,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1133558,"elapsed":9.8e-05},{"id":1133562,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133563,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569132500,"value":"#<TestCurrentUserProvider:0x00007f81b96a5fa8>"}},{"id":1133564,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1133563,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4fb8d78>","object_id":70097800382140}},{"id":1133565,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1133562,"elapsed":9.8e-05},{"id":1133566,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1133557,"elapsed":0.000376},{"id":1133567,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1133554,"elapsed":0.000603},{"id":1133568,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1133463,"elapsed":0.016999,"http_server_response":{"status":200}},{"id":1133569,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097589303980,"value":"#<TestCurrentUserProvider:0x00007f81bbd1f558>"}},{"id":1133570,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1133569,"elapsed":7.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1133571,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1133572,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1133571,"elapsed":5.0e-06},{"id":1133573,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041948,"value":"http_2xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1133574,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1133573,"elapsed":3.0e-06}]}