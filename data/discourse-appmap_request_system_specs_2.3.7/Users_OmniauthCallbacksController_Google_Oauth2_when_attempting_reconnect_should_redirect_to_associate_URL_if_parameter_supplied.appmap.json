{"version":"1.2","metadata":{"language":{"name":"ruby","engine":"ruby","version":"2.6.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.26.1"},"frameworks":[{"name":"rails","version":"6.0.3.1"},{"name":"rspec","version":"3.9.2"}],"git":{"repository":"git@github.com:applandinc/discourse.git","branch":"master","commit":"32fd4b3aab495794a8b45d85fb5cca2201161e3c","status":["M Gemfile.lock","M config/initializers/150-appmap.rb","D spec/requests/posts_controller_spec.rb","M spec/requests/user_actions_controller_spec.rb","M spec/requests/users_controller_spec.rb"],"git_last_annotated_tag":"v2.5.0.beta5","git_last_tag":"v2.5.0.beta5","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Users::OmniauthCallbacksController Google Oauth2 when attempting reconnect should redirect to associate URL if parameter supplied","app":"Discourse","feature":"Users::OmniauthCallbacksController Google Oauth2","feature_group":"Users omniauth callbacks","recorder":{"name":"rspec"}},"classMap":[{"name":"lib/auth","type":"package","children":[{"name":"Auth","type":"class","children":[{"name":"FacebookAuthenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/facebook_authenticator.rb:11","static":false}]},{"name":"GoogleOAuth2Authenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/google_oauth2_authenticator.rb:8","static":false},{"name":"name","type":"function","location":"lib/auth/google_oauth2_authenticator.rb:4","static":false},{"name":"primary_email_verified?","type":"function","location":"lib/auth/google_oauth2_authenticator.rb:12","static":false}]},{"name":"GithubAuthenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/github_authenticator.rb:11","static":false}]},{"name":"TwitterAuthenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/twitter_authenticator.rb:8","static":false}]},{"name":"InstagramAuthenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/instagram_authenticator.rb:8","static":false}]},{"name":"DiscordAuthenticator","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/auth/discord_authenticator.rb:45","static":false}]},{"name":"DefaultCurrentUserProvider","type":"class","children":[{"name":"has_auth_cookie?","type":"function","location":"lib/auth/default_current_user_provider.rb:281","static":false},{"name":"current_user","type":"function","location":"lib/auth/default_current_user_provider.rb:61","static":false},{"name":"log_on_user","type":"function","location":"lib/auth/default_current_user_provider.rb:198","static":false},{"name":"cookie_hash","type":"function","location":"lib/auth/default_current_user_provider.rb:217","static":false},{"name":"make_developer_admin","type":"function","location":"lib/auth/default_current_user_provider.rb:232","static":false},{"name":"enable_bootstrap_mode","type":"function","location":"lib/auth/default_current_user_provider.rb:242","static":false},{"name":"refresh_session","type":"function","location":"lib/auth/default_current_user_provider.rb:173","static":false},{"name":"is_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:271","static":false},{"name":"is_user_api?","type":"function","location":"lib/auth/default_current_user_provider.rb:276","static":false},{"name":"should_update_last_seen?","type":"function","location":"lib/auth/default_current_user_provider.rb:286","static":false}]},{"name":"ManagedAuthenticator","type":"class","children":[{"name":"can_connect_existing_user?","type":"function","location":"lib/auth/managed_authenticator.rb:31","static":false},{"name":"after_authenticate","type":"function","location":"lib/auth/managed_authenticator.rb:46","static":false},{"name":"match_by_email","type":"function","location":"lib/auth/managed_authenticator.rb:17","static":false},{"name":"always_update_user_email?","type":"function","location":"lib/auth/managed_authenticator.rb:35","static":false},{"name":"retrieve_avatar","type":"function","location":"lib/auth/managed_authenticator.rb:121","static":false},{"name":"retrieve_profile","type":"function","location":"lib/auth/managed_authenticator.rb:127","static":false}]},{"name":"Result","type":"class","children":[{"name":"email","type":"function","location":"lib/auth/result.rb:21","static":false},{"name":"failed?","type":"function","location":"lib/auth/result.rb:25","static":false},{"name":"to_client_hash","type":"function","location":"lib/auth/result.rb:40","static":false}]}]}]},{"name":"app/models","type":"package","children":[{"name":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","type":"class","children":[{"name":"increment!","type":"function","location":"app/models/application_request.rb:26","static":true}]},{"name":"LocaleSiteSetting","type":"class","children":[{"name":"fallback_locale","type":"function","location":"app/models/locale_site_setting.rb:62","static":true}]},{"name":"User","type":"class","children":[{"name":"email","type":"function","location":"app/models/user.rb:1194","static":false},{"name":"unstage!","type":"function","location":"app/models/user.rb:341","static":false},{"name":"logged_in","type":"function","location":"app/models/user.rb:1170","static":false},{"name":"seen_before?","type":"function","location":"app/models/user.rb:667","static":false},{"name":"suspended?","type":"function","location":"app/models/user.rb:869","static":false},{"name":"update_last_seen!","type":"function","location":"app/models/user.rb:721","static":false},{"name":"update_ip_address!","type":"function","location":"app/models/user.rb:715","static":false},{"name":"effective_locale","type":"function","location":"app/models/user.rb:321","static":false}]},{"name":"SecondFactorManager","type":"class","children":[{"name":"has_any_second_factor_methods_enabled?","type":"function","location":"app/models/concerns/second_factor_manager.rb:74","static":false},{"name":"totp_enabled?","type":"function","location":"app/models/concerns/second_factor_manager.rb:56","static":false},{"name":"security_keys_enabled?","type":"function","location":"app/models/concerns/second_factor_manager.rb:68","static":false}]},{"name":"UserSecondFactor(id: integer, user_id: integer, method: integer, data: string, enabled: boolean, last_used: datetime, created_at: datetime, updated_at: datetime, name: string)","type":"class","children":[{"name":"methods","type":"function","location":"app/models/user_second_factor.rb:19","static":true}]},{"name":"UserSecurityKey(id: integer, user_id: integer, credential_id: string, public_key: string, factor_type: integer, enabled: boolean, name: string, last_used: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"factor_types","type":"function","location":"app/models/user_security_key.rb:10","static":true}]},{"name":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"should_block?","type":"function","location":"app/models/screened_ip_address.rb:74","static":true},{"name":"exists_for_ip_address_and_action?","type":"function","location":"app/models/screened_ip_address.rb:82","static":true},{"name":"match_for_ip_address","type":"function","location":"app/models/screened_ip_address.rb:64","static":true},{"name":"block_admin_login?","type":"function","location":"app/models/screened_ip_address.rb:89","static":true}]},{"name":"Roleable","type":"class","children":[{"name":"staff?","type":"function","location":"app/models/concerns/roleable.rb:13","static":false}]},{"name":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","type":"class","children":[{"name":"generate!","type":"function","location":"app/models/user_auth_token.rb:68","static":true},{"name":"hash_token","type":"function","location":"app/models/user_auth_token.rb:164","static":true},{"name":"log","type":"function","location":"app/models/user_auth_token.rb:26","static":true},{"name":"enforce_session_count_limit!","type":"function","location":"app/models/user_auth_token.rb:226","static":true},{"name":"lookup","type":"function","location":"app/models/user_auth_token.rb:99","static":true}]},{"name":"GlobalSetting","type":"class","children":[{"name":"safe_secret_key_base","type":"function","location":"app/models/global_setting.rb:25","static":true}]},{"name":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","type":"class","children":[{"name":"enqueue_object_hooks","type":"function","location":"app/models/web_hook.rb:60","static":true},{"name":"active_web_hooks","type":"function","location":"app/models/web_hook.rb:45","static":true}]},{"name":"Invite(id: integer, invite_key: string, email: string, invited_by_id: integer, user_id: integer, redeemed_at: datetime, created_at: datetime, updated_at: datetime, deleted_at: datetime, deleted_by_id: integer, invalidated_at: datetime, moderator: boolean, custom_message: text, emailed_status: integer)","type":"class","children":[{"name":"invalidate_for_email","type":"function","location":"app/models/invite.rb:216","static":true}]},{"name":"Trashable","type":"class","children":[{"name":"ClassMethods","type":"class","children":[{"name":"with_deleted_scope_sql","type":"function","location":"app/models/concerns/trashable.rb:27","static":false}]}]},{"name":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","type":"class","children":[{"name":"transform_ids","type":"function","location":"app/models/theme.rb:162","static":true},{"name":"get_set_cache","type":"function","location":"app/models/theme.rb:125","static":true}]}]},{"name":"app/controllers","type":"package","children":[{"name":"ApplicationController","type":"class","children":[{"name":"handle_theme","type":"function","location":"app/controllers/application_controller.rb:388","static":false},{"name":"resolve_safe_mode","type":"function","location":"app/controllers/application_controller.rb:377","static":false},{"name":"guardian","type":"function","location":"app/controllers/application_controller.rb:423","static":false},{"name":"set_current_user_for_logs","type":"function","location":"app/controllers/application_controller.rb:294","static":false},{"name":"clear_notifications","type":"function","location":"app/controllers/application_controller.rb:302","static":false},{"name":"set_locale","type":"function","location":"app/controllers/application_controller.rb:328","static":false},{"name":"set_mobile_view","type":"function","location":"app/controllers/application_controller.rb:368","static":false},{"name":"requires_login_arg","type":"function","location":"app/controllers/application_controller.rb:669","static":true},{"name":"preload_json","type":"function","location":"app/controllers/application_controller.rb:352","static":false},{"name":"conditionally_allow_site_embedding","type":"function","location":"app/controllers/application_controller.rb:92","static":false},{"name":"dont_cache_page","type":"function","location":"app/controllers/application_controller.rb:85","static":false},{"name":"perform_refresh_session","type":"function","location":"app/controllers/application_controller.rb:75","static":false}]},{"name":"Users","type":"class","children":[{"name":"OmniauthCallbacksController","type":"class","children":[{"name":"complete","type":"function","location":"app/controllers/users/omniauth_callbacks_controller.rb:22","static":false},{"name":"find_authenticator","type":"function","location":"app/controllers/users/omniauth_callbacks_controller.rb:91","static":true}]}]}]},{"name":"lib/guardian","type":"package","children":[{"name":"Guardian","type":"class","children":[{"name":"can_enable_safe_mode?","type":"function","location":"lib/guardian.rb:149","static":false},{"name":"allow_themes?","type":"function","location":"lib/guardian.rb:474","static":false},{"name":"can_access_forum?","type":"function","location":"lib/guardian.rb:320","static":false}]}]},{"name":"lib/email","type":"package","children":[{"name":"Email","type":"class","children":[{"name":"downcase","type":"function","location":"lib/email.rb:12","static":true},{"name":"is_valid?","type":"function","location":"lib/email.rb:7","static":true}]}]},{"name":"lib/validators","type":"package","children":[{"name":"EmailValidator","type":"class","children":[{"name":"email_regex","type":"function","location":"lib/validators/email_validator.rb:43","static":true}]}]}],"events":[{"id":1214559,"event":"call","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::FacebookAuthenticator","object_id":70097718125600,"value":"#<Auth::FacebookAuthenticator:0x00007f81cb2d4840>"}},{"id":1214560,"event":"return","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1214559,"elapsed":7.0e-06},{"id":1214561,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214562,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214561,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214563,"event":"call","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GithubAuthenticator","object_id":70097718147360,"value":"#<Auth::GithubAuthenticator:0x00007f81cb2df240>"}},{"id":1214564,"event":"return","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1214563,"elapsed":5.0e-06},{"id":1214565,"event":"call","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::TwitterAuthenticator","object_id":70097718147040,"value":"#<Auth::TwitterAuthenticator:0x00007f81cb2defc0>"}},{"id":1214566,"event":"return","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214565,"elapsed":5.0e-06},{"id":1214567,"event":"call","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::InstagramAuthenticator","object_id":70097718146640,"value":"#<Auth::InstagramAuthenticator:0x00007f81cb2deca0>"}},{"id":1214568,"event":"return","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214567,"elapsed":4.0e-06},{"id":1214569,"event":"call","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::DiscordAuthenticator","object_id":70097718146280,"value":"#<Auth::DiscordAuthenticator:0x00007f81cb2de9d0>"}},{"id":1214570,"event":"return","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parent_id":1214569,"elapsed":5.0e-06},{"id":1214571,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214572,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1214571,"elapsed":2.0e-06,"return_value":{"class":"String","value":"google_oauth2","object_id":70097717801020}},{"id":1214573,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799049860,"value":"#<TestCurrentUserProvider:0x00007f81d4d2e508>"}},{"id":1214574,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1214573,"elapsed":7.0e-06},{"id":1214575,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1214576,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1214575,"elapsed":7.0e-06},{"id":1214577,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041628,"value":"http_3xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1214578,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1214577,"elapsed":3.0e-06},{"id":1214579,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214580,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214579,"elapsed":9.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1214581,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214582,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214581,"elapsed":1.4e-05},{"id":1214583,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/auth/google_oauth2/callback.json"},"message":[{"name":"controller","class":"String","value":"users/omniauth_callbacks","object_id":70097802876920},{"name":"action","class":"String","value":"complete","object_id":70097802876900},{"name":"provider","class":"String","value":"google_oauth2","object_id":70097799309400},{"name":"format","class":"String","value":"json","object_id":70097799309340}]},{"id":1214584,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214585,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214586,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214587,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214588,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214587,"elapsed":2.8e-05},{"id":1214589,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1214586,"elapsed":0.000169,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4dbc380>","object_id":70097799340480}},{"id":1214590,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097799340480,"value":"#<Guardian:0x00007f81d4dbc380>"}},{"id":1214591,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1214590,"elapsed":1.1e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214592,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1214585,"elapsed":0.000436},{"id":1214593,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214594,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214593,"elapsed":4.0e-06},{"id":1214595,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214596,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1214595,"elapsed":3.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d4dbc380>","object_id":70097799340480}},{"id":1214597,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097799357280,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097799340480,"value":"#<Guardian:0x00007f81d4dbc380>"}},{"id":1214598,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1214597,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214599,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1214584,"elapsed":0.000932,"return_value":{"class":"Array","value":"[2]","object_id":70097799357280}},{"id":1214600,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214601,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214602,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214601,"elapsed":4.0e-06},{"id":1214603,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1214600,"elapsed":0.00013,"return_value":{"class":"String","value":"omniauth_callbacks/complete","object_id":70097827116620}},{"id":1214604,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214605,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214606,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214605,"elapsed":4.0e-06},{"id":1214607,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1214604,"elapsed":0.000107},{"id":1214608,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214609,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214610,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214609,"elapsed":4.0e-06},{"id":1214611,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214612,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214611,"elapsed":5.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1214613,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214614,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214613,"elapsed":1.4e-05},{"id":1214615,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214616,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214615,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1214617,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214618,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214617,"elapsed":1.0e-05},{"id":1214619,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1214608,"elapsed":0.000747,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097827164800}},{"id":1214620,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214621,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1214620,"elapsed":1.0e-05},{"id":1214622,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097792157460,"value":"Users::OmniauthCallbacksController"}},{"id":1214623,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1214622,"elapsed":4.0e-06},{"id":1214624,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214625,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1214624,"elapsed":2.5e-05},{"id":1214626,"event":"call","defined_class":"Users::OmniauthCallbacksController","method_id":"complete","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":22,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214627,"event":"call","defined_class":"Users::OmniauthCallbacksController","method_id":"find_authenticator","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":91,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097799309400,"value":"google_oauth2","kind":"req"}],"receiver":{"class":"Class","object_id":70097792157460,"value":"Users::OmniauthCallbacksController"}},{"id":1214628,"event":"call","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::FacebookAuthenticator","object_id":70097718125600,"value":"#<Auth::FacebookAuthenticator:0x00007f81cb2d4840>"}},{"id":1214629,"event":"return","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1214628,"elapsed":7.0e-06},{"id":1214630,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214631,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214630,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214632,"event":"call","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GithubAuthenticator","object_id":70097718147360,"value":"#<Auth::GithubAuthenticator:0x00007f81cb2df240>"}},{"id":1214633,"event":"return","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1214632,"elapsed":1.2e-05},{"id":1214634,"event":"call","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::TwitterAuthenticator","object_id":70097718147040,"value":"#<Auth::TwitterAuthenticator:0x00007f81cb2defc0>"}},{"id":1214635,"event":"return","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214634,"elapsed":6.0e-06},{"id":1214636,"event":"call","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::InstagramAuthenticator","object_id":70097718146640,"value":"#<Auth::InstagramAuthenticator:0x00007f81cb2deca0>"}},{"id":1214637,"event":"return","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214636,"elapsed":8.0e-06},{"id":1214638,"event":"call","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::DiscordAuthenticator","object_id":70097718146280,"value":"#<Auth::DiscordAuthenticator:0x00007f81cb2de9d0>"}},{"id":1214639,"event":"return","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parent_id":1214638,"elapsed":1.1e-05},{"id":1214640,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214641,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1214640,"elapsed":5.0e-06,"return_value":{"class":"String","value":"google_oauth2","object_id":70097717801020}},{"id":1214642,"event":"return","defined_class":"Users::OmniauthCallbacksController","method_id":"find_authenticator","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":91,"static":true,"thread_id":70097708498960,"parent_id":1214627,"elapsed":0.000929,"return_value":{"class":"Auth::GoogleOAuth2Authenticator","value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>","object_id":70097718147680}},{"id":1214643,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"can_connect_existing_user?","path":"lib/auth/managed_authenticator.rb","lineno":31,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214644,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"can_connect_existing_user?","path":"lib/auth/managed_authenticator.rb","lineno":31,"static":false,"thread_id":70097708498960,"parent_id":1214643,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214645,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214646,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214645,"elapsed":5.0e-06},{"id":1214647,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"after_authenticate","path":"lib/auth/managed_authenticator.rb","lineno":46,"static":false,"thread_id":70097708498960,"parameters":[{"name":"auth_token","class":"OmniAuth::AuthHash","object_id":70097798882060,"value":"#<OmniAuth::AuthHash extra=#<OmniAuth::AuthHash raw_info=#<OmniAuth::AuthHash email=\"someother_email","kind":"req"},{"name":"existing_account","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214648,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_associated_accounts\".* FROM \"user_associated_accounts\" WHERE \"user_associated_accounts\".\"provider_name\" = 'google_oauth2' AND \"user_associated_accounts\".\"provider_uid\" = '12345' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214649,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214648,"elapsed":0.001346},{"id":1214650,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"can_connect_existing_user?","path":"lib/auth/managed_authenticator.rb","lineno":31,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214651,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"can_connect_existing_user?","path":"lib/auth/managed_authenticator.rb","lineno":31,"static":false,"thread_id":70097708498960,"parent_id":1214650,"elapsed":6.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214652,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[{"name":"auth_token","class":"OmniAuth::AuthHash","object_id":70097798882060,"value":"#<OmniAuth::AuthHash extra=#<OmniAuth::AuthHash raw_info=#<OmniAuth::AuthHash email=\"someother_email","kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214653,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":1214652,"elapsed":1.5e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214654,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"match_by_email","path":"lib/auth/managed_authenticator.rb","lineno":17,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214655,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"match_by_email","path":"lib/auth/managed_authenticator.rb","lineno":17,"static":false,"thread_id":70097708498960,"parent_id":1214654,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214656,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1581 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214657,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214656,"elapsed":0.001493},{"id":1214658,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1214659,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214658,"elapsed":0.000923},{"id":1214660,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_associated_accounts\" SET \"info\" = '{\"email\":\"someother_email@test.com\",\"name\":\"Some name\"}', \"extra\" = '{\"raw_info\":{\"email_verified\":true,\"email\":\"someother_email@test.com\",\"family_name\":\"Huh\",\"given_name\":\"Bruce Wayne\",\"gender\":\"male\",\"name\":\"Bruce Wayne Huh\"}}', \"last_used\" = '2020-05-28 19:04:51.587233', \"updated_at\" = '2020-05-28 19:04:51.587479' WHERE \"user_associated_accounts\".\"id\" = 10","database_type":"postgres","server_version":110006}},{"id":1214661,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214660,"elapsed":0.001123},{"id":1214662,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1214663,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214662,"elapsed":0.001024},{"id":1214664,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"always_update_user_email?","path":"lib/auth/managed_authenticator.rb","lineno":35,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214665,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"always_update_user_email?","path":"lib/auth/managed_authenticator.rb","lineno":35,"static":false,"thread_id":70097708498960,"parent_id":1214664,"elapsed":6.0e-06},{"id":1214666,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214667,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_emails\".\"id\", \"user_emails\".\"user_id\", \"user_emails\".\"email\", \"user_emails\".\"primary\", \"user_emails\".\"created_at\", \"user_emails\".\"updated_at\" FROM \"user_emails\" WHERE \"user_emails\".\"user_id\" = 1581 AND \"user_emails\".\"primary\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214668,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214667,"elapsed":0.001163},{"id":1214669,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1214666,"elapsed":0.005936,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097814628540}},{"id":1214670,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_avatar","path":"lib/auth/managed_authenticator.rb","lineno":121,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>","kind":"req"},{"name":"url","class":"NilClass","object_id":8,"value":null,"kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214671,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_avatar","path":"lib/auth/managed_authenticator.rb","lineno":121,"static":false,"thread_id":70097708498960,"parent_id":1214670,"elapsed":5.0e-06},{"id":1214672,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_profile","path":"lib/auth/managed_authenticator.rb","lineno":127,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>","kind":"req"},{"name":"info","class":"Hash","object_id":70097814627140,"value":"{\"email\"=>\"someother_email@test.com\", \"name\"=>\"Some name\"}","kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214673,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"retrieve_profile","path":"lib/auth/managed_authenticator.rb","lineno":127,"static":false,"thread_id":70097708498960,"parent_id":1214672,"elapsed":5.0e-06},{"id":1214674,"event":"call","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097814663840,"value":"#<Auth::Result:0x00007f81d6af6540>"}},{"id":1214675,"event":"return","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1214674,"elapsed":5.0e-06,"return_value":{"class":"String","value":"someother_email@test.com","object_id":70097814659800}},{"id":1214676,"event":"call","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097814663840,"value":"#<Auth::Result:0x00007f81d6af6540>"}},{"id":1214677,"event":"return","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1214676,"elapsed":5.0e-06,"return_value":{"class":"String","value":"someother_email@test.com","object_id":70097814679260}},{"id":1214678,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parameters":[{"name":"auth_token","class":"OmniAuth::AuthHash","object_id":70097798882060,"value":"#<OmniAuth::AuthHash extra=#<OmniAuth::AuthHash raw_info=#<OmniAuth::AuthHash email=\"someother_email","kind":"req"}],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214679,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"primary_email_verified?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":12,"static":false,"thread_id":70097708498960,"parent_id":1214678,"elapsed":1.7e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214680,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"after_authenticate","path":"lib/auth/managed_authenticator.rb","lineno":46,"static":false,"thread_id":70097708498960,"parent_id":1214647,"elapsed":0.142556,"return_value":{"class":"Auth::Result","value":"#<Auth::Result:0x00007f81d6af6540>","object_id":70097814663840}},{"id":1214681,"event":"call","defined_class":"Auth::Result","method_id":"failed?","path":"lib/auth/result.rb","lineno":25,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097814663840,"value":"#<Auth::Result:0x00007f81d6af6540>"}},{"id":1214682,"event":"return","defined_class":"Auth::Result","method_id":"failed?","path":"lib/auth/result.rb","lineno":25,"static":false,"thread_id":70097708498960,"parent_id":1214681,"elapsed":4.0e-06},{"id":1214683,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214684,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1214683,"elapsed":3.0e-06,"return_value":{"class":"String","value":"google_oauth2","object_id":70097717801020}},{"id":1214685,"event":"call","defined_class":"SecondFactorManager","method_id":"has_any_second_factor_methods_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":74,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214686,"event":"call","defined_class":"SecondFactorManager","method_id":"totp_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":56,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214687,"event":"call","defined_class":"UserSecondFactor(id: integer, user_id: integer, method: integer, data: string, enabled: boolean, last_used: datetime, created_at: datetime, updated_at: datetime, name: string)","method_id":"methods","path":"app/models/user_second_factor.rb","lineno":19,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097779296820,"value":"UserSecondFactor"}},{"id":1214688,"event":"return","defined_class":"UserSecondFactor(id: integer, user_id: integer, method: integer, data: string, enabled: boolean, last_used: datetime, created_at: datetime, updated_at: datetime, name: string)","method_id":"methods","path":"app/models/user_second_factor.rb","lineno":19,"static":true,"thread_id":70097708498960,"parent_id":1214687,"elapsed":1.4e-05,"return_value":{"class":"Enum","value":"{:totp=>1, :backup_codes=>2, :security_key=>3}","object_id":70097755302300}},{"id":1214689,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_second_factors\" WHERE \"user_second_factors\".\"user_id\" = 1581 AND \"user_second_factors\".\"method\" = 1 AND \"user_second_factors\".\"enabled\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214690,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214689,"elapsed":0.001658},{"id":1214691,"event":"return","defined_class":"SecondFactorManager","method_id":"totp_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":56,"static":false,"thread_id":70097708498960,"parent_id":1214686,"elapsed":0.008291},{"id":1214692,"event":"call","defined_class":"SecondFactorManager","method_id":"security_keys_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":68,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214693,"event":"call","defined_class":"UserSecurityKey(id: integer, user_id: integer, credential_id: string, public_key: string, factor_type: integer, enabled: boolean, name: string, last_used: datetime, created_at: datetime, updated_at: datetime)","method_id":"factor_types","path":"app/models/user_security_key.rb","lineno":10,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097794494860,"value":"UserSecurityKey"}},{"id":1214694,"event":"return","defined_class":"UserSecurityKey(id: integer, user_id: integer, credential_id: string, public_key: string, factor_type: integer, enabled: boolean, name: string, last_used: datetime, created_at: datetime, updated_at: datetime)","method_id":"factor_types","path":"app/models/user_security_key.rb","lineno":10,"static":true,"thread_id":70097708498960,"parent_id":1214693,"elapsed":5.0e-06,"return_value":{"class":"Enum","value":"{:second_factor=>0, :first_factor=>1, :multi_factor=>2}","object_id":70097800806880}},{"id":1214695,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"user_security_keys\" WHERE \"user_security_keys\".\"user_id\" = 1581 AND \"user_security_keys\".\"enabled\" = TRUE AND \"user_security_keys\".\"factor_type\" = 0 AND \"user_security_keys\".\"enabled\" = TRUE LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214696,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214695,"elapsed":0.001422},{"id":1214697,"event":"return","defined_class":"SecondFactorManager","method_id":"security_keys_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":68,"static":false,"thread_id":70097708498960,"parent_id":1214692,"elapsed":0.00686},{"id":1214698,"event":"return","defined_class":"SecondFactorManager","method_id":"has_any_second_factor_methods_enabled?","path":"app/models/concerns/second_factor_manager.rb","lineno":74,"static":false,"thread_id":70097708498960,"parent_id":1214685,"elapsed":0.015493},{"id":1214699,"event":"call","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097814663840,"value":"#<Auth::Result:0x00007f81d6af6540>"}},{"id":1214700,"event":"return","defined_class":"Auth::Result","method_id":"email","path":"lib/auth/result.rb","lineno":21,"static":false,"thread_id":70097708498960,"parent_id":1214699,"elapsed":7.0e-06,"return_value":{"class":"String","value":"someother_email@test.com","object_id":70097757809640}},{"id":1214701,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214702,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1214701,"elapsed":2.1e-05,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097814628540}},{"id":1214703,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"should_block?","path":"app/models/screened_ip_address.rb","lineno":74,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"String","object_id":70097757855940,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1214704,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"exists_for_ip_address_and_action?","path":"app/models/screened_ip_address.rb","lineno":82,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"String","object_id":70097757855940,"value":"127.0.0.1","kind":"req"},{"name":"action_type","class":"Integer","object_id":3,"value":"1","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1214705,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ip_address","class":"String","object_id":70097757855940,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1214706,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"screened_ip_addresses\".* FROM \"screened_ip_addresses\" WHERE ('127.0.0.1' <<= ip_address) LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214707,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214706,"elapsed":0.001055},{"id":1214708,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"match_for_ip_address","path":"app/models/screened_ip_address.rb","lineno":64,"static":true,"thread_id":70097708498960,"parent_id":1214705,"elapsed":0.006057,"return_value":{"class":"ScreenedIpAddress","value":"#<ScreenedIpAddress:0x00007f81ccac81e0>","object_id":70097730683120}},{"id":1214709,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"exists_for_ip_address_and_action?","path":"app/models/screened_ip_address.rb","lineno":82,"static":true,"thread_id":70097708498960,"parent_id":1214704,"elapsed":0.006253},{"id":1214710,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"should_block?","path":"app/models/screened_ip_address.rb","lineno":74,"static":true,"thread_id":70097708498960,"parent_id":1214703,"elapsed":0.006392},{"id":1214711,"event":"call","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"block_admin_login?","path":"app/models/screened_ip_address.rb","lineno":89,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>","kind":"req"},{"name":"ip_address","class":"String","object_id":70097757855940,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"Class","object_id":70097793955040,"value":"ScreenedIpAddress"}},{"id":1214712,"event":"return","defined_class":"ScreenedIpAddress(id: integer, ip_address: inet, action_type: integer, match_count: integer, last_match_at: datetime, created_at: datetime, updated_at: datetime)","method_id":"block_admin_login?","path":"app/models/screened_ip_address.rb","lineno":89,"static":true,"thread_id":70097708498960,"parent_id":1214711,"elapsed":1.4e-05},{"id":1214713,"event":"call","defined_class":"Guardian","method_id":"can_access_forum?","path":"lib/guardian.rb","lineno":320,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097730766700,"value":"#<Guardian:0x00007f81ccaf0ed8>"}},{"id":1214714,"event":"return","defined_class":"Guardian","method_id":"can_access_forum?","path":"lib/guardian.rb","lineno":320,"static":false,"thread_id":70097708498960,"parent_id":1214713,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214715,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"log_on_user","path":"lib/auth/default_current_user_provider.rb","lineno":198,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097799098900,"value":"#<ActionDispatch::Request::Session:0x00007f81d4d46428>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097799161660,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81d4d64e78>","kind":"req"},{"name":"opts","class":"Hash","object_id":70097730805240,"value":"{}","kind":"opt"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214716,"event":"call","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214717,"event":"return","defined_class":"Roleable","method_id":"staff?","path":"app/models/concerns/roleable.rb","lineno":13,"static":false,"thread_id":70097708498960,"parent_id":1214716,"elapsed":1.6e-05},{"id":1214718,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"generate!","path":"app/models/user_auth_token.rb","lineno":68,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user_id","class":"Hash","object_id":70097730836780,"value":"{:user_id=>1581, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\", :staff=>false, :impersonate=","kind":"keyreq"},{"name":"user_agent","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"client_ip","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"path","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"staff","class":"NilClass","object_id":8,"value":null,"kind":"key"},{"name":"impersonate","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1214719,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097730849520,"value":"8cad0e47201483cf5970f7bde2f85a14","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1214720,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1214721,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1214720,"elapsed":1.6e-05,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1214722,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1214719,"elapsed":0.00015,"return_value":{"class":"String","value":"QUawQahXAk1u+ZftOvmxdqaMrbA=","object_id":70097730884000}},{"id":1214723,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1214724,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214723,"elapsed":0.00199},{"id":1214725,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_tokens\" (\"user_id\", \"auth_token\", \"prev_auth_token\", \"client_ip\", \"rotated_at\", \"created_at\", \"updated_at\") VALUES (1581, 'QUawQahXAk1u+ZftOvmxdqaMrbA=', 'QUawQahXAk1u+ZftOvmxdqaMrbA=', '127.0.0.1/32', '2020-05-28 19:04:51.699303', '2020-05-28 19:04:51.699607', '2020-05-28 19:04:51.699607') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1214726,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214725,"elapsed":0.001287},{"id":1214727,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1214728,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214727,"elapsed":0.000962},{"id":1214729,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097825839980,"value":"{:action=>\"generate\", :user_auth_token_id=>1362, :user_id=>1581, :user_agent=>nil, :client_ip=>\"127.","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1214730,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1214731,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214730,"elapsed":0.000862},{"id":1214732,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('generate', 1362, 1581, '127.0.0.1/32', 'QUawQahXAk1u+ZftOvmxdqaMrbA=', '2020-05-28 19:04:51.718355') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1214733,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214732,"elapsed":0.001161},{"id":1214734,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1214735,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214734,"elapsed":0.000915},{"id":1214736,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1214729,"elapsed":0.016294,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81d80452e8>","object_id":70097825835380}},{"id":1214737,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"generate!","path":"app/models/user_auth_token.rb","lineno":68,"static":true,"thread_id":70097708498960,"parent_id":1214718,"elapsed":0.035492,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81ccb28b58>","object_id":70097730880940}},{"id":1214738,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"cookie_hash","path":"lib/auth/default_current_user_provider.rb","lineno":217,"static":false,"thread_id":70097708498960,"parameters":[{"name":"unhashed_auth_token","class":"String","object_id":70097730849520,"value":"8cad0e47201483cf5970f7bde2f85a14","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214739,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"cookie_hash","path":"lib/auth/default_current_user_provider.rb","lineno":217,"static":false,"thread_id":70097708498960,"parent_id":1214738,"elapsed":4.7e-05,"return_value":{"class":"Hash","value":"{:value=>\"8cad0e47201483cf5970f7bde2f85a14\", :httponly=>true, :expires=>Mon, 27 Jul 2020 19:04:51 UT","object_id":70097592910780}},{"id":1214740,"event":"call","defined_class":"User","method_id":"unstage!","path":"app/models/user.rb","lineno":341,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214741,"event":"return","defined_class":"User","method_id":"unstage!","path":"app/models/user.rb","lineno":341,"static":false,"thread_id":70097708498960,"parent_id":1214740,"elapsed":2.1e-05},{"id":1214742,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"make_developer_admin","path":"lib/auth/default_current_user_provider.rb","lineno":232,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214743,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"make_developer_admin","path":"lib/auth/default_current_user_provider.rb","lineno":232,"static":false,"thread_id":70097708498960,"parent_id":1214742,"elapsed":2.1e-05},{"id":1214744,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"enable_bootstrap_mode","path":"lib/auth/default_current_user_provider.rb","lineno":242,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214745,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"enable_bootstrap_mode","path":"lib/auth/default_current_user_provider.rb","lineno":242,"static":false,"thread_id":70097708498960,"parent_id":1214744,"elapsed":1.2e-05},{"id":1214746,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"enforce_session_count_limit!","path":"app/models/user_auth_token.rb","lineno":226,"static":true,"thread_id":70097708498960,"parameters":[{"name":"user_id","class":"Integer","object_id":3163,"value":"1581","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1214747,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"DELETE FROM \"user_auth_tokens\" WHERE \"user_auth_tokens\".\"id\" IN (SELECT \"user_auth_tokens\".\"id\" FROM \"user_auth_tokens\" WHERE \"user_auth_tokens\".\"user_id\" = 1581 AND (rotated_at > '2020-03-29 19:04:51.735381') ORDER BY rotated_at DESC OFFSET 60)","database_type":"postgres","server_version":110006}},{"id":1214748,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214747,"elapsed":0.001288},{"id":1214749,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"enforce_session_count_limit!","path":"app/models/user_auth_token.rb","lineno":226,"static":true,"thread_id":70097708498960,"parent_id":1214746,"elapsed":0.005202,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1214750,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"log_on_user","path":"lib/auth/default_current_user_provider.rb","lineno":198,"static":false,"thread_id":70097708498960,"parent_id":1214715,"elapsed":0.041793,"return_value":{"class":"User","value":"#<User:0x00007f81d56349e0>","object_id":70097803781360}},{"id":1214751,"event":"call","defined_class":"User","method_id":"logged_in","path":"app/models/user.rb","lineno":1170,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214752,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"},{"name":"object","class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>","kind":"req"},{"name":"event","class":"Symbol","object_id":12243868,"value":"user_logged_in","kind":"req"},{"name":"serializer","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":1214753,"event":"call","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":945948,"value":"user","kind":"req"}],"receiver":{"class":"Class","object_id":70097719799600,"value":"WebHook"}},{"id":1214754,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"active_web_hooks","path":"app/models/web_hook.rb","lineno":45,"static":true,"thread_id":70097708498960,"parent_id":1214753,"elapsed":0.000235,"return_value":{"class":"ActiveRecord::Relation","value":"#<WebHook::ActiveRecord_Relation:0x00007f81bb941ad0>","object_id":70097587277160}},{"id":1214755,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT 1 AS one FROM \"web_hooks\" INNER JOIN \"web_hook_event_types_hooks\" ON \"web_hook_event_types_hooks\".\"web_hook_id\" = \"web_hooks\".\"id\" INNER JOIN \"web_hook_event_types\" ON \"web_hook_event_types\".\"id\" = \"web_hook_event_types_hooks\".\"web_hook_event_type_id\" WHERE \"web_hooks\".\"active\" = TRUE AND (web_hooks.wildcard_web_hook = TRUE OR web_hook_event_types.name = 'user') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214756,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214755,"elapsed":0.001456},{"id":1214757,"event":"return","defined_class":"WebHook(id: integer, payload_url: string, content_type: integer, last_delivery_status: integer, status: integer, secret: string, wildcard_web_hook: boolean, verify_certificate: boolean, active: boolean, created_at: datetime, updated_at: datetime)","method_id":"enqueue_object_hooks","path":"app/models/web_hook.rb","lineno":60,"static":true,"thread_id":70097708498960,"parent_id":1214752,"elapsed":0.006285},{"id":1214758,"event":"call","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214759,"event":"return","defined_class":"User","method_id":"seen_before?","path":"app/models/user.rb","lineno":667,"static":false,"thread_id":70097708498960,"parent_id":1214758,"elapsed":2.6e-05},{"id":1214760,"event":"return","defined_class":"User","method_id":"logged_in","path":"app/models/user.rb","lineno":1170,"static":false,"thread_id":70097708498960,"parent_id":1214751,"elapsed":0.00662},{"id":1214761,"event":"call","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214762,"event":"return","defined_class":"User","method_id":"email","path":"app/models/user.rb","lineno":1194,"static":false,"thread_id":70097708498960,"parent_id":1214761,"elapsed":1.4e-05,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097814628540}},{"id":1214763,"event":"call","defined_class":"Invite(id: integer, invite_key: string, email: string, invited_by_id: integer, user_id: integer, redeemed_at: datetime, created_at: datetime, updated_at: datetime, deleted_at: datetime, deleted_by_id: integer, invalidated_at: datetime, moderator: boolean, custom_message: text, emailed_status: integer)","method_id":"invalidate_for_email","path":"app/models/invite.rb","lineno":216,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097814628540,"value":"bruce1409@wayne.com","kind":"req"}],"receiver":{"class":"Class","object_id":70097588759140,"value":"Invite"}},{"id":1214764,"event":"call","defined_class":"Email","method_id":"downcase","path":"lib/email.rb","lineno":12,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097814628540,"value":"bruce1409@wayne.com","kind":"req"}],"receiver":{"class":"Module","object_id":70097614623220,"value":"Email"}},{"id":1214765,"event":"call","defined_class":"Email","method_id":"is_valid?","path":"lib/email.rb","lineno":7,"static":true,"thread_id":70097708498960,"parameters":[{"name":"email","class":"String","object_id":70097814628540,"value":"bruce1409@wayne.com","kind":"req"}],"receiver":{"class":"Module","object_id":70097614623220,"value":"Email"}},{"id":1214766,"event":"call","defined_class":"EmailValidator","method_id":"email_regex","path":"lib/validators/email_validator.rb","lineno":43,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097803665260,"value":"EmailValidator"}},{"id":1214767,"event":"return","defined_class":"EmailValidator","method_id":"email_regex","path":"lib/validators/email_validator.rb","lineno":43,"static":true,"thread_id":70097708498960,"parent_id":1214766,"elapsed":3.0e-06,"return_value":{"class":"Regexp","value":"(?-mix:\\A[a-zA-Z0-9!#\\$%&'*+\\/=?\\^_`{|}~\\-]+(?:\\.[a-zA-Z0-9!#\\$%&'\\*+\\/=?\\^_`{|}~\\-]+)*@(?:[a-zA-Z0-","object_id":70097803665340}},{"id":1214768,"event":"return","defined_class":"Email","method_id":"is_valid?","path":"lib/email.rb","lineno":7,"static":true,"thread_id":70097708498960,"parent_id":1214765,"elapsed":0.000133,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214769,"event":"return","defined_class":"Email","method_id":"downcase","path":"lib/email.rb","lineno":12,"static":true,"thread_id":70097708498960,"parent_id":1214764,"elapsed":0.000237,"return_value":{"class":"String","value":"bruce1409@wayne.com","object_id":70097566666920}},{"id":1214770,"event":"call","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097588759140,"value":"Invite"}},{"id":1214771,"event":"return","defined_class":"Trashable::ClassMethods","method_id":"with_deleted_scope_sql","path":"app/models/concerns/trashable.rb","lineno":27,"static":false,"thread_id":70097708498960,"parent_id":1214770,"elapsed":6.5e-05,"return_value":{"class":"String","value":"\"invites\".\"deleted_at\" IS NULL","object_id":70097566662980}},{"id":1214772,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"invites\".* FROM \"invites\" WHERE (\"invites\".\"deleted_at\" IS NULL) AND \"invites\".\"email\" = 'bruce1409@wayne.com' LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214773,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214772,"elapsed":0.001394},{"id":1214774,"event":"return","defined_class":"Invite(id: integer, invite_key: string, email: string, invited_by_id: integer, user_id: integer, redeemed_at: datetime, created_at: datetime, updated_at: datetime, deleted_at: datetime, deleted_by_id: integer, invalidated_at: datetime, moderator: boolean, custom_message: text, emailed_status: integer)","method_id":"invalidate_for_email","path":"app/models/invite.rb","lineno":216,"static":true,"thread_id":70097708498960,"parent_id":1214763,"elapsed":0.006191},{"id":1214775,"event":"call","defined_class":"Auth::Result","method_id":"to_client_hash","path":"lib/auth/result.rb","lineno":40,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::Result","object_id":70097814663840,"value":"#<Auth::Result:0x00007f81d6af6540>"}},{"id":1214776,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>"}},{"id":1214777,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1214776,"elapsed":2.3e-05},{"id":1214778,"event":"return","defined_class":"Auth::Result","method_id":"to_client_hash","path":"lib/auth/result.rb","lineno":40,"static":false,"thread_id":70097708498960,"parent_id":1214775,"elapsed":0.000147,"return_value":{"class":"Hash","value":"{:authenticated=>true, :awaiting_activation=>false, :awaiting_approval=>false, :not_allowed_from_ip_","object_id":70097567800080}},{"id":1214779,"event":"return","defined_class":"Users::OmniauthCallbacksController","method_id":"complete","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":22,"static":false,"thread_id":70097708498960,"parent_id":1214626,"elapsed":0.297635,"return_value":{"class":"String","value":"<html><body>You are being <a href=\"http://test.localhost/somepath\">redirected</a>.</body></html>","object_id":70097567796840}},{"id":1214780,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214781,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1214780,"elapsed":1.2e-05},{"id":1214782,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214783,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1214782,"elapsed":6.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097567812280}},{"id":1214784,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097799308020,"value":"#<Users::OmniauthCallbacksController:0x00007f81d4dac5e8>"}},{"id":1214785,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214786,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214785,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d56349e0>","object_id":70097803781360}},{"id":1214787,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097803781360,"value":"#<User:0x00007f81d56349e0>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097799098900,"value":"#<ActionDispatch::Request::Session:0x00007f81d4d46428>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097799161660,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81d4d64e78>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214788,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214789,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214790,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214789,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d56349e0>","object_id":70097803781360}},{"id":1214791,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1214788,"elapsed":0.000109},{"id":1214792,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214793,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097799342660,"value":"#<TestCurrentUserProvider:0x00007f81d4dbd488>"}},{"id":1214794,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214793,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d56349e0>","object_id":70097803781360}},{"id":1214795,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1214792,"elapsed":0.000106},{"id":1214796,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1581 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214797,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214796,"elapsed":0.001361},{"id":1214798,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1214787,"elapsed":0.006421},{"id":1214799,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1214784,"elapsed":0.006699},{"id":1214800,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1214583,"elapsed":0.309998,"http_server_response":{"status":302}},{"id":1214801,"event":"call","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"transform_ids","path":"app/models/theme.rb","lineno":162,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ids","class":"Array","object_id":70097799357280,"value":"[2]","kind":"req"},{"name":"extend","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097801647920,"value":"Theme"}},{"id":1214802,"event":"call","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"get_set_cache","path":"app/models/theme.rb","lineno":125,"static":true,"thread_id":70097708498960,"parameters":[{"name":"key","class":"String","object_id":70097798856060,"value":"extended_transformed_ids_2","kind":"req"},{"name":"blk","class":"NilClass","object_id":8,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":70097801647920,"value":"Theme"}},{"id":1214803,"event":"return","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"get_set_cache","path":"app/models/theme.rb","lineno":125,"static":true,"thread_id":70097708498960,"parent_id":1214802,"elapsed":1.1e-05,"return_value":{"class":"Array","value":"[2]","object_id":70097829829100}},{"id":1214804,"event":"return","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"transform_ids","path":"app/models/theme.rb","lineno":162,"static":true,"thread_id":70097708498960,"parent_id":1214801,"elapsed":0.000121,"return_value":{"class":"Array","value":"[2]","object_id":70097829829100}},{"id":1214805,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097733077940,"value":"#<TestCurrentUserProvider:0x00007f81ccf59768>"}},{"id":1214806,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1214805,"elapsed":6.0e-06},{"id":1214807,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1214808,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1214807,"elapsed":6.0e-06},{"id":1214809,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041628,"value":"http_3xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1214810,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1214809,"elapsed":4.0e-06},{"id":1214811,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_associated_accounts\".* FROM \"user_associated_accounts\" WHERE \"user_associated_accounts\".\"user_id\" = 1581 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214812,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214811,"elapsed":0.001772},{"id":1214813,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1214814,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214813,"elapsed":0.001115},{"id":1214815,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"DELETE FROM \"user_associated_accounts\" WHERE \"user_associated_accounts\".\"id\" = 10","database_type":"postgres","server_version":110006}},{"id":1214816,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214815,"elapsed":0.001176},{"id":1214817,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1214818,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214817,"elapsed":0.000962},{"id":1214819,"event":"call","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::FacebookAuthenticator","object_id":70097718125600,"value":"#<Auth::FacebookAuthenticator:0x00007f81cb2d4840>"}},{"id":1214820,"event":"return","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1214819,"elapsed":7.0e-06},{"id":1214821,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214822,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214821,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214823,"event":"call","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GithubAuthenticator","object_id":70097718147360,"value":"#<Auth::GithubAuthenticator:0x00007f81cb2df240>"}},{"id":1214824,"event":"return","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1214823,"elapsed":5.0e-06},{"id":1214825,"event":"call","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::TwitterAuthenticator","object_id":70097718147040,"value":"#<Auth::TwitterAuthenticator:0x00007f81cb2defc0>"}},{"id":1214826,"event":"return","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214825,"elapsed":5.0e-06},{"id":1214827,"event":"call","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::InstagramAuthenticator","object_id":70097718146640,"value":"#<Auth::InstagramAuthenticator:0x00007f81cb2deca0>"}},{"id":1214828,"event":"return","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214827,"elapsed":4.0e-06},{"id":1214829,"event":"call","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::DiscordAuthenticator","object_id":70097718146280,"value":"#<Auth::DiscordAuthenticator:0x00007f81cb2de9d0>"}},{"id":1214830,"event":"return","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parent_id":1214829,"elapsed":6.0e-06},{"id":1214831,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214832,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1214831,"elapsed":3.0e-06,"return_value":{"class":"String","value":"google_oauth2","object_id":70097717801020}},{"id":1214833,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097612426440,"value":"#<TestCurrentUserProvider:0x00007f81be939990>"}},{"id":1214834,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1214833,"elapsed":1.0e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214835,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1214836,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1214835,"elapsed":6.0e-06},{"id":1214837,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041628,"value":"http_3xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1214838,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1214837,"elapsed":4.0e-06},{"id":1214839,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214840,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214839,"elapsed":6.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1214841,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214842,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214841,"elapsed":1.2e-05},{"id":1214843,"event":"call","defined_class":"AppMap::Rails::ActionHandler::HTTPServerRequest","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":50,"static":false,"thread_id":70097708498960,"http_server_request":{"request_method":"GET","path_info":"/auth/google_oauth2/callback.json"},"message":[{"name":"controller","class":"String","value":"users/omniauth_callbacks","object_id":70097802876920},{"name":"action","class":"String","value":"complete","object_id":70097802876900},{"name":"provider","class":"String","value":"google_oauth2","object_id":70097827779360},{"name":"format","class":"String","value":"json","object_id":70097827779340}]},{"id":1214844,"event":"call","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214845,"event":"call","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214846,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214847,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214848,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parameters":[{"name":"unhashed_token","class":"String","object_id":70097612559920,"value":"8cad0e47201483cf5970f7bde2f85a14","kind":"req"},{"name":"opts","class":"Hash","object_id":70097827811280,"value":"{:seen=>true, :user_agent=>nil, :path=>nil, :client_ip=>\"127.0.0.1\"}","kind":"opt"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1214849,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parameters":[{"name":"token","class":"String","object_id":70097612559920,"value":"8cad0e47201483cf5970f7bde2f85a14","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1214850,"event":"call","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097703221560,"value":"GlobalSetting"}},{"id":1214851,"event":"return","defined_class":"GlobalSetting","method_id":"safe_secret_key_base","path":"app/models/global_setting.rb","lineno":25,"static":true,"thread_id":70097708498960,"parent_id":1214850,"elapsed":9.0e-06,"return_value":{"class":"String","value":"9a861fe75a448752d4997880bb647b45e1a210a880a56024d1dc12cdd3fa29354dc83c1a5e3ff086d25ac9454040e6f43418","object_id":70097709303360}},{"id":1214852,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"hash_token","path":"app/models/user_auth_token.rb","lineno":164,"static":true,"thread_id":70097708498960,"parent_id":1214849,"elapsed":0.000136,"return_value":{"class":"String","value":"QUawQahXAk1u+ZftOvmxdqaMrbA=","object_id":70097827829320}},{"id":1214853,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_auth_tokens\".* FROM \"user_auth_tokens\" WHERE ((auth_token = 'QUawQahXAk1u+ZftOvmxdqaMrbA=' OR\n                          prev_auth_token = 'QUawQahXAk1u+ZftOvmxdqaMrbA=') AND rotated_at > '2020-03-29 19:04:51.788516') LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214854,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214853,"elapsed":0.001153},{"id":1214855,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"user_auth_tokens\" SET \"auth_token_seen\" = TRUE, \"seen_at\" = '2020-05-28 19:04:51.794316' WHERE \"user_auth_tokens\".\"id\" = 1362 AND \"user_auth_tokens\".\"auth_token\" = 'QUawQahXAk1u+ZftOvmxdqaMrbA='","database_type":"postgres","server_version":110006}},{"id":1214856,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214855,"elapsed":0.001175},{"id":1214857,"event":"call","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"info","class":"Hash","object_id":70097588066800,"value":"{:action=>\"seen token\", :user_auth_token_id=>1362, :user_id=>1581, :auth_token=>\"QUawQahXAk1u+ZftOvm","kind":"req"}],"receiver":{"class":"Class","object_id":70097712007000,"value":"UserAuthToken"}},{"id":1214858,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1214859,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214858,"elapsed":0.001003},{"id":1214860,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"INSERT INTO \"user_auth_token_logs\" (\"action\", \"user_auth_token_id\", \"user_id\", \"client_ip\", \"auth_token\", \"created_at\") VALUES ('seen token', 1362, 1581, '127.0.0.1/32', 'QUawQahXAk1u+ZftOvmxdqaMrbA=', '2020-05-28 19:04:51.799705') RETURNING \"id\"","database_type":"postgres","server_version":110006}},{"id":1214861,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214860,"elapsed":0.001107},{"id":1214862,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_3","database_type":"postgres","server_version":110006}},{"id":1214863,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214862,"elapsed":0.001177},{"id":1214864,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"log","path":"app/models/user_auth_token.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1214857,"elapsed":0.017032,"return_value":{"class":"UserAuthTokenLog","value":"#<UserAuthTokenLog:0x00007f81bbac1248>","object_id":70097588062500}},{"id":1214865,"event":"return","defined_class":"UserAuthToken(id: integer, user_id: integer, auth_token: string, prev_auth_token: string, user_agent: string, auth_token_seen: boolean, client_ip: inet, rotated_at: datetime, created_at: datetime, updated_at: datetime, seen_at: datetime)","method_id":"lookup","path":"app/models/user_auth_token.rb","lineno":99,"static":true,"thread_id":70097708498960,"parent_id":1214848,"elapsed":0.028362,"return_value":{"class":"UserAuthToken","value":"#<UserAuthToken:0x00007f81b94bca20>","object_id":70097568130320}},{"id":1214866,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 1581 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214867,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214866,"elapsed":0.001342},{"id":1214868,"event":"call","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800281380,"value":"#<User:0x00007f81d4f87a48>"}},{"id":1214869,"event":"return","defined_class":"User","method_id":"suspended?","path":"app/models/user.rb","lineno":869,"static":false,"thread_id":70097708498960,"parent_id":1214868,"elapsed":1.7e-05},{"id":1214870,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214871,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"should_update_last_seen?","path":"lib/auth/default_current_user_provider.rb","lineno":286,"static":false,"thread_id":70097708498960,"parent_id":1214870,"elapsed":0.000836,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214872,"event":"call","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parameters":[{"name":"now","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"User","object_id":70097800281380,"value":"#<User:0x00007f81d4f87a48>"}},{"id":1214873,"event":"return","defined_class":"User","method_id":"update_last_seen!","path":"app/models/user.rb","lineno":721,"static":false,"thread_id":70097708498960,"parent_id":1214872,"elapsed":0.000825},{"id":1214874,"event":"call","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parameters":[{"name":"new_ip_address","class":"String","object_id":70097800276440,"value":"127.0.0.1","kind":"req"}],"receiver":{"class":"User","object_id":70097800281380,"value":"#<User:0x00007f81d4f87a48>"}},{"id":1214875,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"UPDATE \"users\" SET \"ip_address\" = '127.0.0.1' WHERE \"users\".\"id\" = 1581","database_type":"postgres","server_version":110006}},{"id":1214876,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214875,"elapsed":0.001098},{"id":1214877,"event":"return","defined_class":"User","method_id":"update_ip_address!","path":"app/models/user.rb","lineno":715,"static":false,"thread_id":70097708498960,"parent_id":1214874,"elapsed":0.004547,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214878,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214847,"elapsed":0.04119,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214879,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1214846,"elapsed":0.041325,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d8646b38>","object_id":70097828984220}},{"id":1214880,"event":"call","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Guardian","object_id":70097828984220,"value":"#<Guardian:0x00007f81d8646b38>"}},{"id":1214881,"event":"return","defined_class":"Guardian","method_id":"can_enable_safe_mode?","path":"lib/guardian.rb","lineno":149,"static":false,"thread_id":70097708498960,"parent_id":1214880,"elapsed":9.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214882,"event":"return","defined_class":"ApplicationController","method_id":"resolve_safe_mode","path":"app/controllers/application_controller.rb","lineno":377,"static":false,"thread_id":70097708498960,"parent_id":1214845,"elapsed":0.041582},{"id":1214883,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214884,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214883,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214885,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT \"user_options\".* FROM \"user_options\" WHERE \"user_options\".\"user_id\" = 1581 LIMIT 1","database_type":"postgres","server_version":110006}},{"id":1214886,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214885,"elapsed":0.000974},{"id":1214887,"event":"call","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214888,"event":"return","defined_class":"ApplicationController","method_id":"guardian","path":"app/controllers/application_controller.rb","lineno":423,"static":false,"thread_id":70097708498960,"parent_id":1214887,"elapsed":6.0e-06,"return_value":{"class":"Guardian","value":"#<Guardian:0x00007f81d8646b38>","object_id":70097828984220}},{"id":1214889,"event":"call","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parameters":[{"name":"theme_ids","class":"Array","object_id":70097569279800,"value":"[]","kind":"req"},{"name":"include_preview","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Guardian","object_id":70097828984220,"value":"#<Guardian:0x00007f81d8646b38>"}},{"id":1214890,"event":"return","defined_class":"Guardian","method_id":"allow_themes?","path":"lib/guardian.rb","lineno":474,"static":false,"thread_id":70097708498960,"parent_id":1214889,"elapsed":4.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214891,"event":"return","defined_class":"ApplicationController","method_id":"handle_theme","path":"app/controllers/application_controller.rb","lineno":388,"static":false,"thread_id":70097708498960,"parent_id":1214844,"elapsed":0.047184,"return_value":{"class":"Array","value":"[2]","object_id":70097569279800}},{"id":1214892,"event":"call","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214893,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214894,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214893,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214895,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214896,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214895,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214897,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214898,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214897,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214899,"event":"return","defined_class":"ApplicationController","method_id":"set_current_user_for_logs","path":"app/controllers/application_controller.rb","lineno":294,"static":false,"thread_id":70097708498960,"parent_id":1214892,"elapsed":0.000392,"return_value":{"class":"String","value":"omniauth_callbacks/complete","object_id":70097569310760}},{"id":1214900,"event":"call","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214901,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214902,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214901,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214903,"event":"return","defined_class":"ApplicationController","method_id":"clear_notifications","path":"app/controllers/application_controller.rb","lineno":302,"static":false,"thread_id":70097708498960,"parent_id":1214900,"elapsed":0.000116},{"id":1214904,"event":"call","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214905,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214906,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214905,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214907,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214908,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214907,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214909,"event":"call","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"User","object_id":70097800281380,"value":"#<User:0x00007f81d4f87a48>"}},{"id":1214910,"event":"return","defined_class":"User","method_id":"effective_locale","path":"app/models/user.rb","lineno":321,"static":false,"thread_id":70097708498960,"parent_id":1214909,"elapsed":1.5e-05,"return_value":{"class":"String","value":"en_US","object_id":70097724286060}},{"id":1214911,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214912,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214911,"elapsed":4.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1214913,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214914,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214913,"elapsed":1.0e-05},{"id":1214915,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":70097724306540,"value":"en_US","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214916,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214915,"elapsed":3.0e-06,"return_value":{"class":"Symbol","value":"en","object_id":3894428}},{"id":1214917,"event":"call","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parameters":[{"name":"locale","class":"Symbol","object_id":3894428,"value":"en","kind":"req"}],"receiver":{"class":"Class","object_id":70097569845280,"value":"LocaleSiteSetting"}},{"id":1214918,"event":"return","defined_class":"LocaleSiteSetting","method_id":"fallback_locale","path":"app/models/locale_site_setting.rb","lineno":62,"static":true,"thread_id":70097708498960,"parent_id":1214917,"elapsed":6.0e-06},{"id":1214919,"event":"return","defined_class":"ApplicationController","method_id":"set_locale","path":"app/controllers/application_controller.rb","lineno":328,"static":false,"thread_id":70097708498960,"parent_id":1214904,"elapsed":0.000751,"return_value":{"class":"Array","value":"[:en_US, :en]","object_id":70097569363300}},{"id":1214920,"event":"call","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214921,"event":"return","defined_class":"ApplicationController","method_id":"set_mobile_view","path":"app/controllers/application_controller.rb","lineno":368,"static":false,"thread_id":70097708498960,"parent_id":1214920,"elapsed":7.0e-06},{"id":1214922,"event":"call","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Class","object_id":70097792157460,"value":"Users::OmniauthCallbacksController"}},{"id":1214923,"event":"return","defined_class":"ApplicationController","method_id":"requires_login_arg","path":"app/controllers/application_controller.rb","lineno":669,"static":true,"thread_id":70097708498960,"parent_id":1214922,"elapsed":4.0e-06},{"id":1214924,"event":"call","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214925,"event":"return","defined_class":"ApplicationController","method_id":"preload_json","path":"app/controllers/application_controller.rb","lineno":352,"static":false,"thread_id":70097708498960,"parent_id":1214924,"elapsed":1.0e-05},{"id":1214926,"event":"call","defined_class":"Users::OmniauthCallbacksController","method_id":"complete","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":22,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214927,"event":"call","defined_class":"Users::OmniauthCallbacksController","method_id":"find_authenticator","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":91,"static":true,"thread_id":70097708498960,"parameters":[{"name":"name","class":"String","object_id":70097827779360,"value":"google_oauth2","kind":"req"}],"receiver":{"class":"Class","object_id":70097792157460,"value":"Users::OmniauthCallbacksController"}},{"id":1214928,"event":"call","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::FacebookAuthenticator","object_id":70097718125600,"value":"#<Auth::FacebookAuthenticator:0x00007f81cb2d4840>"}},{"id":1214929,"event":"return","defined_class":"Auth::FacebookAuthenticator","method_id":"enabled?","path":"lib/auth/facebook_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1214928,"elapsed":5.0e-06},{"id":1214930,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214931,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"enabled?","path":"lib/auth/google_oauth2_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214930,"elapsed":5.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214932,"event":"call","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GithubAuthenticator","object_id":70097718147360,"value":"#<Auth::GithubAuthenticator:0x00007f81cb2df240>"}},{"id":1214933,"event":"return","defined_class":"Auth::GithubAuthenticator","method_id":"enabled?","path":"lib/auth/github_authenticator.rb","lineno":11,"static":false,"thread_id":70097708498960,"parent_id":1214932,"elapsed":4.0e-06},{"id":1214934,"event":"call","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::TwitterAuthenticator","object_id":70097718147040,"value":"#<Auth::TwitterAuthenticator:0x00007f81cb2defc0>"}},{"id":1214935,"event":"return","defined_class":"Auth::TwitterAuthenticator","method_id":"enabled?","path":"lib/auth/twitter_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214934,"elapsed":4.0e-06},{"id":1214936,"event":"call","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::InstagramAuthenticator","object_id":70097718146640,"value":"#<Auth::InstagramAuthenticator:0x00007f81cb2deca0>"}},{"id":1214937,"event":"return","defined_class":"Auth::InstagramAuthenticator","method_id":"enabled?","path":"lib/auth/instagram_authenticator.rb","lineno":8,"static":false,"thread_id":70097708498960,"parent_id":1214936,"elapsed":5.0e-06},{"id":1214938,"event":"call","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::DiscordAuthenticator","object_id":70097718146280,"value":"#<Auth::DiscordAuthenticator:0x00007f81cb2de9d0>"}},{"id":1214939,"event":"return","defined_class":"Auth::DiscordAuthenticator","method_id":"enabled?","path":"lib/auth/discord_authenticator.rb","lineno":45,"static":false,"thread_id":70097708498960,"parent_id":1214938,"elapsed":6.0e-06},{"id":1214940,"event":"call","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214941,"event":"return","defined_class":"Auth::GoogleOAuth2Authenticator","method_id":"name","path":"lib/auth/google_oauth2_authenticator.rb","lineno":4,"static":false,"thread_id":70097708498960,"parent_id":1214940,"elapsed":3.0e-06,"return_value":{"class":"String","value":"google_oauth2","object_id":70097717801020}},{"id":1214942,"event":"return","defined_class":"Users::OmniauthCallbacksController","method_id":"find_authenticator","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":91,"static":true,"thread_id":70097708498960,"parent_id":1214927,"elapsed":0.00069,"return_value":{"class":"Auth::GoogleOAuth2Authenticator","value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>","object_id":70097718147680}},{"id":1214943,"event":"call","defined_class":"Auth::ManagedAuthenticator","method_id":"can_connect_existing_user?","path":"lib/auth/managed_authenticator.rb","lineno":31,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Auth::GoogleOAuth2Authenticator","object_id":70097718147680,"value":"#<Auth::GoogleOAuth2Authenticator:0x00007f81cb2df4c0>"}},{"id":1214944,"event":"return","defined_class":"Auth::ManagedAuthenticator","method_id":"can_connect_existing_user?","path":"lib/auth/managed_authenticator.rb","lineno":31,"static":false,"thread_id":70097708498960,"parent_id":1214943,"elapsed":3.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214945,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214946,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214945,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214947,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214948,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214947,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214949,"event":"return","defined_class":"Users::OmniauthCallbacksController","method_id":"complete","path":"app/controllers/users/omniauth_callbacks_controller.rb","lineno":22,"static":false,"thread_id":70097708498960,"parent_id":1214926,"elapsed":0.002342,"return_value":{"class":"String","value":"<html><body>You are being <a href=\"http://test.localhost/associate/0085211669d7bf1713ef317dbbfc839a\"","object_id":70097569427880}},{"id":1214950,"event":"call","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214951,"event":"return","defined_class":"ApplicationController","method_id":"conditionally_allow_site_embedding","path":"app/controllers/application_controller.rb","lineno":92,"static":false,"thread_id":70097708498960,"parent_id":1214950,"elapsed":6.0e-06},{"id":1214952,"event":"call","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214953,"event":"return","defined_class":"ApplicationController","method_id":"dont_cache_page","path":"app/controllers/application_controller.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1214952,"elapsed":6.0e-06,"return_value":{"class":"Array","value":"[\"no-store\"]","object_id":70097569423620}},{"id":1214954,"event":"call","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"Users::OmniauthCallbacksController","object_id":70097827778360,"value":"#<Users::OmniauthCallbacksController:0x00007f81d83f9e70>"}},{"id":1214955,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214956,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214955,"elapsed":4.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214957,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parameters":[{"name":"user","class":"User","object_id":70097800281380,"value":"#<User:0x00007f81d4f87a48>","kind":"req"},{"name":"session","class":"ActionDispatch::Request::Session","object_id":70097612495840,"value":"#<ActionDispatch::Request::Session:0x00007f81be95b7c0>","kind":"req"},{"name":"cookies","class":"ActionDispatch::Cookies::CookieJar","object_id":70097612557780,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007f81be979ba8>","kind":"req"}],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214958,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214959,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214960,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214959,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214961,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_api?","path":"lib/auth/default_current_user_provider.rb","lineno":271,"static":false,"thread_id":70097708498960,"parent_id":1214958,"elapsed":9.9e-05},{"id":1214962,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214963,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097827813440,"value":"#<TestCurrentUserProvider:0x00007f81d840b080>"}},{"id":1214964,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"current_user","path":"lib/auth/default_current_user_provider.rb","lineno":61,"static":false,"thread_id":70097708498960,"parent_id":1214963,"elapsed":3.0e-06,"return_value":{"class":"User","value":"#<User:0x00007f81d4f87a48>","object_id":70097800281380}},{"id":1214965,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"is_user_api?","path":"lib/auth/default_current_user_provider.rb","lineno":276,"static":false,"thread_id":70097708498960,"parent_id":1214962,"elapsed":9.8e-05},{"id":1214966,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"refresh_session","path":"lib/auth/default_current_user_provider.rb","lineno":173,"static":false,"thread_id":70097708498960,"parent_id":1214957,"elapsed":0.000452},{"id":1214967,"event":"return","defined_class":"ApplicationController","method_id":"perform_refresh_session","path":"app/controllers/application_controller.rb","lineno":75,"static":false,"thread_id":70097708498960,"parent_id":1214954,"elapsed":0.000694},{"id":1214968,"event":"return","defined_class":"AppMap::Rails::ActionHandler::HTTPServerResponse","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/action_handler.rb","lineno":85,"static":false,"thread_id":70097708498960,"parent_id":1214843,"elapsed":0.053932,"http_server_response":{"status":302}},{"id":1214969,"event":"call","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"transform_ids","path":"app/models/theme.rb","lineno":162,"static":true,"thread_id":70097708498960,"parameters":[{"name":"ids","class":"Array","object_id":70097569279800,"value":"[2]","kind":"req"},{"name":"extend","class":"NilClass","object_id":8,"value":null,"kind":"key"}],"receiver":{"class":"Class","object_id":70097801647920,"value":"Theme"}},{"id":1214970,"event":"call","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"get_set_cache","path":"app/models/theme.rb","lineno":125,"static":true,"thread_id":70097708498960,"parameters":[{"name":"key","class":"String","object_id":70097569473080,"value":"extended_transformed_ids_2","kind":"req"},{"name":"blk","class":"NilClass","object_id":8,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":70097801647920,"value":"Theme"}},{"id":1214971,"event":"return","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"get_set_cache","path":"app/models/theme.rb","lineno":125,"static":true,"thread_id":70097708498960,"parent_id":1214970,"elapsed":1.1e-05,"return_value":{"class":"Array","value":"[2]","object_id":70097829829100}},{"id":1214972,"event":"return","defined_class":"Theme(id: integer, name: string, user_id: integer, created_at: datetime, updated_at: datetime, compiler_version: integer, user_selectable: boolean, hidden: boolean, color_scheme_id: integer, remote_theme_id: integer, component: boolean, enabled: boolean)","method_id":"transform_ids","path":"app/models/theme.rb","lineno":162,"static":true,"thread_id":70097708498960,"parent_id":1214969,"elapsed":0.000127,"return_value":{"class":"Array","value":"[2]","object_id":70097829829100}},{"id":1214973,"event":"call","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parameters":[],"receiver":{"class":"TestCurrentUserProvider","object_id":70097569491580,"value":"#<TestCurrentUserProvider:0x00007f81b97554f8>"}},{"id":1214974,"event":"return","defined_class":"Auth::DefaultCurrentUserProvider","method_id":"has_auth_cookie?","path":"lib/auth/default_current_user_provider.rb","lineno":281,"static":false,"thread_id":70097708498960,"parent_id":1214973,"elapsed":8.0e-06,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1214975,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13040028,"value":"http_total","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1214976,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1214975,"elapsed":5.0e-06},{"id":1214977,"event":"call","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parameters":[{"name":"type","class":"Symbol","object_id":13041628,"value":"http_3xx","kind":"req"},{"name":"opts","class":"NilClass","object_id":8,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":70097802320860,"value":"ApplicationRequest"}},{"id":1214978,"event":"return","defined_class":"ApplicationRequest(id: integer, date: date, req_type: integer, count: integer)","method_id":"increment!","path":"app/models/application_request.rb","lineno":26,"static":true,"thread_id":70097708498960,"parent_id":1214977,"elapsed":4.0e-06},{"id":1214979,"event":"call","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":136,"static":false,"thread_id":70097708498960,"sql_query":{"sql":"SELECT COUNT(*) FROM \"user_associated_accounts\"","database_type":"postgres","server_version":110006}},{"id":1214980,"event":"return","defined_class":"AppMap::Rails::SQLHandler","method_id":"call","path":"/Users/kgilpin/source/appland/appmap-ruby/lib/appmap/rails/sql_handler.rb","lineno":138,"static":false,"thread_id":70097708498960,"parent_id":1214979,"elapsed":0.000938}]}